var EB=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Lne=EB((fe,wr)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function X6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K_={exports:{}},Cm={},j_={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=Symbol.for("react.element"),SB=Symbol.for("react.portal"),_B=Symbol.for("react.fragment"),CB=Symbol.for("react.strict_mode"),TB=Symbol.for("react.profiler"),IB=Symbol.for("react.provider"),wB=Symbol.for("react.context"),MB=Symbol.for("react.forward_ref"),RB=Symbol.for("react.suspense"),bB=Symbol.for("react.memo"),BB=Symbol.for("react.lazy"),Yx=Symbol.iterator;function LB(t){return t===null||typeof t!="object"?null:(t=Yx&&t[Yx]||t["@@iterator"],typeof t=="function"?t:null)}var J_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z_=Object.assign,$_={};function bh(t,e,n){this.props=t,this.context=e,this.refs=$_,this.updater=n||J_}bh.prototype.isReactComponent={};bh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eC(){}eC.prototype=bh.prototype;function q6(t,e,n){this.props=t,this.context=e,this.refs=$_,this.updater=n||J_}var Y6=q6.prototype=new eC;Y6.constructor=q6;Z_(Y6,bh.prototype);Y6.isPureReactComponent=!0;var Kx=Array.isArray,tC=Object.prototype.hasOwnProperty,K6={current:null},nC={key:!0,ref:!0,__self:!0,__source:!0};function iC(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tC.call(e,i)&&!nC.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:lp,type:t,key:s,ref:o,props:r,_owner:K6.current}}function PB(t,e){return{$$typeof:lp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function j6(t){return typeof t=="object"&&t!==null&&t.$$typeof===lp}function DB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jx=/\/+/g;function $g(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DB(""+t.key):e.toString(36)}function iA(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lp:case SB:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+$g(o,0):i,Kx(r)?(n="",t!=null&&(n=t.replace(jx,"$&/")+"/"),iA(r,e,n,"",function(u){return u})):r!=null&&(j6(r)&&(r=PB(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(jx,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Kx(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+$g(s,a);o+=iA(s,e,n,l,r)}else if(l=LB(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+$g(s,a++),o+=iA(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function U0(t,e,n){if(t==null)return t;var i=[],r=0;return iA(t,i,"","",function(s){return e.call(n,s,r++)}),i}function NB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ji={current:null},rA={transition:null},FB={ReactCurrentDispatcher:Ji,ReactCurrentBatchConfig:rA,ReactCurrentOwner:K6};Ft.Children={map:U0,forEach:function(t,e,n){U0(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return U0(t,function(){e++}),e},toArray:function(t){return U0(t,function(e){return e})||[]},only:function(t){if(!j6(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ft.Component=bh;Ft.Fragment=_B;Ft.Profiler=TB;Ft.PureComponent=q6;Ft.StrictMode=CB;Ft.Suspense=RB;Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FB;Ft.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Z_({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=K6.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tC.call(e,l)&&!nC.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:lp,type:t.type,key:r,ref:s,props:i,_owner:o}};Ft.createContext=function(t){return t={$$typeof:wB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IB,_context:t},t.Consumer=t};Ft.createElement=iC;Ft.createFactory=function(t){var e=iC.bind(null,t);return e.type=t,e};Ft.createRef=function(){return{current:null}};Ft.forwardRef=function(t){return{$$typeof:MB,render:t}};Ft.isValidElement=j6;Ft.lazy=function(t){return{$$typeof:BB,_payload:{_status:-1,_result:t},_init:NB}};Ft.memo=function(t,e){return{$$typeof:bB,type:t,compare:e===void 0?null:e}};Ft.startTransition=function(t){var e=rA.transition;rA.transition={};try{t()}finally{rA.transition=e}};Ft.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ft.useCallback=function(t,e){return Ji.current.useCallback(t,e)};Ft.useContext=function(t){return Ji.current.useContext(t)};Ft.useDebugValue=function(){};Ft.useDeferredValue=function(t){return Ji.current.useDeferredValue(t)};Ft.useEffect=function(t,e){return Ji.current.useEffect(t,e)};Ft.useId=function(){return Ji.current.useId()};Ft.useImperativeHandle=function(t,e,n){return Ji.current.useImperativeHandle(t,e,n)};Ft.useInsertionEffect=function(t,e){return Ji.current.useInsertionEffect(t,e)};Ft.useLayoutEffect=function(t,e){return Ji.current.useLayoutEffect(t,e)};Ft.useMemo=function(t,e){return Ji.current.useMemo(t,e)};Ft.useReducer=function(t,e,n){return Ji.current.useReducer(t,e,n)};Ft.useRef=function(t){return Ji.current.useRef(t)};Ft.useState=function(t){return Ji.current.useState(t)};Ft.useSyncExternalStore=function(t,e,n){return Ji.current.useSyncExternalStore(t,e,n)};Ft.useTransition=function(){return Ji.current.useTransition()};Ft.version="18.2.0";j_.exports=Ft;var le=j_.exports;const UB=X6(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OB=le,kB=Symbol.for("react.element"),QB=Symbol.for("react.fragment"),GB=Object.prototype.hasOwnProperty,zB=OB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HB={key:!0,ref:!0,__self:!0,__source:!0};function rC(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)GB.call(e,i)&&!HB.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:kB,type:t,key:s,ref:o,props:r,_owner:zB.current}}Cm.Fragment=QB;Cm.jsx=rC;Cm.jsxs=rC;K_.exports=Cm;var Jr=K_.exports,G5={},sC={exports:{}},Fr={},oC={exports:{}},aC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,Q){var U=P.length;P.push(Q);e:for(;0<U;){var O=U-1>>>1,V=P[O];if(0<r(V,Q))P[O]=Q,P[U]=V,U=O;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var Q=P[0],U=P.pop();if(U!==Q){P[0]=U;e:for(var O=0,V=P.length,me=V>>>1;O<me;){var re=2*(O+1)-1,xe=P[re],ge=re+1,Ie=P[ge];if(0>r(xe,U))ge<V&&0>r(Ie,xe)?(P[O]=Ie,P[ge]=U,O=ge):(P[O]=xe,P[re]=U,O=re);else if(ge<V&&0>r(Ie,U))P[O]=Ie,P[ge]=U,O=ge;else break e}}return Q}function r(P,Q){var U=P.sortIndex-Q.sortIndex;return U!==0?U:P.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,A=!1,g=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var Q=n(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=P)i(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function C(P){if(S=!1,y(P),!g)if(n(l)!==null)g=!0,$(I);else{var Q=n(u);Q!==null&&j(C,Q.startTime-P)}}function I(P,Q){g=!1,S&&(S=!1,m(L),L=-1),A=!0;var U=p;try{for(y(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||P&&!F());){var O=d.callback;if(typeof O=="function"){d.callback=null,p=d.priorityLevel;var V=O(d.expirationTime<=Q);Q=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&i(l),y(Q)}else i(l);d=n(l)}if(d!==null)var me=!0;else{var re=n(u);re!==null&&j(C,re.startTime-Q),me=!1}return me}finally{d=null,p=U,A=!1}}var M=!1,w=null,L=-1,R=5,B=-1;function F(){return!(t.unstable_now()-B<R)}function X(){if(w!==null){var P=t.unstable_now();B=P;var Q=!0;try{Q=w(!0,P)}finally{Q?G():(M=!1,w=null)}}else M=!1}var G;if(typeof x=="function")G=function(){x(X)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Y=q.port2;q.port1.onmessage=X,G=function(){Y.postMessage(null)}}else G=function(){E(X,0)};function $(P){w=P,M||(M=!0,G())}function j(P,Q){L=E(function(){P(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||A||(g=!0,$(I))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var U=p;p=Q;try{return P()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,Q){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=p;p=P;try{return Q()}finally{p=U}},t.unstable_scheduleCallback=function(P,Q,U){var O=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?O+U:O):U=O,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,P={id:h++,callback:Q,priorityLevel:P,startTime:U,expirationTime:V,sortIndex:-1},U>O?(P.sortIndex=U,e(u,P),n(l)===null&&P===n(u)&&(S?(m(L),L=-1):S=!0,j(C,U-O))):(P.sortIndex=V,e(l,P),g||A||(g=!0,$(I))),P},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(P){var Q=p;return function(){var U=p;p=Q;try{return P.apply(this,arguments)}finally{p=U}}}})(aC);oC.exports=aC;var VB=oC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC=le,Br=VB;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uC=new Set,md={};function Ru(t,e){ah(t,e),ah(t+"Capture",e)}function ah(t,e){for(md[t]=e,t=0;t<e.length;t++)uC.add(e[t])}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z5=Object.prototype.hasOwnProperty,WB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jx={},Zx={};function XB(t){return z5.call(Zx,t)?!0:z5.call(Jx,t)?!1:WB.test(t)?Zx[t]=!0:(Jx[t]=!0,!1)}function qB(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YB(t,e,n,i){if(e===null||typeof e>"u"||qB(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ci[t]=new Zi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ci[e]=new Zi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ci[t]=new Zi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ci[t]=new Zi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ci[t]=new Zi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ci[t]=new Zi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ci[t]=new Zi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ci[t]=new Zi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ci[t]=new Zi(t,5,!1,t.toLowerCase(),null,!1,!1)});var J6=/[\-:]([a-z])/g;function Z6(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(J6,Z6);Ci[e]=new Zi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(J6,Z6);Ci[e]=new Zi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(J6,Z6);Ci[e]=new Zi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ci[t]=new Zi(t,1,!1,t.toLowerCase(),null,!1,!1)});Ci.xlinkHref=new Zi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ci[t]=new Zi(t,1,!1,t.toLowerCase(),null,!0,!0)});function $6(t,e,n,i){var r=Ci.hasOwnProperty(e)?Ci[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YB(e,n,r,i)&&(n=null),i||r===null?XB(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ua=lC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O0=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),bc=Symbol.for("react.fragment"),e8=Symbol.for("react.strict_mode"),H5=Symbol.for("react.profiler"),cC=Symbol.for("react.provider"),hC=Symbol.for("react.context"),t8=Symbol.for("react.forward_ref"),V5=Symbol.for("react.suspense"),W5=Symbol.for("react.suspense_list"),n8=Symbol.for("react.memo"),Oa=Symbol.for("react.lazy"),fC=Symbol.for("react.offscreen"),$x=Symbol.iterator;function ff(t){return t===null||typeof t!="object"?null:(t=$x&&t[$x]||t["@@iterator"],typeof t=="function"?t:null)}var wn=Object.assign,e1;function kf(t){if(e1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);e1=e&&e[1]||""}return`
`+e1+t}var t1=!1;function n1(t,e){if(!t||t1)return"";t1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{t1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kf(t):""}function KB(t){switch(t.tag){case 5:return kf(t.type);case 16:return kf("Lazy");case 13:return kf("Suspense");case 19:return kf("SuspenseList");case 0:case 2:case 15:return t=n1(t.type,!1),t;case 11:return t=n1(t.type.render,!1),t;case 1:return t=n1(t.type,!0),t;default:return""}}function X5(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bc:return"Fragment";case Rc:return"Portal";case H5:return"Profiler";case e8:return"StrictMode";case V5:return"Suspense";case W5:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hC:return(t.displayName||"Context")+".Consumer";case cC:return(t._context.displayName||"Context")+".Provider";case t8:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case n8:return e=t.displayName||null,e!==null?e:X5(t.type)||"Memo";case Oa:e=t._payload,t=t._init;try{return X5(t(e))}catch{}}return null}function jB(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X5(e);case 8:return e===e8?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JB(t){var e=dC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function k0(t){t._valueTracker||(t._valueTracker=JB(t))}function pC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=dC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function bA(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function q5(t,e){var n=e.checked;return wn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function e7(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=rl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AC(t,e){e=e.checked,e!=null&&$6(t,"checked",e,!1)}function Y5(t,e){AC(t,e);var n=rl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?K5(t,e.type,n):e.hasOwnProperty("defaultValue")&&K5(t,e.type,rl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function t7(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function K5(t,e,n){(e!=="number"||bA(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qf=Array.isArray;function Xc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+rl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function j5(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return wn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function n7(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(Qf(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rl(n)}}function mC(t,e){var n=rl(e.value),i=rl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function i7(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J5(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Q0,vC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Q0=Q0||document.createElement("div"),Q0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Q0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZB=["Webkit","ms","Moz","O"];Object.keys(jf).forEach(function(t){ZB.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jf[e]=jf[t]})});function yC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jf.hasOwnProperty(t)&&jf[t]?(""+e).trim():e+"px"}function xC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=yC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var $B=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Z5(t,e){if(e){if($B[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function $5(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ev=null;function i8(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tv=null,qc=null,Yc=null;function r7(t){if(t=hp(t)){if(typeof tv!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=Rm(e),tv(t.stateNode,t.type,e))}}function EC(t){qc?Yc?Yc.push(t):Yc=[t]:qc=t}function SC(){if(qc){var t=qc,e=Yc;if(Yc=qc=null,r7(t),e)for(t=0;t<e.length;t++)r7(e[t])}}function _C(t,e){return t(e)}function CC(){}var i1=!1;function TC(t,e,n){if(i1)return t(e,n);i1=!0;try{return _C(t,e,n)}finally{i1=!1,(qc!==null||Yc!==null)&&(CC(),SC())}}function vd(t,e){var n=t.stateNode;if(n===null)return null;var i=Rm(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var nv=!1;if(na)try{var df={};Object.defineProperty(df,"passive",{get:function(){nv=!0}}),window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{nv=!1}function eL(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Jf=!1,BA=null,LA=!1,iv=null,tL={onError:function(t){Jf=!0,BA=t}};function nL(t,e,n,i,r,s,o,a,l){Jf=!1,BA=null,eL.apply(tL,arguments)}function iL(t,e,n,i,r,s,o,a,l){if(nL.apply(this,arguments),Jf){if(Jf){var u=BA;Jf=!1,BA=null}else throw Error(Te(198));LA||(LA=!0,iv=u)}}function bu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function IC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function s7(t){if(bu(t)!==t)throw Error(Te(188))}function rL(t){var e=t.alternate;if(!e){if(e=bu(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return s7(r),t;if(s===i)return s7(r),e;s=s.sibling}throw Error(Te(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Te(189))}}if(n.alternate!==i)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function wC(t){return t=rL(t),t!==null?MC(t):null}function MC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MC(t);if(e!==null)return e;t=t.sibling}return null}var RC=Br.unstable_scheduleCallback,o7=Br.unstable_cancelCallback,sL=Br.unstable_shouldYield,oL=Br.unstable_requestPaint,zn=Br.unstable_now,aL=Br.unstable_getCurrentPriorityLevel,r8=Br.unstable_ImmediatePriority,bC=Br.unstable_UserBlockingPriority,PA=Br.unstable_NormalPriority,lL=Br.unstable_LowPriority,BC=Br.unstable_IdlePriority,Tm=null,po=null;function uL(t){if(po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot(Tm,t,void 0,(t.current.flags&128)===128)}catch{}}var Ps=Math.clz32?Math.clz32:fL,cL=Math.log,hL=Math.LN2;function fL(t){return t>>>=0,t===0?32:31-(cL(t)/hL|0)|0}var G0=64,z0=4194304;function Gf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function DA(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Gf(a):(s&=o,s!==0&&(i=Gf(s)))}else o=n&~r,o!==0?i=Gf(o):s!==0&&(i=Gf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ps(e),r=1<<n,i|=t[n],e&=~r;return i}function dL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pL(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ps(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=dL(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function rv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LC(){var t=G0;return G0<<=1,!(G0&4194240)&&(G0=64),t}function r1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function up(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ps(e),t[e]=n}function AL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ps(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function s8(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ps(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Zt=0;function PC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DC,o8,NC,FC,UC,sv=!1,H0=[],Xa=null,qa=null,Ya=null,yd=new Map,xd=new Map,Ga=[],mL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a7(t,e){switch(t){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":yd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xd.delete(e.pointerId)}}function pf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=hp(e),e!==null&&o8(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function gL(t,e,n,i,r){switch(e){case"focusin":return Xa=pf(Xa,t,e,n,i,r),!0;case"dragenter":return qa=pf(qa,t,e,n,i,r),!0;case"mouseover":return Ya=pf(Ya,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return yd.set(s,pf(yd.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,xd.set(s,pf(xd.get(s)||null,t,e,n,i,r)),!0}return!1}function OC(t){var e=tu(t.target);if(e!==null){var n=bu(e);if(n!==null){if(e=n.tag,e===13){if(e=IC(n),e!==null){t.blockedOn=e,UC(t.priority,function(){NC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ov(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ev=i,n.target.dispatchEvent(i),ev=null}else return e=hp(n),e!==null&&o8(e),t.blockedOn=n,!1;e.shift()}return!0}function l7(t,e,n){sA(t)&&n.delete(e)}function vL(){sv=!1,Xa!==null&&sA(Xa)&&(Xa=null),qa!==null&&sA(qa)&&(qa=null),Ya!==null&&sA(Ya)&&(Ya=null),yd.forEach(l7),xd.forEach(l7)}function Af(t,e){t.blockedOn===e&&(t.blockedOn=null,sv||(sv=!0,Br.unstable_scheduleCallback(Br.unstable_NormalPriority,vL)))}function Ed(t){function e(r){return Af(r,t)}if(0<H0.length){Af(H0[0],t);for(var n=1;n<H0.length;n++){var i=H0[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xa!==null&&Af(Xa,t),qa!==null&&Af(qa,t),Ya!==null&&Af(Ya,t),yd.forEach(e),xd.forEach(e),n=0;n<Ga.length;n++)i=Ga[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ga.length&&(n=Ga[0],n.blockedOn===null);)OC(n),n.blockedOn===null&&Ga.shift()}var Kc=ua.ReactCurrentBatchConfig,NA=!0;function yL(t,e,n,i){var r=Zt,s=Kc.transition;Kc.transition=null;try{Zt=1,a8(t,e,n,i)}finally{Zt=r,Kc.transition=s}}function xL(t,e,n,i){var r=Zt,s=Kc.transition;Kc.transition=null;try{Zt=4,a8(t,e,n,i)}finally{Zt=r,Kc.transition=s}}function a8(t,e,n,i){if(NA){var r=ov(t,e,n,i);if(r===null)p1(t,e,i,FA,n),a7(t,i);else if(gL(r,t,e,n,i))i.stopPropagation();else if(a7(t,i),e&4&&-1<mL.indexOf(t)){for(;r!==null;){var s=hp(r);if(s!==null&&DC(s),s=ov(t,e,n,i),s===null&&p1(t,e,i,FA,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else p1(t,e,i,null,n)}}var FA=null;function ov(t,e,n,i){if(FA=null,t=i8(i),t=tu(t),t!==null)if(e=bu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=IC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return FA=t,null}function kC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aL()){case r8:return 1;case bC:return 4;case PA:case lL:return 16;case BC:return 536870912;default:return 16}default:return 16}}var Ha=null,l8=null,oA=null;function QC(){if(oA)return oA;var t,e=l8,n=e.length,i,r="value"in Ha?Ha.value:Ha.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return oA=r.slice(t,1<i?1-i:void 0)}function aA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function V0(){return!0}function u7(){return!1}function Ur(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?V0:u7,this.isPropagationStopped=u7,this}return wn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=V0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=V0)},persist:function(){},isPersistent:V0}),e}var Bh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u8=Ur(Bh),cp=wn({},Bh,{view:0,detail:0}),EL=Ur(cp),s1,o1,mf,Im=wn({},cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c8,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mf&&(mf&&t.type==="mousemove"?(s1=t.screenX-mf.screenX,o1=t.screenY-mf.screenY):o1=s1=0,mf=t),s1)},movementY:function(t){return"movementY"in t?t.movementY:o1}}),c7=Ur(Im),SL=wn({},Im,{dataTransfer:0}),_L=Ur(SL),CL=wn({},cp,{relatedTarget:0}),a1=Ur(CL),TL=wn({},Bh,{animationName:0,elapsedTime:0,pseudoElement:0}),IL=Ur(TL),wL=wn({},Bh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ML=Ur(wL),RL=wn({},Bh,{data:0}),h7=Ur(RL),bL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LL[t])?!!e[t]:!1}function c8(){return PL}var DL=wn({},cp,{key:function(t){if(t.key){var e=bL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=aA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c8,charCode:function(t){return t.type==="keypress"?aA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?aA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NL=Ur(DL),FL=wn({},Im,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f7=Ur(FL),UL=wn({},cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c8}),OL=Ur(UL),kL=wn({},Bh,{propertyName:0,elapsedTime:0,pseudoElement:0}),QL=Ur(kL),GL=wn({},Im,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zL=Ur(GL),HL=[9,13,27,32],h8=na&&"CompositionEvent"in window,Zf=null;na&&"documentMode"in document&&(Zf=document.documentMode);var VL=na&&"TextEvent"in window&&!Zf,GC=na&&(!h8||Zf&&8<Zf&&11>=Zf),d7=String.fromCharCode(32),p7=!1;function zC(t,e){switch(t){case"keyup":return HL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bc=!1;function WL(t,e){switch(t){case"compositionend":return HC(e);case"keypress":return e.which!==32?null:(p7=!0,d7);case"textInput":return t=e.data,t===d7&&p7?null:t;default:return null}}function XL(t,e){if(Bc)return t==="compositionend"||!h8&&zC(t,e)?(t=QC(),oA=l8=Ha=null,Bc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GC&&e.locale!=="ko"?null:e.data;default:return null}}var qL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A7(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qL[t.type]:e==="textarea"}function VC(t,e,n,i){EC(i),e=UA(e,"onChange"),0<e.length&&(n=new u8("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var $f=null,Sd=null;function YL(t){tT(t,0)}function wm(t){var e=Dc(t);if(pC(e))return t}function KL(t,e){if(t==="change")return e}var WC=!1;if(na){var l1;if(na){var u1="oninput"in document;if(!u1){var m7=document.createElement("div");m7.setAttribute("oninput","return;"),u1=typeof m7.oninput=="function"}l1=u1}else l1=!1;WC=l1&&(!document.documentMode||9<document.documentMode)}function g7(){$f&&($f.detachEvent("onpropertychange",XC),Sd=$f=null)}function XC(t){if(t.propertyName==="value"&&wm(Sd)){var e=[];VC(e,Sd,t,i8(t)),TC(YL,e)}}function jL(t,e,n){t==="focusin"?(g7(),$f=e,Sd=n,$f.attachEvent("onpropertychange",XC)):t==="focusout"&&g7()}function JL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wm(Sd)}function ZL(t,e){if(t==="click")return wm(e)}function $L(t,e){if(t==="input"||t==="change")return wm(e)}function eP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Us=typeof Object.is=="function"?Object.is:eP;function _d(t,e){if(Us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!z5.call(e,r)||!Us(t[r],e[r]))return!1}return!0}function v7(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y7(t,e){var n=v7(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v7(n)}}function qC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function YC(){for(var t=window,e=bA();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bA(t.document)}return e}function f8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tP(t){var e=YC(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qC(n.ownerDocument.documentElement,n)){if(i!==null&&f8(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=y7(n,s);var o=y7(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nP=na&&"documentMode"in document&&11>=document.documentMode,Lc=null,av=null,ed=null,lv=!1;function x7(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lv||Lc==null||Lc!==bA(i)||(i=Lc,"selectionStart"in i&&f8(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ed&&_d(ed,i)||(ed=i,i=UA(av,"onSelect"),0<i.length&&(e=new u8("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Lc)))}function W0(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pc={animationend:W0("Animation","AnimationEnd"),animationiteration:W0("Animation","AnimationIteration"),animationstart:W0("Animation","AnimationStart"),transitionend:W0("Transition","TransitionEnd")},c1={},KC={};na&&(KC=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function Mm(t){if(c1[t])return c1[t];if(!Pc[t])return t;var e=Pc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KC)return c1[t]=e[n];return t}var jC=Mm("animationend"),JC=Mm("animationiteration"),ZC=Mm("animationstart"),$C=Mm("transitionend"),eT=new Map,E7="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(t,e){eT.set(t,e),Ru(e,[t])}for(var h1=0;h1<E7.length;h1++){var f1=E7[h1],iP=f1.toLowerCase(),rP=f1[0].toUpperCase()+f1.slice(1);Al(iP,"on"+rP)}Al(jC,"onAnimationEnd");Al(JC,"onAnimationIteration");Al(ZC,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al($C,"onTransitionEnd");ah("onMouseEnter",["mouseout","mouseover"]);ah("onMouseLeave",["mouseout","mouseover"]);ah("onPointerEnter",["pointerout","pointerover"]);ah("onPointerLeave",["pointerout","pointerover"]);Ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sP=new Set("cancel close invalid load scroll toggle".split(" ").concat(zf));function S7(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,iL(i,e,void 0,t),t.currentTarget=null}function tT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;S7(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;S7(r,a,u),s=l}}}if(LA)throw t=iv,LA=!1,iv=null,t}function dn(t,e){var n=e[dv];n===void 0&&(n=e[dv]=new Set);var i=t+"__bubble";n.has(i)||(nT(e,t,2,!1),n.add(i))}function d1(t,e,n){var i=0;e&&(i|=4),nT(n,t,i,e)}var X0="_reactListening"+Math.random().toString(36).slice(2);function Cd(t){if(!t[X0]){t[X0]=!0,uC.forEach(function(n){n!=="selectionchange"&&(sP.has(n)||d1(n,!1,t),d1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[X0]||(e[X0]=!0,d1("selectionchange",!1,e))}}function nT(t,e,n,i){switch(kC(e)){case 1:var r=yL;break;case 4:r=xL;break;default:r=a8}n=r.bind(null,e,n,t),r=void 0,!nv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function p1(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=tu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}TC(function(){var u=s,h=i8(n),d=[];e:{var p=eT.get(t);if(p!==void 0){var A=u8,g=t;switch(t){case"keypress":if(aA(n)===0)break e;case"keydown":case"keyup":A=NL;break;case"focusin":g="focus",A=a1;break;case"focusout":g="blur",A=a1;break;case"beforeblur":case"afterblur":A=a1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=c7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=_L;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=OL;break;case jC:case JC:case ZC:A=IL;break;case $C:A=QL;break;case"scroll":A=EL;break;case"wheel":A=zL;break;case"copy":case"cut":case"paste":A=ML;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=f7}var S=(e&4)!==0,E=!S&&t==="scroll",m=S?p!==null?p+"Capture":null:p;S=[];for(var x=u,y;x!==null;){y=x;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,m!==null&&(C=vd(x,m),C!=null&&S.push(Td(x,C,y)))),E)break;x=x.return}0<S.length&&(p=new A(p,g,null,n,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",p&&n!==ev&&(g=n.relatedTarget||n.fromElement)&&(tu(g)||g[ia]))break e;if((A||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,A?(g=n.relatedTarget||n.toElement,A=u,g=g?tu(g):null,g!==null&&(E=bu(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(A=null,g=u),A!==g)){if(S=c7,C="onMouseLeave",m="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(S=f7,C="onPointerLeave",m="onPointerEnter",x="pointer"),E=A==null?p:Dc(A),y=g==null?p:Dc(g),p=new S(C,x+"leave",A,n,h),p.target=E,p.relatedTarget=y,C=null,tu(h)===u&&(S=new S(m,x+"enter",g,n,h),S.target=y,S.relatedTarget=E,C=S),E=C,A&&g)t:{for(S=A,m=g,x=0,y=S;y;y=$u(y))x++;for(y=0,C=m;C;C=$u(C))y++;for(;0<x-y;)S=$u(S),x--;for(;0<y-x;)m=$u(m),y--;for(;x--;){if(S===m||m!==null&&S===m.alternate)break t;S=$u(S),m=$u(m)}S=null}else S=null;A!==null&&_7(d,p,A,S,!1),g!==null&&E!==null&&_7(d,E,g,S,!0)}}e:{if(p=u?Dc(u):window,A=p.nodeName&&p.nodeName.toLowerCase(),A==="select"||A==="input"&&p.type==="file")var I=KL;else if(A7(p))if(WC)I=$L;else{I=JL;var M=jL}else(A=p.nodeName)&&A.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=ZL);if(I&&(I=I(t,u))){VC(d,I,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&K5(p,"number",p.value)}switch(M=u?Dc(u):window,t){case"focusin":(A7(M)||M.contentEditable==="true")&&(Lc=M,av=u,ed=null);break;case"focusout":ed=av=Lc=null;break;case"mousedown":lv=!0;break;case"contextmenu":case"mouseup":case"dragend":lv=!1,x7(d,n,h);break;case"selectionchange":if(nP)break;case"keydown":case"keyup":x7(d,n,h)}var w;if(h8)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Bc?zC(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(GC&&n.locale!=="ko"&&(Bc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Bc&&(w=QC()):(Ha=h,l8="value"in Ha?Ha.value:Ha.textContent,Bc=!0)),M=UA(u,L),0<M.length&&(L=new h7(L,t,null,n,h),d.push({event:L,listeners:M}),w?L.data=w:(w=HC(n),w!==null&&(L.data=w)))),(w=VL?WL(t,n):XL(t,n))&&(u=UA(u,"onBeforeInput"),0<u.length&&(h=new h7("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=w))}tT(d,e)})}function Td(t,e,n){return{instance:t,listener:e,currentTarget:n}}function UA(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=vd(t,n),s!=null&&i.unshift(Td(t,s,r)),s=vd(t,e),s!=null&&i.push(Td(t,s,r))),t=t.return}return i}function $u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _7(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=vd(n,s),l!=null&&o.unshift(Td(n,l,a))):r||(l=vd(n,s),l!=null&&o.push(Td(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oP=/\r\n?/g,aP=/\u0000|\uFFFD/g;function C7(t){return(typeof t=="string"?t:""+t).replace(oP,`
`).replace(aP,"")}function q0(t,e,n){if(e=C7(e),C7(t)!==e&&n)throw Error(Te(425))}function OA(){}var uv=null,cv=null;function hv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fv=typeof setTimeout=="function"?setTimeout:void 0,lP=typeof clearTimeout=="function"?clearTimeout:void 0,T7=typeof Promise=="function"?Promise:void 0,uP=typeof queueMicrotask=="function"?queueMicrotask:typeof T7<"u"?function(t){return T7.resolve(null).then(t).catch(cP)}:fv;function cP(t){setTimeout(function(){throw t})}function A1(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ed(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ed(e)}function Ka(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function I7(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lh=Math.random().toString(36).slice(2),uo="__reactFiber$"+Lh,Id="__reactProps$"+Lh,ia="__reactContainer$"+Lh,dv="__reactEvents$"+Lh,hP="__reactListeners$"+Lh,fP="__reactHandles$"+Lh;function tu(t){var e=t[uo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ia]||n[uo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=I7(t);t!==null;){if(n=t[uo])return n;t=I7(t)}return e}t=n,n=t.parentNode}return null}function hp(t){return t=t[uo]||t[ia],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function Rm(t){return t[Id]||null}var pv=[],Nc=-1;function ml(t){return{current:t}}function An(t){0>Nc||(t.current=pv[Nc],pv[Nc]=null,Nc--)}function ln(t,e){Nc++,pv[Nc]=t.current,t.current=e}var sl={},Oi=ml(sl),ar=ml(!1),mu=sl;function lh(t,e){var n=t.type.contextTypes;if(!n)return sl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function lr(t){return t=t.childContextTypes,t!=null}function kA(){An(ar),An(Oi)}function w7(t,e,n){if(Oi.current!==sl)throw Error(Te(168));ln(Oi,e),ln(ar,n)}function iT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Te(108,jB(t)||"Unknown",r));return wn({},n,i)}function QA(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sl,mu=Oi.current,ln(Oi,t),ln(ar,ar.current),!0}function M7(t,e,n){var i=t.stateNode;if(!i)throw Error(Te(169));n?(t=iT(t,e,mu),i.__reactInternalMemoizedMergedChildContext=t,An(ar),An(Oi),ln(Oi,t)):An(ar),ln(ar,n)}var qo=null,bm=!1,m1=!1;function rT(t){qo===null?qo=[t]:qo.push(t)}function dP(t){bm=!0,rT(t)}function gl(){if(!m1&&qo!==null){m1=!0;var t=0,e=Zt;try{var n=qo;for(Zt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}qo=null,bm=!1}catch(r){throw qo!==null&&(qo=qo.slice(t+1)),RC(r8,gl),r}finally{Zt=e,m1=!1}}return null}var Fc=[],Uc=0,GA=null,zA=0,es=[],ts=0,gu=null,Ko=1,jo="";function Xl(t,e){Fc[Uc++]=zA,Fc[Uc++]=GA,GA=t,zA=e}function sT(t,e,n){es[ts++]=Ko,es[ts++]=jo,es[ts++]=gu,gu=t;var i=Ko;t=jo;var r=32-Ps(i)-1;i&=~(1<<r),n+=1;var s=32-Ps(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ko=1<<32-Ps(e)+r|n<<r|i,jo=s+t}else Ko=1<<s|n<<r|i,jo=t}function d8(t){t.return!==null&&(Xl(t,1),sT(t,1,0))}function p8(t){for(;t===GA;)GA=Fc[--Uc],Fc[Uc]=null,zA=Fc[--Uc],Fc[Uc]=null;for(;t===gu;)gu=es[--ts],es[ts]=null,jo=es[--ts],es[ts]=null,Ko=es[--ts],es[ts]=null}var Mr=null,Tr=null,yn=!1,bs=null;function oT(t,e){var n=rs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function R7(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,Tr=Ka(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,Tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gu!==null?{id:Ko,overflow:jo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mr=t,Tr=null,!0):!1;default:return!1}}function Av(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mv(t){if(yn){var e=Tr;if(e){var n=e;if(!R7(t,e)){if(Av(t))throw Error(Te(418));e=Ka(n.nextSibling);var i=Mr;e&&R7(t,e)?oT(i,n):(t.flags=t.flags&-4097|2,yn=!1,Mr=t)}}else{if(Av(t))throw Error(Te(418));t.flags=t.flags&-4097|2,yn=!1,Mr=t}}}function b7(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function Y0(t){if(t!==Mr)return!1;if(!yn)return b7(t),yn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hv(t.type,t.memoizedProps)),e&&(e=Tr)){if(Av(t))throw aT(),Error(Te(418));for(;e;)oT(t,e),e=Ka(e.nextSibling)}if(b7(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tr=Ka(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tr=null}}else Tr=Mr?Ka(t.stateNode.nextSibling):null;return!0}function aT(){for(var t=Tr;t;)t=Ka(t.nextSibling)}function uh(){Tr=Mr=null,yn=!1}function A8(t){bs===null?bs=[t]:bs.push(t)}var pP=ua.ReactCurrentBatchConfig;function ws(t,e){if(t&&t.defaultProps){e=wn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var HA=ml(null),VA=null,Oc=null,m8=null;function g8(){m8=Oc=VA=null}function v8(t){var e=HA.current;An(HA),t._currentValue=e}function gv(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function jc(t,e){VA=t,m8=Oc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(or=!0),t.firstContext=null)}function us(t){var e=t._currentValue;if(m8!==t)if(t={context:t,memoizedValue:e,next:null},Oc===null){if(VA===null)throw Error(Te(308));Oc=t,VA.dependencies={lanes:0,firstContext:t}}else Oc=Oc.next=t;return e}var nu=null;function y8(t){nu===null?nu=[t]:nu.push(t)}function lT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,y8(e)):(n.next=r.next,r.next=n),e.interleaved=n,ra(t,i)}function ra(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ka=!1;function x8(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $o(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ja(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ht&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ra(t,n)}return r=i.interleaved,r===null?(e.next=e,y8(i)):(e.next=r.next,r.next=e),i.interleaved=e,ra(t,n)}function lA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,s8(t,n)}}function B7(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function WA(t,e,n,i){var r=t.updateQueue;ka=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,A=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:A,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,S=a;switch(p=e,A=n,S.tag){case 1:if(g=S.payload,typeof g=="function"){d=g.call(A,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,p=typeof g=="function"?g.call(A,d,p):g,p==null)break e;d=wn({},d,p);break e;case 2:ka=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else A={eventTime:A,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=A,l=d):h=h.next=A,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);yu|=o,t.lanes=o,t.memoizedState=d}}function L7(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Te(191,r));r.call(i)}}}var cT=new lC.Component().refs;function vv(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:wn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bm={isMounted:function(t){return(t=t._reactInternals)?bu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ki(),r=Za(t),s=$o(i,r);s.payload=e,n!=null&&(s.callback=n),e=ja(t,s,r),e!==null&&(Ds(e,t,r,i),lA(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ki(),r=Za(t),s=$o(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ja(t,s,r),e!==null&&(Ds(e,t,r,i),lA(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ki(),i=Za(t),r=$o(n,i);r.tag=2,e!=null&&(r.callback=e),e=ja(t,r,i),e!==null&&(Ds(e,t,i,n),lA(e,t,i))}};function P7(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!_d(n,i)||!_d(r,s):!0}function hT(t,e,n){var i=!1,r=sl,s=e.contextType;return typeof s=="object"&&s!==null?s=us(s):(r=lr(e)?mu:Oi.current,i=e.contextTypes,s=(i=i!=null)?lh(t,r):sl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bm,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function D7(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Bm.enqueueReplaceState(e,e.state,null)}function yv(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=cT,x8(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=us(s):(s=lr(e)?mu:Oi.current,r.context=lh(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vv(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Bm.enqueueReplaceState(r,r.state,null),WA(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function gf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var i=n.stateNode}if(!i)throw Error(Te(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===cT&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function K0(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function N7(t){var e=t._init;return e(t._payload)}function fT(t){function e(m,x){if(t){var y=m.deletions;y===null?(m.deletions=[x],m.flags|=16):y.push(x)}}function n(m,x){if(!t)return null;for(;x!==null;)e(m,x),x=x.sibling;return null}function i(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function r(m,x){return m=$a(m,x),m.index=0,m.sibling=null,m}function s(m,x,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<x?(m.flags|=2,x):y):(m.flags|=2,x)):(m.flags|=1048576,x)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,x,y,C){return x===null||x.tag!==6?(x=_1(y,m.mode,C),x.return=m,x):(x=r(x,y),x.return=m,x)}function l(m,x,y,C){var I=y.type;return I===bc?h(m,x,y.props.children,C,y.key):x!==null&&(x.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Oa&&N7(I)===x.type)?(C=r(x,y.props),C.ref=gf(m,x,y),C.return=m,C):(C=pA(y.type,y.key,y.props,null,m.mode,C),C.ref=gf(m,x,y),C.return=m,C)}function u(m,x,y,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=C1(y,m.mode,C),x.return=m,x):(x=r(x,y.children||[]),x.return=m,x)}function h(m,x,y,C,I){return x===null||x.tag!==7?(x=hu(y,m.mode,C,I),x.return=m,x):(x=r(x,y),x.return=m,x)}function d(m,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=_1(""+x,m.mode,y),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case O0:return y=pA(x.type,x.key,x.props,null,m.mode,y),y.ref=gf(m,null,x),y.return=m,y;case Rc:return x=C1(x,m.mode,y),x.return=m,x;case Oa:var C=x._init;return d(m,C(x._payload),y)}if(Qf(x)||ff(x))return x=hu(x,m.mode,y,null),x.return=m,x;K0(m,x)}return null}function p(m,x,y,C){var I=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return I!==null?null:a(m,x,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case O0:return y.key===I?l(m,x,y,C):null;case Rc:return y.key===I?u(m,x,y,C):null;case Oa:return I=y._init,p(m,x,I(y._payload),C)}if(Qf(y)||ff(y))return I!==null?null:h(m,x,y,C,null);K0(m,y)}return null}function A(m,x,y,C,I){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(y)||null,a(x,m,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case O0:return m=m.get(C.key===null?y:C.key)||null,l(x,m,C,I);case Rc:return m=m.get(C.key===null?y:C.key)||null,u(x,m,C,I);case Oa:var M=C._init;return A(m,x,y,M(C._payload),I)}if(Qf(C)||ff(C))return m=m.get(y)||null,h(x,m,C,I,null);K0(x,C)}return null}function g(m,x,y,C){for(var I=null,M=null,w=x,L=x=0,R=null;w!==null&&L<y.length;L++){w.index>L?(R=w,w=null):R=w.sibling;var B=p(m,w,y[L],C);if(B===null){w===null&&(w=R);break}t&&w&&B.alternate===null&&e(m,w),x=s(B,x,L),M===null?I=B:M.sibling=B,M=B,w=R}if(L===y.length)return n(m,w),yn&&Xl(m,L),I;if(w===null){for(;L<y.length;L++)w=d(m,y[L],C),w!==null&&(x=s(w,x,L),M===null?I=w:M.sibling=w,M=w);return yn&&Xl(m,L),I}for(w=i(m,w);L<y.length;L++)R=A(w,m,L,y[L],C),R!==null&&(t&&R.alternate!==null&&w.delete(R.key===null?L:R.key),x=s(R,x,L),M===null?I=R:M.sibling=R,M=R);return t&&w.forEach(function(F){return e(m,F)}),yn&&Xl(m,L),I}function S(m,x,y,C){var I=ff(y);if(typeof I!="function")throw Error(Te(150));if(y=I.call(y),y==null)throw Error(Te(151));for(var M=I=null,w=x,L=x=0,R=null,B=y.next();w!==null&&!B.done;L++,B=y.next()){w.index>L?(R=w,w=null):R=w.sibling;var F=p(m,w,B.value,C);if(F===null){w===null&&(w=R);break}t&&w&&F.alternate===null&&e(m,w),x=s(F,x,L),M===null?I=F:M.sibling=F,M=F,w=R}if(B.done)return n(m,w),yn&&Xl(m,L),I;if(w===null){for(;!B.done;L++,B=y.next())B=d(m,B.value,C),B!==null&&(x=s(B,x,L),M===null?I=B:M.sibling=B,M=B);return yn&&Xl(m,L),I}for(w=i(m,w);!B.done;L++,B=y.next())B=A(w,m,L,B.value,C),B!==null&&(t&&B.alternate!==null&&w.delete(B.key===null?L:B.key),x=s(B,x,L),M===null?I=B:M.sibling=B,M=B);return t&&w.forEach(function(X){return e(m,X)}),yn&&Xl(m,L),I}function E(m,x,y,C){if(typeof y=="object"&&y!==null&&y.type===bc&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case O0:e:{for(var I=y.key,M=x;M!==null;){if(M.key===I){if(I=y.type,I===bc){if(M.tag===7){n(m,M.sibling),x=r(M,y.props.children),x.return=m,m=x;break e}}else if(M.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Oa&&N7(I)===M.type){n(m,M.sibling),x=r(M,y.props),x.ref=gf(m,M,y),x.return=m,m=x;break e}n(m,M);break}else e(m,M);M=M.sibling}y.type===bc?(x=hu(y.props.children,m.mode,C,y.key),x.return=m,m=x):(C=pA(y.type,y.key,y.props,null,m.mode,C),C.ref=gf(m,x,y),C.return=m,m=C)}return o(m);case Rc:e:{for(M=y.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(m,x.sibling),x=r(x,y.children||[]),x.return=m,m=x;break e}else{n(m,x);break}else e(m,x);x=x.sibling}x=C1(y,m.mode,C),x.return=m,m=x}return o(m);case Oa:return M=y._init,E(m,x,M(y._payload),C)}if(Qf(y))return g(m,x,y,C);if(ff(y))return S(m,x,y,C);K0(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(m,x.sibling),x=r(x,y),x.return=m,m=x):(n(m,x),x=_1(y,m.mode,C),x.return=m,m=x),o(m)):n(m,x)}return E}var ch=fT(!0),dT=fT(!1),fp={},Ao=ml(fp),wd=ml(fp),Md=ml(fp);function iu(t){if(t===fp)throw Error(Te(174));return t}function E8(t,e){switch(ln(Md,e),ln(wd,t),ln(Ao,fp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:J5(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=J5(e,t)}An(Ao),ln(Ao,e)}function hh(){An(Ao),An(wd),An(Md)}function pT(t){iu(Md.current);var e=iu(Ao.current),n=J5(e,t.type);e!==n&&(ln(wd,t),ln(Ao,n))}function S8(t){wd.current===t&&(An(Ao),An(wd))}var En=ml(0);function XA(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var g1=[];function _8(){for(var t=0;t<g1.length;t++)g1[t]._workInProgressVersionPrimary=null;g1.length=0}var uA=ua.ReactCurrentDispatcher,v1=ua.ReactCurrentBatchConfig,vu=0,Tn=null,ei=null,fi=null,qA=!1,td=!1,Rd=0,AP=0;function Li(){throw Error(Te(321))}function C8(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Us(t[n],e[n]))return!1;return!0}function T8(t,e,n,i,r,s){if(vu=s,Tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uA.current=t===null||t.memoizedState===null?yP:xP,t=n(i,r),td){s=0;do{if(td=!1,Rd=0,25<=s)throw Error(Te(301));s+=1,fi=ei=null,e.updateQueue=null,uA.current=EP,t=n(i,r)}while(td)}if(uA.current=YA,e=ei!==null&&ei.next!==null,vu=0,fi=ei=Tn=null,qA=!1,e)throw Error(Te(300));return t}function I8(){var t=Rd!==0;return Rd=0,t}function ao(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?Tn.memoizedState=fi=t:fi=fi.next=t,fi}function cs(){if(ei===null){var t=Tn.alternate;t=t!==null?t.memoizedState:null}else t=ei.next;var e=fi===null?Tn.memoizedState:fi.next;if(e!==null)fi=e,ei=t;else{if(t===null)throw Error(Te(310));ei=t,t={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},fi===null?Tn.memoizedState=fi=t:fi=fi.next=t}return fi}function bd(t,e){return typeof e=="function"?e(t):e}function y1(t){var e=cs(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var i=ei,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((vu&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Tn.lanes|=h,yu|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Us(i,e.memoizedState)||(or=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Tn.lanes|=s,yu|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function x1(t){var e=cs(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Us(s,e.memoizedState)||(or=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function AT(){}function mT(t,e){var n=Tn,i=cs(),r=e(),s=!Us(i.memoizedState,r);if(s&&(i.memoizedState=r,or=!0),i=i.queue,w8(yT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||fi!==null&&fi.memoizedState.tag&1){if(n.flags|=2048,Bd(9,vT.bind(null,n,i,r,e),void 0,null),Ai===null)throw Error(Te(349));vu&30||gT(n,e,r)}return r}function gT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vT(t,e,n,i){e.value=n,e.getSnapshot=i,xT(e)&&ET(t)}function yT(t,e,n){return n(function(){xT(e)&&ET(t)})}function xT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Us(t,n)}catch{return!0}}function ET(t){var e=ra(t,1);e!==null&&Ds(e,t,1,-1)}function F7(t){var e=ao();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bd,lastRenderedState:t},e.queue=t,t=t.dispatch=vP.bind(null,Tn,t),[e.memoizedState,t]}function Bd(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function ST(){return cs().memoizedState}function cA(t,e,n,i){var r=ao();Tn.flags|=t,r.memoizedState=Bd(1|e,n,void 0,i===void 0?null:i)}function Lm(t,e,n,i){var r=cs();i=i===void 0?null:i;var s=void 0;if(ei!==null){var o=ei.memoizedState;if(s=o.destroy,i!==null&&C8(i,o.deps)){r.memoizedState=Bd(e,n,s,i);return}}Tn.flags|=t,r.memoizedState=Bd(1|e,n,s,i)}function U7(t,e){return cA(8390656,8,t,e)}function w8(t,e){return Lm(2048,8,t,e)}function _T(t,e){return Lm(4,2,t,e)}function CT(t,e){return Lm(4,4,t,e)}function TT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IT(t,e,n){return n=n!=null?n.concat([t]):null,Lm(4,4,TT.bind(null,e,t),n)}function M8(){}function wT(t,e){var n=cs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&C8(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function MT(t,e){var n=cs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&C8(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function RT(t,e,n){return vu&21?(Us(n,e)||(n=LC(),Tn.lanes|=n,yu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,or=!0),t.memoizedState=n)}function mP(t,e){var n=Zt;Zt=n!==0&&4>n?n:4,t(!0);var i=v1.transition;v1.transition={};try{t(!1),e()}finally{Zt=n,v1.transition=i}}function bT(){return cs().memoizedState}function gP(t,e,n){var i=Za(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BT(t))LT(e,n);else if(n=lT(t,e,n,i),n!==null){var r=Ki();Ds(n,t,i,r),PT(n,e,i)}}function vP(t,e,n){var i=Za(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BT(t))LT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Us(a,o)){var l=e.interleaved;l===null?(r.next=r,y8(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=lT(t,e,r,i),n!==null&&(r=Ki(),Ds(n,t,i,r),PT(n,e,i))}}function BT(t){var e=t.alternate;return t===Tn||e!==null&&e===Tn}function LT(t,e){td=qA=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,s8(t,n)}}var YA={readContext:us,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},yP={readContext:us,useCallback:function(t,e){return ao().memoizedState=[t,e===void 0?null:e],t},useContext:us,useEffect:U7,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cA(4194308,4,TT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cA(4194308,4,t,e)},useInsertionEffect:function(t,e){return cA(4,2,t,e)},useMemo:function(t,e){var n=ao();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ao();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=gP.bind(null,Tn,t),[i.memoizedState,t]},useRef:function(t){var e=ao();return t={current:t},e.memoizedState=t},useState:F7,useDebugValue:M8,useDeferredValue:function(t){return ao().memoizedState=t},useTransition:function(){var t=F7(!1),e=t[0];return t=mP.bind(null,t[1]),ao().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Tn,r=ao();if(yn){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),Ai===null)throw Error(Te(349));vu&30||gT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,U7(yT.bind(null,i,s,t),[t]),i.flags|=2048,Bd(9,vT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=ao(),e=Ai.identifierPrefix;if(yn){var n=jo,i=Ko;n=(i&~(1<<32-Ps(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xP={readContext:us,useCallback:wT,useContext:us,useEffect:w8,useImperativeHandle:IT,useInsertionEffect:_T,useLayoutEffect:CT,useMemo:MT,useReducer:y1,useRef:ST,useState:function(){return y1(bd)},useDebugValue:M8,useDeferredValue:function(t){var e=cs();return RT(e,ei.memoizedState,t)},useTransition:function(){var t=y1(bd)[0],e=cs().memoizedState;return[t,e]},useMutableSource:AT,useSyncExternalStore:mT,useId:bT,unstable_isNewReconciler:!1},EP={readContext:us,useCallback:wT,useContext:us,useEffect:w8,useImperativeHandle:IT,useInsertionEffect:_T,useLayoutEffect:CT,useMemo:MT,useReducer:x1,useRef:ST,useState:function(){return x1(bd)},useDebugValue:M8,useDeferredValue:function(t){var e=cs();return ei===null?e.memoizedState=t:RT(e,ei.memoizedState,t)},useTransition:function(){var t=x1(bd)[0],e=cs().memoizedState;return[t,e]},useMutableSource:AT,useSyncExternalStore:mT,useId:bT,unstable_isNewReconciler:!1};function fh(t,e){try{var n="",i=e;do n+=KB(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function E1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SP=typeof WeakMap=="function"?WeakMap:Map;function DT(t,e,n){n=$o(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){jA||(jA=!0,bv=i),xv(t,e)},n}function NT(t,e,n){n=$o(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){xv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){xv(t,e),typeof i!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function O7(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new SP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=FP.bind(null,t,e,n),e.then(t,t))}function k7(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Q7(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$o(-1,1),e.tag=2,ja(n,e,1))),n.lanes|=1),t)}var _P=ua.ReactCurrentOwner,or=!1;function qi(t,e,n,i){e.child=t===null?dT(e,null,n,i):ch(e,t.child,n,i)}function G7(t,e,n,i,r){n=n.render;var s=e.ref;return jc(e,r),i=T8(t,e,n,i,s,r),n=I8(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sa(t,e,r)):(yn&&n&&d8(e),e.flags|=1,qi(t,e,i,r),e.child)}function z7(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!F8(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FT(t,e,s,i,r)):(t=pA(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:_d,n(o,i)&&t.ref===e.ref)return sa(t,e,r)}return e.flags|=1,t=$a(s,i),t.ref=e.ref,t.return=e,e.child=t}function FT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(_d(s,i)&&t.ref===e.ref)if(or=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(or=!0);else return e.lanes=t.lanes,sa(t,e,r)}return Ev(t,e,n,i,r)}function UT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Qc,_r),_r|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ln(Qc,_r),_r|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ln(Qc,_r),_r|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ln(Qc,_r),_r|=i;return qi(t,e,r,n),e.child}function OT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ev(t,e,n,i,r){var s=lr(n)?mu:Oi.current;return s=lh(e,s),jc(e,r),n=T8(t,e,n,i,s,r),i=I8(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sa(t,e,r)):(yn&&i&&d8(e),e.flags|=1,qi(t,e,n,r),e.child)}function H7(t,e,n,i,r){if(lr(n)){var s=!0;QA(e)}else s=!1;if(jc(e,r),e.stateNode===null)hA(t,e),hT(e,n,i),yv(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=us(u):(u=lr(n)?mu:Oi.current,u=lh(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&D7(e,o,i,u),ka=!1;var p=e.memoizedState;o.state=p,WA(e,i,o,r),l=e.memoizedState,a!==i||p!==l||ar.current||ka?(typeof h=="function"&&(vv(e,n,h,i),l=e.memoizedState),(a=ka||P7(e,n,a,i,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,uT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ws(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=us(l):(l=lr(n)?mu:Oi.current,l=lh(e,l));var A=n.getDerivedStateFromProps;(h=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&D7(e,o,i,l),ka=!1,p=e.memoizedState,o.state=p,WA(e,i,o,r);var g=e.memoizedState;a!==d||p!==g||ar.current||ka?(typeof A=="function"&&(vv(e,n,A,i),g=e.memoizedState),(u=ka||P7(e,n,u,i,p,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Sv(t,e,n,i,s,r)}function Sv(t,e,n,i,r,s){OT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&M7(e,n,!1),sa(t,e,s);i=e.stateNode,_P.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ch(e,t.child,null,s),e.child=ch(e,null,a,s)):qi(t,e,a,s),e.memoizedState=i.state,r&&M7(e,n,!0),e.child}function kT(t){var e=t.stateNode;e.pendingContext?w7(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w7(t,e.context,!1),E8(t,e.containerInfo)}function V7(t,e,n,i,r){return uh(),A8(r),e.flags|=256,qi(t,e,n,i),e.child}var _v={dehydrated:null,treeContext:null,retryLane:0};function Cv(t){return{baseLanes:t,cachePool:null,transitions:null}}function QT(t,e,n){var i=e.pendingProps,r=En.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ln(En,r&1),t===null)return mv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nm(o,i,0,null),t=hu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Cv(n),e.memoizedState=_v,t):R8(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return CP(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=$a(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=$a(a,s):(s=hu(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Cv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_v,i}return s=t.child,t=s.sibling,i=$a(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function R8(t,e){return e=Nm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function j0(t,e,n,i){return i!==null&&A8(i),ch(e,t.child,null,n),t=R8(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CP(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=E1(Error(Te(422))),j0(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Nm({mode:"visible",children:i.children},r,0,null),s=hu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ch(e,t.child,null,o),e.child.memoizedState=Cv(o),e.memoizedState=_v,s);if(!(e.mode&1))return j0(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Te(419)),i=E1(s,i,void 0),j0(t,e,o,i)}if(a=(o&t.childLanes)!==0,or||a){if(i=Ai,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ra(t,r),Ds(i,t,r,-1))}return N8(),i=E1(Error(Te(421))),j0(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=UP.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Tr=Ka(r.nextSibling),Mr=e,yn=!0,bs=null,t!==null&&(es[ts++]=Ko,es[ts++]=jo,es[ts++]=gu,Ko=t.id,jo=t.overflow,gu=e),e=R8(e,i.children),e.flags|=4096,e)}function W7(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),gv(t.return,e,n)}function S1(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function GT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(qi(t,e,i.children,n),i=En.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&W7(t,n,e);else if(t.tag===19)W7(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ln(En,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&XA(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),S1(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&XA(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}S1(e,!0,n,null,s);break;case"together":S1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=$a(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$a(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TP(t,e,n){switch(e.tag){case 3:kT(e),uh();break;case 5:pT(e);break;case 1:lr(e.type)&&QA(e);break;case 4:E8(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ln(HA,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ln(En,En.current&1),e.flags|=128,null):n&e.child.childLanes?QT(t,e,n):(ln(En,En.current&1),t=sa(t,e,n),t!==null?t.sibling:null);ln(En,En.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return GT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ln(En,En.current),i)break;return null;case 22:case 23:return e.lanes=0,UT(t,e,n)}return sa(t,e,n)}var zT,Tv,HT,VT;zT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tv=function(){};HT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,iu(Ao.current);var s=null;switch(n){case"input":r=q5(t,r),i=q5(t,i),s=[];break;case"select":r=wn({},r,{value:void 0}),i=wn({},i,{value:void 0}),s=[];break;case"textarea":r=j5(t,r),i=j5(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=OA)}Z5(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(md.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(md.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};VT=function(t,e,n,i){n!==i&&(e.flags|=4)};function vf(t,e){if(!yn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Pi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function IP(t,e,n){var i=e.pendingProps;switch(p8(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(e),null;case 1:return lr(e.type)&&kA(),Pi(e),null;case 3:return i=e.stateNode,hh(),An(ar),An(Oi),_8(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Y0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bs!==null&&(Pv(bs),bs=null))),Tv(t,e),Pi(e),null;case 5:S8(e);var r=iu(Md.current);if(n=e.type,t!==null&&e.stateNode!=null)HT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Te(166));return Pi(e),null}if(t=iu(Ao.current),Y0(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[uo]=e,i[Id]=s,t=(e.mode&1)!==0,n){case"dialog":dn("cancel",i),dn("close",i);break;case"iframe":case"object":case"embed":dn("load",i);break;case"video":case"audio":for(r=0;r<zf.length;r++)dn(zf[r],i);break;case"source":dn("error",i);break;case"img":case"image":case"link":dn("error",i),dn("load",i);break;case"details":dn("toggle",i);break;case"input":e7(i,s),dn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},dn("invalid",i);break;case"textarea":n7(i,s),dn("invalid",i)}Z5(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&q0(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&q0(i.textContent,a,t),r=["children",""+a]):md.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dn("scroll",i)}switch(n){case"input":k0(i),t7(i,s,!0);break;case"textarea":k0(i),i7(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=OA)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[uo]=e,t[Id]=i,zT(t,e,!1,!1),e.stateNode=t;e:{switch(o=$5(n,i),n){case"dialog":dn("cancel",t),dn("close",t),r=i;break;case"iframe":case"object":case"embed":dn("load",t),r=i;break;case"video":case"audio":for(r=0;r<zf.length;r++)dn(zf[r],t);r=i;break;case"source":dn("error",t),r=i;break;case"img":case"image":case"link":dn("error",t),dn("load",t),r=i;break;case"details":dn("toggle",t),r=i;break;case"input":e7(t,i),r=q5(t,i),dn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=wn({},i,{value:void 0}),dn("invalid",t);break;case"textarea":n7(t,i),r=j5(t,i),dn("invalid",t);break;default:r=i}Z5(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?xC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gd(t,l):typeof l=="number"&&gd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(md.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dn("scroll",t):l!=null&&$6(t,s,l,o))}switch(n){case"input":k0(t),t7(t,i,!1);break;case"textarea":k0(t),i7(t);break;case"option":i.value!=null&&t.setAttribute("value",""+rl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Xc(t,!!i.multiple,s,!1):i.defaultValue!=null&&Xc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=OA)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pi(e),null;case 6:if(t&&e.stateNode!=null)VT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Te(166));if(n=iu(Md.current),iu(Ao.current),Y0(e)){if(i=e.stateNode,n=e.memoizedProps,i[uo]=e,(s=i.nodeValue!==n)&&(t=Mr,t!==null))switch(t.tag){case 3:q0(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&q0(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[uo]=e,e.stateNode=i}return Pi(e),null;case 13:if(An(En),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yn&&Tr!==null&&e.mode&1&&!(e.flags&128))aT(),uh(),e.flags|=98560,s=!1;else if(s=Y0(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Te(317));s[uo]=e}else uh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pi(e),s=!1}else bs!==null&&(Pv(bs),bs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||En.current&1?ri===0&&(ri=3):N8())),e.updateQueue!==null&&(e.flags|=4),Pi(e),null);case 4:return hh(),Tv(t,e),t===null&&Cd(e.stateNode.containerInfo),Pi(e),null;case 10:return v8(e.type._context),Pi(e),null;case 17:return lr(e.type)&&kA(),Pi(e),null;case 19:if(An(En),s=e.memoizedState,s===null)return Pi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)vf(s,!1);else{if(ri!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=XA(t),o!==null){for(e.flags|=128,vf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ln(En,En.current&1|2),e.child}t=t.sibling}s.tail!==null&&zn()>dh&&(e.flags|=128,i=!0,vf(s,!1),e.lanes=4194304)}else{if(!i)if(t=XA(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yn)return Pi(e),null}else 2*zn()-s.renderingStartTime>dh&&n!==1073741824&&(e.flags|=128,i=!0,vf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=zn(),e.sibling=null,n=En.current,ln(En,i?n&1|2:n&1),e):(Pi(e),null);case 22:case 23:return D8(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?_r&1073741824&&(Pi(e),e.subtreeFlags&6&&(e.flags|=8192)):Pi(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function wP(t,e){switch(p8(e),e.tag){case 1:return lr(e.type)&&kA(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hh(),An(ar),An(Oi),_8(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S8(e),null;case 13:if(An(En),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));uh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return An(En),null;case 4:return hh(),null;case 10:return v8(e.type._context),null;case 22:case 23:return D8(),null;case 24:return null;default:return null}}var J0=!1,Fi=!1,MP=typeof WeakSet=="function"?WeakSet:Set,ze=null;function kc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Pn(t,e,i)}else n.current=null}function Iv(t,e,n){try{n()}catch(i){Pn(t,e,i)}}var X7=!1;function RP(t,e){if(uv=NA,t=YC(),f8(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,p=null;t:for(;;){for(var A;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(A=d.firstChild)!==null;)p=d,d=A;for(;;){if(d===t)break t;if(p===n&&++u===r&&(a=o),p===s&&++h===i&&(l=o),(A=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=A}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cv={focusedElem:t,selectionRange:n},NA=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){e=ze;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var S=g.memoizedProps,E=g.memoizedState,m=e.stateNode,x=m.getSnapshotBeforeUpdate(e.elementType===e.type?S:ws(e.type,S),E);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(C){Pn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}return g=X7,X7=!1,g}function nd(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Iv(e,n,s)}r=r.next}while(r!==i)}}function Pm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function wv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WT(t){var e=t.alternate;e!==null&&(t.alternate=null,WT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[uo],delete e[Id],delete e[dv],delete e[hP],delete e[fP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XT(t){return t.tag===5||t.tag===3||t.tag===4}function q7(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mv(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=OA));else if(i!==4&&(t=t.child,t!==null))for(Mv(t,e,n),t=t.sibling;t!==null;)Mv(t,e,n),t=t.sibling}function Rv(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Rv(t,e,n),t=t.sibling;t!==null;)Rv(t,e,n),t=t.sibling}var yi=null,Rs=!1;function Ia(t,e,n){for(n=n.child;n!==null;)qT(t,e,n),n=n.sibling}function qT(t,e,n){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount(Tm,n)}catch{}switch(n.tag){case 5:Fi||kc(n,e);case 6:var i=yi,r=Rs;yi=null,Ia(t,e,n),yi=i,Rs=r,yi!==null&&(Rs?(t=yi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yi.removeChild(n.stateNode));break;case 18:yi!==null&&(Rs?(t=yi,n=n.stateNode,t.nodeType===8?A1(t.parentNode,n):t.nodeType===1&&A1(t,n),Ed(t)):A1(yi,n.stateNode));break;case 4:i=yi,r=Rs,yi=n.stateNode.containerInfo,Rs=!0,Ia(t,e,n),yi=i,Rs=r;break;case 0:case 11:case 14:case 15:if(!Fi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Iv(n,e,o),r=r.next}while(r!==i)}Ia(t,e,n);break;case 1:if(!Fi&&(kc(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Pn(n,e,a)}Ia(t,e,n);break;case 21:Ia(t,e,n);break;case 22:n.mode&1?(Fi=(i=Fi)||n.memoizedState!==null,Ia(t,e,n),Fi=i):Ia(t,e,n);break;default:Ia(t,e,n)}}function Y7(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MP),e.forEach(function(i){var r=OP.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ss(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yi=a.stateNode,Rs=!1;break e;case 3:yi=a.stateNode.containerInfo,Rs=!0;break e;case 4:yi=a.stateNode.containerInfo,Rs=!0;break e}a=a.return}if(yi===null)throw Error(Te(160));qT(s,o,r),yi=null,Rs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Pn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YT(e,t),e=e.sibling}function YT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ss(e,t),so(t),i&4){try{nd(3,t,t.return),Pm(3,t)}catch(S){Pn(t,t.return,S)}try{nd(5,t,t.return)}catch(S){Pn(t,t.return,S)}}break;case 1:Ss(e,t),so(t),i&512&&n!==null&&kc(n,n.return);break;case 5:if(Ss(e,t),so(t),i&512&&n!==null&&kc(n,n.return),t.flags&32){var r=t.stateNode;try{gd(r,"")}catch(S){Pn(t,t.return,S)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AC(r,s),$5(a,o);var u=$5(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?xC(r,d):h==="dangerouslySetInnerHTML"?vC(r,d):h==="children"?gd(r,d):$6(r,h,d,u)}switch(a){case"input":Y5(r,s);break;case"textarea":mC(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?Xc(r,!!s.multiple,A,!1):p!==!!s.multiple&&(s.defaultValue!=null?Xc(r,!!s.multiple,s.defaultValue,!0):Xc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Id]=s}catch(S){Pn(t,t.return,S)}}break;case 6:if(Ss(e,t),so(t),i&4){if(t.stateNode===null)throw Error(Te(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(S){Pn(t,t.return,S)}}break;case 3:if(Ss(e,t),so(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ed(e.containerInfo)}catch(S){Pn(t,t.return,S)}break;case 4:Ss(e,t),so(t);break;case 13:Ss(e,t),so(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(L8=zn())),i&4&&Y7(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Fi=(u=Fi)||h,Ss(e,t),Fi=u):Ss(e,t),so(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ze=t,h=t.child;h!==null;){for(d=ze=h;ze!==null;){switch(p=ze,A=p.child,p.tag){case 0:case 11:case 14:case 15:nd(4,p,p.return);break;case 1:kc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(S){Pn(i,n,S)}}break;case 5:kc(p,p.return);break;case 22:if(p.memoizedState!==null){j7(d);continue}}A!==null?(A.return=p,ze=A):j7(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yC("display",o))}catch(S){Pn(t,t.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){Pn(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ss(e,t),so(t),i&4&&Y7(t);break;case 21:break;default:Ss(e,t),so(t)}}function so(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XT(n)){var i=n;break e}n=n.return}throw Error(Te(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(gd(r,""),i.flags&=-33);var s=q7(t);Rv(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=q7(t);Mv(t,a,o);break;default:throw Error(Te(161))}}catch(l){Pn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bP(t,e,n){ze=t,KT(t)}function KT(t,e,n){for(var i=(t.mode&1)!==0;ze!==null;){var r=ze,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||J0;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Fi;a=J0;var u=Fi;if(J0=o,(Fi=l)&&!u)for(ze=r;ze!==null;)o=ze,l=o.child,o.tag===22&&o.memoizedState!==null?J7(r):l!==null?(l.return=o,ze=l):J7(r);for(;s!==null;)ze=s,KT(s),s=s.sibling;ze=r,J0=a,Fi=u}K7(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ze=s):K7(t)}}function K7(t){for(;ze!==null;){var e=ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fi||Pm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Fi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ws(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L7(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}L7(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ed(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Fi||e.flags&512&&wv(e)}catch(p){Pn(e,e.return,p)}}if(e===t){ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,ze=n;break}ze=e.return}}function j7(t){for(;ze!==null;){var e=ze;if(e===t){ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ze=n;break}ze=e.return}}function J7(t){for(;ze!==null;){var e=ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pm(4,e)}catch(l){Pn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Pn(e,r,l)}}var s=e.return;try{wv(e)}catch(l){Pn(e,s,l)}break;case 5:var o=e.return;try{wv(e)}catch(l){Pn(e,o,l)}}}catch(l){Pn(e,e.return,l)}if(e===t){ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ze=a;break}ze=e.return}}var BP=Math.ceil,KA=ua.ReactCurrentDispatcher,b8=ua.ReactCurrentOwner,os=ua.ReactCurrentBatchConfig,Ht=0,Ai=null,Kn=null,Ei=0,_r=0,Qc=ml(0),ri=0,Ld=null,yu=0,Dm=0,B8=0,id=null,rr=null,L8=0,dh=1/0,Xo=null,jA=!1,bv=null,Ja=null,Z0=!1,Va=null,JA=0,rd=0,Bv=null,fA=-1,dA=0;function Ki(){return Ht&6?zn():fA!==-1?fA:fA=zn()}function Za(t){return t.mode&1?Ht&2&&Ei!==0?Ei&-Ei:pP.transition!==null?(dA===0&&(dA=LC()),dA):(t=Zt,t!==0||(t=window.event,t=t===void 0?16:kC(t.type)),t):1}function Ds(t,e,n,i){if(50<rd)throw rd=0,Bv=null,Error(Te(185));up(t,n,i),(!(Ht&2)||t!==Ai)&&(t===Ai&&(!(Ht&2)&&(Dm|=n),ri===4&&za(t,Ei)),ur(t,i),n===1&&Ht===0&&!(e.mode&1)&&(dh=zn()+500,bm&&gl()))}function ur(t,e){var n=t.callbackNode;pL(t,e);var i=DA(t,t===Ai?Ei:0);if(i===0)n!==null&&o7(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&o7(n),e===1)t.tag===0?dP(Z7.bind(null,t)):rT(Z7.bind(null,t)),uP(function(){!(Ht&6)&&gl()}),n=null;else{switch(PC(i)){case 1:n=r8;break;case 4:n=bC;break;case 16:n=PA;break;case 536870912:n=BC;break;default:n=PA}n=iI(n,jT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jT(t,e){if(fA=-1,dA=0,Ht&6)throw Error(Te(327));var n=t.callbackNode;if(Jc()&&t.callbackNode!==n)return null;var i=DA(t,t===Ai?Ei:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ZA(t,i);else{e=i;var r=Ht;Ht|=2;var s=ZT();(Ai!==t||Ei!==e)&&(Xo=null,dh=zn()+500,cu(t,e));do try{DP();break}catch(a){JT(t,a)}while(1);g8(),KA.current=s,Ht=r,Kn!==null?e=0:(Ai=null,Ei=0,e=ri)}if(e!==0){if(e===2&&(r=rv(t),r!==0&&(i=r,e=Lv(t,r))),e===1)throw n=Ld,cu(t,0),za(t,i),ur(t,zn()),n;if(e===6)za(t,i);else{if(r=t.current.alternate,!(i&30)&&!LP(r)&&(e=ZA(t,i),e===2&&(s=rv(t),s!==0&&(i=s,e=Lv(t,s))),e===1))throw n=Ld,cu(t,0),za(t,i),ur(t,zn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Te(345));case 2:ql(t,rr,Xo);break;case 3:if(za(t,i),(i&130023424)===i&&(e=L8+500-zn(),10<e)){if(DA(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ki(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=fv(ql.bind(null,t,rr,Xo),e);break}ql(t,rr,Xo);break;case 4:if(za(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ps(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=zn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*BP(i/1960))-i,10<i){t.timeoutHandle=fv(ql.bind(null,t,rr,Xo),i);break}ql(t,rr,Xo);break;case 5:ql(t,rr,Xo);break;default:throw Error(Te(329))}}}return ur(t,zn()),t.callbackNode===n?jT.bind(null,t):null}function Lv(t,e){var n=id;return t.current.memoizedState.isDehydrated&&(cu(t,e).flags|=256),t=ZA(t,e),t!==2&&(e=rr,rr=n,e!==null&&Pv(e)),t}function Pv(t){rr===null?rr=t:rr.push.apply(rr,t)}function LP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Us(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function za(t,e){for(e&=~B8,e&=~Dm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ps(e),i=1<<n;t[n]=-1,e&=~i}}function Z7(t){if(Ht&6)throw Error(Te(327));Jc();var e=DA(t,0);if(!(e&1))return ur(t,zn()),null;var n=ZA(t,e);if(t.tag!==0&&n===2){var i=rv(t);i!==0&&(e=i,n=Lv(t,i))}if(n===1)throw n=Ld,cu(t,0),za(t,e),ur(t,zn()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ql(t,rr,Xo),ur(t,zn()),null}function P8(t,e){var n=Ht;Ht|=1;try{return t(e)}finally{Ht=n,Ht===0&&(dh=zn()+500,bm&&gl())}}function xu(t){Va!==null&&Va.tag===0&&!(Ht&6)&&Jc();var e=Ht;Ht|=1;var n=os.transition,i=Zt;try{if(os.transition=null,Zt=1,t)return t()}finally{Zt=i,os.transition=n,Ht=e,!(Ht&6)&&gl()}}function D8(){_r=Qc.current,An(Qc)}function cu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lP(n)),Kn!==null)for(n=Kn.return;n!==null;){var i=n;switch(p8(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&kA();break;case 3:hh(),An(ar),An(Oi),_8();break;case 5:S8(i);break;case 4:hh();break;case 13:An(En);break;case 19:An(En);break;case 10:v8(i.type._context);break;case 22:case 23:D8()}n=n.return}if(Ai=t,Kn=t=$a(t.current,null),Ei=_r=e,ri=0,Ld=null,B8=Dm=yu=0,rr=id=null,nu!==null){for(e=0;e<nu.length;e++)if(n=nu[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}nu=null}return t}function JT(t,e){do{var n=Kn;try{if(g8(),uA.current=YA,qA){for(var i=Tn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}qA=!1}if(vu=0,fi=ei=Tn=null,td=!1,Rd=0,b8.current=null,n===null||n.return===null){ri=1,Ld=e,Kn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ei,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var A=k7(o);if(A!==null){A.flags&=-257,Q7(A,o,a,s,e),A.mode&1&&O7(s,u,e),e=A,l=u;var g=e.updateQueue;if(g===null){var S=new Set;S.add(l),e.updateQueue=S}else g.add(l);break e}else{if(!(e&1)){O7(s,u,e),N8();break e}l=Error(Te(426))}}else if(yn&&a.mode&1){var E=k7(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Q7(E,o,a,s,e),A8(fh(l,a));break e}}s=l=fh(l,a),ri!==4&&(ri=2),id===null?id=[s]:id.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=DT(s,l,e);B7(s,m);break e;case 1:a=l;var x=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ja===null||!Ja.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=NT(s,a,e);B7(s,C);break e}}s=s.return}while(s!==null)}eI(n)}catch(I){e=I,Kn===n&&n!==null&&(Kn=n=n.return);continue}break}while(1)}function ZT(){var t=KA.current;return KA.current=YA,t===null?YA:t}function N8(){(ri===0||ri===3||ri===2)&&(ri=4),Ai===null||!(yu&268435455)&&!(Dm&268435455)||za(Ai,Ei)}function ZA(t,e){var n=Ht;Ht|=2;var i=ZT();(Ai!==t||Ei!==e)&&(Xo=null,cu(t,e));do try{PP();break}catch(r){JT(t,r)}while(1);if(g8(),Ht=n,KA.current=i,Kn!==null)throw Error(Te(261));return Ai=null,Ei=0,ri}function PP(){for(;Kn!==null;)$T(Kn)}function DP(){for(;Kn!==null&&!sL();)$T(Kn)}function $T(t){var e=nI(t.alternate,t,_r);t.memoizedProps=t.pendingProps,e===null?eI(t):Kn=e,b8.current=null}function eI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wP(n,e),n!==null){n.flags&=32767,Kn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ri=6,Kn=null;return}}else if(n=IP(n,e,_r),n!==null){Kn=n;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=t}while(e!==null);ri===0&&(ri=5)}function ql(t,e,n){var i=Zt,r=os.transition;try{os.transition=null,Zt=1,NP(t,e,n,i)}finally{os.transition=r,Zt=i}return null}function NP(t,e,n,i){do Jc();while(Va!==null);if(Ht&6)throw Error(Te(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(AL(t,s),t===Ai&&(Kn=Ai=null,Ei=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Z0||(Z0=!0,iI(PA,function(){return Jc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=os.transition,os.transition=null;var o=Zt;Zt=1;var a=Ht;Ht|=4,b8.current=null,RP(t,n),YT(n,t),tP(cv),NA=!!uv,cv=uv=null,t.current=n,bP(n),oL(),Ht=a,Zt=o,os.transition=s}else t.current=n;if(Z0&&(Z0=!1,Va=t,JA=r),s=t.pendingLanes,s===0&&(Ja=null),uL(n.stateNode),ur(t,zn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(jA)throw jA=!1,t=bv,bv=null,t;return JA&1&&t.tag!==0&&Jc(),s=t.pendingLanes,s&1?t===Bv?rd++:(rd=0,Bv=t):rd=0,gl(),null}function Jc(){if(Va!==null){var t=PC(JA),e=os.transition,n=Zt;try{if(os.transition=null,Zt=16>t?16:t,Va===null)var i=!1;else{if(t=Va,Va=null,JA=0,Ht&6)throw Error(Te(331));var r=Ht;for(Ht|=4,ze=t.current;ze!==null;){var s=ze,o=s.child;if(ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ze=u;ze!==null;){var h=ze;switch(h.tag){case 0:case 11:case 15:nd(8,h,s)}var d=h.child;if(d!==null)d.return=h,ze=d;else for(;ze!==null;){h=ze;var p=h.sibling,A=h.return;if(WT(h),h===u){ze=null;break}if(p!==null){p.return=A,ze=p;break}ze=A}}}var g=s.alternate;if(g!==null){var S=g.child;if(S!==null){g.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ze=o;else e:for(;ze!==null;){if(s=ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nd(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ze=m;break e}ze=s.return}}var x=t.current;for(ze=x;ze!==null;){o=ze;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ze=y;else e:for(o=x;ze!==null;){if(a=ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pm(9,a)}}catch(I){Pn(a,a.return,I)}if(a===o){ze=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ze=C;break e}ze=a.return}}if(Ht=r,gl(),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot(Tm,t)}catch{}i=!0}return i}finally{Zt=n,os.transition=e}}return!1}function $7(t,e,n){e=fh(n,e),e=DT(t,e,1),t=ja(t,e,1),e=Ki(),t!==null&&(up(t,1,e),ur(t,e))}function Pn(t,e,n){if(t.tag===3)$7(t,t,n);else for(;e!==null;){if(e.tag===3){$7(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ja===null||!Ja.has(i))){t=fh(n,t),t=NT(e,t,1),e=ja(e,t,1),t=Ki(),e!==null&&(up(e,1,t),ur(e,t));break}}e=e.return}}function FP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ki(),t.pingedLanes|=t.suspendedLanes&n,Ai===t&&(Ei&n)===n&&(ri===4||ri===3&&(Ei&130023424)===Ei&&500>zn()-L8?cu(t,0):B8|=n),ur(t,e)}function tI(t,e){e===0&&(t.mode&1?(e=z0,z0<<=1,!(z0&130023424)&&(z0=4194304)):e=1);var n=Ki();t=ra(t,e),t!==null&&(up(t,e,n),ur(t,n))}function UP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tI(t,n)}function OP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Te(314))}i!==null&&i.delete(e),tI(t,n)}var nI;nI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ar.current)or=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return or=!1,TP(t,e,n);or=!!(t.flags&131072)}else or=!1,yn&&e.flags&1048576&&sT(e,zA,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;hA(t,e),t=e.pendingProps;var r=lh(e,Oi.current);jc(e,n),r=T8(null,e,i,t,r,n);var s=I8();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(i)?(s=!0,QA(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,x8(e),r.updater=Bm,e.stateNode=r,r._reactInternals=e,yv(e,i,t,n),e=Sv(null,e,i,!0,s,n)):(e.tag=0,yn&&s&&d8(e),qi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(hA(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=QP(i),t=ws(i,t),r){case 0:e=Ev(null,e,i,t,n);break e;case 1:e=H7(null,e,i,t,n);break e;case 11:e=G7(null,e,i,t,n);break e;case 14:e=z7(null,e,i,ws(i.type,t),n);break e}throw Error(Te(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ws(i,r),Ev(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ws(i,r),H7(t,e,i,r,n);case 3:e:{if(kT(e),t===null)throw Error(Te(387));i=e.pendingProps,s=e.memoizedState,r=s.element,uT(t,e),WA(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=fh(Error(Te(423)),e),e=V7(t,e,i,n,r);break e}else if(i!==r){r=fh(Error(Te(424)),e),e=V7(t,e,i,n,r);break e}else for(Tr=Ka(e.stateNode.containerInfo.firstChild),Mr=e,yn=!0,bs=null,n=dT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uh(),i===r){e=sa(t,e,n);break e}qi(t,e,i,n)}e=e.child}return e;case 5:return pT(e),t===null&&mv(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,hv(i,r)?o=null:s!==null&&hv(i,s)&&(e.flags|=32),OT(t,e),qi(t,e,o,n),e.child;case 6:return t===null&&mv(e),null;case 13:return QT(t,e,n);case 4:return E8(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ch(e,null,i,n):qi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ws(i,r),G7(t,e,i,r,n);case 7:return qi(t,e,e.pendingProps,n),e.child;case 8:return qi(t,e,e.pendingProps.children,n),e.child;case 12:return qi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ln(HA,i._currentValue),i._currentValue=o,s!==null)if(Us(s.value,o)){if(s.children===r.children&&!ar.current){e=sa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=$o(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,jc(e,n),r=us(r),i=i(r),e.flags|=1,qi(t,e,i,n),e.child;case 14:return i=e.type,r=ws(i,e.pendingProps),r=ws(i.type,r),z7(t,e,i,r,n);case 15:return FT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ws(i,r),hA(t,e),e.tag=1,lr(i)?(t=!0,QA(e)):t=!1,jc(e,n),hT(e,i,r),yv(e,i,r,n),Sv(null,e,i,!0,t,n);case 19:return GT(t,e,n);case 22:return UT(t,e,n)}throw Error(Te(156,e.tag))};function iI(t,e){return RC(t,e)}function kP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(t,e,n,i){return new kP(t,e,n,i)}function F8(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QP(t){if(typeof t=="function")return F8(t)?1:0;if(t!=null){if(t=t.$$typeof,t===t8)return 11;if(t===n8)return 14}return 2}function $a(t,e){var n=t.alternate;return n===null?(n=rs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pA(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")F8(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bc:return hu(n.children,r,s,e);case e8:o=8,r|=8;break;case H5:return t=rs(12,n,e,r|2),t.elementType=H5,t.lanes=s,t;case V5:return t=rs(13,n,e,r),t.elementType=V5,t.lanes=s,t;case W5:return t=rs(19,n,e,r),t.elementType=W5,t.lanes=s,t;case fC:return Nm(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cC:o=10;break e;case hC:o=9;break e;case t8:o=11;break e;case n8:o=14;break e;case Oa:o=16,i=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=rs(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function hu(t,e,n,i){return t=rs(7,t,i,e),t.lanes=n,t}function Nm(t,e,n,i){return t=rs(22,t,i,e),t.elementType=fC,t.lanes=n,t.stateNode={isHidden:!1},t}function _1(t,e,n){return t=rs(6,t,null,e),t.lanes=n,t}function C1(t,e,n){return e=rs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GP(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=r1(0),this.expirationTimes=r1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r1(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function U8(t,e,n,i,r,s,o,a,l){return t=new GP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},x8(s),t}function zP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function rI(t){if(!t)return sl;t=t._reactInternals;e:{if(bu(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(lr(n))return iT(t,n,e)}return e}function sI(t,e,n,i,r,s,o,a,l){return t=U8(n,i,!0,t,r,s,o,a,l),t.context=rI(null),n=t.current,i=Ki(),r=Za(n),s=$o(i,r),s.callback=e??null,ja(n,s,r),t.current.lanes=r,up(t,r,i),ur(t,i),t}function Fm(t,e,n,i){var r=e.current,s=Ki(),o=Za(r);return n=rI(n),e.context===null?e.context=n:e.pendingContext=n,e=$o(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ja(r,e,o),t!==null&&(Ds(t,r,o,s),lA(t,r,o)),o}function $A(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function O8(t,e){eE(t,e),(t=t.alternate)&&eE(t,e)}function HP(){return null}var oI=typeof reportError=="function"?reportError:function(t){console.error(t)};function k8(t){this._internalRoot=t}Um.prototype.render=k8.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));Fm(t,e,null,null)};Um.prototype.unmount=k8.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xu(function(){Fm(null,t,null,null)}),e[ia]=null}};function Um(t){this._internalRoot=t}Um.prototype.unstable_scheduleHydration=function(t){if(t){var e=FC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ga.length&&e!==0&&e<Ga[n].priority;n++);Ga.splice(n,0,t),n===0&&OC(t)}};function Q8(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tE(){}function VP(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=$A(o);s.call(u)}}var o=sI(e,i,t,0,null,!1,!1,"",tE);return t._reactRootContainer=o,t[ia]=o.current,Cd(t.nodeType===8?t.parentNode:t),xu(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=$A(l);a.call(u)}}var l=U8(t,0,!1,null,null,!1,!1,"",tE);return t._reactRootContainer=l,t[ia]=l.current,Cd(t.nodeType===8?t.parentNode:t),xu(function(){Fm(e,l,n,i)}),l}function km(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=$A(o);a.call(l)}}Fm(e,o,t,r)}else o=VP(n,e,t,r,i);return $A(o)}DC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gf(e.pendingLanes);n!==0&&(s8(e,n|1),ur(e,zn()),!(Ht&6)&&(dh=zn()+500,gl()))}break;case 13:xu(function(){var i=ra(t,1);if(i!==null){var r=Ki();Ds(i,t,1,r)}}),O8(t,1)}};o8=function(t){if(t.tag===13){var e=ra(t,134217728);if(e!==null){var n=Ki();Ds(e,t,134217728,n)}O8(t,134217728)}};NC=function(t){if(t.tag===13){var e=Za(t),n=ra(t,e);if(n!==null){var i=Ki();Ds(n,t,e,i)}O8(t,e)}};FC=function(){return Zt};UC=function(t,e){var n=Zt;try{return Zt=t,e()}finally{Zt=n}};tv=function(t,e,n){switch(e){case"input":if(Y5(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Rm(i);if(!r)throw Error(Te(90));pC(i),Y5(i,r)}}}break;case"textarea":mC(t,n);break;case"select":e=n.value,e!=null&&Xc(t,!!n.multiple,e,!1)}};_C=P8;CC=xu;var WP={usingClientEntryPoint:!1,Events:[hp,Dc,Rm,EC,SC,P8]},yf={findFiberByHostInstance:tu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},XP={bundleType:yf.bundleType,version:yf.version,rendererPackageName:yf.rendererPackageName,rendererConfig:yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wC(t),t===null?null:t.stateNode},findFiberByHostInstance:yf.findFiberByHostInstance||HP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$0.isDisabled&&$0.supportsFiber)try{Tm=$0.inject(XP),po=$0}catch{}}Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WP;Fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q8(e))throw Error(Te(200));return zP(t,e,null,n)};Fr.createRoot=function(t,e){if(!Q8(t))throw Error(Te(299));var n=!1,i="",r=oI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=U8(t,1,!1,null,null,n,!1,i,r),t[ia]=e.current,Cd(t.nodeType===8?t.parentNode:t),new k8(e)};Fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=wC(e),t=t===null?null:t.stateNode,t};Fr.flushSync=function(t){return xu(t)};Fr.hydrate=function(t,e,n){if(!Om(e))throw Error(Te(200));return km(null,t,e,!0,n)};Fr.hydrateRoot=function(t,e,n){if(!Q8(t))throw Error(Te(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=oI;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sI(e,null,t,1,n??null,r,!1,s,o),t[ia]=e.current,Cd(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Um(e)};Fr.render=function(t,e,n){if(!Om(e))throw Error(Te(200));return km(null,t,e,!1,n)};Fr.unmountComponentAtNode=function(t){if(!Om(t))throw Error(Te(40));return t._reactRootContainer?(xu(function(){km(null,null,t,!1,function(){t._reactRootContainer=null,t[ia]=null})}),!0):!1};Fr.unstable_batchedUpdates=P8;Fr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Om(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return km(t,e,n,!1,i)};Fr.version="18.2.0-next-9e3b772b8-20220608";function aI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aI)}catch(t){console.error(t)}}aI(),sC.exports=Fr;var qP=sC.exports,nE=qP;G5.createRoot=nE.createRoot,G5.hydrateRoot=nE.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ca="154",YP={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},KP={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lI=0,Dv=1,uI=2,jP=3,cI=0,Qm=1,sd=2,Ms=3,_o=0,Ui=1,Ls=2,JP=2,Nt=0,mo=1,Pd=2,Nv=3,Fv=4,Dd=5,Cr=100,hI=101,fI=102,Uv=103,Ov=104,ph=200,dI=201,pI=202,AI=203,Nd=204,Fd=205,Gm=206,mI=207,zm=208,gI=209,vI=210,yI=0,xI=1,EI=2,em=3,SI=4,_I=5,CI=6,TI=7,dp=0,II=1,wI=2,Rr=0,MI=1,RI=2,bI=3,G8=4,BI=5,Hm=300,ol=301,al=302,Ud=303,Od=304,Ph=306,hs=1e3,Sn=1001,Ah=1002,vt=1003,kd=1004,ZP=1004,Zc=1005,$P=1005,nn=1006,Vm=1007,eD=1007,fs=1008,tD=1008,ni=1009,LI=1010,PI=1011,Bu=1012,z8=1013,Jo=1014,Yi=1015,Hn=1016,H8=1017,V8=1018,ea=1020,DI=1021,Un=1023,W8=1024,NI=1025,el=1026,ll=1027,ru=1028,X8=1029,Gc=1030,q8=1031,Y8=1033,$c=33776,AA=33777,mA=33778,eh=33779,Qd=35840,kv=35841,Gd=35842,Qv=35843,Wm=36196,zd=37492,Hd=37496,Vd=37808,Gv=37809,zv=37810,Hv=37811,Vv=37812,Wv=37813,Xv=37814,qv=37815,Yv=37816,Kv=37817,jv=37818,Jv=37819,Zv=37820,$v=37821,th=36492,FI=36283,e6=36284,t6=36285,n6=36286,UI=2200,OI=2201,kI=2202,mh=2300,Eu=2301,gA=2302,su=2400,ou=2401,Wd=2402,Xm=2500,K8=2501,QI=0,j8=1,tm=2,J8=3e3,tl=3001,GI=3200,Z8=3201,vl=0,zI=1,nl="",It="srgb",Os="srgb-linear",$8="display-p3",nD=0,vA=7680,iD=7681,rD=7682,sD=7683,oD=34055,aD=34056,lD=5386,uD=512,cD=513,hD=514,fD=515,dD=516,pD=517,AD=518,HI=519,VI=512,WI=513,XI=514,qI=515,YI=516,KI=517,jI=518,JI=519,Xd=35044,yA=35048,mD=35040,gD=35045,vD=35049,yD=35041,xD=35046,ED=35050,SD=35042,_D="100",i6="300 es",nm=1035,co=2e3,qd=2001;class ha{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Di=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let iE=1234567;const fu=Math.PI/180,gh=180/Math.PI;function br(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Di[t&255]+Di[t>>8&255]+Di[t>>16&255]+Di[t>>24&255]+"-"+Di[e&255]+Di[e>>8&255]+"-"+Di[e>>16&15|64]+Di[e>>24&255]+"-"+Di[n&63|128]+Di[n>>8&255]+"-"+Di[n>>16&255]+Di[n>>24&255]+Di[i&255]+Di[i>>8&255]+Di[i>>16&255]+Di[i>>24&255]).toLowerCase()}function Dn(t,e,n){return Math.max(e,Math.min(n,t))}function e4(t,e){return(t%e+e)%e}function CD(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function TD(t,e,n){return t!==e?(n-t)/(e-t):0}function od(t,e,n){return(1-n)*t+n*e}function ID(t,e,n,i){return od(t,e,1-Math.exp(-n*i))}function wD(t,e=1){return e-Math.abs(e4(t,e*2)-e)}function MD(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function RD(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function bD(t,e){return t+Math.floor(Math.random()*(e-t+1))}function BD(t,e){return t+Math.random()*(e-t)}function LD(t){return t*(.5-Math.random())}function PD(t){t!==void 0&&(iE=t);let e=iE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function DD(t){return t*fu}function ND(t){return t*gh}function r6(t){return(t&t-1)===0&&t!==0}function ZI(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function im(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function FD(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),A=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":t.set(a*h,l*d,l*p,a*u);break;case"YZY":t.set(l*p,a*h,l*d,a*u);break;case"ZXZ":t.set(l*d,l*p,a*h,a*u);break;case"XZX":t.set(a*h,l*g,l*A,a*u);break;case"YXY":t.set(l*A,a*h,l*g,a*u);break;case"ZYZ":t.set(l*g,l*A,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ir(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Lt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const nh={DEG2RAD:fu,RAD2DEG:gh,generateUUID:br,clamp:Dn,euclideanModulo:e4,mapLinear:CD,inverseLerp:TD,lerp:od,damp:ID,pingpong:wD,smoothstep:MD,smootherstep:RD,randInt:bD,randFloat:BD,randFloatSpread:LD,seededRandom:PD,degToRad:DD,radToDeg:ND,isPowerOfTwo:r6,ceilPowerOfTwo:ZI,floorPowerOfTwo:im,setQuaternionFromProperEuler:FD,normalize:Lt,denormalize:Ir};class oe{constructor(e=0,n=0){oe.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Bt{constructor(e,n,i,r,s,o,a,l,u){Bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,u)}set(e,n,i,r,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=n,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],h=i[4],d=i[7],p=i[2],A=i[5],g=i[8],S=r[0],E=r[3],m=r[6],x=r[1],y=r[4],C=r[7],I=r[2],M=r[5],w=r[8];return s[0]=o*S+a*x+l*I,s[3]=o*E+a*y+l*M,s[6]=o*m+a*C+l*w,s[1]=u*S+h*x+d*I,s[4]=u*E+h*y+d*M,s[7]=u*m+h*C+d*w,s[2]=p*S+A*x+g*I,s[5]=p*E+A*y+g*M,s[8]=p*m+A*C+g*w,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return n*o*h-n*a*u-i*s*h+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=h*o-a*u,p=a*l-h*s,A=u*s-o*l,g=n*d+i*p+r*A;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/g;return e[0]=d*S,e[1]=(r*u-h*i)*S,e[2]=(a*i-r*o)*S,e[3]=p*S,e[4]=(h*n-r*l)*S,e[5]=(r*s-a*n)*S,e[6]=A*S,e[7]=(i*l-u*n)*S,e[8]=(o*n-i*s)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(T1.makeScale(e,n)),this}rotate(e){return this.premultiply(T1.makeRotation(-e)),this}translate(e,n){return this.premultiply(T1.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const T1=new Bt;function $I(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const UD={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zc(t,e){return new UD[t](e)}function Yd(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const rE={};function ad(t){t in rE||(rE[t]=!0,console.warn(t))}function ih(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function I1(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const OD=new Bt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),kD=new Bt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function QD(t){return t.convertSRGBToLinear().applyMatrix3(kD)}function GD(t){return t.applyMatrix3(OD).convertLinearToSRGB()}const zD={[Os]:t=>t,[It]:t=>t.convertSRGBToLinear(),[$8]:QD},HD={[Os]:t=>t,[It]:t=>t.convertLinearToSRGB(),[$8]:GD},jr={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Os},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=zD[e],r=HD[n];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let ec;class t4{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ec===void 0&&(ec=Yd("canvas")),ec.width=e.width,ec.height=e.height;const i=ec.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=ec}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Yd("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=ih(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(ih(n[i]/255)*255):n[i]=ih(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let VD=0;class au{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:VD++}),this.uuid=br(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(w1(r[o].image)):s.push(w1(r[o]))}else s=w1(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function w1(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?t4.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let WD=0;class mn extends ha{constructor(e=mn.DEFAULT_IMAGE,n=mn.DEFAULT_MAPPING,i=Sn,r=Sn,s=nn,o=fs,a=Un,l=ni,u=mn.DEFAULT_ANISOTROPY,h=nl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:WD++}),this.uuid=br(),this.name="",this.source=new au(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new oe(0,0),this.repeat=new oe(1,1),this.center=new oe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(ad("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===tl?It:nl),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Hm)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hs:e.x=e.x-Math.floor(e.x);break;case Sn:e.x=e.x<0?0:1;break;case Ah:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hs:e.y=e.y-Math.floor(e.y);break;case Sn:e.y=e.y<0?0:1;break;case Ah:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return ad("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===It?tl:J8}set encoding(e){ad("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===tl?It:nl}}mn.DEFAULT_IMAGE=null;mn.DEFAULT_MAPPING=Hm;mn.DEFAULT_ANISOTROPY=1;class kt{constructor(e=0,n=0,i=0,r=1){kt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,u=l[0],h=l[4],d=l[8],p=l[1],A=l[5],g=l[9],S=l[2],E=l[6],m=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-S)<.01&&Math.abs(g-E)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+S)<.1&&Math.abs(g+E)<.1&&Math.abs(u+A+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const y=(u+1)/2,C=(A+1)/2,I=(m+1)/2,M=(h+p)/4,w=(d+S)/4,L=(g+E)/4;return y>C&&y>I?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=M/i,s=w/i):C>I?C<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),i=M/r,s=L/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=w/s,r=L/s),this.set(i,r,s,n),this}let x=Math.sqrt((E-g)*(E-g)+(d-S)*(d-S)+(p-h)*(p-h));return Math.abs(x)<.001&&(x=1),this.x=(E-g)/x,this.y=(d-S)/x,this.z=(p-h)/x,this.w=Math.acos((u+A+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class rn extends ha{constructor(e=1,n=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new kt(0,0,e,n),this.scissorTest=!1,this.viewport=new kt(0,0,e,n);const r={width:e,height:n,depth:1};i.encoding!==void 0&&(ad("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===tl?It:nl),this.texture=new mn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:nn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new au(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class qm extends mn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=vt,this.minFilter=vt,this.wrapR=Sn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class XD extends rn{constructor(e=1,n=1,i=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new qm(null,e,n,i),this.texture.isRenderTargetTexture=!0}}let n4=class extends mn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=vt,this.minFilter=vt,this.wrapR=Sn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};class qD extends rn{constructor(e=1,n=1,i=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new n4(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class YD extends rn{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Si{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],u=i[r+1],h=i[r+2],d=i[r+3];const p=s[o+0],A=s[o+1],g=s[o+2],S=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=h,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=A,e[n+2]=g,e[n+3]=S;return}if(d!==S||l!==p||u!==A||h!==g){let E=1-a;const m=l*p+u*A+h*g+d*S,x=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){const I=Math.sqrt(y),M=Math.atan2(I,m*x);E=Math.sin(E*M)/I,a=Math.sin(a*M)/I}const C=a*x;if(l=l*E+p*C,u=u*E+A*C,h=h*E+g*C,d=d*E+S*C,E===1-a){const I=1/Math.sqrt(l*l+u*u+h*h+d*d);l*=I,u*=I,h*=I,d*=I}}e[n]=l,e[n+1]=u,e[n+2]=h,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],h=i[r+3],d=s[o],p=s[o+1],A=s[o+2],g=s[o+3];return e[n]=a*g+h*d+l*A-u*p,e[n+1]=l*g+h*p+u*d-a*A,e[n+2]=u*g+h*A+a*p-l*d,e[n+3]=h*g-a*d-l*p-u*A,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),h=a(r/2),d=a(s/2),p=l(i/2),A=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*h*d+u*A*g,this._y=u*A*d-p*h*g,this._z=u*h*g+p*A*d,this._w=u*h*d-p*A*g;break;case"YXZ":this._x=p*h*d+u*A*g,this._y=u*A*d-p*h*g,this._z=u*h*g-p*A*d,this._w=u*h*d+p*A*g;break;case"ZXY":this._x=p*h*d-u*A*g,this._y=u*A*d+p*h*g,this._z=u*h*g+p*A*d,this._w=u*h*d-p*A*g;break;case"ZYX":this._x=p*h*d-u*A*g,this._y=u*A*d+p*h*g,this._z=u*h*g-p*A*d,this._w=u*h*d+p*A*g;break;case"YZX":this._x=p*h*d+u*A*g,this._y=u*A*d+p*h*g,this._z=u*h*g-p*A*d,this._w=u*h*d-p*A*g;break;case"XZY":this._x=p*h*d-u*A*g,this._y=u*A*d-p*h*g,this._z=u*h*g+p*A*d,this._w=u*h*d+p*A*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],h=n[6],d=n[10],p=i+a+d;if(p>0){const A=.5/Math.sqrt(p+1);this._w=.25/A,this._x=(h-l)*A,this._y=(s-u)*A,this._z=(o-r)*A}else if(i>a&&i>d){const A=2*Math.sqrt(1+i-a-d);this._w=(h-l)/A,this._x=.25*A,this._y=(r+o)/A,this._z=(s+u)/A}else if(a>d){const A=2*Math.sqrt(1+a-i-d);this._w=(s-u)/A,this._x=(r+o)/A,this._y=.25*A,this._z=(l+h)/A}else{const A=2*Math.sqrt(1+d-i-a);this._w=(o-r)/A,this._x=(s+u)/A,this._y=(l+h)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Dn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,h=n._w;return this._x=i*h+o*a+r*u-s*l,this._y=r*h+o*l+s*a-i*u,this._z=s*h+o*u+i*l-r*a,this._w=o*h-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const A=1-n;return this._w=A*o+n*this._w,this._x=A*i+n*this._x,this._y=A*r+n*this._y,this._z=A*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),d=Math.sin((1-n)*h)/u,p=Math.sin(n*h)/u;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class D{constructor(e=0,n=0,i=0){D.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(sE.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(sE.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*n+o*r-a*i,h=l*i+a*n-s*r,d=l*r+s*i-o*n,p=-s*n-o*i-a*r;return this.x=u*l+p*-s+h*-a-d*-o,this.y=h*l+p*-o+d*-s-u*-a,this.z=d*l+p*-a+u*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return M1.copy(this).projectOnVector(e),this.sub(M1)}reflect(e){return this.sub(M1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const M1=new D,sE=new Si;class As{constructor(e=new D(1/0,1/0,1/0),n=new D(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(ko.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(ko.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=ko.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),tc.copy(e.boundingBox),tc.applyMatrix4(e.matrixWorld),this.union(tc);else{const r=e.geometry;if(r!==void 0)if(n&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)ko.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(ko)}else r.boundingBox===null&&r.computeBoundingBox(),tc.copy(r.boundingBox),tc.applyMatrix4(e.matrixWorld),this.union(tc)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ko),ko.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(xf),e3.subVectors(this.max,xf),nc.subVectors(e.a,xf),ic.subVectors(e.b,xf),rc.subVectors(e.c,xf),wa.subVectors(ic,nc),Ma.subVectors(rc,ic),Nl.subVectors(nc,rc);let n=[0,-wa.z,wa.y,0,-Ma.z,Ma.y,0,-Nl.z,Nl.y,wa.z,0,-wa.x,Ma.z,0,-Ma.x,Nl.z,0,-Nl.x,-wa.y,wa.x,0,-Ma.y,Ma.x,0,-Nl.y,Nl.x,0];return!R1(n,nc,ic,rc,e3)||(n=[1,0,0,0,1,0,0,0,1],!R1(n,nc,ic,rc,e3))?!1:(t3.crossVectors(wa,Ma),n=[t3.x,t3.y,t3.z],R1(n,nc,ic,rc,e3))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ko).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ko).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Oo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Oo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Oo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Oo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Oo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Oo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Oo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Oo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Oo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Oo=[new D,new D,new D,new D,new D,new D,new D,new D],ko=new D,tc=new As,nc=new D,ic=new D,rc=new D,wa=new D,Ma=new D,Nl=new D,xf=new D,e3=new D,t3=new D,Fl=new D;function R1(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Fl.fromArray(t,s);const a=r.x*Math.abs(Fl.x)+r.y*Math.abs(Fl.y)+r.z*Math.abs(Fl.z),l=e.dot(Fl),u=n.dot(Fl),h=i.dot(Fl);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const KD=new As,Ef=new D,b1=new D;class Or{constructor(e=new D,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):KD.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ef.subVectors(e,this.center);const n=Ef.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(Ef,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(b1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ef.copy(e.center).add(b1)),this.expandByPoint(Ef.copy(e.center).sub(b1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Qo=new D,B1=new D,n3=new D,Ra=new D,L1=new D,i3=new D,P1=new D;let Dh=class{constructor(e=new D,n=new D(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Qo)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Qo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Qo.copy(this.origin).addScaledVector(this.direction,n),Qo.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){B1.copy(e).add(n).multiplyScalar(.5),n3.copy(n).sub(e).normalize(),Ra.copy(this.origin).sub(B1);const s=e.distanceTo(n)*.5,o=-this.direction.dot(n3),a=Ra.dot(this.direction),l=-Ra.dot(n3),u=Ra.lengthSq(),h=Math.abs(1-o*o);let d,p,A,g;if(h>0)if(d=o*l-a,p=o*a-l,g=s*h,d>=0)if(p>=-g)if(p<=g){const S=1/h;d*=S,p*=S,A=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),A=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),A=-d*d+p*(p+2*l)+u;else p<=-g?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),A=-d*d+p*(p+2*l)+u):p<=g?(d=0,p=Math.min(Math.max(-s,-l),s),A=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),A=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),A=-d*d+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(B1).addScaledVector(n3,p),A}intersectSphere(e,n){Qo.subVectors(e.center,this.origin);const i=Qo.dot(this.direction),r=Qo.dot(Qo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Qo)!==null}intersectTriangle(e,n,i,r,s){L1.subVectors(n,e),i3.subVectors(i,e),P1.crossVectors(L1,i3);let o=this.direction.dot(P1),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ra.subVectors(this.origin,e);const l=a*this.direction.dot(i3.crossVectors(Ra,i3));if(l<0)return null;const u=a*this.direction.dot(L1.cross(Ra));if(u<0||l+u>o)return null;const h=-a*Ra.dot(P1);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class He{constructor(e,n,i,r,s,o,a,l,u,h,d,p,A,g,S,E){He.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,u,h,d,p,A,g,S,E)}set(e,n,i,r,s,o,a,l,u,h,d,p,A,g,S,E){const m=this.elements;return m[0]=e,m[4]=n,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=u,m[6]=h,m[10]=d,m[14]=p,m[3]=A,m[7]=g,m[11]=S,m[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new He().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/sc.setFromMatrixColumn(e,0).length(),s=1/sc.setFromMatrixColumn(e,1).length(),o=1/sc.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,A=o*d,g=a*h,S=a*d;n[0]=l*h,n[4]=-l*d,n[8]=u,n[1]=A+g*u,n[5]=p-S*u,n[9]=-a*l,n[2]=S-p*u,n[6]=g+A*u,n[10]=o*l}else if(e.order==="YXZ"){const p=l*h,A=l*d,g=u*h,S=u*d;n[0]=p+S*a,n[4]=g*a-A,n[8]=o*u,n[1]=o*d,n[5]=o*h,n[9]=-a,n[2]=A*a-g,n[6]=S+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*h,A=l*d,g=u*h,S=u*d;n[0]=p-S*a,n[4]=-o*d,n[8]=g+A*a,n[1]=A+g*a,n[5]=o*h,n[9]=S-p*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*h,A=o*d,g=a*h,S=a*d;n[0]=l*h,n[4]=g*u-A,n[8]=p*u+S,n[1]=l*d,n[5]=S*u+p,n[9]=A*u-g,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,A=o*u,g=a*l,S=a*u;n[0]=l*h,n[4]=S-p*d,n[8]=g*d+A,n[1]=d,n[5]=o*h,n[9]=-a*h,n[2]=-u*h,n[6]=A*d+g,n[10]=p-S*d}else if(e.order==="XZY"){const p=o*l,A=o*u,g=a*l,S=a*u;n[0]=l*h,n[4]=-d,n[8]=u*h,n[1]=p*d+S,n[5]=o*h,n[9]=A*d-g,n[2]=g*d-A,n[6]=a*h,n[10]=S*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jD,e,JD)}lookAt(e,n,i){const r=this.elements;return Er.subVectors(e,n),Er.lengthSq()===0&&(Er.z=1),Er.normalize(),ba.crossVectors(i,Er),ba.lengthSq()===0&&(Math.abs(i.z)===1?Er.x+=1e-4:Er.z+=1e-4,Er.normalize(),ba.crossVectors(i,Er)),ba.normalize(),r3.crossVectors(Er,ba),r[0]=ba.x,r[4]=r3.x,r[8]=Er.x,r[1]=ba.y,r[5]=r3.y,r[9]=Er.y,r[2]=ba.z,r[6]=r3.z,r[10]=Er.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],h=i[1],d=i[5],p=i[9],A=i[13],g=i[2],S=i[6],E=i[10],m=i[14],x=i[3],y=i[7],C=i[11],I=i[15],M=r[0],w=r[4],L=r[8],R=r[12],B=r[1],F=r[5],X=r[9],G=r[13],q=r[2],Y=r[6],$=r[10],j=r[14],P=r[3],Q=r[7],U=r[11],O=r[15];return s[0]=o*M+a*B+l*q+u*P,s[4]=o*w+a*F+l*Y+u*Q,s[8]=o*L+a*X+l*$+u*U,s[12]=o*R+a*G+l*j+u*O,s[1]=h*M+d*B+p*q+A*P,s[5]=h*w+d*F+p*Y+A*Q,s[9]=h*L+d*X+p*$+A*U,s[13]=h*R+d*G+p*j+A*O,s[2]=g*M+S*B+E*q+m*P,s[6]=g*w+S*F+E*Y+m*Q,s[10]=g*L+S*X+E*$+m*U,s[14]=g*R+S*G+E*j+m*O,s[3]=x*M+y*B+C*q+I*P,s[7]=x*w+y*F+C*Y+I*Q,s[11]=x*L+y*X+C*$+I*U,s[15]=x*R+y*G+C*j+I*O,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],d=e[6],p=e[10],A=e[14],g=e[3],S=e[7],E=e[11],m=e[15];return g*(+s*l*d-r*u*d-s*a*p+i*u*p+r*a*A-i*l*A)+S*(+n*l*A-n*u*p+s*o*p-r*o*A+r*u*h-s*l*h)+E*(+n*u*d-n*a*A-s*o*d+i*o*A+s*a*h-i*u*h)+m*(-r*a*h-n*l*d+n*a*p+r*o*d-i*o*p+i*l*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],A=e[11],g=e[12],S=e[13],E=e[14],m=e[15],x=d*E*u-S*p*u+S*l*A-a*E*A-d*l*m+a*p*m,y=g*p*u-h*E*u-g*l*A+o*E*A+h*l*m-o*p*m,C=h*S*u-g*d*u+g*a*A-o*S*A-h*a*m+o*d*m,I=g*d*l-h*S*l-g*a*p+o*S*p+h*a*E-o*d*E,M=n*x+i*y+r*C+s*I;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/M;return e[0]=x*w,e[1]=(S*p*s-d*E*s-S*r*A+i*E*A+d*r*m-i*p*m)*w,e[2]=(a*E*s-S*l*s+S*r*u-i*E*u-a*r*m+i*l*m)*w,e[3]=(d*l*s-a*p*s-d*r*u+i*p*u+a*r*A-i*l*A)*w,e[4]=y*w,e[5]=(h*E*s-g*p*s+g*r*A-n*E*A-h*r*m+n*p*m)*w,e[6]=(g*l*s-o*E*s-g*r*u+n*E*u+o*r*m-n*l*m)*w,e[7]=(o*p*s-h*l*s+h*r*u-n*p*u-o*r*A+n*l*A)*w,e[8]=C*w,e[9]=(g*d*s-h*S*s-g*i*A+n*S*A+h*i*m-n*d*m)*w,e[10]=(o*S*s-g*a*s+g*i*u-n*S*u-o*i*m+n*a*m)*w,e[11]=(h*a*s-o*d*s-h*i*u+n*d*u+o*i*A-n*a*A)*w,e[12]=I*w,e[13]=(h*S*r-g*d*r+g*i*p-n*S*p-h*i*E+n*d*E)*w,e[14]=(g*a*r-o*S*r-g*i*l+n*S*l+o*i*E-n*a*E)*w,e[15]=(o*d*r-h*a*r+h*i*l-n*d*l-o*i*p+n*a*p)*w,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+i,h*l-r*o,0,u*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,h=o+o,d=a+a,p=s*u,A=s*h,g=s*d,S=o*h,E=o*d,m=a*d,x=l*u,y=l*h,C=l*d,I=i.x,M=i.y,w=i.z;return r[0]=(1-(S+m))*I,r[1]=(A+C)*I,r[2]=(g-y)*I,r[3]=0,r[4]=(A-C)*M,r[5]=(1-(p+m))*M,r[6]=(E+x)*M,r[7]=0,r[8]=(g+y)*w,r[9]=(E-x)*w,r[10]=(1-(p+S))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=sc.set(r[0],r[1],r[2]).length();const o=sc.set(r[4],r[5],r[6]).length(),a=sc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],_s.copy(this);const u=1/s,h=1/o,d=1/a;return _s.elements[0]*=u,_s.elements[1]*=u,_s.elements[2]*=u,_s.elements[4]*=h,_s.elements[5]*=h,_s.elements[6]*=h,_s.elements[8]*=d,_s.elements[9]*=d,_s.elements[10]*=d,n.setFromRotationMatrix(_s),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o,a=co){const l=this.elements,u=2*s/(n-e),h=2*s/(i-r),d=(n+e)/(n-e),p=(i+r)/(i-r);let A,g;if(a===co)A=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===qd)A=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=A,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,i,r,s,o,a=co){const l=this.elements,u=1/(n-e),h=1/(i-r),d=1/(o-s),p=(n+e)*u,A=(i+r)*h;let g,S;if(a===co)g=(o+s)*d,S=-2*d;else if(a===qd)g=s*d,S=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-A,l[2]=0,l[6]=0,l[10]=S,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const sc=new D,_s=new He,jD=new D(0,0,0),JD=new D(1,1,1),ba=new D,r3=new D,Er=new D,oE=new He,aE=new Si;class pp{constructor(e=0,n=0,i=0,r=pp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],h=r[9],d=r[2],p=r[6],A=r[10];switch(n){case"XYZ":this._y=Math.asin(Dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,A),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Dn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,A),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Dn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,A),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Dn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,A),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Dn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,A));break;case"XZY":this._z=Math.asin(-Dn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return oE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(oE,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return aE.setFromEuler(this),this.setFromQuaternion(aE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}pp.DEFAULT_ORDER="XYZ";class du{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ZD=0;const lE=new D,oc=new Si,Go=new He,s3=new D,Sf=new D,$D=new D,eN=new Si,uE=new D(1,0,0),cE=new D(0,1,0),hE=new D(0,0,1),tN={type:"added"},fE={type:"removed"};class Qt extends ha{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ZD++}),this.uuid=br(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qt.DEFAULT_UP.clone();const e=new D,n=new pp,i=new Si,r=new D(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new He},normalMatrix:{value:new Bt}}),this.matrix=new He,this.matrixWorld=new He,this.matrixAutoUpdate=Qt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new du,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return oc.setFromAxisAngle(e,n),this.quaternion.multiply(oc),this}rotateOnWorldAxis(e,n){return oc.setFromAxisAngle(e,n),this.quaternion.premultiply(oc),this}rotateX(e){return this.rotateOnAxis(uE,e)}rotateY(e){return this.rotateOnAxis(cE,e)}rotateZ(e){return this.rotateOnAxis(hE,e)}translateOnAxis(e,n){return lE.copy(e).applyQuaternion(this.quaternion),this.position.add(lE.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(uE,e)}translateY(e){return this.translateOnAxis(cE,e)}translateZ(e){return this.translateOnAxis(hE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Go.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?s3.copy(e):s3.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Sf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Go.lookAt(Sf,s3,this.up):Go.lookAt(s3,Sf,this.up),this.quaternion.setFromRotationMatrix(Go),r&&(Go.extractRotation(r.matrixWorld),oc.setFromRotationMatrix(Go),this.quaternion.premultiply(oc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tN)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(fE)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(fE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Go.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Go.multiply(e.parent.matrixWorld)),e.applyMatrix4(Go),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let i=[];this[e]===n&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,n);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sf,e,$D),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sf,eN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),A=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),A.length>0&&(i.animations=A),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Qt.DEFAULT_UP=new D(0,1,0);Qt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Cs=new D,zo=new D,D1=new D,Ho=new D,ac=new D,lc=new D,dE=new D,N1=new D,F1=new D,U1=new D;let o3=!1;class sr{constructor(e=new D,n=new D,i=new D){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Cs.subVectors(e,n),r.cross(Cs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Cs.subVectors(r,n),zo.subVectors(i,n),D1.subVectors(e,n);const o=Cs.dot(Cs),a=Cs.dot(zo),l=Cs.dot(D1),u=zo.dot(zo),h=zo.dot(D1),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,A=(u*l-a*h)*p,g=(o*h-a*l)*p;return s.set(1-A-g,g,A)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Ho),Ho.x>=0&&Ho.y>=0&&Ho.x+Ho.y<=1}static getUV(e,n,i,r,s,o,a,l){return o3===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),o3=!0),this.getInterpolation(e,n,i,r,s,o,a,l)}static getInterpolation(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,Ho),l.setScalar(0),l.addScaledVector(s,Ho.x),l.addScaledVector(o,Ho.y),l.addScaledVector(a,Ho.z),l}static isFrontFacing(e,n,i,r){return Cs.subVectors(i,n),zo.subVectors(e,n),Cs.cross(zo).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Cs.subVectors(this.c,this.b),zo.subVectors(this.a,this.b),Cs.cross(zo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return sr.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return o3===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),o3=!0),sr.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}getInterpolation(e,n,i,r,s){return sr.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return sr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;ac.subVectors(r,i),lc.subVectors(s,i),N1.subVectors(e,i);const l=ac.dot(N1),u=lc.dot(N1);if(l<=0&&u<=0)return n.copy(i);F1.subVectors(e,r);const h=ac.dot(F1),d=lc.dot(F1);if(h>=0&&d<=h)return n.copy(r);const p=l*d-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),n.copy(i).addScaledVector(ac,o);U1.subVectors(e,s);const A=ac.dot(U1),g=lc.dot(U1);if(g>=0&&A<=g)return n.copy(s);const S=A*u-l*g;if(S<=0&&u>=0&&g<=0)return a=u/(u-g),n.copy(i).addScaledVector(lc,a);const E=h*g-A*d;if(E<=0&&d-h>=0&&A-g>=0)return dE.subVectors(s,r),a=(d-h)/(d-h+(A-g)),n.copy(r).addScaledVector(dE,a);const m=1/(E+S+p);return o=S*m,a=p*m,n.copy(i).addScaledVector(ac,o).addScaledVector(lc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let nN=0;class jn extends ha{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nN++}),this.uuid=br(),this.name="",this.type="Material",this.blending=mo,this.side=_o,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Nd,this.blendDst=Fd,this.blendEquation=Cr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=em,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=HI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=vA,this.stencilZFail=vA,this.stencilZPass=vA,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==mo&&(i.blending=this.blending),this.side!==_o&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const ew={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ts={h:0,s:0,l:0},a3={h:0,s:0,l:0};function O1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Ee{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=It){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,jr.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=jr.workingColorSpace){return this.r=e,this.g=n,this.b=i,jr.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=jr.workingColorSpace){if(e=e4(e,1),n=Dn(n,0,1),i=Dn(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=O1(o,s,e+1/3),this.g=O1(o,s,e),this.b=O1(o,s,e-1/3)}return jr.toWorkingColorSpace(this,r),this}setStyle(e,n=It){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=It){const i=ew[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ih(e.r),this.g=ih(e.g),this.b=ih(e.b),this}copyLinearToSRGB(e){return this.r=I1(e.r),this.g=I1(e.g),this.b=I1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=It){return jr.fromWorkingColorSpace(Ni.copy(this),e),Math.round(Dn(Ni.r*255,0,255))*65536+Math.round(Dn(Ni.g*255,0,255))*256+Math.round(Dn(Ni.b*255,0,255))}getHexString(e=It){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=jr.workingColorSpace){jr.fromWorkingColorSpace(Ni.copy(this),n);const i=Ni.r,r=Ni.g,s=Ni.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=h<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,n=jr.workingColorSpace){return jr.fromWorkingColorSpace(Ni.copy(this),n),e.r=Ni.r,e.g=Ni.g,e.b=Ni.b,e}getStyle(e=It){jr.fromWorkingColorSpace(Ni.copy(this),e);const n=Ni.r,i=Ni.g,r=Ni.b;return e!==It?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(Ts),Ts.h+=e,Ts.s+=n,Ts.l+=i,this.setHSL(Ts.h,Ts.s,Ts.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Ts),e.getHSL(a3);const i=od(Ts.h,a3.h,n),r=od(Ts.s,a3.s,n),s=od(Ts.l,a3.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ni=new Ee;Ee.NAMES=ew;class di extends jn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Yo=iN();function iN(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ir(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Dn(t,-65504,65504),Yo.floatView[0]=t;const e=Yo.uint32View[0],n=e>>23&511;return Yo.baseTable[n]+((e&8388607)>>Yo.shiftTable[n])}function Hf(t){const e=t>>10;return Yo.uint32View[0]=Yo.mantissaTable[Yo.offsetTable[e]+(t&1023)]+Yo.exponentTable[e],Yo.floatView[0]}const rN={toHalfFloat:ir,fromHalfFloat:Hf},Yn=new D,l3=new oe;class jt{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=Xd,this.updateRange={offset:0,count:-1},this.gpuType=Yi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)l3.fromBufferAttribute(this,n),l3.applyMatrix3(e),this.setXY(n,l3.x,l3.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Yn.fromBufferAttribute(this,n),Yn.applyMatrix3(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Yn.fromBufferAttribute(this,n),Yn.applyMatrix4(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Yn.fromBufferAttribute(this,n),Yn.applyNormalMatrix(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Yn.fromBufferAttribute(this,n),Yn.transformDirection(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ir(n,this.array)),n}setX(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ir(n,this.array)),n}setY(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ir(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ir(n,this.array)),n}setW(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array),r=Lt(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array),r=Lt(r,this.array),s=Lt(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Xd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class sN extends jt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class oN extends jt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class aN extends jt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class lN extends jt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class i4 extends jt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class uN extends jt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class Ym extends jt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class cN extends jt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=Hf(this.array[e*this.itemSize]);return this.normalized&&(n=Ir(n,this.array)),n}setX(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize]=ir(n),this}getY(e){let n=Hf(this.array[e*this.itemSize+1]);return this.normalized&&(n=Ir(n,this.array)),n}setY(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+1]=ir(n),this}getZ(e){let n=Hf(this.array[e*this.itemSize+2]);return this.normalized&&(n=Ir(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+2]=ir(n),this}getW(e){let n=Hf(this.array[e*this.itemSize+3]);return this.normalized&&(n=Ir(n,this.array)),n}setW(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+3]=ir(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array)),this.array[e+0]=ir(n),this.array[e+1]=ir(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array),r=Lt(r,this.array)),this.array[e+0]=ir(n),this.array[e+1]=ir(i),this.array[e+2]=ir(r),this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array),r=Lt(r,this.array),s=Lt(s,this.array)),this.array[e+0]=ir(n),this.array[e+1]=ir(i),this.array[e+2]=ir(r),this.array[e+3]=ir(s),this}}class Je extends jt{constructor(e,n,i){super(new Float32Array(e),n,i)}}class hN extends jt{constructor(e,n,i){super(new Float64Array(e),n,i)}}let fN=0;const Kr=new He,k1=new Qt,uc=new D,Sr=new As,_f=new As,hi=new D;class xt extends ha{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fN++}),this.uuid=br(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($I(e)?Ym:i4)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Bt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Kr.makeRotationFromQuaternion(e),this.applyMatrix4(Kr),this}rotateX(e){return Kr.makeRotationX(e),this.applyMatrix4(Kr),this}rotateY(e){return Kr.makeRotationY(e),this.applyMatrix4(Kr),this}rotateZ(e){return Kr.makeRotationZ(e),this.applyMatrix4(Kr),this}translate(e,n,i){return Kr.makeTranslation(e,n,i),this.applyMatrix4(Kr),this}scale(e,n,i){return Kr.makeScale(e,n,i),this.applyMatrix4(Kr),this}lookAt(e){return k1.lookAt(e),k1.updateMatrix(),this.applyMatrix4(k1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uc).negate(),this.translate(uc.x,uc.y,uc.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Je(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new As);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];Sr.setFromBufferAttribute(s),this.morphTargetsRelative?(hi.addVectors(this.boundingBox.min,Sr.min),this.boundingBox.expandByPoint(hi),hi.addVectors(this.boundingBox.max,Sr.max),this.boundingBox.expandByPoint(hi)):(this.boundingBox.expandByPoint(Sr.min),this.boundingBox.expandByPoint(Sr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Or);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new D,1/0);return}if(e){const i=this.boundingSphere.center;if(Sr.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];_f.setFromBufferAttribute(a),this.morphTargetsRelative?(hi.addVectors(Sr.min,_f.min),Sr.expandByPoint(hi),hi.addVectors(Sr.max,_f.max),Sr.expandByPoint(hi)):(Sr.expandByPoint(_f.min),Sr.expandByPoint(_f.max))}Sr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)hi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(hi));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)hi.fromBufferAttribute(a,u),l&&(uc.fromBufferAttribute(e,u),hi.add(uc)),r=Math.max(r,i.distanceToSquared(hi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],h=[];for(let B=0;B<a;B++)u[B]=new D,h[B]=new D;const d=new D,p=new D,A=new D,g=new oe,S=new oe,E=new oe,m=new D,x=new D;function y(B,F,X){d.fromArray(r,B*3),p.fromArray(r,F*3),A.fromArray(r,X*3),g.fromArray(o,B*2),S.fromArray(o,F*2),E.fromArray(o,X*2),p.sub(d),A.sub(d),S.sub(g),E.sub(g);const G=1/(S.x*E.y-E.x*S.y);isFinite(G)&&(m.copy(p).multiplyScalar(E.y).addScaledVector(A,-S.y).multiplyScalar(G),x.copy(A).multiplyScalar(S.x).addScaledVector(p,-E.x).multiplyScalar(G),u[B].add(m),u[F].add(m),u[X].add(m),h[B].add(x),h[F].add(x),h[X].add(x))}let C=this.groups;C.length===0&&(C=[{start:0,count:i.length}]);for(let B=0,F=C.length;B<F;++B){const X=C[B],G=X.start,q=X.count;for(let Y=G,$=G+q;Y<$;Y+=3)y(i[Y+0],i[Y+1],i[Y+2])}const I=new D,M=new D,w=new D,L=new D;function R(B){w.fromArray(s,B*3),L.copy(w);const F=u[B];I.copy(F),I.sub(w.multiplyScalar(w.dot(F))).normalize(),M.crossVectors(L,F);const G=M.dot(h[B])<0?-1:1;l[B*4]=I.x,l[B*4+1]=I.y,l[B*4+2]=I.z,l[B*4+3]=G}for(let B=0,F=C.length;B<F;++B){const X=C[B],G=X.start,q=X.count;for(let Y=G,$=G+q;Y<$;Y+=3)R(i[Y+0]),R(i[Y+1]),R(i[Y+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new jt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let p=0,A=i.count;p<A;p++)i.setXYZ(p,0,0,0);const r=new D,s=new D,o=new D,a=new D,l=new D,u=new D,h=new D,d=new D;if(e)for(let p=0,A=e.count;p<A;p+=3){const g=e.getX(p+0),S=e.getX(p+1),E=e.getX(p+2);r.fromBufferAttribute(n,g),s.fromBufferAttribute(n,S),o.fromBufferAttribute(n,E),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,S),u.fromBufferAttribute(i,E),a.add(h),l.add(h),u.add(h),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(E,u.x,u.y,u.z)}else for(let p=0,A=n.count;p<A;p+=3)r.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)hi.fromBufferAttribute(e,n),hi.normalize(),e.setXYZ(n,hi.x,hi.y,hi.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,d=a.normalized,p=new u.constructor(l.length*h);let A=0,g=0;for(let S=0,E=l.length;S<E;S++){a.isInterleavedBufferAttribute?A=l[S]*a.data.stride+a.offset:A=l[S]*h;for(let m=0;m<h;m++)p[g++]=u[A++]}return new jt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new xt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,d=u.length;h<d;h++){const p=u[h],A=e(p,i);l.push(A)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let d=0,p=u.length;d<p;d++){const A=u[d];h.push(A.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(n))}const s=e.morphAttributes;for(const u in s){const h=[],d=s[u];for(let p=0,A=d.length;p<A;p++)h.push(d[p].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const pE=new He,Ul=new Dh,u3=new Or,AE=new D,cc=new D,hc=new D,fc=new D,Q1=new D,c3=new D,h3=new oe,f3=new oe,d3=new oe,mE=new D,gE=new D,vE=new D,p3=new D,A3=new D;class Kt extends Qt{constructor(e=new xt,n=new di){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){c3.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],d=s[l];h!==0&&(Q1.fromBufferAttribute(d,e),o?c3.addScaledVector(Q1,h):c3.addScaledVector(Q1.sub(n),h))}n.add(c3)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),u3.copy(i.boundingSphere),u3.applyMatrix4(s),Ul.copy(e.ray).recast(e.near),!(u3.containsPoint(Ul.origin)===!1&&(Ul.intersectSphere(u3,AE)===null||Ul.origin.distanceToSquared(AE)>(e.far-e.near)**2))&&(pE.copy(s).invert(),Ul.copy(e.ray).applyMatrix4(pE),!(i.boundingBox!==null&&Ul.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Ul)))}_computeIntersections(e,n,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,A=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,S=p.length;g<S;g++){const E=p[g],m=o[E.materialIndex],x=Math.max(E.start,A.start),y=Math.min(a.count,Math.min(E.start+E.count,A.start+A.count));for(let C=x,I=y;C<I;C+=3){const M=a.getX(C),w=a.getX(C+1),L=a.getX(C+2);r=m3(this,m,e,i,u,h,d,M,w,L),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=E.materialIndex,n.push(r))}}else{const g=Math.max(0,A.start),S=Math.min(a.count,A.start+A.count);for(let E=g,m=S;E<m;E+=3){const x=a.getX(E),y=a.getX(E+1),C=a.getX(E+2);r=m3(this,o,e,i,u,h,d,x,y,C),r&&(r.faceIndex=Math.floor(E/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,S=p.length;g<S;g++){const E=p[g],m=o[E.materialIndex],x=Math.max(E.start,A.start),y=Math.min(l.count,Math.min(E.start+E.count,A.start+A.count));for(let C=x,I=y;C<I;C+=3){const M=C,w=C+1,L=C+2;r=m3(this,m,e,i,u,h,d,M,w,L),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=E.materialIndex,n.push(r))}}else{const g=Math.max(0,A.start),S=Math.min(l.count,A.start+A.count);for(let E=g,m=S;E<m;E+=3){const x=E,y=E+1,C=E+2;r=m3(this,o,e,i,u,h,d,x,y,C),r&&(r.faceIndex=Math.floor(E/3),n.push(r))}}}}function dN(t,e,n,i,r,s,o,a){let l;if(e.side===Ui?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===_o,a),l===null)return null;A3.copy(a),A3.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(A3);return u<n.near||u>n.far?null:{distance:u,point:A3.clone(),object:t}}function m3(t,e,n,i,r,s,o,a,l,u){t.getVertexPosition(a,cc),t.getVertexPosition(l,hc),t.getVertexPosition(u,fc);const h=dN(t,e,n,i,cc,hc,fc,p3);if(h){r&&(h3.fromBufferAttribute(r,a),f3.fromBufferAttribute(r,l),d3.fromBufferAttribute(r,u),h.uv=sr.getInterpolation(p3,cc,hc,fc,h3,f3,d3,new oe)),s&&(h3.fromBufferAttribute(s,a),f3.fromBufferAttribute(s,l),d3.fromBufferAttribute(s,u),h.uv1=sr.getInterpolation(p3,cc,hc,fc,h3,f3,d3,new oe),h.uv2=h.uv1),o&&(mE.fromBufferAttribute(o,a),gE.fromBufferAttribute(o,l),vE.fromBufferAttribute(o,u),h.normal=sr.getInterpolation(p3,cc,hc,fc,mE,gE,vE,new D),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new D,materialIndex:0};sr.getNormal(cc,hc,fc,d.normal),h.face=d}return h}class yl extends xt{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],d=[];let p=0,A=0;g("z","y","x",-1,-1,i,n,e,o,s,0),g("z","y","x",1,-1,i,n,-e,o,s,1),g("x","z","y",1,1,e,i,n,r,o,2),g("x","z","y",1,-1,e,i,-n,r,o,3),g("x","y","z",1,-1,e,n,i,r,s,4),g("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Je(u,3)),this.setAttribute("normal",new Je(h,3)),this.setAttribute("uv",new Je(d,2));function g(S,E,m,x,y,C,I,M,w,L,R){const B=C/w,F=I/L,X=C/2,G=I/2,q=M/2,Y=w+1,$=L+1;let j=0,P=0;const Q=new D;for(let U=0;U<$;U++){const O=U*F-G;for(let V=0;V<Y;V++){const me=V*B-X;Q[S]=me*x,Q[E]=O*y,Q[m]=q,u.push(Q.x,Q.y,Q.z),Q[S]=0,Q[E]=0,Q[m]=M>0?1:-1,h.push(Q.x,Q.y,Q.z),d.push(V/w),d.push(1-U/L),j+=1}}for(let U=0;U<L;U++)for(let O=0;O<w;O++){const V=p+O+Y*U,me=p+O+Y*(U+1),re=p+(O+1)+Y*(U+1),xe=p+(O+1)+Y*U;l.push(V,me,xe),l.push(me,re,xe),P+=6}a.addGroup(A,P,R),A+=P,p+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vh(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Xi(t){const e={};for(let n=0;n<t.length;n++){const i=vh(t[n]);for(const r in i)e[r]=i[r]}return e}function pN(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function tw(t){return t.getRenderTarget()===null?t.outputColorSpace:Os}const _n={clone:vh,merge:Xi};var AN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Vt extends jn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=AN,this.fragmentShader=mN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vh(e.uniforms),this.uniformsGroups=pN(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class Ap extends Qt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new He,this.projectionMatrix=new He,this.projectionMatrixInverse=new He,this.coordinateSystem=co}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Nn extends Ap{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=gh*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(fu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gh*2*Math.atan(Math.tan(fu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(fu*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const dc=-90,pc=1;class nw extends Qt{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new Nn(dc,pc,e,n);r.layers=this.layers,this.add(r);const s=new Nn(dc,pc,e,n);s.layers=this.layers,this.add(s);const o=new Nn(dc,pc,e,n);o.layers=this.layers,this.add(o);const a=new Nn(dc,pc,e,n);a.layers=this.layers,this.add(a);const l=new Nn(dc,pc,e,n);l.layers=this.layers,this.add(l);const u=new Nn(dc,pc,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,s,o,a,l]=n;for(const u of n)this.remove(u);if(e===co)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===qd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,a,l,u]=this.children,h=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=Rr,e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=A,e.setRenderTarget(i,5),e.render(n,u),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class mp extends mn{constructor(e,n,i,r,s,o,a,l,u,h){e=e!==void 0?e:[],n=n!==void 0?n:ol,super(e,n,i,r,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class iw extends rn{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];n.encoding!==void 0&&(ad("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===tl?It:nl),this.texture=new mp(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:nn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new yl(5,5,5),s=new Vt({name:"CubemapFromEquirect",uniforms:vh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ui,blending:Nt});s.uniforms.tEquirect.value=n;const o=new Kt(r,s),a=n.minFilter;return n.minFilter===fs&&(n.minFilter=nn),new nw(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const G1=new D,gN=new D,vN=new Bt;class ns{constructor(e=new D(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=G1.subVectors(i,n).cross(gN.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(G1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||vN.getNormalMatrix(e),r=this.coplanarPoint(G1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ol=new Or,g3=new D;class Km{constructor(e=new ns,n=new ns,i=new ns,r=new ns,s=new ns,o=new ns){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=co){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],h=r[5],d=r[6],p=r[7],A=r[8],g=r[9],S=r[10],E=r[11],m=r[12],x=r[13],y=r[14],C=r[15];if(i[0].setComponents(l-s,p-u,E-A,C-m).normalize(),i[1].setComponents(l+s,p+u,E+A,C+m).normalize(),i[2].setComponents(l+o,p+h,E+g,C+x).normalize(),i[3].setComponents(l-o,p-h,E-g,C-x).normalize(),i[4].setComponents(l-a,p-d,E-S,C-y).normalize(),n===co)i[5].setComponents(l+a,p+d,E+S,C+y).normalize();else if(n===qd)i[5].setComponents(a,d,S,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ol.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ol.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ol)}intersectsSprite(e){return Ol.center.set(0,0,0),Ol.radius=.7071067811865476,Ol.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ol)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(g3.x=r.normal.x>0?e.max.x:e.min.x,g3.y=r.normal.y>0?e.max.y:e.min.y,g3.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(g3)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function rw(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function yN(t,e){const n=e.isWebGL2,i=new WeakMap;function r(u,h){const d=u.array,p=u.usage,A=t.createBuffer();t.bindBuffer(h,A),t.bufferData(h,d,p),u.onUploadCallback();let g;if(d instanceof Float32Array)g=t.FLOAT;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)g=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=t.SHORT;else if(d instanceof Uint32Array)g=t.UNSIGNED_INT;else if(d instanceof Int32Array)g=t.INT;else if(d instanceof Int8Array)g=t.BYTE;else if(d instanceof Uint8Array)g=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)g=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:A,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,h,d){const p=h.array,A=h.updateRange;t.bindBuffer(d,u),A.count===-1?t.bufferSubData(d,0,p):(n?t.bufferSubData(d,A.offset*p.BYTES_PER_ELEMENT,p,A.offset,A.count):t.bufferSubData(d,A.offset*p.BYTES_PER_ELEMENT,p.subarray(A.offset,A.offset+A.count)),A.count=-1),h.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);h&&(t.deleteBuffer(h.buffer),i.delete(u))}function l(u,h){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d===void 0?i.set(u,r(u,h)):d.version<u.version&&(s(d.buffer,u,h),d.version=u.version)}return{get:o,remove:a,update:l}}class Nh extends xt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),u=a+1,h=l+1,d=e/a,p=n/l,A=[],g=[],S=[],E=[];for(let m=0;m<h;m++){const x=m*p-o;for(let y=0;y<u;y++){const C=y*d-s;g.push(C,-x,0),S.push(0,0,1),E.push(y/a),E.push(1-m/l)}}for(let m=0;m<l;m++)for(let x=0;x<a;x++){const y=x+u*m,C=x+u*(m+1),I=x+1+u*(m+1),M=x+1+u*m;A.push(y,C,M),A.push(C,I,M)}this.setIndex(A),this.setAttribute("position",new Je(g,3)),this.setAttribute("normal",new Je(S,3)),this.setAttribute("uv",new Je(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nh(e.width,e.height,e.widthSegments,e.heightSegments)}}var xN=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,EN=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,SN=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,_N=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,CN=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,TN=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,IN=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,wN=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,MN=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,RN=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bN=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,BN=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,LN=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,PN=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,DN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,NN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FN=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,UN=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ON=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,kN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,QN=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,GN=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zN=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,HN=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,VN=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,WN=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,XN=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,qN=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,YN="gl_FragColor = linearToOutputTexel( gl_FragColor );",KN=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,JN=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ZN=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$N=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tF=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nF=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,iF=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rF=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sF=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,oF=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,aF=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lF=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,AF=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,mF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,gF=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vF=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,EF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_F=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,CF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,TF=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,IF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,wF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,MF=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,RF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,bF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,BF=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,LF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,PF=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,DF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,NF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,FF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,UF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,OF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,QF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,GF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,zF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,HF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,VF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,WF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,XF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,qF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,YF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,KF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,JF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$F=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,eU=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,tU=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,nU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,iU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,sU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,oU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,aU=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,lU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,uU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cU=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,hU=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,fU=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,dU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,pU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,AU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,mU=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const gU=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,vU=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xU=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,SU=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_U=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CU=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,TU=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,IU=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,wU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,MU=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RU=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bU=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,BU=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,LU=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PU=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DU=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NU=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,FU=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UU=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,OU=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,kU=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QU=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GU=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zU=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HU=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,XU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qU=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YU=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,KU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Rt={alphahash_fragment:xN,alphahash_pars_fragment:EN,alphamap_fragment:SN,alphamap_pars_fragment:_N,alphatest_fragment:CN,alphatest_pars_fragment:TN,aomap_fragment:IN,aomap_pars_fragment:wN,begin_vertex:MN,beginnormal_vertex:RN,bsdfs:bN,iridescence_fragment:BN,bumpmap_pars_fragment:LN,clipping_planes_fragment:PN,clipping_planes_pars_fragment:DN,clipping_planes_pars_vertex:NN,clipping_planes_vertex:FN,color_fragment:UN,color_pars_fragment:ON,color_pars_vertex:kN,color_vertex:QN,common:GN,cube_uv_reflection_fragment:zN,defaultnormal_vertex:HN,displacementmap_pars_vertex:VN,displacementmap_vertex:WN,emissivemap_fragment:XN,emissivemap_pars_fragment:qN,colorspace_fragment:YN,colorspace_pars_fragment:KN,envmap_fragment:jN,envmap_common_pars_fragment:JN,envmap_pars_fragment:ZN,envmap_pars_vertex:$N,envmap_physical_pars_fragment:hF,envmap_vertex:eF,fog_vertex:tF,fog_pars_vertex:nF,fog_fragment:iF,fog_pars_fragment:rF,gradientmap_pars_fragment:sF,lightmap_fragment:oF,lightmap_pars_fragment:aF,lights_lambert_fragment:lF,lights_lambert_pars_fragment:uF,lights_pars_begin:cF,lights_toon_fragment:fF,lights_toon_pars_fragment:dF,lights_phong_fragment:pF,lights_phong_pars_fragment:AF,lights_physical_fragment:mF,lights_physical_pars_fragment:gF,lights_fragment_begin:vF,lights_fragment_maps:yF,lights_fragment_end:xF,logdepthbuf_fragment:EF,logdepthbuf_pars_fragment:SF,logdepthbuf_pars_vertex:_F,logdepthbuf_vertex:CF,map_fragment:TF,map_pars_fragment:IF,map_particle_fragment:wF,map_particle_pars_fragment:MF,metalnessmap_fragment:RF,metalnessmap_pars_fragment:bF,morphcolor_vertex:BF,morphnormal_vertex:LF,morphtarget_pars_vertex:PF,morphtarget_vertex:DF,normal_fragment_begin:NF,normal_fragment_maps:FF,normal_pars_fragment:UF,normal_pars_vertex:OF,normal_vertex:kF,normalmap_pars_fragment:QF,clearcoat_normal_fragment_begin:GF,clearcoat_normal_fragment_maps:zF,clearcoat_pars_fragment:HF,iridescence_pars_fragment:VF,opaque_fragment:WF,packing:XF,premultiplied_alpha_fragment:qF,project_vertex:YF,dithering_fragment:KF,dithering_pars_fragment:jF,roughnessmap_fragment:JF,roughnessmap_pars_fragment:ZF,shadowmap_pars_fragment:$F,shadowmap_pars_vertex:eU,shadowmap_vertex:tU,shadowmask_pars_fragment:nU,skinbase_vertex:iU,skinning_pars_vertex:rU,skinning_vertex:sU,skinnormal_vertex:oU,specularmap_fragment:aU,specularmap_pars_fragment:lU,tonemapping_fragment:uU,tonemapping_pars_fragment:cU,transmission_fragment:hU,transmission_pars_fragment:fU,uv_pars_fragment:dU,uv_pars_vertex:pU,uv_vertex:AU,worldpos_vertex:mU,background_vert:gU,background_frag:vU,backgroundCube_vert:yU,backgroundCube_frag:xU,cube_vert:EU,cube_frag:SU,depth_vert:_U,depth_frag:CU,distanceRGBA_vert:TU,distanceRGBA_frag:IU,equirect_vert:wU,equirect_frag:MU,linedashed_vert:RU,linedashed_frag:bU,meshbasic_vert:BU,meshbasic_frag:LU,meshlambert_vert:PU,meshlambert_frag:DU,meshmatcap_vert:NU,meshmatcap_frag:FU,meshnormal_vert:UU,meshnormal_frag:OU,meshphong_vert:kU,meshphong_frag:QU,meshphysical_vert:GU,meshphysical_frag:zU,meshtoon_vert:HU,meshtoon_frag:VU,points_vert:WU,points_frag:XU,shadow_vert:qU,shadow_frag:YU,sprite_vert:KU,sprite_frag:jU},Pe={common:{diffuse:{value:new Ee(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bt},normalScale:{value:new oe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ee(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ee(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0},uvTransform:{value:new Bt}},sprite:{diffuse:{value:new Ee(16777215)},opacity:{value:1},center:{value:new oe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}}},Bs={basic:{uniforms:Xi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:Rt.meshbasic_vert,fragmentShader:Rt.meshbasic_frag},lambert:{uniforms:Xi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Ee(0)}}]),vertexShader:Rt.meshlambert_vert,fragmentShader:Rt.meshlambert_frag},phong:{uniforms:Xi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Ee(0)},specular:{value:new Ee(1118481)},shininess:{value:30}}]),vertexShader:Rt.meshphong_vert,fragmentShader:Rt.meshphong_frag},standard:{uniforms:Xi([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new Ee(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag},toon:{uniforms:Xi([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new Ee(0)}}]),vertexShader:Rt.meshtoon_vert,fragmentShader:Rt.meshtoon_frag},matcap:{uniforms:Xi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:Rt.meshmatcap_vert,fragmentShader:Rt.meshmatcap_frag},points:{uniforms:Xi([Pe.points,Pe.fog]),vertexShader:Rt.points_vert,fragmentShader:Rt.points_frag},dashed:{uniforms:Xi([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rt.linedashed_vert,fragmentShader:Rt.linedashed_frag},depth:{uniforms:Xi([Pe.common,Pe.displacementmap]),vertexShader:Rt.depth_vert,fragmentShader:Rt.depth_frag},normal:{uniforms:Xi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:Rt.meshnormal_vert,fragmentShader:Rt.meshnormal_frag},sprite:{uniforms:Xi([Pe.sprite,Pe.fog]),vertexShader:Rt.sprite_vert,fragmentShader:Rt.sprite_frag},background:{uniforms:{uvTransform:{value:new Bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rt.background_vert,fragmentShader:Rt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Rt.backgroundCube_vert,fragmentShader:Rt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rt.cube_vert,fragmentShader:Rt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rt.equirect_vert,fragmentShader:Rt.equirect_frag},distanceRGBA:{uniforms:Xi([Pe.common,Pe.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rt.distanceRGBA_vert,fragmentShader:Rt.distanceRGBA_frag},shadow:{uniforms:Xi([Pe.lights,Pe.fog,{color:{value:new Ee(0)},opacity:{value:1}}]),vertexShader:Rt.shadow_vert,fragmentShader:Rt.shadow_frag}};Bs.physical={uniforms:Xi([Bs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bt},clearcoatNormalScale:{value:new oe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bt},sheen:{value:0},sheenColor:{value:new Ee(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bt},transmissionSamplerSize:{value:new oe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bt},attenuationDistance:{value:0},attenuationColor:{value:new Ee(0)},specularColor:{value:new Ee(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bt},anisotropyVector:{value:new oe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bt}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag};const v3={r:0,b:0,g:0};function JU(t,e,n,i,r,s,o){const a=new Ee(0);let l=s===!0?0:1,u,h,d=null,p=0,A=null;function g(E,m){let x=!1,y=m.isScene===!0?m.background:null;switch(y&&y.isTexture&&(y=(m.backgroundBlurriness>0?n:e).get(y)),y===null?S(a,l):y&&y.isColor&&(S(y,1),x=!0),t.xr.getEnvironmentBlendMode()){case"opaque":x=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),x=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),x=!0;break}(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Ph)?(h===void 0&&(h=new Kt(new yl(1,1,1),new Vt({name:"BackgroundCubeMaterial",uniforms:vh(Bs.backgroundCube.uniforms),vertexShader:Bs.backgroundCube.vertexShader,fragmentShader:Bs.backgroundCube.fragmentShader,side:Ui,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(M,w,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=y,h.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,h.material.toneMapped=y.colorSpace!==It,(d!==y||p!==y.version||A!==t.toneMapping)&&(h.material.needsUpdate=!0,d=y,p=y.version,A=t.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null)):y&&y.isTexture&&(u===void 0&&(u=new Kt(new Nh(2,2),new Vt({name:"BackgroundMaterial",uniforms:vh(Bs.background.uniforms),vertexShader:Bs.background.vertexShader,fragmentShader:Bs.background.fragmentShader,side:_o,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=y,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=y.colorSpace!==It,y.matrixAutoUpdate===!0&&y.updateMatrix(),u.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||p!==y.version||A!==t.toneMapping)&&(u.material.needsUpdate=!0,d=y,p=y.version,A=t.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function S(E,m){E.getRGB(v3,tw(t)),i.buffers.color.setClear(v3.r,v3.g,v3.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(E,m=1){a.set(E),l=m,S(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,S(a,l)},render:g}}function ZU(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=E(null);let u=l,h=!1;function d(q,Y,$,j,P){let Q=!1;if(o){const U=S(j,$,Y);u!==U&&(u=U,A(u.object)),Q=m(q,j,$,P),Q&&x(q,j,$,P)}else{const U=Y.wireframe===!0;(u.geometry!==j.id||u.program!==$.id||u.wireframe!==U)&&(u.geometry=j.id,u.program=$.id,u.wireframe=U,Q=!0)}P!==null&&n.update(P,t.ELEMENT_ARRAY_BUFFER),(Q||h)&&(h=!1,L(q,Y,$,j),P!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(P).buffer))}function p(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function A(q){return i.isWebGL2?t.bindVertexArray(q):s.bindVertexArrayOES(q)}function g(q){return i.isWebGL2?t.deleteVertexArray(q):s.deleteVertexArrayOES(q)}function S(q,Y,$){const j=$.wireframe===!0;let P=a[q.id];P===void 0&&(P={},a[q.id]=P);let Q=P[Y.id];Q===void 0&&(Q={},P[Y.id]=Q);let U=Q[j];return U===void 0&&(U=E(p()),Q[j]=U),U}function E(q){const Y=[],$=[],j=[];for(let P=0;P<r;P++)Y[P]=0,$[P]=0,j[P]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:$,attributeDivisors:j,object:q,attributes:{},index:null}}function m(q,Y,$,j){const P=u.attributes,Q=Y.attributes;let U=0;const O=$.getAttributes();for(const V in O)if(O[V].location>=0){const re=P[V];let xe=Q[V];if(xe===void 0&&(V==="instanceMatrix"&&q.instanceMatrix&&(xe=q.instanceMatrix),V==="instanceColor"&&q.instanceColor&&(xe=q.instanceColor)),re===void 0||re.attribute!==xe||xe&&re.data!==xe.data)return!0;U++}return u.attributesNum!==U||u.index!==j}function x(q,Y,$,j){const P={},Q=Y.attributes;let U=0;const O=$.getAttributes();for(const V in O)if(O[V].location>=0){let re=Q[V];re===void 0&&(V==="instanceMatrix"&&q.instanceMatrix&&(re=q.instanceMatrix),V==="instanceColor"&&q.instanceColor&&(re=q.instanceColor));const xe={};xe.attribute=re,re&&re.data&&(xe.data=re.data),P[V]=xe,U++}u.attributes=P,u.attributesNum=U,u.index=j}function y(){const q=u.newAttributes;for(let Y=0,$=q.length;Y<$;Y++)q[Y]=0}function C(q){I(q,0)}function I(q,Y){const $=u.newAttributes,j=u.enabledAttributes,P=u.attributeDivisors;$[q]=1,j[q]===0&&(t.enableVertexAttribArray(q),j[q]=1),P[q]!==Y&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](q,Y),P[q]=Y)}function M(){const q=u.newAttributes,Y=u.enabledAttributes;for(let $=0,j=Y.length;$<j;$++)Y[$]!==q[$]&&(t.disableVertexAttribArray($),Y[$]=0)}function w(q,Y,$,j,P,Q,U){U===!0?t.vertexAttribIPointer(q,Y,$,P,Q):t.vertexAttribPointer(q,Y,$,j,P,Q)}function L(q,Y,$,j){if(i.isWebGL2===!1&&(q.isInstancedMesh||j.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const P=j.attributes,Q=$.getAttributes(),U=Y.defaultAttributeValues;for(const O in Q){const V=Q[O];if(V.location>=0){let me=P[O];if(me===void 0&&(O==="instanceMatrix"&&q.instanceMatrix&&(me=q.instanceMatrix),O==="instanceColor"&&q.instanceColor&&(me=q.instanceColor)),me!==void 0){const re=me.normalized,xe=me.itemSize,ge=n.get(me);if(ge===void 0)continue;const Ie=ge.buffer,Ne=ge.type,$e=ge.bytesPerElement,ct=i.isWebGL2===!0&&(Ne===t.INT||Ne===t.UNSIGNED_INT||me.gpuType===z8);if(me.isInterleavedBufferAttribute){const De=me.data,W=De.stride,ve=me.offset;if(De.isInstancedInterleavedBuffer){for(let Ae=0;Ae<V.locationSize;Ae++)I(V.location+Ae,De.meshPerAttribute);q.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=De.meshPerAttribute*De.count)}else for(let Ae=0;Ae<V.locationSize;Ae++)C(V.location+Ae);t.bindBuffer(t.ARRAY_BUFFER,Ie);for(let Ae=0;Ae<V.locationSize;Ae++)w(V.location+Ae,xe/V.locationSize,Ne,re,W*$e,(ve+xe/V.locationSize*Ae)*$e,ct)}else{if(me.isInstancedBufferAttribute){for(let De=0;De<V.locationSize;De++)I(V.location+De,me.meshPerAttribute);q.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let De=0;De<V.locationSize;De++)C(V.location+De);t.bindBuffer(t.ARRAY_BUFFER,Ie);for(let De=0;De<V.locationSize;De++)w(V.location+De,xe/V.locationSize,Ne,re,xe*$e,xe/V.locationSize*De*$e,ct)}}else if(U!==void 0){const re=U[O];if(re!==void 0)switch(re.length){case 2:t.vertexAttrib2fv(V.location,re);break;case 3:t.vertexAttrib3fv(V.location,re);break;case 4:t.vertexAttrib4fv(V.location,re);break;default:t.vertexAttrib1fv(V.location,re)}}}}M()}function R(){X();for(const q in a){const Y=a[q];for(const $ in Y){const j=Y[$];for(const P in j)g(j[P].object),delete j[P];delete Y[$]}delete a[q]}}function B(q){if(a[q.id]===void 0)return;const Y=a[q.id];for(const $ in Y){const j=Y[$];for(const P in j)g(j[P].object),delete j[P];delete Y[$]}delete a[q.id]}function F(q){for(const Y in a){const $=a[Y];if($[q.id]===void 0)continue;const j=$[q.id];for(const P in j)g(j[P].object),delete j[P];delete $[q.id]}}function X(){G(),h=!0,u!==l&&(u=l,A(u.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:X,resetDefaultState:G,dispose:R,releaseStatesOfGeometry:B,releaseStatesOfProgram:F,initAttributes:y,enableAttribute:C,disableUnusedAttributes:M}}function $U(t,e,n,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,h){t.drawArrays(s,u,h),n.update(h,s,1)}function l(u,h,d){if(d===0)return;let p,A;if(r)p=t,A="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),A="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[A](s,u,h,d),n.update(h,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function eO(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const w=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(w){if(w==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";w="mediump"}return w==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),S=t.getParameter(t.MAX_VERTEX_ATTRIBS),E=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),x=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=p>0,C=o||e.has("OES_texture_float"),I=y&&C,M=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:A,maxCubemapSize:g,maxAttributes:S,maxVertexUniforms:E,maxVaryings:m,maxFragmentUniforms:x,vertexTextures:y,floatFragmentTextures:C,floatVertexTextures:I,maxSamples:M}}function tO(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new ns,a=new Bt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const A=d.length!==0||p||i!==0||r;return r=p,i=d.length,A},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){n=h(d,p,0)},this.setState=function(d,p,A){const g=d.clippingPlanes,S=d.clipIntersection,E=d.clipShadows,m=t.get(d);if(!r||g===null||g.length===0||s&&!E)s?h(null):u();else{const x=s?0:i,y=x*4;let C=m.clippingState||null;l.value=C,C=h(g,p,y,A);for(let I=0;I!==y;++I)C[I]=n[I];m.clippingState=C,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,A,g){const S=d!==null?d.length:0;let E=null;if(S!==0){if(E=l.value,g!==!0||E===null){const m=A+S*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(E===null||E.length<m)&&(E=new Float32Array(m));for(let y=0,C=A;y!==S;++y,C+=4)o.copy(d[y]).applyMatrix4(x,a),o.normal.toArray(E,C),E[C+3]=o.constant}l.value=E,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,E}}function nO(t){let e=new WeakMap;function n(o,a){return a===Ud?o.mapping=ol:a===Od&&(o.mapping=al),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Ud||a===Od)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new iw(l.height/2);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",r),n(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Lu extends Ap{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Hc=4,yE=[.125,.215,.35,.446,.526,.582],$l=20,z1=new Lu,xE=new Ee;let H1=null;const Yl=(1+Math.sqrt(5))/2,Ac=1/Yl,EE=[new D(1,1,1),new D(-1,1,1),new D(1,1,-1),new D(-1,1,-1),new D(0,Yl,Ac),new D(0,Yl,-Ac),new D(Ac,0,Yl),new D(-Ac,0,Yl),new D(Yl,Ac,0),new D(-Yl,Ac,0)];class s6{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){H1=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=CE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_E(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(H1),e.scissorTest=!1,y3(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ol||e.mapping===al?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),H1=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:nn,minFilter:nn,generateMipmaps:!1,type:Hn,format:Un,colorSpace:Os,depthBuffer:!1},r=SE(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=SE(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=iO(s)),this._blurMaterial=rO(s,e,n)}return r}_compileMaterial(e){const n=new Kt(this._lodPlanes[0],e);this._renderer.compile(n,z1)}_sceneToCubeUV(e,n,i,r){const a=new Nn(90,1,n,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(xE),h.toneMapping=Rr,h.autoClear=!1;const A=new di({name:"PMREM.Background",side:Ui,depthWrite:!1,depthTest:!1}),g=new Kt(new yl,A);let S=!1;const E=e.background;E?E.isColor&&(A.color.copy(E),e.background=null,S=!0):(A.color.copy(xE),S=!0);for(let m=0;m<6;m++){const x=m%3;x===0?(a.up.set(0,l[m],0),a.lookAt(u[m],0,0)):x===1?(a.up.set(0,0,l[m]),a.lookAt(0,u[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,u[m]));const y=this._cubeSize;y3(r,x*y,m>2?y:0,y,y),h.setRenderTarget(r),S&&h.render(g,a),h.render(e,a)}g.geometry.dispose(),g.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=E}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===ol||e.mapping===al;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=CE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_E());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Kt(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;y3(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,z1)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=EE[(r-1)%EE.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Kt(this._lodPlanes[r],u),p=u.uniforms,A=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*A):2*Math.PI/(2*$l-1),S=s/g,E=isFinite(s)?1+Math.floor(h*S):$l;E>$l&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${$l}`);const m=[];let x=0;for(let w=0;w<$l;++w){const L=w/S,R=Math.exp(-L*L/2);m.push(R),w===0?x+=R:w<E&&(x+=2*R)}for(let w=0;w<m.length;w++)m[w]=m[w]/x;p.envMap.value=e.texture,p.samples.value=E,p.weights.value=m,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:y}=this;p.dTheta.value=g,p.mipInt.value=y-i;const C=this._sizeLods[r],I=3*C*(r>y-Hc?r-y+Hc:0),M=4*(this._cubeSize-C);y3(n,I,M,3*C,2*C),l.setRenderTarget(n),l.render(d,z1)}}function iO(t){const e=[],n=[],i=[];let r=t;const s=t-Hc+1+yE.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Hc?l=yE[o-t+Hc-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),h=-u,d=1+u,p=[h,h,d,h,d,d,h,h,d,d,h,d],A=6,g=6,S=3,E=2,m=1,x=new Float32Array(S*g*A),y=new Float32Array(E*g*A),C=new Float32Array(m*g*A);for(let M=0;M<A;M++){const w=M%3*2/3-1,L=M>2?0:-1,R=[w,L,0,w+2/3,L,0,w+2/3,L+1,0,w,L,0,w+2/3,L+1,0,w,L+1,0];x.set(R,S*g*M),y.set(p,E*g*M);const B=[M,M,M,M,M,M];C.set(B,m*g*M)}const I=new xt;I.setAttribute("position",new jt(x,S)),I.setAttribute("uv",new jt(y,E)),I.setAttribute("faceIndex",new jt(C,m)),e.push(I),r>Hc&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function SE(t,e,n){const i=new rn(t,e,n);return i.texture.mapping=Ph,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function y3(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function rO(t,e,n){const i=new Float32Array($l),r=new D(0,1,0);return new Vt({name:"SphericalGaussianBlur",defines:{n:$l,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:r4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nt,depthTest:!1,depthWrite:!1})}function _E(){return new Vt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:r4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nt,depthTest:!1,depthWrite:!1})}function CE(){return new Vt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:r4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nt,depthTest:!1,depthWrite:!1})}function r4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sO(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Ud||l===Od,h=l===ol||l===al;if(u||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new s6(t)),d=u?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||h&&d&&r(d)){n===null&&(n=new s6(t));const p=u?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function oO(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function aO(t,e,n,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);for(const g in p.morphAttributes){const S=p.morphAttributes[g];for(let E=0,m=S.length;E<m;E++)e.remove(S[E])}p.removeEventListener("dispose",o),delete r[p.id];const A=s.get(p);A&&(e.remove(A),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],t.ARRAY_BUFFER);const A=d.morphAttributes;for(const g in A){const S=A[g];for(let E=0,m=S.length;E<m;E++)e.update(S[E],t.ARRAY_BUFFER)}}function u(d){const p=[],A=d.index,g=d.attributes.position;let S=0;if(A!==null){const x=A.array;S=A.version;for(let y=0,C=x.length;y<C;y+=3){const I=x[y+0],M=x[y+1],w=x[y+2];p.push(I,M,M,w,w,I)}}else{const x=g.array;S=g.version;for(let y=0,C=x.length/3-1;y<C;y+=3){const I=y+0,M=y+1,w=y+2;p.push(I,M,M,w,w,I)}}const E=new($I(p)?Ym:i4)(p,1);E.version=S;const m=s.get(d);m&&e.remove(m),s.set(d,E)}function h(d){const p=s.get(d);if(p){const A=d.index;A!==null&&p.version<A.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function lO(t,e,n,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function h(p,A){t.drawElements(s,A,a,p*l),n.update(A,s,1)}function d(p,A,g){if(g===0)return;let S,E;if(r)S=t,E="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),E="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[E](s,A,a,p*l,g),n.update(A,s,g)}this.setMode=o,this.setIndex=u,this.render=h,this.renderInstances=d}function uO(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function cO(t,e){return t[0]-e[0]}function hO(t,e){return Math.abs(e[1])-Math.abs(t[1])}function fO(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new kt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,h,d){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const g=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,S=g!==void 0?g.length:0;let E=s.get(h);if(E===void 0||E.count!==S){let Y=function(){G.dispose(),s.delete(h),h.removeEventListener("dispose",Y)};var A=Y;E!==void 0&&E.texture.dispose();const y=h.morphAttributes.position!==void 0,C=h.morphAttributes.normal!==void 0,I=h.morphAttributes.color!==void 0,M=h.morphAttributes.position||[],w=h.morphAttributes.normal||[],L=h.morphAttributes.color||[];let R=0;y===!0&&(R=1),C===!0&&(R=2),I===!0&&(R=3);let B=h.attributes.position.count*R,F=1;B>e.maxTextureSize&&(F=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const X=new Float32Array(B*F*4*S),G=new qm(X,B,F,S);G.type=Yi,G.needsUpdate=!0;const q=R*4;for(let $=0;$<S;$++){const j=M[$],P=w[$],Q=L[$],U=B*F*4*$;for(let O=0;O<j.count;O++){const V=O*q;y===!0&&(o.fromBufferAttribute(j,O),X[U+V+0]=o.x,X[U+V+1]=o.y,X[U+V+2]=o.z,X[U+V+3]=0),C===!0&&(o.fromBufferAttribute(P,O),X[U+V+4]=o.x,X[U+V+5]=o.y,X[U+V+6]=o.z,X[U+V+7]=0),I===!0&&(o.fromBufferAttribute(Q,O),X[U+V+8]=o.x,X[U+V+9]=o.y,X[U+V+10]=o.z,X[U+V+11]=Q.itemSize===4?o.w:1)}}E={count:S,texture:G,size:new oe(B,F)},s.set(h,E),h.addEventListener("dispose",Y)}let m=0;for(let y=0;y<p.length;y++)m+=p[y];const x=h.morphTargetsRelative?1:1-m;d.getUniforms().setValue(t,"morphTargetBaseInfluence",x),d.getUniforms().setValue(t,"morphTargetInfluences",p),d.getUniforms().setValue(t,"morphTargetsTexture",E.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",E.size)}else{const g=p===void 0?0:p.length;let S=i[h.id];if(S===void 0||S.length!==g){S=[];for(let C=0;C<g;C++)S[C]=[C,0];i[h.id]=S}for(let C=0;C<g;C++){const I=S[C];I[0]=C,I[1]=p[C]}S.sort(hO);for(let C=0;C<8;C++)C<g&&S[C][1]?(a[C][0]=S[C][0],a[C][1]=S[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(cO);const E=h.morphAttributes.position,m=h.morphAttributes.normal;let x=0;for(let C=0;C<8;C++){const I=a[C],M=I[0],w=I[1];M!==Number.MAX_SAFE_INTEGER&&w?(E&&h.getAttribute("morphTarget"+C)!==E[M]&&h.setAttribute("morphTarget"+C,E[M]),m&&h.getAttribute("morphNormal"+C)!==m[M]&&h.setAttribute("morphNormal"+C,m[M]),r[C]=w,x+=w):(E&&h.hasAttribute("morphTarget"+C)===!0&&h.deleteAttribute("morphTarget"+C),m&&h.hasAttribute("morphNormal"+C)===!0&&h.deleteAttribute("morphNormal"+C),r[C]=0)}const y=h.morphTargetsRelative?1:1-x;d.getUniforms().setValue(t,"morphTargetBaseInfluence",y),d.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function dO(t,e,n,i){let r=new WeakMap;function s(l){const u=i.render.frame,h=l.geometry,d=e.get(l,h);if(r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}const sw=new mn,ow=new qm,aw=new n4,lw=new mp,TE=[],IE=[],wE=new Float32Array(16),ME=new Float32Array(9),RE=new Float32Array(4);function Fh(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=TE[r];if(s===void 0&&(s=new Float32Array(r),TE[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function si(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function oi(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function jm(t,e){let n=IE[e];n===void 0&&(n=new Int32Array(e),IE[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function pO(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function AO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(si(n,e))return;t.uniform2fv(this.addr,e),oi(n,e)}}function mO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(si(n,e))return;t.uniform3fv(this.addr,e),oi(n,e)}}function gO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(si(n,e))return;t.uniform4fv(this.addr,e),oi(n,e)}}function vO(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(si(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),oi(n,e)}else{if(si(n,i))return;RE.set(i),t.uniformMatrix2fv(this.addr,!1,RE),oi(n,i)}}function yO(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(si(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),oi(n,e)}else{if(si(n,i))return;ME.set(i),t.uniformMatrix3fv(this.addr,!1,ME),oi(n,i)}}function xO(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(si(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),oi(n,e)}else{if(si(n,i))return;wE.set(i),t.uniformMatrix4fv(this.addr,!1,wE),oi(n,i)}}function EO(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function SO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(si(n,e))return;t.uniform2iv(this.addr,e),oi(n,e)}}function _O(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(si(n,e))return;t.uniform3iv(this.addr,e),oi(n,e)}}function CO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(si(n,e))return;t.uniform4iv(this.addr,e),oi(n,e)}}function TO(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function IO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(si(n,e))return;t.uniform2uiv(this.addr,e),oi(n,e)}}function wO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(si(n,e))return;t.uniform3uiv(this.addr,e),oi(n,e)}}function MO(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(si(n,e))return;t.uniform4uiv(this.addr,e),oi(n,e)}}function RO(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||sw,r)}function bO(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||aw,r)}function BO(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||lw,r)}function LO(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||ow,r)}function PO(t){switch(t){case 5126:return pO;case 35664:return AO;case 35665:return mO;case 35666:return gO;case 35674:return vO;case 35675:return yO;case 35676:return xO;case 5124:case 35670:return EO;case 35667:case 35671:return SO;case 35668:case 35672:return _O;case 35669:case 35673:return CO;case 5125:return TO;case 36294:return IO;case 36295:return wO;case 36296:return MO;case 35678:case 36198:case 36298:case 36306:case 35682:return RO;case 35679:case 36299:case 36307:return bO;case 35680:case 36300:case 36308:case 36293:return BO;case 36289:case 36303:case 36311:case 36292:return LO}}function DO(t,e){t.uniform1fv(this.addr,e)}function NO(t,e){const n=Fh(e,this.size,2);t.uniform2fv(this.addr,n)}function FO(t,e){const n=Fh(e,this.size,3);t.uniform3fv(this.addr,n)}function UO(t,e){const n=Fh(e,this.size,4);t.uniform4fv(this.addr,n)}function OO(t,e){const n=Fh(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function kO(t,e){const n=Fh(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function QO(t,e){const n=Fh(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function GO(t,e){t.uniform1iv(this.addr,e)}function zO(t,e){t.uniform2iv(this.addr,e)}function HO(t,e){t.uniform3iv(this.addr,e)}function VO(t,e){t.uniform4iv(this.addr,e)}function WO(t,e){t.uniform1uiv(this.addr,e)}function XO(t,e){t.uniform2uiv(this.addr,e)}function qO(t,e){t.uniform3uiv(this.addr,e)}function YO(t,e){t.uniform4uiv(this.addr,e)}function KO(t,e,n){const i=this.cache,r=e.length,s=jm(n,r);si(i,s)||(t.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||sw,s[o])}function jO(t,e,n){const i=this.cache,r=e.length,s=jm(n,r);si(i,s)||(t.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||aw,s[o])}function JO(t,e,n){const i=this.cache,r=e.length,s=jm(n,r);si(i,s)||(t.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||lw,s[o])}function ZO(t,e,n){const i=this.cache,r=e.length,s=jm(n,r);si(i,s)||(t.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||ow,s[o])}function $O(t){switch(t){case 5126:return DO;case 35664:return NO;case 35665:return FO;case 35666:return UO;case 35674:return OO;case 35675:return kO;case 35676:return QO;case 5124:case 35670:return GO;case 35667:case 35671:return zO;case 35668:case 35672:return HO;case 35669:case 35673:return VO;case 5125:return WO;case 36294:return XO;case 36295:return qO;case 36296:return YO;case 35678:case 36198:case 36298:case 36306:case 35682:return KO;case 35679:case 36299:case 36307:return jO;case 35680:case 36300:case 36308:case 36293:return JO;case 36289:case 36303:case 36311:case 36292:return ZO}}class ek{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=PO(n.type)}}class tk{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=$O(n.type)}}class nk{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const V1=/(\w+)(\])?(\[|\.)?/g;function bE(t,e){t.seq.push(e),t.map[e.id]=e}function ik(t,e,n){const i=t.name,r=i.length;for(V1.lastIndex=0;;){const s=V1.exec(i),o=V1.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){bE(n,u===void 0?new ek(a,t,e):new tk(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new nk(a),bE(n,d)),n=d}}}class xA{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);ik(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function BE(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let rk=0;function sk(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function ok(t){switch(t){case Os:return["Linear","( value )"];case It:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function LE(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+sk(t.getShaderSource(e),o)}else return r}function ak(t,e){const n=ok(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function lk(t,e){let n;switch(e){case MI:n="Linear";break;case RI:n="Reinhard";break;case bI:n="OptimizedCineon";break;case G8:n="ACESFilmic";break;case BI:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function uk(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Vf).join(`
`)}function ck(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function hk(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Vf(t){return t!==""}function PE(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function DE(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fk=/^[ \t]*#include +<([\w\d./]+)>/gm;function o6(t){return t.replace(fk,pk)}const dk=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function pk(t,e){let n=Rt[e];if(n===void 0){const i=dk.get(e);if(i!==void 0)n=Rt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return o6(n)}const Ak=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function NE(t){return t.replace(Ak,mk)}function mk(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function FE(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gk(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Qm?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===sd?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ms&&(e="SHADOWMAP_TYPE_VSM"),e}function vk(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ol:case al:e="ENVMAP_TYPE_CUBE";break;case Ph:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yk(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case al:e="ENVMAP_MODE_REFRACTION";break}return e}function xk(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case dp:e="ENVMAP_BLENDING_MULTIPLY";break;case II:e="ENVMAP_BLENDING_MIX";break;case wI:e="ENVMAP_BLENDING_ADD";break}return e}function Ek(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Sk(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=gk(n),u=vk(n),h=yk(n),d=xk(n),p=Ek(n),A=n.isWebGL2?"":uk(n),g=ck(s),S=r.createProgram();let E,m,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(E=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Vf).join(`
`),E.length>0&&(E+=`
`),m=[A,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Vf).join(`
`),m.length>0&&(m+=`
`)):(E=[FE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Vf).join(`
`),m=[A,FE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Rr?"#define TONE_MAPPING":"",n.toneMapping!==Rr?Rt.tonemapping_pars_fragment:"",n.toneMapping!==Rr?lk("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Rt.colorspace_pars_fragment,ak("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Vf).join(`
`)),o=o6(o),o=PE(o,n),o=DE(o,n),a=o6(a),a=PE(a,n),a=DE(a,n),o=NE(o),a=NE(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,m=["#define varying in",n.glslVersion===i6?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===i6?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const y=x+E+o,C=x+m+a,I=BE(r,r.VERTEX_SHADER,y),M=BE(r,r.FRAGMENT_SHADER,C);if(r.attachShader(S,I),r.attachShader(S,M),n.index0AttributeName!==void 0?r.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S),t.debug.checkShaderErrors){const R=r.getProgramInfoLog(S).trim(),B=r.getShaderInfoLog(I).trim(),F=r.getShaderInfoLog(M).trim();let X=!0,G=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(X=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,S,I,M);else{const q=LE(r,I,"vertex"),Y=LE(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+q+`
`+Y)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(B===""||F==="")&&(G=!1);G&&(this.diagnostics={runnable:X,programLog:R,vertexShader:{log:B,prefix:E},fragmentShader:{log:F,prefix:m}})}r.deleteShader(I),r.deleteShader(M);let w;this.getUniforms=function(){return w===void 0&&(w=new xA(r,S)),w};let L;return this.getAttributes=function(){return L===void 0&&(L=hk(r,S)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=rk++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=I,this.fragmentShader=M,this}let _k=0;class Ck{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new Tk(e),n.set(e,i)),i}}class Tk{constructor(e){this.id=_k++,this.code=e,this.usedTimes=0}}function Ik(t,e,n,i,r,s,o){const a=new du,l=new Ck,u=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let A=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(R){return R===0?"uv":`uv${R}`}function E(R,B,F,X,G){const q=X.fog,Y=G.geometry,$=R.isMeshStandardMaterial?X.environment:null,j=(R.isMeshStandardMaterial?n:e).get(R.envMap||$),P=j&&j.mapping===Ph?j.image.height:null,Q=g[R.type];R.precision!==null&&(A=r.getMaxPrecision(R.precision),A!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",A,"instead."));const U=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,O=U!==void 0?U.length:0;let V=0;Y.morphAttributes.position!==void 0&&(V=1),Y.morphAttributes.normal!==void 0&&(V=2),Y.morphAttributes.color!==void 0&&(V=3);let me,re,xe,ge;if(Q){const dr=Bs[Q];me=dr.vertexShader,re=dr.fragmentShader}else me=R.vertexShader,re=R.fragmentShader,l.update(R),xe=l.getVertexShaderID(R),ge=l.getFragmentShaderID(R);const Ie=t.getRenderTarget(),Ne=G.isInstancedMesh===!0,$e=!!R.map,ct=!!R.matcap,De=!!j,W=!!R.aoMap,ve=!!R.lightMap,Ae=!!R.bumpMap,Se=!!R.normalMap,ye=!!R.displacementMap,Ze=!!R.emissiveMap,Qe=!!R.metalnessMap,Ge=!!R.roughnessMap,st=R.anisotropy>0,Mt=R.clearcoat>0,$t=R.iridescence>0,H=R.sheen>0,N=R.transmission>0,ue=st&&!!R.anisotropyMap,_e=Mt&&!!R.clearcoatMap,Ce=Mt&&!!R.clearcoatNormalMap,Le=Mt&&!!R.clearcoatRoughnessMap,Xe=$t&&!!R.iridescenceMap,be=$t&&!!R.iridescenceThicknessMap,he=H&&!!R.sheenColorMap,et=H&&!!R.sheenRoughnessMap,rt=!!R.specularMap,ot=!!R.specularColorMap,qe=!!R.specularIntensityMap,Ye=N&&!!R.transmissionMap,Tt=N&&!!R.thicknessMap,Gt=!!R.gradientMap,K=!!R.alphaMap,Be=R.alphaTest>0,ie=!!R.alphaHash,we=!!R.extensions,Oe=!!Y.attributes.uv1,Ut=!!Y.attributes.uv2,sn=!!Y.attributes.uv3;return{isWebGL2:h,shaderID:Q,shaderType:R.type,shaderName:R.name,vertexShader:me,fragmentShader:re,defines:R.defines,customVertexShaderID:xe,customFragmentShaderID:ge,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:A,instancing:Ne,instancingColor:Ne&&G.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Ie===null?t.outputColorSpace:Ie.isXRRenderTarget===!0?Ie.texture.colorSpace:Os,map:$e,matcap:ct,envMap:De,envMapMode:De&&j.mapping,envMapCubeUVHeight:P,aoMap:W,lightMap:ve,bumpMap:Ae,normalMap:Se,displacementMap:p&&ye,emissiveMap:Ze,normalMapObjectSpace:Se&&R.normalMapType===zI,normalMapTangentSpace:Se&&R.normalMapType===vl,metalnessMap:Qe,roughnessMap:Ge,anisotropy:st,anisotropyMap:ue,clearcoat:Mt,clearcoatMap:_e,clearcoatNormalMap:Ce,clearcoatRoughnessMap:Le,iridescence:$t,iridescenceMap:Xe,iridescenceThicknessMap:be,sheen:H,sheenColorMap:he,sheenRoughnessMap:et,specularMap:rt,specularColorMap:ot,specularIntensityMap:qe,transmission:N,transmissionMap:Ye,thicknessMap:Tt,gradientMap:Gt,opaque:R.transparent===!1&&R.blending===mo,alphaMap:K,alphaTest:Be,alphaHash:ie,combine:R.combine,mapUv:$e&&S(R.map.channel),aoMapUv:W&&S(R.aoMap.channel),lightMapUv:ve&&S(R.lightMap.channel),bumpMapUv:Ae&&S(R.bumpMap.channel),normalMapUv:Se&&S(R.normalMap.channel),displacementMapUv:ye&&S(R.displacementMap.channel),emissiveMapUv:Ze&&S(R.emissiveMap.channel),metalnessMapUv:Qe&&S(R.metalnessMap.channel),roughnessMapUv:Ge&&S(R.roughnessMap.channel),anisotropyMapUv:ue&&S(R.anisotropyMap.channel),clearcoatMapUv:_e&&S(R.clearcoatMap.channel),clearcoatNormalMapUv:Ce&&S(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Le&&S(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Xe&&S(R.iridescenceMap.channel),iridescenceThicknessMapUv:be&&S(R.iridescenceThicknessMap.channel),sheenColorMapUv:he&&S(R.sheenColorMap.channel),sheenRoughnessMapUv:et&&S(R.sheenRoughnessMap.channel),specularMapUv:rt&&S(R.specularMap.channel),specularColorMapUv:ot&&S(R.specularColorMap.channel),specularIntensityMapUv:qe&&S(R.specularIntensityMap.channel),transmissionMapUv:Ye&&S(R.transmissionMap.channel),thicknessMapUv:Tt&&S(R.thicknessMap.channel),alphaMapUv:K&&S(R.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(Se||st),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,vertexUv1s:Oe,vertexUv2s:Ut,vertexUv3s:sn,pointsUvs:G.isPoints===!0&&!!Y.attributes.uv&&($e||K),fog:!!q,useFog:R.fog===!0,fogExp2:q&&q.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:G.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:O,morphTextureStride:V,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:t.shadowMap.enabled&&F.length>0,shadowMapType:t.shadowMap.type,toneMapping:R.toneMapped?t.toneMapping:Rr,useLegacyLights:t.useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Ls,flipSided:R.side===Ui,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:we&&R.extensions.derivatives===!0,extensionFragDepth:we&&R.extensions.fragDepth===!0,extensionDrawBuffers:we&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:we&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function m(R){const B=[];if(R.shaderID?B.push(R.shaderID):(B.push(R.customVertexShaderID),B.push(R.customFragmentShaderID)),R.defines!==void 0)for(const F in R.defines)B.push(F),B.push(R.defines[F]);return R.isRawShaderMaterial===!1&&(x(B,R),y(B,R),B.push(t.outputColorSpace)),B.push(R.customProgramCacheKey),B.join()}function x(R,B){R.push(B.precision),R.push(B.outputColorSpace),R.push(B.envMapMode),R.push(B.envMapCubeUVHeight),R.push(B.mapUv),R.push(B.alphaMapUv),R.push(B.lightMapUv),R.push(B.aoMapUv),R.push(B.bumpMapUv),R.push(B.normalMapUv),R.push(B.displacementMapUv),R.push(B.emissiveMapUv),R.push(B.metalnessMapUv),R.push(B.roughnessMapUv),R.push(B.anisotropyMapUv),R.push(B.clearcoatMapUv),R.push(B.clearcoatNormalMapUv),R.push(B.clearcoatRoughnessMapUv),R.push(B.iridescenceMapUv),R.push(B.iridescenceThicknessMapUv),R.push(B.sheenColorMapUv),R.push(B.sheenRoughnessMapUv),R.push(B.specularMapUv),R.push(B.specularColorMapUv),R.push(B.specularIntensityMapUv),R.push(B.transmissionMapUv),R.push(B.thicknessMapUv),R.push(B.combine),R.push(B.fogExp2),R.push(B.sizeAttenuation),R.push(B.morphTargetsCount),R.push(B.morphAttributeCount),R.push(B.numDirLights),R.push(B.numPointLights),R.push(B.numSpotLights),R.push(B.numSpotLightMaps),R.push(B.numHemiLights),R.push(B.numRectAreaLights),R.push(B.numDirLightShadows),R.push(B.numPointLightShadows),R.push(B.numSpotLightShadows),R.push(B.numSpotLightShadowsWithMaps),R.push(B.shadowMapType),R.push(B.toneMapping),R.push(B.numClippingPlanes),R.push(B.numClipIntersection),R.push(B.depthPacking)}function y(R,B){a.disableAll(),B.isWebGL2&&a.enable(0),B.supportsVertexTextures&&a.enable(1),B.instancing&&a.enable(2),B.instancingColor&&a.enable(3),B.matcap&&a.enable(4),B.envMap&&a.enable(5),B.normalMapObjectSpace&&a.enable(6),B.normalMapTangentSpace&&a.enable(7),B.clearcoat&&a.enable(8),B.iridescence&&a.enable(9),B.alphaTest&&a.enable(10),B.vertexColors&&a.enable(11),B.vertexAlphas&&a.enable(12),B.vertexUv1s&&a.enable(13),B.vertexUv2s&&a.enable(14),B.vertexUv3s&&a.enable(15),B.vertexTangents&&a.enable(16),B.anisotropy&&a.enable(17),R.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.skinning&&a.enable(4),B.morphTargets&&a.enable(5),B.morphNormals&&a.enable(6),B.morphColors&&a.enable(7),B.premultipliedAlpha&&a.enable(8),B.shadowMapEnabled&&a.enable(9),B.useLegacyLights&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.transmission&&a.enable(15),B.sheen&&a.enable(16),B.opaque&&a.enable(17),B.pointsUvs&&a.enable(18),R.push(a.mask)}function C(R){const B=g[R.type];let F;if(B){const X=Bs[B];F=_n.clone(X.uniforms)}else F=R.uniforms;return F}function I(R,B){let F;for(let X=0,G=u.length;X<G;X++){const q=u[X];if(q.cacheKey===B){F=q,++F.usedTimes;break}}return F===void 0&&(F=new Sk(t,B,R,s),u.push(F)),F}function M(R){if(--R.usedTimes===0){const B=u.indexOf(R);u[B]=u[u.length-1],u.pop(),R.destroy()}}function w(R){l.remove(R)}function L(){l.dispose()}return{getParameters:E,getProgramCacheKey:m,getUniforms:C,acquireProgram:I,releaseProgram:M,releaseShaderCache:w,programs:u,dispose:L}}function wk(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Mk(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function UE(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function OE(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(d,p,A,g,S,E){let m=t[e];return m===void 0?(m={id:d.id,object:d,geometry:p,material:A,groupOrder:g,renderOrder:d.renderOrder,z:S,group:E},t[e]=m):(m.id=d.id,m.object=d,m.geometry=p,m.material=A,m.groupOrder=g,m.renderOrder=d.renderOrder,m.z=S,m.group=E),e++,m}function a(d,p,A,g,S,E){const m=o(d,p,A,g,S,E);A.transmission>0?i.push(m):A.transparent===!0?r.push(m):n.push(m)}function l(d,p,A,g,S,E){const m=o(d,p,A,g,S,E);A.transmission>0?i.unshift(m):A.transparent===!0?r.unshift(m):n.unshift(m)}function u(d,p){n.length>1&&n.sort(d||Mk),i.length>1&&i.sort(p||UE),r.length>1&&r.sort(p||UE)}function h(){for(let d=e,p=t.length;d<p;d++){const A=t[d];if(A.id===null)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:u}}function Rk(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new OE,t.set(i,[o])):r>=s.length?(o=new OE,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function bk(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new D,color:new Ee};break;case"SpotLight":n={position:new D,direction:new D,color:new Ee,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new D,color:new Ee,distance:0,decay:0};break;case"HemisphereLight":n={direction:new D,skyColor:new Ee,groundColor:new Ee};break;case"RectAreaLight":n={color:new Ee,position:new D,halfWidth:new D,halfHeight:new D};break}return t[e.id]=n,n}}}function Bk(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Lk=0;function Pk(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Dk(t,e){const n=new bk,i=Bk(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new D);const s=new D,o=new He,a=new He;function l(h,d){let p=0,A=0,g=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let S=0,E=0,m=0,x=0,y=0,C=0,I=0,M=0,w=0,L=0;h.sort(Pk);const R=d===!0?Math.PI:1;for(let F=0,X=h.length;F<X;F++){const G=h[F],q=G.color,Y=G.intensity,$=G.distance,j=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)p+=q.r*Y*R,A+=q.g*Y*R,g+=q.b*Y*R;else if(G.isLightProbe)for(let P=0;P<9;P++)r.probe[P].addScaledVector(G.sh.coefficients[P],Y);else if(G.isDirectionalLight){const P=n.get(G);if(P.color.copy(G.color).multiplyScalar(G.intensity*R),G.castShadow){const Q=G.shadow,U=i.get(G);U.shadowBias=Q.bias,U.shadowNormalBias=Q.normalBias,U.shadowRadius=Q.radius,U.shadowMapSize=Q.mapSize,r.directionalShadow[S]=U,r.directionalShadowMap[S]=j,r.directionalShadowMatrix[S]=G.shadow.matrix,C++}r.directional[S]=P,S++}else if(G.isSpotLight){const P=n.get(G);P.position.setFromMatrixPosition(G.matrixWorld),P.color.copy(q).multiplyScalar(Y*R),P.distance=$,P.coneCos=Math.cos(G.angle),P.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),P.decay=G.decay,r.spot[m]=P;const Q=G.shadow;if(G.map&&(r.spotLightMap[w]=G.map,w++,Q.updateMatrices(G),G.castShadow&&L++),r.spotLightMatrix[m]=Q.matrix,G.castShadow){const U=i.get(G);U.shadowBias=Q.bias,U.shadowNormalBias=Q.normalBias,U.shadowRadius=Q.radius,U.shadowMapSize=Q.mapSize,r.spotShadow[m]=U,r.spotShadowMap[m]=j,M++}m++}else if(G.isRectAreaLight){const P=n.get(G);P.color.copy(q).multiplyScalar(Y),P.halfWidth.set(G.width*.5,0,0),P.halfHeight.set(0,G.height*.5,0),r.rectArea[x]=P,x++}else if(G.isPointLight){const P=n.get(G);if(P.color.copy(G.color).multiplyScalar(G.intensity*R),P.distance=G.distance,P.decay=G.decay,G.castShadow){const Q=G.shadow,U=i.get(G);U.shadowBias=Q.bias,U.shadowNormalBias=Q.normalBias,U.shadowRadius=Q.radius,U.shadowMapSize=Q.mapSize,U.shadowCameraNear=Q.camera.near,U.shadowCameraFar=Q.camera.far,r.pointShadow[E]=U,r.pointShadowMap[E]=j,r.pointShadowMatrix[E]=G.shadow.matrix,I++}r.point[E]=P,E++}else if(G.isHemisphereLight){const P=n.get(G);P.skyColor.copy(G.color).multiplyScalar(Y*R),P.groundColor.copy(G.groundColor).multiplyScalar(Y*R),r.hemi[y]=P,y++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=A,r.ambient[2]=g;const B=r.hash;(B.directionalLength!==S||B.pointLength!==E||B.spotLength!==m||B.rectAreaLength!==x||B.hemiLength!==y||B.numDirectionalShadows!==C||B.numPointShadows!==I||B.numSpotShadows!==M||B.numSpotMaps!==w)&&(r.directional.length=S,r.spot.length=m,r.rectArea.length=x,r.point.length=E,r.hemi.length=y,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=I,r.pointShadowMap.length=I,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=I,r.spotLightMatrix.length=M+w-L,r.spotLightMap.length=w,r.numSpotLightShadowsWithMaps=L,B.directionalLength=S,B.pointLength=E,B.spotLength=m,B.rectAreaLength=x,B.hemiLength=y,B.numDirectionalShadows=C,B.numPointShadows=I,B.numSpotShadows=M,B.numSpotMaps=w,r.version=Lk++)}function u(h,d){let p=0,A=0,g=0,S=0,E=0;const m=d.matrixWorldInverse;for(let x=0,y=h.length;x<y;x++){const C=h[x];if(C.isDirectionalLight){const I=r.directional[p];I.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(m),p++}else if(C.isSpotLight){const I=r.spot[g];I.position.setFromMatrixPosition(C.matrixWorld),I.position.applyMatrix4(m),I.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(m),g++}else if(C.isRectAreaLight){const I=r.rectArea[S];I.position.setFromMatrixPosition(C.matrixWorld),I.position.applyMatrix4(m),a.identity(),o.copy(C.matrixWorld),o.premultiply(m),a.extractRotation(o),I.halfWidth.set(C.width*.5,0,0),I.halfHeight.set(0,C.height*.5,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),S++}else if(C.isPointLight){const I=r.point[A];I.position.setFromMatrixPosition(C.matrixWorld),I.position.applyMatrix4(m),A++}else if(C.isHemisphereLight){const I=r.hemi[E];I.direction.setFromMatrixPosition(C.matrixWorld),I.direction.transformDirection(m),E++}}}return{setup:l,setupView:u,state:r}}function kE(t,e){const n=new Dk(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){n.setup(i,d)}function u(d){n.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function Nk(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new kE(t,e),n.set(s,[l])):o>=a.length?(l=new kE(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class Jm extends jn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GI,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class s4 extends jn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Fk=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Uk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ok(t,e,n){let i=new Km;const r=new oe,s=new oe,o=new kt,a=new Jm({depthPacking:Z8}),l=new s4,u={},h=n.maxTextureSize,d={[_o]:Ui,[Ui]:_o,[Ls]:Ls},p=new Vt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new oe},radius:{value:4}},vertexShader:Fk,fragmentShader:Uk}),A=p.clone();A.defines.HORIZONTAL_PASS=1;const g=new xt;g.setAttribute("position",new jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Kt(g,p),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qm;let m=this.type;this.render=function(I,M,w){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||I.length===0)return;const L=t.getRenderTarget(),R=t.getActiveCubeFace(),B=t.getActiveMipmapLevel(),F=t.state;F.setBlending(Nt),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const X=m!==Ms&&this.type===Ms,G=m===Ms&&this.type!==Ms;for(let q=0,Y=I.length;q<Y;q++){const $=I[q],j=$.shadow;if(j===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(j.autoUpdate===!1&&j.needsUpdate===!1)continue;r.copy(j.mapSize);const P=j.getFrameExtents();if(r.multiply(P),s.copy(j.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/P.x),r.x=s.x*P.x,j.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/P.y),r.y=s.y*P.y,j.mapSize.y=s.y)),j.map===null||X===!0||G===!0){const U=this.type!==Ms?{minFilter:vt,magFilter:vt}:{};j.map!==null&&j.map.dispose(),j.map=new rn(r.x,r.y,U),j.map.texture.name=$.name+".shadowMap",j.camera.updateProjectionMatrix()}t.setRenderTarget(j.map),t.clear();const Q=j.getViewportCount();for(let U=0;U<Q;U++){const O=j.getViewport(U);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),F.viewport(o),j.updateMatrices($,U),i=j.getFrustum(),C(M,w,j.camera,$,this.type)}j.isPointLightShadow!==!0&&this.type===Ms&&x(j,w),j.needsUpdate=!1}m=this.type,E.needsUpdate=!1,t.setRenderTarget(L,R,B)};function x(I,M){const w=e.update(S);p.defines.VSM_SAMPLES!==I.blurSamples&&(p.defines.VSM_SAMPLES=I.blurSamples,A.defines.VSM_SAMPLES=I.blurSamples,p.needsUpdate=!0,A.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new rn(r.x,r.y)),p.uniforms.shadow_pass.value=I.map.texture,p.uniforms.resolution.value=I.mapSize,p.uniforms.radius.value=I.radius,t.setRenderTarget(I.mapPass),t.clear(),t.renderBufferDirect(M,null,w,p,S,null),A.uniforms.shadow_pass.value=I.mapPass.texture,A.uniforms.resolution.value=I.mapSize,A.uniforms.radius.value=I.radius,t.setRenderTarget(I.map),t.clear(),t.renderBufferDirect(M,null,w,A,S,null)}function y(I,M,w,L){let R=null;const B=w.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(B!==void 0)R=B;else if(R=w.isPointLight===!0?l:a,t.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const F=R.uuid,X=M.uuid;let G=u[F];G===void 0&&(G={},u[F]=G);let q=G[X];q===void 0&&(q=R.clone(),G[X]=q),R=q}if(R.visible=M.visible,R.wireframe=M.wireframe,L===Ms?R.side=M.shadowSide!==null?M.shadowSide:M.side:R.side=M.shadowSide!==null?M.shadowSide:d[M.side],R.alphaMap=M.alphaMap,R.alphaTest=M.alphaTest,R.map=M.map,R.clipShadows=M.clipShadows,R.clippingPlanes=M.clippingPlanes,R.clipIntersection=M.clipIntersection,R.displacementMap=M.displacementMap,R.displacementScale=M.displacementScale,R.displacementBias=M.displacementBias,R.wireframeLinewidth=M.wireframeLinewidth,R.linewidth=M.linewidth,w.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const F=t.properties.get(R);F.light=w}return R}function C(I,M,w,L,R){if(I.visible===!1)return;if(I.layers.test(M.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&R===Ms)&&(!I.frustumCulled||i.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,I.matrixWorld);const X=e.update(I),G=I.material;if(Array.isArray(G)){const q=X.groups;for(let Y=0,$=q.length;Y<$;Y++){const j=q[Y],P=G[j.materialIndex];if(P&&P.visible){const Q=y(I,P,L,R);t.renderBufferDirect(w,null,X,Q,I,j)}}}else if(G.visible){const q=y(I,G,L,R);t.renderBufferDirect(w,null,X,q,I,null)}}const F=I.children;for(let X=0,G=F.length;X<G;X++)C(F[X],M,w,L,R)}}function kk(t,e,n){const i=n.isWebGL2;function r(){let K=!1;const Be=new kt;let ie=null;const we=new kt(0,0,0,0);return{setMask:function(Oe){ie!==Oe&&!K&&(t.colorMask(Oe,Oe,Oe,Oe),ie=Oe)},setLocked:function(Oe){K=Oe},setClear:function(Oe,Ut,sn,Vn,dr){dr===!0&&(Oe*=Vn,Ut*=Vn,sn*=Vn),Be.set(Oe,Ut,sn,Vn),we.equals(Be)===!1&&(t.clearColor(Oe,Ut,sn,Vn),we.copy(Be))},reset:function(){K=!1,ie=null,we.set(-1,0,0,0)}}}function s(){let K=!1,Be=null,ie=null,we=null;return{setTest:function(Oe){Oe?Ie(t.DEPTH_TEST):Ne(t.DEPTH_TEST)},setMask:function(Oe){Be!==Oe&&!K&&(t.depthMask(Oe),Be=Oe)},setFunc:function(Oe){if(ie!==Oe){switch(Oe){case yI:t.depthFunc(t.NEVER);break;case xI:t.depthFunc(t.ALWAYS);break;case EI:t.depthFunc(t.LESS);break;case em:t.depthFunc(t.LEQUAL);break;case SI:t.depthFunc(t.EQUAL);break;case _I:t.depthFunc(t.GEQUAL);break;case CI:t.depthFunc(t.GREATER);break;case TI:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ie=Oe}},setLocked:function(Oe){K=Oe},setClear:function(Oe){we!==Oe&&(t.clearDepth(Oe),we=Oe)},reset:function(){K=!1,Be=null,ie=null,we=null}}}function o(){let K=!1,Be=null,ie=null,we=null,Oe=null,Ut=null,sn=null,Vn=null,dr=null;return{setTest:function(hn){K||(hn?Ie(t.STENCIL_TEST):Ne(t.STENCIL_TEST))},setMask:function(hn){Be!==hn&&!K&&(t.stencilMask(hn),Be=hn)},setFunc:function(hn,pr,mi){(ie!==hn||we!==pr||Oe!==mi)&&(t.stencilFunc(hn,pr,mi),ie=hn,we=pr,Oe=mi)},setOp:function(hn,pr,mi){(Ut!==hn||sn!==pr||Vn!==mi)&&(t.stencilOp(hn,pr,mi),Ut=hn,sn=pr,Vn=mi)},setLocked:function(hn){K=hn},setClear:function(hn){dr!==hn&&(t.clearStencil(hn),dr=hn)},reset:function(){K=!1,Be=null,ie=null,we=null,Oe=null,Ut=null,sn=null,Vn=null,dr=null}}}const a=new r,l=new s,u=new o,h=new WeakMap,d=new WeakMap;let p={},A={},g=new WeakMap,S=[],E=null,m=!1,x=null,y=null,C=null,I=null,M=null,w=null,L=null,R=!1,B=null,F=null,X=null,G=null,q=null;const Y=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,j=0;const P=t.getParameter(t.VERSION);P.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(P)[1]),$=j>=1):P.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(P)[1]),$=j>=2);let Q=null,U={};const O=t.getParameter(t.SCISSOR_BOX),V=t.getParameter(t.VIEWPORT),me=new kt().fromArray(O),re=new kt().fromArray(V);function xe(K,Be,ie,we){const Oe=new Uint8Array(4),Ut=t.createTexture();t.bindTexture(K,Ut),t.texParameteri(K,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(K,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let sn=0;sn<ie;sn++)i&&(K===t.TEXTURE_3D||K===t.TEXTURE_2D_ARRAY)?t.texImage3D(Be,0,t.RGBA,1,1,we,0,t.RGBA,t.UNSIGNED_BYTE,Oe):t.texImage2D(Be+sn,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Oe);return Ut}const ge={};ge[t.TEXTURE_2D]=xe(t.TEXTURE_2D,t.TEXTURE_2D,1),ge[t.TEXTURE_CUBE_MAP]=xe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(ge[t.TEXTURE_2D_ARRAY]=xe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ge[t.TEXTURE_3D]=xe(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ie(t.DEPTH_TEST),l.setFunc(em),ye(!1),Ze(Dv),Ie(t.CULL_FACE),Ae(Nt);function Ie(K){p[K]!==!0&&(t.enable(K),p[K]=!0)}function Ne(K){p[K]!==!1&&(t.disable(K),p[K]=!1)}function $e(K,Be){return A[K]!==Be?(t.bindFramebuffer(K,Be),A[K]=Be,i&&(K===t.DRAW_FRAMEBUFFER&&(A[t.FRAMEBUFFER]=Be),K===t.FRAMEBUFFER&&(A[t.DRAW_FRAMEBUFFER]=Be)),!0):!1}function ct(K,Be){let ie=S,we=!1;if(K)if(ie=g.get(Be),ie===void 0&&(ie=[],g.set(Be,ie)),K.isWebGLMultipleRenderTargets){const Oe=K.texture;if(ie.length!==Oe.length||ie[0]!==t.COLOR_ATTACHMENT0){for(let Ut=0,sn=Oe.length;Ut<sn;Ut++)ie[Ut]=t.COLOR_ATTACHMENT0+Ut;ie.length=Oe.length,we=!0}}else ie[0]!==t.COLOR_ATTACHMENT0&&(ie[0]=t.COLOR_ATTACHMENT0,we=!0);else ie[0]!==t.BACK&&(ie[0]=t.BACK,we=!0);we&&(n.isWebGL2?t.drawBuffers(ie):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ie))}function De(K){return E!==K?(t.useProgram(K),E=K,!0):!1}const W={[Cr]:t.FUNC_ADD,[hI]:t.FUNC_SUBTRACT,[fI]:t.FUNC_REVERSE_SUBTRACT};if(i)W[Uv]=t.MIN,W[Ov]=t.MAX;else{const K=e.get("EXT_blend_minmax");K!==null&&(W[Uv]=K.MIN_EXT,W[Ov]=K.MAX_EXT)}const ve={[ph]:t.ZERO,[dI]:t.ONE,[pI]:t.SRC_COLOR,[Nd]:t.SRC_ALPHA,[vI]:t.SRC_ALPHA_SATURATE,[zm]:t.DST_COLOR,[Gm]:t.DST_ALPHA,[AI]:t.ONE_MINUS_SRC_COLOR,[Fd]:t.ONE_MINUS_SRC_ALPHA,[gI]:t.ONE_MINUS_DST_COLOR,[mI]:t.ONE_MINUS_DST_ALPHA};function Ae(K,Be,ie,we,Oe,Ut,sn,Vn){if(K===Nt){m===!0&&(Ne(t.BLEND),m=!1);return}if(m===!1&&(Ie(t.BLEND),m=!0),K!==Dd){if(K!==x||Vn!==R){if((y!==Cr||M!==Cr)&&(t.blendEquation(t.FUNC_ADD),y=Cr,M=Cr),Vn)switch(K){case mo:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Pd:t.blendFunc(t.ONE,t.ONE);break;case Nv:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Fv:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}else switch(K){case mo:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Pd:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Nv:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Fv:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}C=null,I=null,w=null,L=null,x=K,R=Vn}return}Oe=Oe||Be,Ut=Ut||ie,sn=sn||we,(Be!==y||Oe!==M)&&(t.blendEquationSeparate(W[Be],W[Oe]),y=Be,M=Oe),(ie!==C||we!==I||Ut!==w||sn!==L)&&(t.blendFuncSeparate(ve[ie],ve[we],ve[Ut],ve[sn]),C=ie,I=we,w=Ut,L=sn),x=K,R=!1}function Se(K,Be){K.side===Ls?Ne(t.CULL_FACE):Ie(t.CULL_FACE);let ie=K.side===Ui;Be&&(ie=!ie),ye(ie),K.blending===mo&&K.transparent===!1?Ae(Nt):Ae(K.blending,K.blendEquation,K.blendSrc,K.blendDst,K.blendEquationAlpha,K.blendSrcAlpha,K.blendDstAlpha,K.premultipliedAlpha),l.setFunc(K.depthFunc),l.setTest(K.depthTest),l.setMask(K.depthWrite),a.setMask(K.colorWrite);const we=K.stencilWrite;u.setTest(we),we&&(u.setMask(K.stencilWriteMask),u.setFunc(K.stencilFunc,K.stencilRef,K.stencilFuncMask),u.setOp(K.stencilFail,K.stencilZFail,K.stencilZPass)),Ge(K.polygonOffset,K.polygonOffsetFactor,K.polygonOffsetUnits),K.alphaToCoverage===!0?Ie(t.SAMPLE_ALPHA_TO_COVERAGE):Ne(t.SAMPLE_ALPHA_TO_COVERAGE)}function ye(K){B!==K&&(K?t.frontFace(t.CW):t.frontFace(t.CCW),B=K)}function Ze(K){K!==lI?(Ie(t.CULL_FACE),K!==F&&(K===Dv?t.cullFace(t.BACK):K===uI?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ne(t.CULL_FACE),F=K}function Qe(K){K!==X&&($&&t.lineWidth(K),X=K)}function Ge(K,Be,ie){K?(Ie(t.POLYGON_OFFSET_FILL),(G!==Be||q!==ie)&&(t.polygonOffset(Be,ie),G=Be,q=ie)):Ne(t.POLYGON_OFFSET_FILL)}function st(K){K?Ie(t.SCISSOR_TEST):Ne(t.SCISSOR_TEST)}function Mt(K){K===void 0&&(K=t.TEXTURE0+Y-1),Q!==K&&(t.activeTexture(K),Q=K)}function $t(K,Be,ie){ie===void 0&&(Q===null?ie=t.TEXTURE0+Y-1:ie=Q);let we=U[ie];we===void 0&&(we={type:void 0,texture:void 0},U[ie]=we),(we.type!==K||we.texture!==Be)&&(Q!==ie&&(t.activeTexture(ie),Q=ie),t.bindTexture(K,Be||ge[K]),we.type=K,we.texture=Be)}function H(){const K=U[Q];K!==void 0&&K.type!==void 0&&(t.bindTexture(K.type,null),K.type=void 0,K.texture=void 0)}function N(){try{t.compressedTexImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ue(){try{t.compressedTexImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function _e(){try{t.texSubImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Ce(){try{t.texSubImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Le(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function Xe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function be(){try{t.texStorage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function he(){try{t.texStorage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function et(){try{t.texImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function rt(){try{t.texImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ot(K){me.equals(K)===!1&&(t.scissor(K.x,K.y,K.z,K.w),me.copy(K))}function qe(K){re.equals(K)===!1&&(t.viewport(K.x,K.y,K.z,K.w),re.copy(K))}function Ye(K,Be){let ie=d.get(Be);ie===void 0&&(ie=new WeakMap,d.set(Be,ie));let we=ie.get(K);we===void 0&&(we=t.getUniformBlockIndex(Be,K.name),ie.set(K,we))}function Tt(K,Be){const we=d.get(Be).get(K);h.get(Be)!==we&&(t.uniformBlockBinding(Be,we,K.__bindingPointIndex),h.set(Be,we))}function Gt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},Q=null,U={},A={},g=new WeakMap,S=[],E=null,m=!1,x=null,y=null,C=null,I=null,M=null,w=null,L=null,R=!1,B=null,F=null,X=null,G=null,q=null,me.set(0,0,t.canvas.width,t.canvas.height),re.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Ie,disable:Ne,bindFramebuffer:$e,drawBuffers:ct,useProgram:De,setBlending:Ae,setMaterial:Se,setFlipSided:ye,setCullFace:Ze,setLineWidth:Qe,setPolygonOffset:Ge,setScissorTest:st,activeTexture:Mt,bindTexture:$t,unbindTexture:H,compressedTexImage2D:N,compressedTexImage3D:ue,texImage2D:et,texImage3D:rt,updateUBOMapping:Ye,uniformBlockBinding:Tt,texStorage2D:be,texStorage3D:he,texSubImage2D:_e,texSubImage3D:Ce,compressedTexSubImage2D:Le,compressedTexSubImage3D:Xe,scissor:ot,viewport:qe,reset:Gt}}function Qk(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,h=r.maxTextureSize,d=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,A=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let S;const E=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(H,N){return m?new OffscreenCanvas(H,N):Yd("canvas")}function y(H,N,ue,_e){let Ce=1;if((H.width>_e||H.height>_e)&&(Ce=_e/Math.max(H.width,H.height)),Ce<1||N===!0)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap){const Le=N?im:Math.floor,Xe=Le(Ce*H.width),be=Le(Ce*H.height);S===void 0&&(S=x(Xe,be));const he=ue?x(Xe,be):S;return he.width=Xe,he.height=be,he.getContext("2d").drawImage(H,0,0,Xe,be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+H.width+"x"+H.height+") to ("+Xe+"x"+be+")."),he}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+H.width+"x"+H.height+")."),H;return H}function C(H){return r6(H.width)&&r6(H.height)}function I(H){return a?!1:H.wrapS!==Sn||H.wrapT!==Sn||H.minFilter!==vt&&H.minFilter!==nn}function M(H,N){return H.generateMipmaps&&N&&H.minFilter!==vt&&H.minFilter!==nn}function w(H){t.generateMipmap(H)}function L(H,N,ue,_e,Ce=!1){if(a===!1)return N;if(H!==null){if(t[H]!==void 0)return t[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let Le=N;return N===t.RED&&(ue===t.FLOAT&&(Le=t.R32F),ue===t.HALF_FLOAT&&(Le=t.R16F),ue===t.UNSIGNED_BYTE&&(Le=t.R8)),N===t.RG&&(ue===t.FLOAT&&(Le=t.RG32F),ue===t.HALF_FLOAT&&(Le=t.RG16F),ue===t.UNSIGNED_BYTE&&(Le=t.RG8)),N===t.RGBA&&(ue===t.FLOAT&&(Le=t.RGBA32F),ue===t.HALF_FLOAT&&(Le=t.RGBA16F),ue===t.UNSIGNED_BYTE&&(Le=_e===It&&Ce===!1?t.SRGB8_ALPHA8:t.RGBA8),ue===t.UNSIGNED_SHORT_4_4_4_4&&(Le=t.RGBA4),ue===t.UNSIGNED_SHORT_5_5_5_1&&(Le=t.RGB5_A1)),(Le===t.R16F||Le===t.R32F||Le===t.RG16F||Le===t.RG32F||Le===t.RGBA16F||Le===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function R(H,N,ue){return M(H,ue)===!0||H.isFramebufferTexture&&H.minFilter!==vt&&H.minFilter!==nn?Math.log2(Math.max(N.width,N.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?N.mipmaps.length:1}function B(H){return H===vt||H===kd||H===Zc?t.NEAREST:t.LINEAR}function F(H){const N=H.target;N.removeEventListener("dispose",F),G(N),N.isVideoTexture&&g.delete(N)}function X(H){const N=H.target;N.removeEventListener("dispose",X),Y(N)}function G(H){const N=i.get(H);if(N.__webglInit===void 0)return;const ue=H.source,_e=E.get(ue);if(_e){const Ce=_e[N.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&q(H),Object.keys(_e).length===0&&E.delete(ue)}i.remove(H)}function q(H){const N=i.get(H);t.deleteTexture(N.__webglTexture);const ue=H.source,_e=E.get(ue);delete _e[N.__cacheKey],o.memory.textures--}function Y(H){const N=H.texture,ue=i.get(H),_e=i.get(N);if(_e.__webglTexture!==void 0&&(t.deleteTexture(_e.__webglTexture),o.memory.textures--),H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)t.deleteFramebuffer(ue.__webglFramebuffer[Ce]),ue.__webglDepthbuffer&&t.deleteRenderbuffer(ue.__webglDepthbuffer[Ce]);else{if(t.deleteFramebuffer(ue.__webglFramebuffer),ue.__webglDepthbuffer&&t.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let Ce=0;Ce<ue.__webglColorRenderbuffer.length;Ce++)ue.__webglColorRenderbuffer[Ce]&&t.deleteRenderbuffer(ue.__webglColorRenderbuffer[Ce]);ue.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}if(H.isWebGLMultipleRenderTargets)for(let Ce=0,Le=N.length;Ce<Le;Ce++){const Xe=i.get(N[Ce]);Xe.__webglTexture&&(t.deleteTexture(Xe.__webglTexture),o.memory.textures--),i.remove(N[Ce])}i.remove(N),i.remove(H)}let $=0;function j(){$=0}function P(){const H=$;return H>=l&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+l),$+=1,H}function Q(H){const N=[];return N.push(H.wrapS),N.push(H.wrapT),N.push(H.wrapR||0),N.push(H.magFilter),N.push(H.minFilter),N.push(H.anisotropy),N.push(H.internalFormat),N.push(H.format),N.push(H.type),N.push(H.generateMipmaps),N.push(H.premultiplyAlpha),N.push(H.flipY),N.push(H.unpackAlignment),N.push(H.colorSpace),N.join()}function U(H,N){const ue=i.get(H);if(H.isVideoTexture&&Mt(H),H.isRenderTargetTexture===!1&&H.version>0&&ue.__version!==H.version){const _e=H.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$e(ue,H,N);return}}n.bindTexture(t.TEXTURE_2D,ue.__webglTexture,t.TEXTURE0+N)}function O(H,N){const ue=i.get(H);if(H.version>0&&ue.__version!==H.version){$e(ue,H,N);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ue.__webglTexture,t.TEXTURE0+N)}function V(H,N){const ue=i.get(H);if(H.version>0&&ue.__version!==H.version){$e(ue,H,N);return}n.bindTexture(t.TEXTURE_3D,ue.__webglTexture,t.TEXTURE0+N)}function me(H,N){const ue=i.get(H);if(H.version>0&&ue.__version!==H.version){ct(ue,H,N);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ue.__webglTexture,t.TEXTURE0+N)}const re={[hs]:t.REPEAT,[Sn]:t.CLAMP_TO_EDGE,[Ah]:t.MIRRORED_REPEAT},xe={[vt]:t.NEAREST,[kd]:t.NEAREST_MIPMAP_NEAREST,[Zc]:t.NEAREST_MIPMAP_LINEAR,[nn]:t.LINEAR,[Vm]:t.LINEAR_MIPMAP_NEAREST,[fs]:t.LINEAR_MIPMAP_LINEAR},ge={[VI]:t.NEVER,[JI]:t.ALWAYS,[WI]:t.LESS,[qI]:t.LEQUAL,[XI]:t.EQUAL,[jI]:t.GEQUAL,[YI]:t.GREATER,[KI]:t.NOTEQUAL};function Ie(H,N,ue){if(ue?(t.texParameteri(H,t.TEXTURE_WRAP_S,re[N.wrapS]),t.texParameteri(H,t.TEXTURE_WRAP_T,re[N.wrapT]),(H===t.TEXTURE_3D||H===t.TEXTURE_2D_ARRAY)&&t.texParameteri(H,t.TEXTURE_WRAP_R,re[N.wrapR]),t.texParameteri(H,t.TEXTURE_MAG_FILTER,xe[N.magFilter]),t.texParameteri(H,t.TEXTURE_MIN_FILTER,xe[N.minFilter])):(t.texParameteri(H,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(H,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(H===t.TEXTURE_3D||H===t.TEXTURE_2D_ARRAY)&&t.texParameteri(H,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(N.wrapS!==Sn||N.wrapT!==Sn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(H,t.TEXTURE_MAG_FILTER,B(N.magFilter)),t.texParameteri(H,t.TEXTURE_MIN_FILTER,B(N.minFilter)),N.minFilter!==vt&&N.minFilter!==nn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),N.compareFunction&&(t.texParameteri(H,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(H,t.TEXTURE_COMPARE_FUNC,ge[N.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(N.magFilter===vt||N.minFilter!==Zc&&N.minFilter!==fs||N.type===Yi&&e.has("OES_texture_float_linear")===!1||a===!1&&N.type===Hn&&e.has("OES_texture_half_float_linear")===!1)return;(N.anisotropy>1||i.get(N).__currentAnisotropy)&&(t.texParameterf(H,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,r.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy)}}function Ne(H,N){let ue=!1;H.__webglInit===void 0&&(H.__webglInit=!0,N.addEventListener("dispose",F));const _e=N.source;let Ce=E.get(_e);Ce===void 0&&(Ce={},E.set(_e,Ce));const Le=Q(N);if(Le!==H.__cacheKey){Ce[Le]===void 0&&(Ce[Le]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ue=!0),Ce[Le].usedTimes++;const Xe=Ce[H.__cacheKey];Xe!==void 0&&(Ce[H.__cacheKey].usedTimes--,Xe.usedTimes===0&&q(N)),H.__cacheKey=Le,H.__webglTexture=Ce[Le].texture}return ue}function $e(H,N,ue){let _e=t.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(_e=t.TEXTURE_2D_ARRAY),N.isData3DTexture&&(_e=t.TEXTURE_3D);const Ce=Ne(H,N),Le=N.source;n.bindTexture(_e,H.__webglTexture,t.TEXTURE0+ue);const Xe=i.get(Le);if(Le.version!==Xe.__version||Ce===!0){n.activeTexture(t.TEXTURE0+ue),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,N.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,N.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const be=I(N)&&C(N.image)===!1;let he=y(N.image,be,!1,h);he=$t(N,he);const et=C(he)||a,rt=s.convert(N.format,N.colorSpace);let ot=s.convert(N.type),qe=L(N.internalFormat,rt,ot,N.colorSpace);Ie(_e,N,et);let Ye;const Tt=N.mipmaps,Gt=a&&N.isVideoTexture!==!0,K=Xe.__version===void 0||Ce===!0,Be=R(N,he,et);if(N.isDepthTexture)qe=t.DEPTH_COMPONENT,a?N.type===Yi?qe=t.DEPTH_COMPONENT32F:N.type===Jo?qe=t.DEPTH_COMPONENT24:N.type===ea?qe=t.DEPTH24_STENCIL8:qe=t.DEPTH_COMPONENT16:N.type===Yi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),N.format===el&&qe===t.DEPTH_COMPONENT&&N.type!==Bu&&N.type!==Jo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),N.type=Jo,ot=s.convert(N.type)),N.format===ll&&qe===t.DEPTH_COMPONENT&&(qe=t.DEPTH_STENCIL,N.type!==ea&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),N.type=ea,ot=s.convert(N.type))),K&&(Gt?n.texStorage2D(t.TEXTURE_2D,1,qe,he.width,he.height):n.texImage2D(t.TEXTURE_2D,0,qe,he.width,he.height,0,rt,ot,null));else if(N.isDataTexture)if(Tt.length>0&&et){Gt&&K&&n.texStorage2D(t.TEXTURE_2D,Be,qe,Tt[0].width,Tt[0].height);for(let ie=0,we=Tt.length;ie<we;ie++)Ye=Tt[ie],Gt?n.texSubImage2D(t.TEXTURE_2D,ie,0,0,Ye.width,Ye.height,rt,ot,Ye.data):n.texImage2D(t.TEXTURE_2D,ie,qe,Ye.width,Ye.height,0,rt,ot,Ye.data);N.generateMipmaps=!1}else Gt?(K&&n.texStorage2D(t.TEXTURE_2D,Be,qe,he.width,he.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,he.width,he.height,rt,ot,he.data)):n.texImage2D(t.TEXTURE_2D,0,qe,he.width,he.height,0,rt,ot,he.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){Gt&&K&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Be,qe,Tt[0].width,Tt[0].height,he.depth);for(let ie=0,we=Tt.length;ie<we;ie++)Ye=Tt[ie],N.format!==Un?rt!==null?Gt?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ie,0,0,0,Ye.width,Ye.height,he.depth,rt,Ye.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ie,qe,Ye.width,Ye.height,he.depth,0,Ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?n.texSubImage3D(t.TEXTURE_2D_ARRAY,ie,0,0,0,Ye.width,Ye.height,he.depth,rt,ot,Ye.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ie,qe,Ye.width,Ye.height,he.depth,0,rt,ot,Ye.data)}else{Gt&&K&&n.texStorage2D(t.TEXTURE_2D,Be,qe,Tt[0].width,Tt[0].height);for(let ie=0,we=Tt.length;ie<we;ie++)Ye=Tt[ie],N.format!==Un?rt!==null?Gt?n.compressedTexSubImage2D(t.TEXTURE_2D,ie,0,0,Ye.width,Ye.height,rt,Ye.data):n.compressedTexImage2D(t.TEXTURE_2D,ie,qe,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?n.texSubImage2D(t.TEXTURE_2D,ie,0,0,Ye.width,Ye.height,rt,ot,Ye.data):n.texImage2D(t.TEXTURE_2D,ie,qe,Ye.width,Ye.height,0,rt,ot,Ye.data)}else if(N.isDataArrayTexture)Gt?(K&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Be,qe,he.width,he.height,he.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,he.width,he.height,he.depth,rt,ot,he.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,qe,he.width,he.height,he.depth,0,rt,ot,he.data);else if(N.isData3DTexture)Gt?(K&&n.texStorage3D(t.TEXTURE_3D,Be,qe,he.width,he.height,he.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,he.width,he.height,he.depth,rt,ot,he.data)):n.texImage3D(t.TEXTURE_3D,0,qe,he.width,he.height,he.depth,0,rt,ot,he.data);else if(N.isFramebufferTexture){if(K)if(Gt)n.texStorage2D(t.TEXTURE_2D,Be,qe,he.width,he.height);else{let ie=he.width,we=he.height;for(let Oe=0;Oe<Be;Oe++)n.texImage2D(t.TEXTURE_2D,Oe,qe,ie,we,0,rt,ot,null),ie>>=1,we>>=1}}else if(Tt.length>0&&et){Gt&&K&&n.texStorage2D(t.TEXTURE_2D,Be,qe,Tt[0].width,Tt[0].height);for(let ie=0,we=Tt.length;ie<we;ie++)Ye=Tt[ie],Gt?n.texSubImage2D(t.TEXTURE_2D,ie,0,0,rt,ot,Ye):n.texImage2D(t.TEXTURE_2D,ie,qe,rt,ot,Ye);N.generateMipmaps=!1}else Gt?(K&&n.texStorage2D(t.TEXTURE_2D,Be,qe,he.width,he.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,rt,ot,he)):n.texImage2D(t.TEXTURE_2D,0,qe,rt,ot,he);M(N,et)&&w(_e),Xe.__version=Le.version,N.onUpdate&&N.onUpdate(N)}H.__version=N.version}function ct(H,N,ue){if(N.image.length!==6)return;const _e=Ne(H,N),Ce=N.source;n.bindTexture(t.TEXTURE_CUBE_MAP,H.__webglTexture,t.TEXTURE0+ue);const Le=i.get(Ce);if(Ce.version!==Le.__version||_e===!0){n.activeTexture(t.TEXTURE0+ue),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,N.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,N.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Xe=N.isCompressedTexture||N.image[0].isCompressedTexture,be=N.image[0]&&N.image[0].isDataTexture,he=[];for(let ie=0;ie<6;ie++)!Xe&&!be?he[ie]=y(N.image[ie],!1,!0,u):he[ie]=be?N.image[ie].image:N.image[ie],he[ie]=$t(N,he[ie]);const et=he[0],rt=C(et)||a,ot=s.convert(N.format,N.colorSpace),qe=s.convert(N.type),Ye=L(N.internalFormat,ot,qe,N.colorSpace),Tt=a&&N.isVideoTexture!==!0,Gt=Le.__version===void 0||_e===!0;let K=R(N,et,rt);Ie(t.TEXTURE_CUBE_MAP,N,rt);let Be;if(Xe){Tt&&Gt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,K,Ye,et.width,et.height);for(let ie=0;ie<6;ie++){Be=he[ie].mipmaps;for(let we=0;we<Be.length;we++){const Oe=Be[we];N.format!==Un?ot!==null?Tt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,0,0,Oe.width,Oe.height,ot,Oe.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,Ye,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,0,0,Oe.width,Oe.height,ot,qe,Oe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,Ye,Oe.width,Oe.height,0,ot,qe,Oe.data)}}}else{Be=N.mipmaps,Tt&&Gt&&(Be.length>0&&K++,n.texStorage2D(t.TEXTURE_CUBE_MAP,K,Ye,he[0].width,he[0].height));for(let ie=0;ie<6;ie++)if(be){Tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,he[ie].width,he[ie].height,ot,qe,he[ie].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Ye,he[ie].width,he[ie].height,0,ot,qe,he[ie].data);for(let we=0;we<Be.length;we++){const Ut=Be[we].image[ie].image;Tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,0,0,Ut.width,Ut.height,ot,qe,Ut.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,Ye,Ut.width,Ut.height,0,ot,qe,Ut.data)}}else{Tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,ot,qe,he[ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Ye,ot,qe,he[ie]);for(let we=0;we<Be.length;we++){const Oe=Be[we];Tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,0,0,ot,qe,Oe.image[ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,Ye,ot,qe,Oe.image[ie])}}}M(N,rt)&&w(t.TEXTURE_CUBE_MAP),Le.__version=Ce.version,N.onUpdate&&N.onUpdate(N)}H.__version=N.version}function De(H,N,ue,_e,Ce){const Le=s.convert(ue.format,ue.colorSpace),Xe=s.convert(ue.type),be=L(ue.internalFormat,Le,Xe,ue.colorSpace);i.get(N).__hasExternalTextures||(Ce===t.TEXTURE_3D||Ce===t.TEXTURE_2D_ARRAY?n.texImage3D(Ce,0,be,N.width,N.height,N.depth,0,Le,Xe,null):n.texImage2D(Ce,0,be,N.width,N.height,0,Le,Xe,null)),n.bindFramebuffer(t.FRAMEBUFFER,H),st(N)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,_e,Ce,i.get(ue).__webglTexture,0,Ge(N)):(Ce===t.TEXTURE_2D||Ce>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ce<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,_e,Ce,i.get(ue).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function W(H,N,ue){if(t.bindRenderbuffer(t.RENDERBUFFER,H),N.depthBuffer&&!N.stencilBuffer){let _e=t.DEPTH_COMPONENT16;if(ue||st(N)){const Ce=N.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===Yi?_e=t.DEPTH_COMPONENT32F:Ce.type===Jo&&(_e=t.DEPTH_COMPONENT24));const Le=Ge(N);st(N)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Le,_e,N.width,N.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Le,_e,N.width,N.height)}else t.renderbufferStorage(t.RENDERBUFFER,_e,N.width,N.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,H)}else if(N.depthBuffer&&N.stencilBuffer){const _e=Ge(N);ue&&st(N)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,_e,t.DEPTH24_STENCIL8,N.width,N.height):st(N)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,_e,t.DEPTH24_STENCIL8,N.width,N.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,N.width,N.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,H)}else{const _e=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let Ce=0;Ce<_e.length;Ce++){const Le=_e[Ce],Xe=s.convert(Le.format,Le.colorSpace),be=s.convert(Le.type),he=L(Le.internalFormat,Xe,be,Le.colorSpace),et=Ge(N);ue&&st(N)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,et,he,N.width,N.height):st(N)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,et,he,N.width,N.height):t.renderbufferStorage(t.RENDERBUFFER,he,N.width,N.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ve(H,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,H),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),U(N.depthTexture,0);const _e=i.get(N.depthTexture).__webglTexture,Ce=Ge(N);if(N.depthTexture.format===el)st(N)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,_e,0,Ce):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,_e,0);else if(N.depthTexture.format===ll)st(N)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,_e,0,Ce):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function Ae(H){const N=i.get(H),ue=H.isWebGLCubeRenderTarget===!0;if(H.depthTexture&&!N.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");ve(N.__webglFramebuffer,H)}else if(ue){N.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)n.bindFramebuffer(t.FRAMEBUFFER,N.__webglFramebuffer[_e]),N.__webglDepthbuffer[_e]=t.createRenderbuffer(),W(N.__webglDepthbuffer[_e],H,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer=t.createRenderbuffer(),W(N.__webglDepthbuffer,H,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Se(H,N,ue){const _e=i.get(H);N!==void 0&&De(_e.__webglFramebuffer,H,H.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),ue!==void 0&&Ae(H)}function ye(H){const N=H.texture,ue=i.get(H),_e=i.get(N);H.addEventListener("dispose",X),H.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=t.createTexture()),_e.__version=N.version,o.memory.textures++);const Ce=H.isWebGLCubeRenderTarget===!0,Le=H.isWebGLMultipleRenderTargets===!0,Xe=C(H)||a;if(Ce){ue.__webglFramebuffer=[];for(let be=0;be<6;be++)ue.__webglFramebuffer[be]=t.createFramebuffer()}else{if(ue.__webglFramebuffer=t.createFramebuffer(),Le)if(r.drawBuffers){const be=H.texture;for(let he=0,et=be.length;he<et;he++){const rt=i.get(be[he]);rt.__webglTexture===void 0&&(rt.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&H.samples>0&&st(H)===!1){const be=Le?N:[N];ue.__webglMultisampledFramebuffer=t.createFramebuffer(),ue.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let he=0;he<be.length;he++){const et=be[he];ue.__webglColorRenderbuffer[he]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ue.__webglColorRenderbuffer[he]);const rt=s.convert(et.format,et.colorSpace),ot=s.convert(et.type),qe=L(et.internalFormat,rt,ot,et.colorSpace,H.isXRRenderTarget===!0),Ye=Ge(H);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ye,qe,H.width,H.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+he,t.RENDERBUFFER,ue.__webglColorRenderbuffer[he])}t.bindRenderbuffer(t.RENDERBUFFER,null),H.depthBuffer&&(ue.__webglDepthRenderbuffer=t.createRenderbuffer(),W(ue.__webglDepthRenderbuffer,H,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ce){n.bindTexture(t.TEXTURE_CUBE_MAP,_e.__webglTexture),Ie(t.TEXTURE_CUBE_MAP,N,Xe);for(let be=0;be<6;be++)De(ue.__webglFramebuffer[be],H,N,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+be);M(N,Xe)&&w(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Le){const be=H.texture;for(let he=0,et=be.length;he<et;he++){const rt=be[he],ot=i.get(rt);n.bindTexture(t.TEXTURE_2D,ot.__webglTexture),Ie(t.TEXTURE_2D,rt,Xe),De(ue.__webglFramebuffer,H,rt,t.COLOR_ATTACHMENT0+he,t.TEXTURE_2D),M(rt,Xe)&&w(t.TEXTURE_2D)}n.unbindTexture()}else{let be=t.TEXTURE_2D;(H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(a?be=H.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(be,_e.__webglTexture),Ie(be,N,Xe),De(ue.__webglFramebuffer,H,N,t.COLOR_ATTACHMENT0,be),M(N,Xe)&&w(be),n.unbindTexture()}H.depthBuffer&&Ae(H)}function Ze(H){const N=C(H)||a,ue=H.isWebGLMultipleRenderTargets===!0?H.texture:[H.texture];for(let _e=0,Ce=ue.length;_e<Ce;_e++){const Le=ue[_e];if(M(Le,N)){const Xe=H.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,be=i.get(Le).__webglTexture;n.bindTexture(Xe,be),w(Xe),n.unbindTexture()}}}function Qe(H){if(a&&H.samples>0&&st(H)===!1){const N=H.isWebGLMultipleRenderTargets?H.texture:[H.texture],ue=H.width,_e=H.height;let Ce=t.COLOR_BUFFER_BIT;const Le=[],Xe=H.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,be=i.get(H),he=H.isWebGLMultipleRenderTargets===!0;if(he)for(let et=0;et<N.length;et++)n.bindFramebuffer(t.FRAMEBUFFER,be.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,be.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,be.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,be.__webglFramebuffer);for(let et=0;et<N.length;et++){Le.push(t.COLOR_ATTACHMENT0+et),H.depthBuffer&&Le.push(Xe);const rt=be.__ignoreDepthValues!==void 0?be.__ignoreDepthValues:!1;if(rt===!1&&(H.depthBuffer&&(Ce|=t.DEPTH_BUFFER_BIT),H.stencilBuffer&&(Ce|=t.STENCIL_BUFFER_BIT)),he&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,be.__webglColorRenderbuffer[et]),rt===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Xe]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Xe])),he){const ot=i.get(N[et]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ot,0)}t.blitFramebuffer(0,0,ue,_e,0,0,ue,_e,Ce,t.NEAREST),A&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Le)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),he)for(let et=0;et<N.length;et++){n.bindFramebuffer(t.FRAMEBUFFER,be.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.RENDERBUFFER,be.__webglColorRenderbuffer[et]);const rt=i.get(N[et]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,be.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.TEXTURE_2D,rt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,be.__webglMultisampledFramebuffer)}}function Ge(H){return Math.min(d,H.samples)}function st(H){const N=i.get(H);return a&&H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function Mt(H){const N=o.render.frame;g.get(H)!==N&&(g.set(H,N),H.update())}function $t(H,N){const ue=H.colorSpace,_e=H.format,Ce=H.type;return H.isCompressedTexture===!0||H.format===nm||ue!==Os&&ue!==nl&&(ue===It?a===!1?e.has("EXT_sRGB")===!0&&_e===Un?(H.format=nm,H.minFilter=nn,H.generateMipmaps=!1):N=t4.sRGBToLinear(N):(_e!==Un||Ce!==ni)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),N}this.allocateTextureUnit=P,this.resetTextureUnits=j,this.setTexture2D=U,this.setTexture2DArray=O,this.setTexture3D=V,this.setTextureCube=me,this.rebindTextures=Se,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=Ze,this.updateMultisampleRenderTarget=Qe,this.setupDepthRenderbuffer=Ae,this.setupFrameBufferTexture=De,this.useMultisampledRTT=st}function uw(t,e,n){const i=n.isWebGL2;function r(s,o=nl){let a;if(s===ni)return t.UNSIGNED_BYTE;if(s===H8)return t.UNSIGNED_SHORT_4_4_4_4;if(s===V8)return t.UNSIGNED_SHORT_5_5_5_1;if(s===LI)return t.BYTE;if(s===PI)return t.SHORT;if(s===Bu)return t.UNSIGNED_SHORT;if(s===z8)return t.INT;if(s===Jo)return t.UNSIGNED_INT;if(s===Yi)return t.FLOAT;if(s===Hn)return i?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===DI)return t.ALPHA;if(s===Un)return t.RGBA;if(s===W8)return t.LUMINANCE;if(s===NI)return t.LUMINANCE_ALPHA;if(s===el)return t.DEPTH_COMPONENT;if(s===ll)return t.DEPTH_STENCIL;if(s===nm)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===ru)return t.RED;if(s===X8)return t.RED_INTEGER;if(s===Gc)return t.RG;if(s===q8)return t.RG_INTEGER;if(s===Y8)return t.RGBA_INTEGER;if(s===$c||s===AA||s===mA||s===eh)if(o===It)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===$c)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===AA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===mA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===eh)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===$c)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===AA)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===mA)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===eh)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Qd||s===kv||s===Gd||s===Qv)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Qd)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===kv)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Gd)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Qv)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Wm)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===zd||s===Hd)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===zd)return o===It?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Hd)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Vd||s===Gv||s===zv||s===Hv||s===Vv||s===Wv||s===Xv||s===qv||s===Yv||s===Kv||s===jv||s===Jv||s===Zv||s===$v)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Vd)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Gv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===zv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Hv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Vv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Wv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Xv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===qv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Yv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Kv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===jv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Jv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Zv)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===$v)return o===It?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===th)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===th)return o===It?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===FI||s===e6||s===t6||s===n6)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===th)return a.COMPRESSED_RED_RGTC1_EXT;if(s===e6)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===t6)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===n6)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ea?i?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class cw extends Nn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ss extends Qt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Gk={type:"move"};class W1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ss,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ss,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ss,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const S of e.hand.values()){const E=n.getJointPose(S,i),m=this._getHandJoint(u,S);E!==null&&(m.matrix.fromArray(E.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=E.radius),m.visible=E!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=h.position.distanceTo(d.position),A=.02,g=.005;u.inputState.pinching&&p>A+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=A-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Gk)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new ss;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class Uh extends mn{constructor(e,n,i,r,s,o,a,l,u,h){if(h=h!==void 0?h:el,h!==el&&h!==ll)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===el&&(i=Jo),i===void 0&&h===ll&&(i=ea),super(null,r,s,o,a,l,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:vt,this.minFilter=l!==void 0?l:vt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class zk extends ha{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,d=null,p=null,A=null,g=null;const S=n.getContextAttributes();let E=null,m=null;const x=[],y=[],C=new Nn;C.layers.enable(1),C.viewport=new kt;const I=new Nn;I.layers.enable(2),I.viewport=new kt;const M=[C,I],w=new cw;w.layers.enable(1),w.layers.enable(2);let L=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let V=x[O];return V===void 0&&(V=new W1,x[O]=V),V.getTargetRaySpace()},this.getControllerGrip=function(O){let V=x[O];return V===void 0&&(V=new W1,x[O]=V),V.getGripSpace()},this.getHand=function(O){let V=x[O];return V===void 0&&(V=new W1,x[O]=V),V.getHandSpace()};function B(O){const V=y.indexOf(O.inputSource);if(V===-1)return;const me=x[V];me!==void 0&&(me.update(O.inputSource,O.frame,u||o),me.dispatchEvent({type:O.type,data:O.inputSource}))}function F(){r.removeEventListener("select",B),r.removeEventListener("selectstart",B),r.removeEventListener("selectend",B),r.removeEventListener("squeeze",B),r.removeEventListener("squeezestart",B),r.removeEventListener("squeezeend",B),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",X);for(let O=0;O<x.length;O++){const V=y[O];V!==null&&(y[O]=null,x[O].disconnect(V))}L=null,R=null,e.setRenderTarget(E),A=null,p=null,d=null,r=null,m=null,U.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){s=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(O){u=O},this.getBaseLayer=function(){return p!==null?p:A},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(O){if(r=O,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",B),r.addEventListener("selectstart",B),r.addEventListener("selectend",B),r.addEventListener("squeeze",B),r.addEventListener("squeezestart",B),r.addEventListener("squeezeend",B),r.addEventListener("end",F),r.addEventListener("inputsourceschange",X),S.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const V={antialias:r.renderState.layers===void 0?S.antialias:!0,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};A=new XRWebGLLayer(r,n,V),r.updateRenderState({baseLayer:A}),m=new rn(A.framebufferWidth,A.framebufferHeight,{format:Un,type:ni,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let V=null,me=null,re=null;S.depth&&(re=S.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,V=S.stencil?ll:el,me=S.stencil?ea:Jo);const xe={colorFormat:n.RGBA8,depthFormat:re,scaleFactor:s};d=new XRWebGLBinding(r,n),p=d.createProjectionLayer(xe),r.updateRenderState({layers:[p]}),m=new rn(p.textureWidth,p.textureHeight,{format:Un,type:ni,depthTexture:new Uh(p.textureWidth,p.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0});const ge=e.properties.get(m);ge.__ignoreDepthValues=p.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),U.setContext(r),U.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function X(O){for(let V=0;V<O.removed.length;V++){const me=O.removed[V],re=y.indexOf(me);re>=0&&(y[re]=null,x[re].disconnect(me))}for(let V=0;V<O.added.length;V++){const me=O.added[V];let re=y.indexOf(me);if(re===-1){for(let ge=0;ge<x.length;ge++)if(ge>=y.length){y.push(me),re=ge;break}else if(y[ge]===null){y[ge]=me,re=ge;break}if(re===-1)break}const xe=x[re];xe&&xe.connect(me)}}const G=new D,q=new D;function Y(O,V,me){G.setFromMatrixPosition(V.matrixWorld),q.setFromMatrixPosition(me.matrixWorld);const re=G.distanceTo(q),xe=V.projectionMatrix.elements,ge=me.projectionMatrix.elements,Ie=xe[14]/(xe[10]-1),Ne=xe[14]/(xe[10]+1),$e=(xe[9]+1)/xe[5],ct=(xe[9]-1)/xe[5],De=(xe[8]-1)/xe[0],W=(ge[8]+1)/ge[0],ve=Ie*De,Ae=Ie*W,Se=re/(-De+W),ye=Se*-De;V.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(ye),O.translateZ(Se),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Ze=Ie+Se,Qe=Ne+Se,Ge=ve-ye,st=Ae+(re-ye),Mt=$e*Ne/Qe*Ze,$t=ct*Ne/Qe*Ze;O.projectionMatrix.makePerspective(Ge,st,Mt,$t,Ze,Qe),O.projectionMatrixInverse.copy(O.projectionMatrix).invert()}function $(O,V){V===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(V.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(r===null)return;w.near=I.near=C.near=O.near,w.far=I.far=C.far=O.far,(L!==w.near||R!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),L=w.near,R=w.far);const V=O.parent,me=w.cameras;$(w,V);for(let re=0;re<me.length;re++)$(me[re],V);me.length===2?Y(w,C,I):w.projectionMatrix.copy(C.projectionMatrix),j(O,w,V)};function j(O,V,me){me===null?O.matrix.copy(V.matrixWorld):(O.matrix.copy(me.matrixWorld),O.matrix.invert(),O.matrix.multiply(V.matrixWorld)),O.matrix.decompose(O.position,O.quaternion,O.scale),O.updateMatrixWorld(!0);const re=O.children;for(let xe=0,ge=re.length;xe<ge;xe++)re[xe].updateMatrixWorld(!0);O.projectionMatrix.copy(V.projectionMatrix),O.projectionMatrixInverse.copy(V.projectionMatrixInverse),O.isPerspectiveCamera&&(O.fov=gh*2*Math.atan(1/O.projectionMatrix.elements[5]),O.zoom=1)}this.getCamera=function(){return w},this.getFoveation=function(){if(!(p===null&&A===null))return l},this.setFoveation=function(O){l=O,p!==null&&(p.fixedFoveation=O),A!==null&&A.fixedFoveation!==void 0&&(A.fixedFoveation=O)};let P=null;function Q(O,V){if(h=V.getViewerPose(u||o),g=V,h!==null){const me=h.views;A!==null&&(e.setRenderTargetFramebuffer(m,A.framebuffer),e.setRenderTarget(m));let re=!1;me.length!==w.cameras.length&&(w.cameras.length=0,re=!0);for(let xe=0;xe<me.length;xe++){const ge=me[xe];let Ie=null;if(A!==null)Ie=A.getViewport(ge);else{const $e=d.getViewSubImage(p,ge);Ie=$e.viewport,xe===0&&(e.setRenderTargetTextures(m,$e.colorTexture,p.ignoreDepthValues?void 0:$e.depthStencilTexture),e.setRenderTarget(m))}let Ne=M[xe];Ne===void 0&&(Ne=new Nn,Ne.layers.enable(xe),Ne.viewport=new kt,M[xe]=Ne),Ne.matrix.fromArray(ge.transform.matrix),Ne.matrix.decompose(Ne.position,Ne.quaternion,Ne.scale),Ne.projectionMatrix.fromArray(ge.projectionMatrix),Ne.projectionMatrixInverse.copy(Ne.projectionMatrix).invert(),Ne.viewport.set(Ie.x,Ie.y,Ie.width,Ie.height),xe===0&&(w.matrix.copy(Ne.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),re===!0&&w.cameras.push(Ne)}}for(let me=0;me<x.length;me++){const re=y[me],xe=x[me];re!==null&&xe!==void 0&&xe.update(re,V,u||o)}P&&P(O,V),V.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:V}),g=null}const U=new rw;U.setAnimationLoop(Q),this.setAnimationLoop=function(O){P=O},this.dispose=function(){}}}function Hk(t,e){function n(E,m){E.matrixAutoUpdate===!0&&E.updateMatrix(),m.value.copy(E.matrix)}function i(E,m){m.color.getRGB(E.fogColor.value,tw(t)),m.isFog?(E.fogNear.value=m.near,E.fogFar.value=m.far):m.isFogExp2&&(E.fogDensity.value=m.density)}function r(E,m,x,y,C){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(E,m):m.isMeshToonMaterial?(s(E,m),d(E,m)):m.isMeshPhongMaterial?(s(E,m),h(E,m)):m.isMeshStandardMaterial?(s(E,m),p(E,m),m.isMeshPhysicalMaterial&&A(E,m,C)):m.isMeshMatcapMaterial?(s(E,m),g(E,m)):m.isMeshDepthMaterial?s(E,m):m.isMeshDistanceMaterial?(s(E,m),S(E,m)):m.isMeshNormalMaterial?s(E,m):m.isLineBasicMaterial?(o(E,m),m.isLineDashedMaterial&&a(E,m)):m.isPointsMaterial?l(E,m,x,y):m.isSpriteMaterial?u(E,m):m.isShadowMaterial?(E.color.value.copy(m.color),E.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(E,m){E.opacity.value=m.opacity,m.color&&E.diffuse.value.copy(m.color),m.emissive&&E.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(E.map.value=m.map,n(m.map,E.mapTransform)),m.alphaMap&&(E.alphaMap.value=m.alphaMap,n(m.alphaMap,E.alphaMapTransform)),m.bumpMap&&(E.bumpMap.value=m.bumpMap,n(m.bumpMap,E.bumpMapTransform),E.bumpScale.value=m.bumpScale,m.side===Ui&&(E.bumpScale.value*=-1)),m.normalMap&&(E.normalMap.value=m.normalMap,n(m.normalMap,E.normalMapTransform),E.normalScale.value.copy(m.normalScale),m.side===Ui&&E.normalScale.value.negate()),m.displacementMap&&(E.displacementMap.value=m.displacementMap,n(m.displacementMap,E.displacementMapTransform),E.displacementScale.value=m.displacementScale,E.displacementBias.value=m.displacementBias),m.emissiveMap&&(E.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,E.emissiveMapTransform)),m.specularMap&&(E.specularMap.value=m.specularMap,n(m.specularMap,E.specularMapTransform)),m.alphaTest>0&&(E.alphaTest.value=m.alphaTest);const x=e.get(m).envMap;if(x&&(E.envMap.value=x,E.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=m.reflectivity,E.ior.value=m.ior,E.refractionRatio.value=m.refractionRatio),m.lightMap){E.lightMap.value=m.lightMap;const y=t.useLegacyLights===!0?Math.PI:1;E.lightMapIntensity.value=m.lightMapIntensity*y,n(m.lightMap,E.lightMapTransform)}m.aoMap&&(E.aoMap.value=m.aoMap,E.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,E.aoMapTransform))}function o(E,m){E.diffuse.value.copy(m.color),E.opacity.value=m.opacity,m.map&&(E.map.value=m.map,n(m.map,E.mapTransform))}function a(E,m){E.dashSize.value=m.dashSize,E.totalSize.value=m.dashSize+m.gapSize,E.scale.value=m.scale}function l(E,m,x,y){E.diffuse.value.copy(m.color),E.opacity.value=m.opacity,E.size.value=m.size*x,E.scale.value=y*.5,m.map&&(E.map.value=m.map,n(m.map,E.uvTransform)),m.alphaMap&&(E.alphaMap.value=m.alphaMap,n(m.alphaMap,E.alphaMapTransform)),m.alphaTest>0&&(E.alphaTest.value=m.alphaTest)}function u(E,m){E.diffuse.value.copy(m.color),E.opacity.value=m.opacity,E.rotation.value=m.rotation,m.map&&(E.map.value=m.map,n(m.map,E.mapTransform)),m.alphaMap&&(E.alphaMap.value=m.alphaMap,n(m.alphaMap,E.alphaMapTransform)),m.alphaTest>0&&(E.alphaTest.value=m.alphaTest)}function h(E,m){E.specular.value.copy(m.specular),E.shininess.value=Math.max(m.shininess,1e-4)}function d(E,m){m.gradientMap&&(E.gradientMap.value=m.gradientMap)}function p(E,m){E.metalness.value=m.metalness,m.metalnessMap&&(E.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,E.metalnessMapTransform)),E.roughness.value=m.roughness,m.roughnessMap&&(E.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,E.roughnessMapTransform)),e.get(m).envMap&&(E.envMapIntensity.value=m.envMapIntensity)}function A(E,m,x){E.ior.value=m.ior,m.sheen>0&&(E.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),E.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(E.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,E.sheenColorMapTransform)),m.sheenRoughnessMap&&(E.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,E.sheenRoughnessMapTransform))),m.clearcoat>0&&(E.clearcoat.value=m.clearcoat,E.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(E.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,E.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(E.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Ui&&E.clearcoatNormalScale.value.negate())),m.iridescence>0&&(E.iridescence.value=m.iridescence,E.iridescenceIOR.value=m.iridescenceIOR,E.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(E.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,E.iridescenceMapTransform)),m.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),m.transmission>0&&(E.transmission.value=m.transmission,E.transmissionSamplerMap.value=x.texture,E.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(E.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,E.transmissionMapTransform)),E.thickness.value=m.thickness,m.thicknessMap&&(E.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=m.attenuationDistance,E.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(E.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(E.anisotropyMap.value=m.anisotropyMap,n(m.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=m.specularIntensity,E.specularColor.value.copy(m.specularColor),m.specularColorMap&&(E.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,E.specularColorMapTransform)),m.specularIntensityMap&&(E.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,E.specularIntensityMapTransform))}function g(E,m){m.matcap&&(E.matcap.value=m.matcap)}function S(E,m){const x=e.get(m).light;E.referencePosition.value.setFromMatrixPosition(x.matrixWorld),E.nearDistance.value=x.shadow.camera.near,E.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Vk(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,y){const C=y.program;i.uniformBlockBinding(x,C)}function u(x,y){let C=r[x.id];C===void 0&&(g(x),C=h(x),r[x.id]=C,x.addEventListener("dispose",E));const I=y.program;i.updateUBOMapping(x,I);const M=e.render.frame;s[x.id]!==M&&(p(x),s[x.id]=M)}function h(x){const y=d();x.__bindingPointIndex=y;const C=t.createBuffer(),I=x.__size,M=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,C),t.bufferData(t.UNIFORM_BUFFER,I,M),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,y,C),C}function d(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const y=r[x.id],C=x.uniforms,I=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,y);for(let M=0,w=C.length;M<w;M++){const L=C[M];if(A(L,M,I)===!0){const R=L.__offset,B=Array.isArray(L.value)?L.value:[L.value];let F=0;for(let X=0;X<B.length;X++){const G=B[X],q=S(G);typeof G=="number"?(L.__data[0]=G,t.bufferSubData(t.UNIFORM_BUFFER,R+F,L.__data)):G.isMatrix3?(L.__data[0]=G.elements[0],L.__data[1]=G.elements[1],L.__data[2]=G.elements[2],L.__data[3]=G.elements[0],L.__data[4]=G.elements[3],L.__data[5]=G.elements[4],L.__data[6]=G.elements[5],L.__data[7]=G.elements[0],L.__data[8]=G.elements[6],L.__data[9]=G.elements[7],L.__data[10]=G.elements[8],L.__data[11]=G.elements[0]):(G.toArray(L.__data,F),F+=q.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,R,L.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function A(x,y,C){const I=x.value;if(C[y]===void 0){if(typeof I=="number")C[y]=I;else{const M=Array.isArray(I)?I:[I],w=[];for(let L=0;L<M.length;L++)w.push(M[L].clone());C[y]=w}return!0}else if(typeof I=="number"){if(C[y]!==I)return C[y]=I,!0}else{const M=Array.isArray(C[y])?C[y]:[C[y]],w=Array.isArray(I)?I:[I];for(let L=0;L<M.length;L++){const R=M[L];if(R.equals(w[L])===!1)return R.copy(w[L]),!0}}return!1}function g(x){const y=x.uniforms;let C=0;const I=16;let M=0;for(let w=0,L=y.length;w<L;w++){const R=y[w],B={boundary:0,storage:0},F=Array.isArray(R.value)?R.value:[R.value];for(let X=0,G=F.length;X<G;X++){const q=F[X],Y=S(q);B.boundary+=Y.boundary,B.storage+=Y.storage}if(R.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=C,w>0){M=C%I;const X=I-M;M!==0&&X-B.boundary<0&&(C+=I-M,R.__offset=C)}C+=B.storage}return M=C%I,M>0&&(C+=I-M),x.__size=C,x.__cache={},this}function S(x){const y={boundary:0,storage:0};return typeof x=="number"?(y.boundary=4,y.storage=4):x.isVector2?(y.boundary=8,y.storage=8):x.isVector3||x.isColor?(y.boundary=16,y.storage=12):x.isVector4?(y.boundary=16,y.storage=16):x.isMatrix3?(y.boundary=48,y.storage=48):x.isMatrix4?(y.boundary=64,y.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),y}function E(x){const y=x.target;y.removeEventListener("dispose",E);const C=o.indexOf(y.__bindingPointIndex);o.splice(C,1),t.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}function m(){for(const x in r)t.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:l,update:u,dispose:m}}function Wk(){const t=Yd("canvas");return t.style.display="block",t}class o4{constructor(e={}){const{canvas:n=Wk(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const A=new Uint32Array(4),g=new Int32Array(4);let S=null,E=null;const m=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=It,this.useLegacyLights=!0,this.toneMapping=Rr,this.toneMappingExposure=1;const y=this;let C=!1,I=0,M=0,w=null,L=-1,R=null;const B=new kt,F=new kt;let X=null;const G=new Ee(0);let q=0,Y=n.width,$=n.height,j=1,P=null,Q=null;const U=new kt(0,0,Y,$),O=new kt(0,0,Y,$);let V=!1;const me=new Km;let re=!1,xe=!1,ge=null;const Ie=new He,Ne=new oe,$e=new D,ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function De(){return w===null?j:1}let W=i;function ve(k,ne){for(let de=0;de<k.length;de++){const ee=k[de],pe=n.getContext(ee,ne);if(pe!==null)return pe}return null}try{const k={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${ca}`),n.addEventListener("webglcontextlost",Be,!1),n.addEventListener("webglcontextrestored",ie,!1),n.addEventListener("webglcontextcreationerror",we,!1),W===null){const ne=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&ne.shift(),W=ve(ne,k),W===null)throw ve(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&W instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(k){throw console.error("THREE.WebGLRenderer: "+k.message),k}let Ae,Se,ye,Ze,Qe,Ge,st,Mt,$t,H,N,ue,_e,Ce,Le,Xe,be,he,et,rt,ot,qe,Ye,Tt;function Gt(){Ae=new oO(W),Se=new eO(W,Ae,e),Ae.init(Se),qe=new uw(W,Ae,Se),ye=new kk(W,Ae,Se),Ze=new uO(W),Qe=new wk,Ge=new Qk(W,Ae,ye,Qe,Se,qe,Ze),st=new nO(y),Mt=new sO(y),$t=new yN(W,Se),Ye=new ZU(W,Ae,$t,Se),H=new aO(W,$t,Ze,Ye),N=new dO(W,H,$t,Ze),et=new fO(W,Se,Ge),Xe=new tO(Qe),ue=new Ik(y,st,Mt,Ae,Se,Ye,Xe),_e=new Hk(y,Qe),Ce=new Rk,Le=new Nk(Ae,Se),he=new JU(y,st,Mt,ye,N,p,l),be=new Ok(y,N,Se),Tt=new Vk(W,Ze,Se,ye),rt=new $U(W,Ae,Ze,Se),ot=new lO(W,Ae,Ze,Se),Ze.programs=ue.programs,y.capabilities=Se,y.extensions=Ae,y.properties=Qe,y.renderLists=Ce,y.shadowMap=be,y.state=ye,y.info=Ze}Gt();const K=new zk(y,W);this.xr=K,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const k=Ae.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=Ae.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(k){k!==void 0&&(j=k,this.setSize(Y,$,!1))},this.getSize=function(k){return k.set(Y,$)},this.setSize=function(k,ne,de=!0){if(K.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=k,$=ne,n.width=Math.floor(k*j),n.height=Math.floor(ne*j),de===!0&&(n.style.width=k+"px",n.style.height=ne+"px"),this.setViewport(0,0,k,ne)},this.getDrawingBufferSize=function(k){return k.set(Y*j,$*j).floor()},this.setDrawingBufferSize=function(k,ne,de){Y=k,$=ne,j=de,n.width=Math.floor(k*de),n.height=Math.floor(ne*de),this.setViewport(0,0,k,ne)},this.getCurrentViewport=function(k){return k.copy(B)},this.getViewport=function(k){return k.copy(U)},this.setViewport=function(k,ne,de,ee){k.isVector4?U.set(k.x,k.y,k.z,k.w):U.set(k,ne,de,ee),ye.viewport(B.copy(U).multiplyScalar(j).floor())},this.getScissor=function(k){return k.copy(O)},this.setScissor=function(k,ne,de,ee){k.isVector4?O.set(k.x,k.y,k.z,k.w):O.set(k,ne,de,ee),ye.scissor(F.copy(O).multiplyScalar(j).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(k){ye.setScissorTest(V=k)},this.setOpaqueSort=function(k){P=k},this.setTransparentSort=function(k){Q=k},this.getClearColor=function(k){return k.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(k=!0,ne=!0,de=!0){let ee=0;if(k){let pe=!1;if(w!==null){const Ve=w.texture.format;pe=Ve===Y8||Ve===q8||Ve===X8}if(pe){const Ve=w.texture.type,at=Ve===ni||Ve===Jo||Ve===Bu||Ve===ea||Ve===H8||Ve===V8,dt=he.getClearColor(),At=he.getClearAlpha(),Pt=dt.r,mt=dt.g,gt=dt.b;at?(A[0]=Pt,A[1]=mt,A[2]=gt,A[3]=At,W.clearBufferuiv(W.COLOR,0,A)):(g[0]=Pt,g[1]=mt,g[2]=gt,g[3]=At,W.clearBufferiv(W.COLOR,0,g))}else ee|=W.COLOR_BUFFER_BIT}ne&&(ee|=W.DEPTH_BUFFER_BIT),de&&(ee|=W.STENCIL_BUFFER_BIT),W.clear(ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Be,!1),n.removeEventListener("webglcontextrestored",ie,!1),n.removeEventListener("webglcontextcreationerror",we,!1),Ce.dispose(),Le.dispose(),Qe.dispose(),st.dispose(),Mt.dispose(),N.dispose(),Ye.dispose(),Tt.dispose(),ue.dispose(),K.dispose(),K.removeEventListener("sessionstart",hn),K.removeEventListener("sessionend",pr),ge&&(ge.dispose(),ge=null),mi.stop()};function Be(k){k.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function ie(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const k=Ze.autoReset,ne=be.enabled,de=be.autoUpdate,ee=be.needsUpdate,pe=be.type;Gt(),Ze.autoReset=k,be.enabled=ne,be.autoUpdate=de,be.needsUpdate=ee,be.type=pe}function we(k){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function Oe(k){const ne=k.target;ne.removeEventListener("dispose",Oe),Ut(ne)}function Ut(k){sn(k),Qe.remove(k)}function sn(k){const ne=Qe.get(k).programs;ne!==void 0&&(ne.forEach(function(de){ue.releaseProgram(de)}),k.isShaderMaterial&&ue.releaseShaderCache(k))}this.renderBufferDirect=function(k,ne,de,ee,pe,Ve){ne===null&&(ne=ct);const at=pe.isMesh&&pe.matrixWorld.determinant()<0,dt=X2(k,ne,de,ee,pe);ye.setMaterial(ee,at);let At=de.index,Pt=1;ee.wireframe===!0&&(At=H.getWireframeAttribute(de),Pt=2);const mt=de.drawRange,gt=de.attributes.position;let on=mt.start*Pt,fn=(mt.start+mt.count)*Pt;Ve!==null&&(on=Math.max(on,Ve.start*Pt),fn=Math.min(fn,(Ve.start+Ve.count)*Pt)),At!==null?(on=Math.max(on,0),fn=Math.min(fn,At.count)):gt!=null&&(on=Math.max(on,0),fn=Math.min(fn,gt.count));const Ar=fn-on;if(Ar<0||Ar===1/0)return;Ye.setup(pe,ee,dt,de,At);let mr,en=rt;if(At!==null&&(mr=$t.get(At),en=ot,en.setIndex(mr)),pe.isMesh)ee.wireframe===!0?(ye.setLineWidth(ee.wireframeLinewidth*De()),en.setMode(W.LINES)):en.setMode(W.TRIANGLES);else if(pe.isLine){let St=ee.linewidth;St===void 0&&(St=1),ye.setLineWidth(St*De()),pe.isLineSegments?en.setMode(W.LINES):pe.isLineLoop?en.setMode(W.LINE_LOOP):en.setMode(W.LINE_STRIP)}else pe.isPoints?en.setMode(W.POINTS):pe.isSprite&&en.setMode(W.TRIANGLES);if(pe.isInstancedMesh)en.renderInstances(on,Ar,pe.count);else if(de.isInstancedBufferGeometry){const St=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,Jt=Math.min(de.instanceCount,St);en.renderInstances(on,Ar,Jt)}else en.render(on,Ar)},this.compile=function(k,ne){function de(ee,pe,Ve){ee.transparent===!0&&ee.side===Ls&&ee.forceSinglePass===!1?(ee.side=Ui,ee.needsUpdate=!0,Js(ee,pe,Ve),ee.side=_o,ee.needsUpdate=!0,Js(ee,pe,Ve),ee.side=Ls):Js(ee,pe,Ve)}E=Le.get(k),E.init(),x.push(E),k.traverseVisible(function(ee){ee.isLight&&ee.layers.test(ne.layers)&&(E.pushLight(ee),ee.castShadow&&E.pushShadow(ee))}),E.setupLights(y.useLegacyLights),k.traverse(function(ee){const pe=ee.material;if(pe)if(Array.isArray(pe))for(let Ve=0;Ve<pe.length;Ve++){const at=pe[Ve];de(at,k,ee)}else de(pe,k,ee)}),x.pop(),E=null};let Vn=null;function dr(k){Vn&&Vn(k)}function hn(){mi.stop()}function pr(){mi.start()}const mi=new rw;mi.setAnimationLoop(dr),typeof self<"u"&&mi.setContext(self),this.setAnimationLoop=function(k){Vn=k,K.setAnimationLoop(k),k===null?mi.stop():mi.start()},K.addEventListener("sessionstart",hn),K.addEventListener("sessionend",pr),this.render=function(k,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),K.enabled===!0&&K.isPresenting===!0&&(K.cameraAutoUpdate===!0&&K.updateCamera(ne),ne=K.getCamera()),k.isScene===!0&&k.onBeforeRender(y,k,ne,w),E=Le.get(k,x.length),E.init(),x.push(E),Ie.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),me.setFromProjectionMatrix(Ie),xe=this.localClippingEnabled,re=Xe.init(this.clippingPlanes,xe),S=Ce.get(k,m.length),S.init(),m.push(S),Qp(k,ne,0,y.sortObjects),S.finish(),y.sortObjects===!0&&S.sort(P,Q),this.info.render.frame++,re===!0&&Xe.beginShadows();const de=E.state.shadowsArray;if(be.render(de,k,ne),re===!0&&Xe.endShadows(),this.info.autoReset===!0&&this.info.reset(),he.render(S,k),E.setupLights(y.useLegacyLights),ne.isArrayCamera){const ee=ne.cameras;for(let pe=0,Ve=ee.length;pe<Ve;pe++){const at=ee[pe];Gp(S,k,at,at.viewport)}}else Gp(S,k,ne);w!==null&&(Ge.updateMultisampleRenderTarget(w),Ge.updateRenderTargetMipmap(w)),k.isScene===!0&&k.onAfterRender(y,k,ne),Ye.resetDefaultState(),L=-1,R=null,x.pop(),x.length>0?E=x[x.length-1]:E=null,m.pop(),m.length>0?S=m[m.length-1]:S=null};function Qp(k,ne,de,ee){if(k.visible===!1)return;if(k.layers.test(ne.layers)){if(k.isGroup)de=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(ne);else if(k.isLight)E.pushLight(k),k.castShadow&&E.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||me.intersectsSprite(k)){ee&&$e.setFromMatrixPosition(k.matrixWorld).applyMatrix4(Ie);const at=N.update(k),dt=k.material;dt.visible&&S.push(k,at,dt,de,$e.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(!k.frustumCulled||me.intersectsObject(k))){const at=N.update(k),dt=k.material;if(ee&&(k.boundingSphere!==void 0?(k.boundingSphere===null&&k.computeBoundingSphere(),$e.copy(k.boundingSphere.center)):(at.boundingSphere===null&&at.computeBoundingSphere(),$e.copy(at.boundingSphere.center)),$e.applyMatrix4(k.matrixWorld).applyMatrix4(Ie)),Array.isArray(dt)){const At=at.groups;for(let Pt=0,mt=At.length;Pt<mt;Pt++){const gt=At[Pt],on=dt[gt.materialIndex];on&&on.visible&&S.push(k,at,on,de,$e.z,gt)}}else dt.visible&&S.push(k,at,dt,de,$e.z,null)}}const Ve=k.children;for(let at=0,dt=Ve.length;at<dt;at++)Qp(Ve[at],ne,de,ee)}function Gp(k,ne,de,ee){const pe=k.opaque,Ve=k.transmissive,at=k.transparent;E.setupLightsView(de),re===!0&&Xe.setGlobalState(y.clippingPlanes,de),Ve.length>0&&zp(pe,Ve,ne,de),ee&&ye.viewport(B.copy(ee)),pe.length>0&&ma(pe,ne,de),Ve.length>0&&ma(Ve,ne,de),at.length>0&&ma(at,ne,de),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function zp(k,ne,de,ee){const pe=Se.isWebGL2;ge===null&&(ge=new rn(1,1,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")?Hn:ni,minFilter:fs,samples:pe?4:0})),y.getDrawingBufferSize(Ne),pe?ge.setSize(Ne.x,Ne.y):ge.setSize(im(Ne.x),im(Ne.y));const Ve=y.getRenderTarget();y.setRenderTarget(ge),y.getClearColor(G),q=y.getClearAlpha(),q<1&&y.setClearColor(16777215,.5),y.clear();const at=y.toneMapping;y.toneMapping=Rr,ma(k,de,ee),Ge.updateMultisampleRenderTarget(ge),Ge.updateRenderTargetMipmap(ge);let dt=!1;for(let At=0,Pt=ne.length;At<Pt;At++){const mt=ne[At],gt=mt.object,on=mt.geometry,fn=mt.material,Ar=mt.group;if(fn.side===Ls&&gt.layers.test(ee.layers)){const mr=fn.side;fn.side=Ui,fn.needsUpdate=!0,Hp(gt,de,ee,on,fn,Ar),fn.side=mr,fn.needsUpdate=!0,dt=!0}}dt===!0&&(Ge.updateMultisampleRenderTarget(ge),Ge.updateRenderTargetMipmap(ge)),y.setRenderTarget(Ve),y.setClearColor(G,q),y.toneMapping=at}function ma(k,ne,de){const ee=ne.isScene===!0?ne.overrideMaterial:null;for(let pe=0,Ve=k.length;pe<Ve;pe++){const at=k[pe],dt=at.object,At=at.geometry,Pt=ee===null?at.material:ee,mt=at.group;dt.layers.test(de.layers)&&Hp(dt,ne,de,At,Pt,mt)}}function Hp(k,ne,de,ee,pe,Ve){k.onBeforeRender(y,ne,de,ee,pe,Ve),k.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),pe.onBeforeRender(y,ne,de,ee,k,Ve),pe.transparent===!0&&pe.side===Ls&&pe.forceSinglePass===!1?(pe.side=Ui,pe.needsUpdate=!0,y.renderBufferDirect(de,ne,ee,pe,k,Ve),pe.side=_o,pe.needsUpdate=!0,y.renderBufferDirect(de,ne,ee,pe,k,Ve),pe.side=Ls):y.renderBufferDirect(de,ne,ee,pe,k,Ve),k.onAfterRender(y,ne,de,ee,pe,Ve)}function Js(k,ne,de){ne.isScene!==!0&&(ne=ct);const ee=Qe.get(k),pe=E.state.lights,Ve=E.state.shadowsArray,at=pe.state.version,dt=ue.getParameters(k,pe.state,Ve,ne,de),At=ue.getProgramCacheKey(dt);let Pt=ee.programs;ee.environment=k.isMeshStandardMaterial?ne.environment:null,ee.fog=ne.fog,ee.envMap=(k.isMeshStandardMaterial?Mt:st).get(k.envMap||ee.environment),Pt===void 0&&(k.addEventListener("dispose",Oe),Pt=new Map,ee.programs=Pt);let mt=Pt.get(At);if(mt!==void 0){if(ee.currentProgram===mt&&ee.lightsStateVersion===at)return Vp(k,dt),mt}else dt.uniforms=ue.getUniforms(k),k.onBuild(de,dt,y),k.onBeforeCompile(dt,y),mt=ue.acquireProgram(dt,At),Pt.set(At,mt),ee.uniforms=dt.uniforms;const gt=ee.uniforms;(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(gt.clippingPlanes=Xe.uniform),Vp(k,dt),ee.needsLights=Y2(k),ee.lightsStateVersion=at,ee.needsLights&&(gt.ambientLightColor.value=pe.state.ambient,gt.lightProbe.value=pe.state.probe,gt.directionalLights.value=pe.state.directional,gt.directionalLightShadows.value=pe.state.directionalShadow,gt.spotLights.value=pe.state.spot,gt.spotLightShadows.value=pe.state.spotShadow,gt.rectAreaLights.value=pe.state.rectArea,gt.ltc_1.value=pe.state.rectAreaLTC1,gt.ltc_2.value=pe.state.rectAreaLTC2,gt.pointLights.value=pe.state.point,gt.pointLightShadows.value=pe.state.pointShadow,gt.hemisphereLights.value=pe.state.hemi,gt.directionalShadowMap.value=pe.state.directionalShadowMap,gt.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,gt.spotShadowMap.value=pe.state.spotShadowMap,gt.spotLightMatrix.value=pe.state.spotLightMatrix,gt.spotLightMap.value=pe.state.spotLightMap,gt.pointShadowMap.value=pe.state.pointShadowMap,gt.pointShadowMatrix.value=pe.state.pointShadowMatrix);const on=mt.getUniforms(),fn=xA.seqWithValue(on.seq,gt);return ee.currentProgram=mt,ee.uniformsList=fn,mt}function Vp(k,ne){const de=Qe.get(k);de.outputColorSpace=ne.outputColorSpace,de.instancing=ne.instancing,de.skinning=ne.skinning,de.morphTargets=ne.morphTargets,de.morphNormals=ne.morphNormals,de.morphColors=ne.morphColors,de.morphTargetsCount=ne.morphTargetsCount,de.numClippingPlanes=ne.numClippingPlanes,de.numIntersection=ne.numClipIntersection,de.vertexAlphas=ne.vertexAlphas,de.vertexTangents=ne.vertexTangents,de.toneMapping=ne.toneMapping}function X2(k,ne,de,ee,pe){ne.isScene!==!0&&(ne=ct),Ge.resetTextureUnits();const Ve=ne.fog,at=ee.isMeshStandardMaterial?ne.environment:null,dt=w===null?y.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:Os,At=(ee.isMeshStandardMaterial?Mt:st).get(ee.envMap||at),Pt=ee.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,mt=!!de.attributes.tangent&&(!!ee.normalMap||ee.anisotropy>0),gt=!!de.morphAttributes.position,on=!!de.morphAttributes.normal,fn=!!de.morphAttributes.color,Ar=ee.toneMapped?y.toneMapping:Rr,mr=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,en=mr!==void 0?mr.length:0,St=Qe.get(ee),Jt=E.state.lights;if(re===!0&&(xe===!0||k!==R)){const wi=k===R&&ee.id===L;Xe.setState(ee,k,wi)}let yt=!1;ee.version===St.__version?(St.needsLights&&St.lightsStateVersion!==Jt.state.version||St.outputColorSpace!==dt||pe.isInstancedMesh&&St.instancing===!1||!pe.isInstancedMesh&&St.instancing===!0||pe.isSkinnedMesh&&St.skinning===!1||!pe.isSkinnedMesh&&St.skinning===!0||St.envMap!==At||ee.fog===!0&&St.fog!==Ve||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==Xe.numPlanes||St.numIntersection!==Xe.numIntersection)||St.vertexAlphas!==Pt||St.vertexTangents!==mt||St.morphTargets!==gt||St.morphNormals!==on||St.morphColors!==fn||St.toneMapping!==Ar||Se.isWebGL2===!0&&St.morphTargetsCount!==en)&&(yt=!0):(yt=!0,St.__version=ee.version);let Ii=St.currentProgram;yt===!0&&(Ii=Js(ee,ne,pe));let Jn=!1,Wn=!1,vs=!1;const Mn=Ii.getUniforms(),Rn=St.uniforms;if(ye.useProgram(Ii.program)&&(Jn=!0,Wn=!0,vs=!0),ee.id!==L&&(L=ee.id,Wn=!0),Jn||R!==k){if(Mn.setValue(W,"projectionMatrix",k.projectionMatrix),Se.logarithmicDepthBuffer&&Mn.setValue(W,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),R!==k&&(R=k,Wn=!0,vs=!0),ee.isShaderMaterial||ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshStandardMaterial||ee.envMap){const wi=Mn.map.cameraPosition;wi!==void 0&&wi.setValue(W,$e.setFromMatrixPosition(k.matrixWorld))}(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial)&&Mn.setValue(W,"isOrthographic",k.isOrthographicCamera===!0),(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial||ee.isShadowMaterial||pe.isSkinnedMesh)&&Mn.setValue(W,"viewMatrix",k.matrixWorldInverse)}if(pe.isSkinnedMesh){Mn.setOptional(W,pe,"bindMatrix"),Mn.setOptional(W,pe,"bindMatrixInverse");const wi=pe.skeleton;wi&&(Se.floatVertexTextures?(wi.boneTexture===null&&wi.computeBoneTexture(),Mn.setValue(W,"boneTexture",wi.boneTexture,Ge),Mn.setValue(W,"boneTextureSize",wi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ga=de.morphAttributes;if((ga.position!==void 0||ga.normal!==void 0||ga.color!==void 0&&Se.isWebGL2===!0)&&et.update(pe,de,Ii),(Wn||St.receiveShadow!==pe.receiveShadow)&&(St.receiveShadow=pe.receiveShadow,Mn.setValue(W,"receiveShadow",pe.receiveShadow)),ee.isMeshGouraudMaterial&&ee.envMap!==null&&(Rn.envMap.value=At,Rn.flipEnvMap.value=At.isCubeTexture&&At.isRenderTargetTexture===!1?-1:1),Wn&&(Mn.setValue(W,"toneMappingExposure",y.toneMappingExposure),St.needsLights&&q2(Rn,vs),Ve&&ee.fog===!0&&_e.refreshFogUniforms(Rn,Ve),_e.refreshMaterialUniforms(Rn,ee,j,$,ge),xA.upload(W,St.uniformsList,Rn,Ge)),ee.isShaderMaterial&&ee.uniformsNeedUpdate===!0&&(xA.upload(W,St.uniformsList,Rn,Ge),ee.uniformsNeedUpdate=!1),ee.isSpriteMaterial&&Mn.setValue(W,"center",pe.center),Mn.setValue(W,"modelViewMatrix",pe.modelViewMatrix),Mn.setValue(W,"normalMatrix",pe.normalMatrix),Mn.setValue(W,"modelMatrix",pe.matrixWorld),ee.isShaderMaterial||ee.isRawShaderMaterial){const wi=ee.uniformsGroups;for(let ku=0,Qu=wi.length;ku<Qu;ku++)if(Se.isWebGL2){const Wh=wi[ku];Tt.update(Wh,Ii),Tt.bind(Wh,Ii)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ii}function q2(k,ne){k.ambientLightColor.needsUpdate=ne,k.lightProbe.needsUpdate=ne,k.directionalLights.needsUpdate=ne,k.directionalLightShadows.needsUpdate=ne,k.pointLights.needsUpdate=ne,k.pointLightShadows.needsUpdate=ne,k.spotLights.needsUpdate=ne,k.spotLightShadows.needsUpdate=ne,k.rectAreaLights.needsUpdate=ne,k.hemisphereLights.needsUpdate=ne}function Y2(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(k,ne,de){Qe.get(k.texture).__webglTexture=ne,Qe.get(k.depthTexture).__webglTexture=de;const ee=Qe.get(k);ee.__hasExternalTextures=!0,ee.__hasExternalTextures&&(ee.__autoAllocateDepthBuffer=de===void 0,ee.__autoAllocateDepthBuffer||Ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ee.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(k,ne){const de=Qe.get(k);de.__webglFramebuffer=ne,de.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(k,ne=0,de=0){w=k,I=ne,M=de;let ee=!0,pe=null,Ve=!1,at=!1;if(k){const At=Qe.get(k);At.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(W.FRAMEBUFFER,null),ee=!1):At.__webglFramebuffer===void 0?Ge.setupRenderTarget(k):At.__hasExternalTextures&&Ge.rebindTextures(k,Qe.get(k.texture).__webglTexture,Qe.get(k.depthTexture).__webglTexture);const Pt=k.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(at=!0);const mt=Qe.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(pe=mt[ne],Ve=!0):Se.isWebGL2&&k.samples>0&&Ge.useMultisampledRTT(k)===!1?pe=Qe.get(k).__webglMultisampledFramebuffer:pe=mt,B.copy(k.viewport),F.copy(k.scissor),X=k.scissorTest}else B.copy(U).multiplyScalar(j).floor(),F.copy(O).multiplyScalar(j).floor(),X=V;if(ye.bindFramebuffer(W.FRAMEBUFFER,pe)&&Se.drawBuffers&&ee&&ye.drawBuffers(k,pe),ye.viewport(B),ye.scissor(F),ye.setScissorTest(X),Ve){const At=Qe.get(k.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+ne,At.__webglTexture,de)}else if(at){const At=Qe.get(k.texture),Pt=ne||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,At.__webglTexture,de||0,Pt)}L=-1},this.readRenderTargetPixels=function(k,ne,de,ee,pe,Ve,at){if(!(k&&k.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=Qe.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&at!==void 0&&(dt=dt[at]),dt){ye.bindFramebuffer(W.FRAMEBUFFER,dt);try{const At=k.texture,Pt=At.format,mt=At.type;if(Pt!==Un&&qe.convert(Pt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=mt===Hn&&(Ae.has("EXT_color_buffer_half_float")||Se.isWebGL2&&Ae.has("EXT_color_buffer_float"));if(mt!==ni&&qe.convert(mt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&!(mt===Yi&&(Se.isWebGL2||Ae.has("OES_texture_float")||Ae.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=k.width-ee&&de>=0&&de<=k.height-pe&&W.readPixels(ne,de,ee,pe,qe.convert(Pt),qe.convert(mt),Ve)}finally{const At=w!==null?Qe.get(w).__webglFramebuffer:null;ye.bindFramebuffer(W.FRAMEBUFFER,At)}}},this.copyFramebufferToTexture=function(k,ne,de=0){const ee=Math.pow(2,-de),pe=Math.floor(ne.image.width*ee),Ve=Math.floor(ne.image.height*ee);Ge.setTexture2D(ne,0),W.copyTexSubImage2D(W.TEXTURE_2D,de,0,0,k.x,k.y,pe,Ve),ye.unbindTexture()},this.copyTextureToTexture=function(k,ne,de,ee=0){const pe=ne.image.width,Ve=ne.image.height,at=qe.convert(de.format),dt=qe.convert(de.type);Ge.setTexture2D(de,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,de.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,de.unpackAlignment),ne.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,ee,k.x,k.y,pe,Ve,at,dt,ne.image.data):ne.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,ee,k.x,k.y,ne.mipmaps[0].width,ne.mipmaps[0].height,at,ne.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,ee,k.x,k.y,at,dt,ne.image),ee===0&&de.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(k,ne,de,ee,pe=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ve=k.max.x-k.min.x+1,at=k.max.y-k.min.y+1,dt=k.max.z-k.min.z+1,At=qe.convert(ee.format),Pt=qe.convert(ee.type);let mt;if(ee.isData3DTexture)Ge.setTexture3D(ee,0),mt=W.TEXTURE_3D;else if(ee.isDataArrayTexture)Ge.setTexture2DArray(ee,0),mt=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,ee.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,ee.unpackAlignment);const gt=W.getParameter(W.UNPACK_ROW_LENGTH),on=W.getParameter(W.UNPACK_IMAGE_HEIGHT),fn=W.getParameter(W.UNPACK_SKIP_PIXELS),Ar=W.getParameter(W.UNPACK_SKIP_ROWS),mr=W.getParameter(W.UNPACK_SKIP_IMAGES),en=de.isCompressedTexture?de.mipmaps[0]:de.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,en.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,en.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,k.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,k.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,k.min.z),de.isDataTexture||de.isData3DTexture?W.texSubImage3D(mt,pe,ne.x,ne.y,ne.z,Ve,at,dt,At,Pt,en.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(mt,pe,ne.x,ne.y,ne.z,Ve,at,dt,At,en.data)):W.texSubImage3D(mt,pe,ne.x,ne.y,ne.z,Ve,at,dt,At,Pt,en),W.pixelStorei(W.UNPACK_ROW_LENGTH,gt),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,on),W.pixelStorei(W.UNPACK_SKIP_PIXELS,fn),W.pixelStorei(W.UNPACK_SKIP_ROWS,Ar),W.pixelStorei(W.UNPACK_SKIP_IMAGES,mr),pe===0&&ee.generateMipmaps&&W.generateMipmap(mt),ye.unbindTexture()},this.initTexture=function(k){k.isCubeTexture?Ge.setTextureCube(k,0):k.isData3DTexture?Ge.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?Ge.setTexture2DArray(k,0):Ge.setTexture2D(k,0),ye.unbindTexture()},this.resetState=function(){I=0,M=0,w=null,ye.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return co}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===It?tl:J8}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===tl?It:Os}}class hw extends o4{}hw.prototype.isWebGL1Renderer=!0;class Zm{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ee(e),this.density=n}clone(){return new Zm(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class $m{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ee(e),this.near=n,this.far=i}clone(){return new $m(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class rm extends Qt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class gp{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Xd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=br()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Hi=new D;class ul{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Hi.fromBufferAttribute(this,n),Hi.applyMatrix4(e),this.setXYZ(n,Hi.x,Hi.y,Hi.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Hi.fromBufferAttribute(this,n),Hi.applyNormalMatrix(e),this.setXYZ(n,Hi.x,Hi.y,Hi.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Hi.fromBufferAttribute(this,n),Hi.transformDirection(e),this.setXYZ(n,Hi.x,Hi.y,Hi.z);return this}setX(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ir(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ir(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ir(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ir(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array),r=Lt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Lt(n,this.array),i=Lt(i,this.array),r=Lt(r,this.array),s=Lt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new jt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ul(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class a4 extends jn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ee(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let mc;const Cf=new D,gc=new D,vc=new D,yc=new oe,Tf=new oe,fw=new He,x3=new D,If=new D,E3=new D,QE=new oe,X1=new oe,GE=new oe;class dw extends Qt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",mc===void 0){mc=new xt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new gp(n,5);mc.setIndex([0,1,2,0,2,3]),mc.setAttribute("position",new ul(i,3,0,!1)),mc.setAttribute("uv",new ul(i,2,3,!1))}this.geometry=mc,this.material=e!==void 0?e:new a4,this.center=new oe(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gc.setFromMatrixScale(this.matrixWorld),fw.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gc.multiplyScalar(-vc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;S3(x3.set(-.5,-.5,0),vc,o,gc,r,s),S3(If.set(.5,-.5,0),vc,o,gc,r,s),S3(E3.set(.5,.5,0),vc,o,gc,r,s),QE.set(0,0),X1.set(1,0),GE.set(1,1);let a=e.ray.intersectTriangle(x3,If,E3,!1,Cf);if(a===null&&(S3(If.set(-.5,.5,0),vc,o,gc,r,s),X1.set(0,1),a=e.ray.intersectTriangle(x3,E3,If,!1,Cf),a===null))return;const l=e.ray.origin.distanceTo(Cf);l<e.near||l>e.far||n.push({distance:l,point:Cf.clone(),uv:sr.getInterpolation(Cf,x3,If,E3,QE,X1,GE,new oe),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function S3(t,e,n,i,r,s){yc.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(Tf.x=s*yc.x-r*yc.y,Tf.y=r*yc.x+s*yc.y):Tf.copy(yc),t.copy(e),t.x+=Tf.x,t.y+=Tf.y,t.applyMatrix4(fw)}const _3=new D,zE=new D;class pw extends Qt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){_3.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(_3);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){_3.setFromMatrixPosition(e.matrixWorld),zE.setFromMatrixPosition(this.matrixWorld);const i=_3.distanceTo(zE)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const HE=new D,VE=new kt,WE=new kt,Xk=new D,XE=new He,xc=new D,q1=new Or,qE=new He,Y1=new Dh;class l4 extends Kt{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new He,this.bindMatrixInverse=new He,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new As),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)xc.fromBufferAttribute(n,i),this.applyBoneTransform(i,xc),this.boundingBox.expandByPoint(xc)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Or),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)xc.fromBufferAttribute(n,i),this.applyBoneTransform(i,xc),this.boundingSphere.expandByPoint(xc)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),q1.copy(this.boundingSphere),q1.applyMatrix4(r),e.ray.intersectsSphere(q1)!==!1&&(qE.copy(r).invert(),Y1.copy(e.ray).applyMatrix4(qE),!(this.boundingBox!==null&&Y1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,Y1)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new kt,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;VE.fromBufferAttribute(r.attributes.skinIndex,e),WE.fromBufferAttribute(r.attributes.skinWeight,e),HE.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=WE.getComponent(s);if(o!==0){const a=VE.getComponent(s);XE.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(Xk.copy(HE).applyMatrix4(XE),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class e2 extends Qt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class go extends mn{constructor(e=null,n=1,i=1,r,s,o,a,l,u=vt,h=vt,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const YE=new He,qk=new He;class vp{constructor(e=[],n=[]){this.uuid=br(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new He)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new He;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:qk;YE.multiplyMatrices(a,n[s]),YE.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new vp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ZI(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new go(n,e,e,Un,Yi);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new e2),this.bones.push(o),this.boneInverses.push(new He().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class yh extends jt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ec=new He,KE=new He,C3=[],jE=new As,Yk=new He,wf=new Kt,Mf=new Or;class u4 extends Kt{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new yh(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Yk)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new As),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Ec),jE.copy(e.boundingBox).applyMatrix4(Ec),this.boundingBox.union(jE)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Or),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Ec),Mf.copy(e.boundingSphere).applyMatrix4(Ec),this.boundingSphere.union(Mf)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(wf.geometry=this.geometry,wf.material=this.material,wf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Mf.copy(this.boundingSphere),Mf.applyMatrix4(i),e.ray.intersectsSphere(Mf)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Ec),KE.multiplyMatrices(i,Ec),wf.matrixWorld=KE,wf.raycast(e,C3);for(let o=0,a=C3.length;o<a;o++){const l=C3[o];l.instanceId=s,l.object=this,n.push(l)}C3.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new yh(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Qi extends jn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ee(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const JE=new D,ZE=new D,$E=new He,K1=new Dh,T3=new Or;class oa extends Qt{constructor(e=new xt,n=new Qi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)JE.fromBufferAttribute(n,r-1),ZE.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=JE.distanceTo(ZE);e.setAttribute("lineDistance",new Je(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),T3.copy(i.boundingSphere),T3.applyMatrix4(r),T3.radius+=s,e.ray.intersectsSphere(T3)===!1)return;$E.copy(r).invert(),K1.copy(e.ray).applyMatrix4($E);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new D,h=new D,d=new D,p=new D,A=this.isLineSegments?2:1,g=i.index,E=i.attributes.position;if(g!==null){const m=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count);for(let y=m,C=x-1;y<C;y+=A){const I=g.getX(y),M=g.getX(y+1);if(u.fromBufferAttribute(E,I),h.fromBufferAttribute(E,M),K1.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(p);L<e.near||L>e.far||n.push({distance:L,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),x=Math.min(E.count,o.start+o.count);for(let y=m,C=x-1;y<C;y+=A){if(u.fromBufferAttribute(E,y),h.fromBufferAttribute(E,y+1),K1.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(p);M<e.near||M>e.far||n.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const e9=new D,t9=new D;class Hs extends oa{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)e9.fromBufferAttribute(n,r),t9.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+e9.distanceTo(t9);e.setAttribute("lineDistance",new Je(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class c4 extends oa{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class t2 extends jn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ee(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const n9=new He,a6=new Dh,I3=new Or,w3=new D;class n2 extends Qt{constructor(e=new xt,n=new t2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),I3.copy(i.boundingSphere),I3.applyMatrix4(r),I3.radius+=s,e.ray.intersectsSphere(I3)===!1)return;n9.copy(r).invert(),a6.copy(e.ray).applyMatrix4(n9);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),A=Math.min(u.count,o.start+o.count);for(let g=p,S=A;g<S;g++){const E=u.getX(g);w3.fromBufferAttribute(d,E),i9(w3,E,l,r,e,n,this)}}else{const p=Math.max(0,o.start),A=Math.min(d.count,o.start+o.count);for(let g=p,S=A;g<S;g++)w3.fromBufferAttribute(d,g),i9(w3,g,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function i9(t,e,n,i,r,s,o){const a=a6.distanceSqToPoint(t);if(a<n){const l=new D;a6.closestPointToPoint(t,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Kk extends mn{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:nn,this.magFilter=s!==void 0?s:nn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class jk extends mn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=vt,this.minFilter=vt,this.generateMipmaps=!1,this.needsUpdate=!0}}class Su extends mn{constructor(e,n,i,r,s,o,a,l,u,h,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}let Jk=class extends Su{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Sn}};class Zk extends mn{constructor(e,n,i,r,s,o,a,l,u){super(e,n,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Vs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,A=(o-h)/p;return(r+A)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new oe:new D);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new D,r=[],s=[],o=[],a=new D,l=new He;for(let A=0;A<=e;A++){const g=A/e;r[A]=this.getTangentAt(g,new D)}s[0]=new D,o[0]=new D;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let A=1;A<=e;A++){if(s[A]=s[A-1].clone(),o[A]=o[A-1].clone(),a.crossVectors(r[A-1],r[A]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Dn(r[A-1].dot(r[A]),-1,1));s[A].applyMatrix4(l.makeRotationAxis(a,g))}o[A].crossVectors(r[A],s[A])}if(n===!0){let A=Math.acos(Dn(s[0].dot(s[e]),-1,1));A/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(A=-A);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],A*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class i2 extends Vs{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new oe,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,A=u-this.aY;l=p*h-A*d+this.aX,u=p*d+A*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Aw extends i2{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function h4(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,d){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,A=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,A*=h,r(o,a,p,A)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const M3=new D,j1=new h4,J1=new h4,Z1=new h4;class mw extends Vs{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new D){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=r[(a-1)%s]:(M3.subVectors(r[0],r[1]).add(r[0]),u=M3);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(M3.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=M3),this.curveType==="centripetal"||this.curveType==="chordal"){const A=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(d),A),S=Math.pow(d.distanceToSquared(p),A),E=Math.pow(p.distanceToSquared(h),A);S<1e-4&&(S=1),g<1e-4&&(g=S),E<1e-4&&(E=S),j1.initNonuniformCatmullRom(u.x,d.x,p.x,h.x,g,S,E),J1.initNonuniformCatmullRom(u.y,d.y,p.y,h.y,g,S,E),Z1.initNonuniformCatmullRom(u.z,d.z,p.z,h.z,g,S,E)}else this.curveType==="catmullrom"&&(j1.initCatmullRom(u.x,d.x,p.x,h.x,this.tension),J1.initCatmullRom(u.y,d.y,p.y,h.y,this.tension),Z1.initCatmullRom(u.z,d.z,p.z,h.z,this.tension));return i.set(j1.calc(l),J1.calc(l),Z1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new D().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r9(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function $k(t,e){const n=1-t;return n*n*e}function eQ(t,e){return 2*(1-t)*t*e}function tQ(t,e){return t*t*e}function ld(t,e,n,i){return $k(t,e)+eQ(t,n)+tQ(t,i)}function nQ(t,e){const n=1-t;return n*n*n*e}function iQ(t,e){const n=1-t;return 3*n*n*t*e}function rQ(t,e){return 3*(1-t)*t*t*e}function sQ(t,e){return t*t*t*e}function ud(t,e,n,i,r){return nQ(t,e)+iQ(t,n)+rQ(t,i)+sQ(t,r)}class f4 extends Vs{constructor(e=new oe,n=new oe,i=new oe,r=new oe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new oe){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(ud(e,r.x,s.x,o.x,a.x),ud(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class gw extends Vs{constructor(e=new D,n=new D,i=new D,r=new D){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new D){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(ud(e,r.x,s.x,o.x,a.x),ud(e,r.y,s.y,o.y,a.y),ud(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class r2 extends Vs{constructor(e=new oe,n=new oe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new oe){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new oe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vw extends Vs{constructor(e=new D,n=new D){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new D){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new D){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class d4 extends Vs{constructor(e=new oe,n=new oe,i=new oe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new oe){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(ld(e,r.x,s.x,o.x),ld(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class p4 extends Vs{constructor(e=new D,n=new D,i=new D){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new D){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(ld(e,r.x,s.x,o.x),ld(e,r.y,s.y,o.y),ld(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class A4 extends Vs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new oe){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(r9(a,l.x,u.x,h.x,d.x),r9(a,l.y,u.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new oe().fromArray(r))}return this}}var m4=Object.freeze({__proto__:null,ArcCurve:Aw,CatmullRomCurve3:mw,CubicBezierCurve:f4,CubicBezierCurve3:gw,EllipseCurve:i2,LineCurve:r2,LineCurve3:vw,QuadraticBezierCurve:d4,QuadraticBezierCurve3:p4,SplineCurve:A4});class yw extends Vs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new r2(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(n.push(h),i=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new m4[r.type]().fromJSON(r))}return this}}let Kd=class extends yw{constructor(e){super(),this.type="Path",this.currentPoint=new oe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new r2(this.currentPoint.clone(),new oe(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new d4(this.currentPoint.clone(),new oe(e,n),new oe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new f4(this.currentPoint.clone(),new oe(e,n),new oe(i,r),new oe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new A4(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,n+h,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const u=new i2(e,n,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class yp extends xt{constructor(e=[new oe(0,-.5),new oe(.5,0),new oe(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Dn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/n,d=new D,p=new oe,A=new D,g=new D,S=new D;let E=0,m=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:E=e[x+1].x-e[x].x,m=e[x+1].y-e[x].y,A.x=m*1,A.y=-E,A.z=m*0,S.copy(A),A.normalize(),l.push(A.x,A.y,A.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:E=e[x+1].x-e[x].x,m=e[x+1].y-e[x].y,A.x=m*1,A.y=-E,A.z=m*0,g.copy(A),A.x+=S.x,A.y+=S.y,A.z+=S.z,A.normalize(),l.push(A.x,A.y,A.z),S.copy(g)}for(let x=0;x<=n;x++){const y=i+x*h*r,C=Math.sin(y),I=Math.cos(y);for(let M=0;M<=e.length-1;M++){d.x=e[M].x*C,d.y=e[M].y,d.z=e[M].x*I,o.push(d.x,d.y,d.z),p.x=x/n,p.y=M/(e.length-1),a.push(p.x,p.y);const w=l[3*M+0]*C,L=l[3*M+1],R=l[3*M+0]*I;u.push(w,L,R)}}for(let x=0;x<n;x++)for(let y=0;y<e.length-1;y++){const C=y+x*e.length,I=C,M=C+e.length,w=C+e.length+1,L=C+1;s.push(I,M,L),s.push(w,L,M)}this.setIndex(s),this.setAttribute("position",new Je(o,3)),this.setAttribute("uv",new Je(a,2)),this.setAttribute("normal",new Je(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yp(e.points,e.segments,e.phiStart,e.phiLength)}}class s2 extends yp{constructor(e=1,n=1,i=4,r=8){const s=new Kd;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new s2(e.radius,e.length,e.capSegments,e.radialSegments)}}class o2 extends xt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new D,h=new oe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const A=i+d/n*r;u.x=e*Math.cos(A),u.y=e*Math.sin(A),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Je(o,3)),this.setAttribute("normal",new Je(a,3)),this.setAttribute("uv",new Je(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new o2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Oh extends xt{constructor(e=1,n=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],p=[],A=[];let g=0;const S=[],E=i/2;let m=0;x(),o===!1&&(e>0&&y(!0),n>0&&y(!1)),this.setIndex(h),this.setAttribute("position",new Je(d,3)),this.setAttribute("normal",new Je(p,3)),this.setAttribute("uv",new Je(A,2));function x(){const C=new D,I=new D;let M=0;const w=(n-e)/i;for(let L=0;L<=s;L++){const R=[],B=L/s,F=B*(n-e)+e;for(let X=0;X<=r;X++){const G=X/r,q=G*l+a,Y=Math.sin(q),$=Math.cos(q);I.x=F*Y,I.y=-B*i+E,I.z=F*$,d.push(I.x,I.y,I.z),C.set(Y,w,$).normalize(),p.push(C.x,C.y,C.z),A.push(G,1-B),R.push(g++)}S.push(R)}for(let L=0;L<r;L++)for(let R=0;R<s;R++){const B=S[R][L],F=S[R+1][L],X=S[R+1][L+1],G=S[R][L+1];h.push(B,F,G),h.push(F,X,G),M+=6}u.addGroup(m,M,0),m+=M}function y(C){const I=g,M=new oe,w=new D;let L=0;const R=C===!0?e:n,B=C===!0?1:-1;for(let X=1;X<=r;X++)d.push(0,E*B,0),p.push(0,B,0),A.push(.5,.5),g++;const F=g;for(let X=0;X<=r;X++){const q=X/r*l+a,Y=Math.cos(q),$=Math.sin(q);w.x=R*$,w.y=E*B,w.z=R*Y,d.push(w.x,w.y,w.z),p.push(0,B,0),M.x=Y*.5+.5,M.y=$*.5*B+.5,A.push(M.x,M.y),g++}for(let X=0;X<r;X++){const G=I+X,q=F+X;C===!0?h.push(q,q+1,G):h.push(q+1,q,G),L+=3}u.addGroup(m,L,C===!0?1:2),m+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class a2 extends Oh{constructor(e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new a2(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xl extends xt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),u(i),h(),this.setAttribute("position",new Je(s,3)),this.setAttribute("normal",new Je(s.slice(),3)),this.setAttribute("uv",new Je(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const y=new D,C=new D,I=new D;for(let M=0;M<n.length;M+=3)A(n[M+0],y),A(n[M+1],C),A(n[M+2],I),l(y,C,I,x)}function l(x,y,C,I){const M=I+1,w=[];for(let L=0;L<=M;L++){w[L]=[];const R=x.clone().lerp(C,L/M),B=y.clone().lerp(C,L/M),F=M-L;for(let X=0;X<=F;X++)X===0&&L===M?w[L][X]=R:w[L][X]=R.clone().lerp(B,X/F)}for(let L=0;L<M;L++)for(let R=0;R<2*(M-L)-1;R++){const B=Math.floor(R/2);R%2===0?(p(w[L][B+1]),p(w[L+1][B]),p(w[L][B])):(p(w[L][B+1]),p(w[L+1][B+1]),p(w[L+1][B]))}}function u(x){const y=new D;for(let C=0;C<s.length;C+=3)y.x=s[C+0],y.y=s[C+1],y.z=s[C+2],y.normalize().multiplyScalar(x),s[C+0]=y.x,s[C+1]=y.y,s[C+2]=y.z}function h(){const x=new D;for(let y=0;y<s.length;y+=3){x.x=s[y+0],x.y=s[y+1],x.z=s[y+2];const C=E(x)/2/Math.PI+.5,I=m(x)/Math.PI+.5;o.push(C,1-I)}g(),d()}function d(){for(let x=0;x<o.length;x+=6){const y=o[x+0],C=o[x+2],I=o[x+4],M=Math.max(y,C,I),w=Math.min(y,C,I);M>.9&&w<.1&&(y<.2&&(o[x+0]+=1),C<.2&&(o[x+2]+=1),I<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function A(x,y){const C=x*3;y.x=e[C+0],y.y=e[C+1],y.z=e[C+2]}function g(){const x=new D,y=new D,C=new D,I=new D,M=new oe,w=new oe,L=new oe;for(let R=0,B=0;R<s.length;R+=9,B+=6){x.set(s[R+0],s[R+1],s[R+2]),y.set(s[R+3],s[R+4],s[R+5]),C.set(s[R+6],s[R+7],s[R+8]),M.set(o[B+0],o[B+1]),w.set(o[B+2],o[B+3]),L.set(o[B+4],o[B+5]),I.copy(x).add(y).add(C).divideScalar(3);const F=E(I);S(M,B+0,x,F),S(w,B+2,y,F),S(L,B+4,C,F)}}function S(x,y,C,I){I<0&&x.x===1&&(o[y]=x.x-1),C.x===0&&C.z===0&&(o[y]=I/2/Math.PI+.5)}function E(x){return Math.atan2(x.z,-x.x)}function m(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xl(e.vertices,e.indices,e.radius,e.details)}}class l2 extends xl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new l2(e.radius,e.detail)}}const R3=new D,b3=new D,$1=new D,B3=new sr;class xw extends xt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(fu*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],d=new Array(3),p={},A=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:S,b:E,c:m}=B3;if(S.fromBufferAttribute(a,u[0]),E.fromBufferAttribute(a,u[1]),m.fromBufferAttribute(a,u[2]),B3.getNormal($1),d[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,d[1]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,d[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let x=0;x<3;x++){const y=(x+1)%3,C=d[x],I=d[y],M=B3[h[x]],w=B3[h[y]],L=`${C}_${I}`,R=`${I}_${C}`;R in p&&p[R]?($1.dot(p[R].normal)<=s&&(A.push(M.x,M.y,M.z),A.push(w.x,w.y,w.z)),p[R]=null):L in p||(p[L]={index0:u[x],index1:u[y],normal:$1.clone()})}}for(const g in p)if(p[g]){const{index0:S,index1:E}=p[g];R3.fromBufferAttribute(a,S),b3.fromBufferAttribute(a,E),A.push(R3.x,R3.y,R3.z),A.push(b3.x,b3.y,b3.z)}this.setAttribute("position",new Je(A,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class pu extends Kd{constructor(e){super(e),this.uuid=br(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new Kd().fromJSON(r))}return this}}const oQ={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=Ew(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,d,p,A;if(i&&(s=hQ(t,e,s,n)),t.length>80*n){a=u=t[0],l=h=t[1];for(let g=n;g<r;g+=n)d=t[g],p=t[g+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>h&&(h=p);A=Math.max(u-a,h-l),A=A!==0?32767/A:0}return jd(s,o,n,a,l,A,0),o}};function Ew(t,e,n,i,r){let s,o;if(r===SQ(t,e,n,i)>0)for(s=e;s<n;s+=i)o=s9(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=s9(s,t[s],t[s+1],o);return o&&u2(o,o.next)&&(Zd(o),o=o.next),o}function _u(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(u2(n,n.next)||Cn(n.prev,n,n.next)===0)){if(Zd(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function jd(t,e,n,i,r,s,o){if(!t)return;!o&&s&&mQ(t,i,r,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?lQ(t,i,r,s):aQ(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),Zd(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=uQ(_u(t),e,n),jd(t,e,n,i,r,s,2)):o===2&&cQ(t,e,n,i,r,s):jd(_u(t),e,n,i,r,s,1);break}}}function aQ(t){const e=t.prev,n=t,i=t.next;if(Cn(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,u=i.y,h=r<s?r<o?r:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,A=a>l?a>u?a:u:l>u?l:u;let g=i.next;for(;g!==e;){if(g.x>=h&&g.x<=p&&g.y>=d&&g.y<=A&&Vc(r,a,s,l,o,u,g.x,g.y)&&Cn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function lQ(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Cn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,h=r.y,d=s.y,p=o.y,A=a<l?a<u?a:u:l<u?l:u,g=h<d?h<p?h:p:d<p?d:p,S=a>l?a>u?a:u:l>u?l:u,E=h>d?h>p?h:p:d>p?d:p,m=l6(A,g,e,n,i),x=l6(S,E,e,n,i);let y=t.prevZ,C=t.nextZ;for(;y&&y.z>=m&&C&&C.z<=x;){if(y.x>=A&&y.x<=S&&y.y>=g&&y.y<=E&&y!==r&&y!==o&&Vc(a,h,l,d,u,p,y.x,y.y)&&Cn(y.prev,y,y.next)>=0||(y=y.prevZ,C.x>=A&&C.x<=S&&C.y>=g&&C.y<=E&&C!==r&&C!==o&&Vc(a,h,l,d,u,p,C.x,C.y)&&Cn(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;y&&y.z>=m;){if(y.x>=A&&y.x<=S&&y.y>=g&&y.y<=E&&y!==r&&y!==o&&Vc(a,h,l,d,u,p,y.x,y.y)&&Cn(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;C&&C.z<=x;){if(C.x>=A&&C.x<=S&&C.y>=g&&C.y<=E&&C!==r&&C!==o&&Vc(a,h,l,d,u,p,C.x,C.y)&&Cn(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function uQ(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!u2(r,s)&&Sw(r,i,i.next,s)&&Jd(r,s)&&Jd(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Zd(i),Zd(i.next),i=t=s),i=i.next}while(i!==t);return _u(i)}function cQ(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&yQ(o,a)){let l=_w(o,a);o=_u(o,o.next),l=_u(l,l.next),jd(o,e,n,i,r,s,0),jd(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function hQ(t,e,n,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,u=Ew(t,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(vQ(u));for(r.sort(fQ),s=0;s<r.length;s++)n=dQ(r[s],n);return n}function fQ(t,e){return t.x-e.x}function dQ(t,e){const n=pQ(t,e);if(!n)return e;const i=_w(n,t);return _u(i,i.next),_u(n,n.next)}function pQ(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>i&&(i=p,r=n.x<n.next.x?n:n.next,p===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let h=1/0,d;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&Vc(o<u?s:i,o,l,u,o<u?i:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),Jd(n,t)&&(d<h||d===h&&(n.x>r.x||n.x===r.x&&AQ(r,n)))&&(r=n,h=d)),n=n.next;while(n!==a);return r}function AQ(t,e){return Cn(t.prev,t,e.prev)<0&&Cn(e.next,t,t.next)<0}function mQ(t,e,n,i){let r=t;do r.z===0&&(r.z=l6(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,gQ(r)}function gQ(t){let e,n,i,r,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(o>1);return t}function l6(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function vQ(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Vc(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function yQ(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!xQ(t,e)&&(Jd(t,e)&&Jd(e,t)&&EQ(t,e)&&(Cn(t.prev,t,e.prev)||Cn(t,e.prev,e))||u2(t,e)&&Cn(t.prev,t,t.next)>0&&Cn(e.prev,e,e.next)>0)}function Cn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function u2(t,e){return t.x===e.x&&t.y===e.y}function Sw(t,e,n,i){const r=P3(Cn(t,e,n)),s=P3(Cn(t,e,i)),o=P3(Cn(n,i,t)),a=P3(Cn(n,i,e));return!!(r!==s&&o!==a||r===0&&L3(t,n,e)||s===0&&L3(t,i,e)||o===0&&L3(n,t,i)||a===0&&L3(n,e,i))}function L3(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function P3(t){return t>0?1:t<0?-1:0}function xQ(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Sw(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Jd(t,e){return Cn(t.prev,t,t.next)<0?Cn(t,e,t.next)>=0&&Cn(t,t.prev,e)>=0:Cn(t,e,t.prev)<0||Cn(t,t.next,e)<0}function EQ(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function _w(t,e){const n=new u6(t.i,t.x,t.y),i=new u6(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function s9(t,e,n,i){const r=new u6(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Zd(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function u6(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function SQ(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class vo{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return vo.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];o9(e),a9(i,e);let o=e.length;n.forEach(o9);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,a9(i,n[l]);const a=oQ.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function o9(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function a9(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class c2 extends xt{constructor(e=new pu([new oe(.5,.5),new oe(-.5,.5),new oe(-.5,-.5),new oe(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Je(r,3)),this.setAttribute("uv",new Je(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,A=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:A-.1,S=n.bevelOffset!==void 0?n.bevelOffset:0,E=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:_Q;let y,C=!1,I,M,w,L;m&&(y=m.getSpacedPoints(h),C=!0,p=!1,I=m.computeFrenetFrames(h,!1),M=new D,w=new D,L=new D),p||(E=0,A=0,g=0,S=0);const R=a.extractPoints(u);let B=R.shape;const F=R.holes;if(!vo.isClockWise(B)){B=B.reverse();for(let W=0,ve=F.length;W<ve;W++){const Ae=F[W];vo.isClockWise(Ae)&&(F[W]=Ae.reverse())}}const G=vo.triangulateShape(B,F),q=B;for(let W=0,ve=F.length;W<ve;W++){const Ae=F[W];B=B.concat(Ae)}function Y(W,ve,Ae){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),W.clone().addScaledVector(ve,Ae)}const $=B.length,j=G.length;function P(W,ve,Ae){let Se,ye,Ze;const Qe=W.x-ve.x,Ge=W.y-ve.y,st=Ae.x-W.x,Mt=Ae.y-W.y,$t=Qe*Qe+Ge*Ge,H=Qe*Mt-Ge*st;if(Math.abs(H)>Number.EPSILON){const N=Math.sqrt($t),ue=Math.sqrt(st*st+Mt*Mt),_e=ve.x-Ge/N,Ce=ve.y+Qe/N,Le=Ae.x-Mt/ue,Xe=Ae.y+st/ue,be=((Le-_e)*Mt-(Xe-Ce)*st)/(Qe*Mt-Ge*st);Se=_e+Qe*be-W.x,ye=Ce+Ge*be-W.y;const he=Se*Se+ye*ye;if(he<=2)return new oe(Se,ye);Ze=Math.sqrt(he/2)}else{let N=!1;Qe>Number.EPSILON?st>Number.EPSILON&&(N=!0):Qe<-Number.EPSILON?st<-Number.EPSILON&&(N=!0):Math.sign(Ge)===Math.sign(Mt)&&(N=!0),N?(Se=-Ge,ye=Qe,Ze=Math.sqrt($t)):(Se=Qe,ye=Ge,Ze=Math.sqrt($t/2))}return new oe(Se/Ze,ye/Ze)}const Q=[];for(let W=0,ve=q.length,Ae=ve-1,Se=W+1;W<ve;W++,Ae++,Se++)Ae===ve&&(Ae=0),Se===ve&&(Se=0),Q[W]=P(q[W],q[Ae],q[Se]);const U=[];let O,V=Q.concat();for(let W=0,ve=F.length;W<ve;W++){const Ae=F[W];O=[];for(let Se=0,ye=Ae.length,Ze=ye-1,Qe=Se+1;Se<ye;Se++,Ze++,Qe++)Ze===ye&&(Ze=0),Qe===ye&&(Qe=0),O[Se]=P(Ae[Se],Ae[Ze],Ae[Qe]);U.push(O),V=V.concat(O)}for(let W=0;W<E;W++){const ve=W/E,Ae=A*Math.cos(ve*Math.PI/2),Se=g*Math.sin(ve*Math.PI/2)+S;for(let ye=0,Ze=q.length;ye<Ze;ye++){const Qe=Y(q[ye],Q[ye],Se);Ie(Qe.x,Qe.y,-Ae)}for(let ye=0,Ze=F.length;ye<Ze;ye++){const Qe=F[ye];O=U[ye];for(let Ge=0,st=Qe.length;Ge<st;Ge++){const Mt=Y(Qe[Ge],O[Ge],Se);Ie(Mt.x,Mt.y,-Ae)}}}const me=g+S;for(let W=0;W<$;W++){const ve=p?Y(B[W],V[W],me):B[W];C?(w.copy(I.normals[0]).multiplyScalar(ve.x),M.copy(I.binormals[0]).multiplyScalar(ve.y),L.copy(y[0]).add(w).add(M),Ie(L.x,L.y,L.z)):Ie(ve.x,ve.y,0)}for(let W=1;W<=h;W++)for(let ve=0;ve<$;ve++){const Ae=p?Y(B[ve],V[ve],me):B[ve];C?(w.copy(I.normals[W]).multiplyScalar(Ae.x),M.copy(I.binormals[W]).multiplyScalar(Ae.y),L.copy(y[W]).add(w).add(M),Ie(L.x,L.y,L.z)):Ie(Ae.x,Ae.y,d/h*W)}for(let W=E-1;W>=0;W--){const ve=W/E,Ae=A*Math.cos(ve*Math.PI/2),Se=g*Math.sin(ve*Math.PI/2)+S;for(let ye=0,Ze=q.length;ye<Ze;ye++){const Qe=Y(q[ye],Q[ye],Se);Ie(Qe.x,Qe.y,d+Ae)}for(let ye=0,Ze=F.length;ye<Ze;ye++){const Qe=F[ye];O=U[ye];for(let Ge=0,st=Qe.length;Ge<st;Ge++){const Mt=Y(Qe[Ge],O[Ge],Se);C?Ie(Mt.x,Mt.y+y[h-1].y,y[h-1].x+Ae):Ie(Mt.x,Mt.y,d+Ae)}}}re(),xe();function re(){const W=r.length/3;if(p){let ve=0,Ae=$*ve;for(let Se=0;Se<j;Se++){const ye=G[Se];Ne(ye[2]+Ae,ye[1]+Ae,ye[0]+Ae)}ve=h+E*2,Ae=$*ve;for(let Se=0;Se<j;Se++){const ye=G[Se];Ne(ye[0]+Ae,ye[1]+Ae,ye[2]+Ae)}}else{for(let ve=0;ve<j;ve++){const Ae=G[ve];Ne(Ae[2],Ae[1],Ae[0])}for(let ve=0;ve<j;ve++){const Ae=G[ve];Ne(Ae[0]+$*h,Ae[1]+$*h,Ae[2]+$*h)}}i.addGroup(W,r.length/3-W,0)}function xe(){const W=r.length/3;let ve=0;ge(q,ve),ve+=q.length;for(let Ae=0,Se=F.length;Ae<Se;Ae++){const ye=F[Ae];ge(ye,ve),ve+=ye.length}i.addGroup(W,r.length/3-W,1)}function ge(W,ve){let Ae=W.length;for(;--Ae>=0;){const Se=Ae;let ye=Ae-1;ye<0&&(ye=W.length-1);for(let Ze=0,Qe=h+E*2;Ze<Qe;Ze++){const Ge=$*Ze,st=$*(Ze+1),Mt=ve+Se+Ge,$t=ve+ye+Ge,H=ve+ye+st,N=ve+Se+st;$e(Mt,$t,H,N)}}}function Ie(W,ve,Ae){l.push(W),l.push(ve),l.push(Ae)}function Ne(W,ve,Ae){ct(W),ct(ve),ct(Ae);const Se=r.length/3,ye=x.generateTopUV(i,r,Se-3,Se-2,Se-1);De(ye[0]),De(ye[1]),De(ye[2])}function $e(W,ve,Ae,Se){ct(W),ct(ve),ct(Se),ct(ve),ct(Ae),ct(Se);const ye=r.length/3,Ze=x.generateSideWallUV(i,r,ye-6,ye-3,ye-2,ye-1);De(Ze[0]),De(Ze[1]),De(Ze[3]),De(Ze[1]),De(Ze[2]),De(Ze[3])}function ct(W){r.push(l[W*3+0]),r.push(l[W*3+1]),r.push(l[W*3+2])}function De(W){s.push(W.x),s.push(W.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return CQ(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new m4[r.type]().fromJSON(r)),new c2(i,e.options)}}const _Q={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new oe(s,o),new oe(a,l),new oe(u,h)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],A=e[r*3+1],g=e[r*3+2],S=e[s*3],E=e[s*3+1],m=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new oe(o,1-l),new oe(u,1-d),new oe(p,1-g),new oe(S,1-m)]:[new oe(a,1-l),new oe(h,1-d),new oe(A,1-g),new oe(E,1-m)]}};function CQ(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class h2 extends xl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new h2(e.radius,e.detail)}}class xp extends xl{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new xp(e.radius,e.detail)}}class f2 extends xt{constructor(e=.5,n=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],h=[];let d=e;const p=(n-e)/r,A=new D,g=new oe;for(let S=0;S<=r;S++){for(let E=0;E<=i;E++){const m=s+E/i*o;A.x=d*Math.cos(m),A.y=d*Math.sin(m),l.push(A.x,A.y,A.z),u.push(0,0,1),g.x=(A.x/n+1)/2,g.y=(A.y/n+1)/2,h.push(g.x,g.y)}d+=p}for(let S=0;S<r;S++){const E=S*(i+1);for(let m=0;m<i;m++){const x=m+E,y=x,C=x+i+1,I=x+i+2,M=x+1;a.push(y,C,M),a.push(C,I,M)}}this.setIndex(a),this.setAttribute("position",new Je(l,3)),this.setAttribute("normal",new Je(u,3)),this.setAttribute("uv",new Je(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class d2 extends xt{constructor(e=new pu([new oe(0,.5),new oe(-.5,-.5),new oe(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Je(r,3)),this.setAttribute("normal",new Je(s,3)),this.setAttribute("uv",new Je(o,2));function u(h){const d=r.length/3,p=h.extractPoints(n);let A=p.shape;const g=p.holes;vo.isClockWise(A)===!1&&(A=A.reverse());for(let E=0,m=g.length;E<m;E++){const x=g[E];vo.isClockWise(x)===!0&&(g[E]=x.reverse())}const S=vo.triangulateShape(A,g);for(let E=0,m=g.length;E<m;E++){const x=g[E];A=A.concat(x)}for(let E=0,m=A.length;E<m;E++){const x=A[E];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let E=0,m=S.length;E<m;E++){const x=S[E],y=x[0]+d,C=x[1]+d,I=x[2]+d;i.push(y,C,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return TQ(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new d2(i,e.curveSegments)}}function TQ(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class kh extends xt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const h=[],d=new D,p=new D,A=[],g=[],S=[],E=[];for(let m=0;m<=i;m++){const x=[],y=m/i;let C=0;m===0&&o===0?C=.5/n:m===i&&l===Math.PI&&(C=-.5/n);for(let I=0;I<=n;I++){const M=I/n;d.x=-e*Math.cos(r+M*s)*Math.sin(o+y*a),d.y=e*Math.cos(o+y*a),d.z=e*Math.sin(r+M*s)*Math.sin(o+y*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),S.push(p.x,p.y,p.z),E.push(M+C,1-y),x.push(u++)}h.push(x)}for(let m=0;m<i;m++)for(let x=0;x<n;x++){const y=h[m][x+1],C=h[m][x],I=h[m+1][x],M=h[m+1][x+1];(m!==0||o>0)&&A.push(y,C,M),(m!==i-1||l<Math.PI)&&A.push(C,I,M)}this.setIndex(A),this.setAttribute("position",new Je(g,3)),this.setAttribute("normal",new Je(S,3)),this.setAttribute("uv",new Je(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class p2 extends xl{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new p2(e.radius,e.detail)}}class A2 extends xt{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],h=new D,d=new D,p=new D;for(let A=0;A<=i;A++)for(let g=0;g<=r;g++){const S=g/r*s,E=A/i*Math.PI*2;d.x=(e+n*Math.cos(E))*Math.cos(S),d.y=(e+n*Math.cos(E))*Math.sin(S),d.z=n*Math.sin(E),a.push(d.x,d.y,d.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(g/r),u.push(A/i)}for(let A=1;A<=i;A++)for(let g=1;g<=r;g++){const S=(r+1)*A+g-1,E=(r+1)*(A-1)+g-1,m=(r+1)*(A-1)+g,x=(r+1)*A+g;o.push(S,E,x),o.push(E,m,x)}this.setIndex(o),this.setAttribute("position",new Je(a,3)),this.setAttribute("normal",new Je(l,3)),this.setAttribute("uv",new Je(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class m2 extends xt{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],d=new D,p=new D,A=new D,g=new D,S=new D,E=new D,m=new D;for(let y=0;y<=i;++y){const C=y/i*s*Math.PI*2;x(C,s,o,e,A),x(C+.01,s,o,e,g),E.subVectors(g,A),m.addVectors(g,A),S.crossVectors(E,m),m.crossVectors(S,E),S.normalize(),m.normalize();for(let I=0;I<=r;++I){const M=I/r*Math.PI*2,w=-n*Math.cos(M),L=n*Math.sin(M);d.x=A.x+(w*m.x+L*S.x),d.y=A.y+(w*m.y+L*S.y),d.z=A.z+(w*m.z+L*S.z),l.push(d.x,d.y,d.z),p.subVectors(d,A).normalize(),u.push(p.x,p.y,p.z),h.push(y/i),h.push(I/r)}}for(let y=1;y<=i;y++)for(let C=1;C<=r;C++){const I=(r+1)*(y-1)+(C-1),M=(r+1)*y+(C-1),w=(r+1)*y+C,L=(r+1)*(y-1)+C;a.push(I,M,L),a.push(M,w,L)}this.setIndex(a),this.setAttribute("position",new Je(l,3)),this.setAttribute("normal",new Je(u,3)),this.setAttribute("uv",new Je(h,2));function x(y,C,I,M,w){const L=Math.cos(y),R=Math.sin(y),B=I/C*y,F=Math.cos(B);w.x=M*(2+F)*.5*L,w.y=M*(2+F)*R*.5,w.z=M*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class g2 extends xt{constructor(e=new p4(new D(-1,-1,0),new D(-1,1,0),new D(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new D,l=new D,u=new oe;let h=new D;const d=[],p=[],A=[],g=[];S(),this.setIndex(g),this.setAttribute("position",new Je(d,3)),this.setAttribute("normal",new Je(p,3)),this.setAttribute("uv",new Je(A,2));function S(){for(let y=0;y<n;y++)E(y);E(s===!1?n:0),x(),m()}function E(y){h=e.getPointAt(y/n,h);const C=o.normals[y],I=o.binormals[y];for(let M=0;M<=r;M++){const w=M/r*Math.PI*2,L=Math.sin(w),R=-Math.cos(w);l.x=R*C.x+L*I.x,l.y=R*C.y+L*I.y,l.z=R*C.z+L*I.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,d.push(a.x,a.y,a.z)}}function m(){for(let y=1;y<=n;y++)for(let C=1;C<=r;C++){const I=(r+1)*(y-1)+(C-1),M=(r+1)*y+(C-1),w=(r+1)*y+C,L=(r+1)*(y-1)+C;g.push(I,M,L),g.push(M,w,L)}}function x(){for(let y=0;y<=n;y++)for(let C=0;C<=r;C++)u.x=y/n,u.y=C/r,A.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new g2(new m4[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Cw extends xt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new D,s=new D;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const d=l[u],p=d.start,A=d.count;for(let g=p,S=p+A;g<S;g+=3)for(let E=0;E<3;E++){const m=a.getX(g+E),x=a.getX(g+(E+1)%3);r.fromBufferAttribute(o,m),s.fromBufferAttribute(o,x),l9(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),l9(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Je(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function l9(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var u9=Object.freeze({__proto__:null,BoxGeometry:yl,CapsuleGeometry:s2,CircleGeometry:o2,ConeGeometry:a2,CylinderGeometry:Oh,DodecahedronGeometry:l2,EdgesGeometry:xw,ExtrudeGeometry:c2,IcosahedronGeometry:h2,LatheGeometry:yp,OctahedronGeometry:xp,PlaneGeometry:Nh,PolyhedronGeometry:xl,RingGeometry:f2,ShapeGeometry:d2,SphereGeometry:kh,TetrahedronGeometry:p2,TorusGeometry:A2,TorusKnotGeometry:m2,TubeGeometry:g2,WireframeGeometry:Cw});class Tw extends jn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ee(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class cd extends Vt{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ep extends jn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ee(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Co extends Ep{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new oe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ee(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ee(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ee(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Iw extends jn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ee(16777215),this.specular=new Ee(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ww extends jn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ee(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Sp extends jn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Mw extends jn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rw extends jn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ee(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bw extends Qi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function $r(t,e,n){return g4(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function lu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function g4(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bw(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function c6(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function v4(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function IQ(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),d=[],p=[];for(let A=0;A<u.times.length;++A){const g=u.times[A]*r;if(!(g<n||g>=i)){d.push(u.times[A]);for(let S=0;S<h;++S)p.push(u.values[A*h+S])}}d.length!==0&&(u.times=lu(d,u.times.constructor),u.values=lu(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function wQ(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(u===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const A=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=A/3);const g=a.times.length-1;let S;if(s<=a.times[0]){const m=h,x=d-h;S=$r(a.values,m,x)}else if(s>=a.times[g]){const m=g*d+h,x=m+d-h;S=$r(a.values,m,x)}else{const m=a.createInterpolant(),x=h,y=d-h;m.evaluate(s),S=$r(m.resultBuffer,x,y)}l==="quaternion"&&new Si().fromArray(S).normalize().conjugate().toArray(S);const E=u.times.length;for(let m=0;m<E;++m){const x=m*A+p;if(l==="quaternion")Si.multiplyQuaternionsFlat(u.values,x,S,0,u.values,x);else{const y=A-p*2;for(let C=0;C<y;++C)u.values[x+C]-=S[C]}}}return t.blendMode=K8,t}const MQ={arraySlice:$r,convertArray:lu,isTypedArray:g4,getKeyframeOrder:Bw,sortedArray:c6,flattenJSON:v4,subclip:IQ,makeClipAdditive:wQ};class Qh{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Lw extends Qh{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:su,endingEnd:su}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case ou:s=e,a=2*n-i;break;case Wd:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case ou:o=e,l=2*i-n;break;case Wd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const u=(i-n)*.5,h=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,A=this._weightNext,g=(i-n)/(r-n),S=g*g,E=S*g,m=-p*E+2*p*S-p*g,x=(1+p)*E+(-1.5-2*p)*S+(-.5+p)*g+1,y=(-1-A)*E+(1.5+A)*S+.5*g,C=A*E-A*S;for(let I=0;I!==a;++I)s[I]=m*o[h+I]+x*o[u+I]+y*o[l+I]+C*o[d+I];return s}}class y4 extends Qh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(i-n)/(r-n),d=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*h;return s}}class Pw extends Qh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ws{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=lu(n,this.TimeBufferType),this.values=lu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:lu(e.times,Array),values:lu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Pw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new y4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Lw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case mh:n=this.InterpolantFactoryMethodDiscrete;break;case Eu:n=this.InterpolantFactoryMethodLinear;break;case gA:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mh;case this.InterpolantFactoryMethodLinear:return Eu;case this.InterpolantFactoryMethodSmooth:return gA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=$r(i,s,o),this.values=$r(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&g4(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=$r(this.times),n=$r(this.values),i=this.getValueSize(),r=this.getInterpolation()===gA,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,A=d+i;for(let g=0;g!==i;++g){const S=n[d+g];if(S!==n[p+g]||S!==n[A+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let A=0;A!==i;++A)n[p+A]=n[d+A]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=$r(e,0,o),this.values=$r(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=$r(this.times,0),n=$r(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Ws.prototype.TimeBufferType=Float32Array;Ws.prototype.ValueBufferType=Float32Array;Ws.prototype.DefaultInterpolation=Eu;class Pu extends Ws{}Pu.prototype.ValueTypeName="bool";Pu.prototype.ValueBufferType=Array;Pu.prototype.DefaultInterpolation=mh;Pu.prototype.InterpolantFactoryMethodLinear=void 0;Pu.prototype.InterpolantFactoryMethodSmooth=void 0;class x4 extends Ws{}x4.prototype.ValueTypeName="color";class xh extends Ws{}xh.prototype.ValueTypeName="number";class Dw extends Qh{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let u=e*a;for(let h=u+a;u!==h;u+=4)Si.slerpFlat(s,0,o,u-a,o,u,l);return s}}class cl extends Ws{InterpolantFactoryMethodLinear(e){return new Dw(this.times,this.values,this.getValueSize(),e)}}cl.prototype.ValueTypeName="quaternion";cl.prototype.DefaultInterpolation=Eu;cl.prototype.InterpolantFactoryMethodSmooth=void 0;class Du extends Ws{}Du.prototype.ValueTypeName="string";Du.prototype.ValueBufferType=Array;Du.prototype.DefaultInterpolation=mh;Du.prototype.InterpolantFactoryMethodLinear=void 0;Du.prototype.InterpolantFactoryMethodSmooth=void 0;class Eh extends Ws{}Eh.prototype.ValueTypeName="vector";class Sh{constructor(e,n=-1,i,r=Xm){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=br(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(bQ(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(Ws.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=Bw(l);l=c6(l,1,h),u=c6(u,1,h),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new xh(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,A,g,S){if(A.length!==0){const E=[],m=[];v4(A,E,m,g),E.length!==0&&S.push(new d(p,E,m))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const A={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let S=0;S<p[g].morphTargets.length;S++)A[p[g].morphTargets[S]]=-1;for(const S in A){const E=[],m=[];for(let x=0;x!==p[g].morphTargets.length;++x){const y=p[g];E.push(y.time),m.push(y.morphTarget===S?1:0)}r.push(new xh(".morphTargetInfluence["+S+"]",E,m))}l=A.length*o}else{const A=".bones["+n[d].name+"]";i(Eh,A+".position",p,"pos",r),i(cl,A+".quaternion",p,"rot",r),i(Eh,A+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function RQ(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xh;case"vector":case"vector2":case"vector3":case"vector4":return Eh;case"color":return x4;case"quaternion":return cl;case"bool":case"boolean":return Pu;case"string":return Du}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function bQ(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=RQ(t.type);if(t.times===void 0){const n=[],i=[];v4(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Cu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class E4{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=u.length;d<p;d+=2){const A=u[d],g=u[d+1];if(A.global&&(A.lastIndex=0),A.test(h))return g}return null}}}const Nw=new E4;class Ti{constructor(e){this.manager=e!==void 0?e:Nw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ti.DEFAULT_MATERIAL_NAME="__DEFAULT";const Vo={};class BQ extends Error{constructor(e,n){super(e),this.response=n}}class _i extends Ti{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Cu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Vo[e]!==void 0){Vo[e].push({onLoad:n,onProgress:i,onError:r});return}Vo[e]=[],Vo[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Vo[e],d=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),A=p?parseInt(p):0,g=A!==0;let S=0;const E=new ReadableStream({start(m){x();function x(){d.read().then(({done:y,value:C})=>{if(y)m.close();else{S+=C.byteLength;const I=new ProgressEvent("progress",{lengthComputable:g,loaded:S,total:A});for(let M=0,w=h.length;M<w;M++){const L=h[M];L.onProgress&&L.onProgress(I)}m.enqueue(C),x()}})}}});return new Response(E)}else throw new BQ(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,A=new TextDecoder(p);return u.arrayBuffer().then(g=>A.decode(g))}}}).then(u=>{Cu.add(e,u);const h=Vo[e];delete Vo[e];for(let d=0,p=h.length;d<p;d++){const A=h[d];A.onLoad&&A.onLoad(u)}}).catch(u=>{const h=Vo[e];if(h===void 0)throw this.manager.itemError(e),u;delete Vo[e];for(let d=0,p=h.length;d<p;d++){const A=h[d];A.onError&&A.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class LQ extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new _i(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Sh.parse(e[i]);n.push(r)}return n}}class PQ extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new Su,l=new _i(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(d){l.load(e[d],function(p){const A=s.parse(p,!0);o[d]={width:A.width,height:A.height,format:A.format,mipmaps:A.mipmaps},u+=1,u===6&&(A.mipmapCount===1&&(a.minFilter=nn),a.image=o,a.format=A.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const A=p.mipmaps.length/p.mipmapCount;for(let g=0;g<A;g++){o[g]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+S]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=nn),a.format=p.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class $d extends Ti{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Yd("img");function l(){h(),Cu.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class DQ extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=new mp;s.colorSpace=It;const o=new $d(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class NQ extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new go,a=new _i(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Sn,o.wrapT=u.wrapT!==void 0?u.wrapT:Sn,o.magFilter=u.magFilter!==void 0?u.magFilter:nn,o.minFilter=u.minFilter!==void 0?u.minFilter:nn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=fs),u.mipmapCount===1&&(o.minFilter=nn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u))},i,r),o}}class Fw extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=new mn,o=new $d(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class El extends Qt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ee(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Uw extends El{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ee(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const e5=new He,c9=new D,h9=new D;class S4{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new oe(512,512),this.map=null,this.mapPass=null,this.matrix=new He,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Km,this._frameExtents=new oe(1,1),this._viewportCount=1,this._viewports=[new kt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;c9.setFromMatrixPosition(e.matrixWorld),n.position.copy(c9),h9.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(h9),n.updateMatrixWorld(),e5.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(e5),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e5)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class FQ extends S4{constructor(){super(new Nn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=gh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class _4 extends El{constructor(e,n,i=0,r=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.target=new Qt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new FQ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const f9=new He,Rf=new D,t5=new D;class UQ extends S4{constructor(){super(new Nn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new oe(4,2),this._viewportCount=6,this._viewports=[new kt(2,1,1,1),new kt(0,1,1,1),new kt(3,1,1,1),new kt(1,1,1,1),new kt(3,0,1,1),new kt(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Rf.setFromMatrixPosition(e.matrixWorld),i.position.copy(Rf),t5.copy(i.position),t5.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(t5),i.updateMatrixWorld(),r.makeTranslation(-Rf.x,-Rf.y,-Rf.z),f9.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(f9)}}class C4 extends El{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new UQ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class OQ extends S4{constructor(){super(new Lu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class T4 extends El{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.target=new Qt,this.shadow=new OQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ow extends El{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class kw extends El{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Qw{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new D)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class v2 extends El{constructor(e=new Qw,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class y2 extends Ti{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new _i(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=y2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ee().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ee().setHex(o.value);break;case"v2":r.uniforms[s].value=new oe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new D().fromArray(o.value);break;case"v4":r.uniforms[s].value=new kt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Bt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new He().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new oe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new oe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:Tw,SpriteMaterial:a4,RawShaderMaterial:cd,ShaderMaterial:Vt,PointsMaterial:t2,MeshPhysicalMaterial:Co,MeshStandardMaterial:Ep,MeshPhongMaterial:Iw,MeshToonMaterial:ww,MeshNormalMaterial:Sp,MeshLambertMaterial:Mw,MeshDepthMaterial:Jm,MeshDistanceMaterial:s4,MeshBasicMaterial:di,MeshMatcapMaterial:Rw,LineDashedMaterial:bw,LineBasicMaterial:Qi,Material:jn};return new n[e]}}class yo{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Gw extends xt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class zw extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new _i(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(A,g){if(n[g]!==void 0)return n[g];const E=A.interleavedBuffers[g],m=s(A,E.buffer),x=zc(E.type,m),y=new gp(x,E.stride);return y.uuid=E.uuid,n[g]=y,y}function s(A,g){if(i[g]!==void 0)return i[g];const E=A.arrayBuffers[g],m=new Uint32Array(E).buffer;return i[g]=m,m}const o=e.isInstancedBufferGeometry?new Gw:new xt,a=e.data.index;if(a!==void 0){const A=zc(a.type,a.array);o.setIndex(new jt(A,1))}const l=e.data.attributes;for(const A in l){const g=l[A];let S;if(g.isInterleavedBufferAttribute){const E=r(e.data,g.data);S=new ul(E,g.itemSize,g.offset,g.normalized)}else{const E=zc(g.type,g.array),m=g.isInstancedBufferAttribute?yh:jt;S=new m(E,g.itemSize,g.normalized)}g.name!==void 0&&(S.name=g.name),g.usage!==void 0&&S.setUsage(g.usage),g.updateRange!==void 0&&(S.updateRange.offset=g.updateRange.offset,S.updateRange.count=g.updateRange.count),o.setAttribute(A,S)}const u=e.data.morphAttributes;if(u)for(const A in u){const g=u[A],S=[];for(let E=0,m=g.length;E<m;E++){const x=g[E];let y;if(x.isInterleavedBufferAttribute){const C=r(e.data,x.data);y=new ul(C,x.itemSize,x.offset,x.normalized)}else{const C=zc(x.type,x.array);y=new jt(C,x.itemSize,x.normalized)}x.name!==void 0&&(y.name=x.name),S.push(y)}o.morphAttributes[A]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let A=0,g=d.length;A!==g;++A){const S=d[A];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const A=new D;p.center!==void 0&&A.fromArray(p.center),o.boundingSphere=new Or(A,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class kQ extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?yo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new _i(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?yo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new _i(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),n!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new pu().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new vp().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new zw;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in u9?a=u9[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new y2;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Sh.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(h)}else return l.data?{data:zc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new E4(n);s=new $d(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const A=[];for(let g=0,S=p.length;g<S;g++){const E=p[g],m=a(E);m!==null&&(m instanceof HTMLImageElement?A.push(m):A.push(new go(m.data,m.width,m.height)))}r[d.uuid]=new au(A)}else{const A=a(d.url);r[d.uuid]=new au(A)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:zc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new $d(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let d=0,p=u.length;d<p;d++){const A=u[d],g=await s(A);g!==null&&(g instanceof HTMLImageElement?h.push(g):h.push(new go(g.data,g.width,g.height)))}i[l.uuid]=new au(h)}else{const h=await s(l.url);i[l.uuid]=new au(h)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let h;Array.isArray(u)?(h=new mp,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new go:h=new mn,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,QQ)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],d9),h.wrapT=i(a.wrap[1],d9)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,p9)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,p9)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,n,i,r,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const A=[];for(let g=0,S=p.length;g<S;g++){const E=p[g];i[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),A.push(i[E])}return A}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":o=new rm,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ee(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $m(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Zm(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Nn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Lu(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Ow(e.color,e.intensity);break;case"DirectionalLight":o=new T4(e.color,e.intensity);break;case"PointLight":o=new C4(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new kw(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new _4(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Uw(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new v2().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new l4(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new Kt(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,A=e.instanceMatrix,g=e.instanceColor;o=new u4(h,d,p),o.instanceMatrix=new yh(new Float32Array(A.array),16),g!==void 0&&(o.instanceColor=new yh(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new pw;break;case"Line":o=new oa(a(e.geometry),l(e.material));break;case"LineLoop":o=new c4(a(e.geometry),l(e.material));break;case"LineSegments":o=new Hs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new n2(a(e.geometry),l(e.material));break;case"Sprite":o=new dw(l(e.material));break;case"Group":o=new ss;break;case"Bone":o=new e2;break;default:o=new Qt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let A=0;A<p.length;A++)o.add(this.parseObject(p[A],n,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let A=0;A<p.length;A++){const g=p[A];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let A=0;A<p.length;A++){const g=p[A],S=o.getObjectByProperty("uuid",g.object);S!==void 0&&o.addLevel(S,g.distance,g.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const QQ={UVMapping:Hm,CubeReflectionMapping:ol,CubeRefractionMapping:al,EquirectangularReflectionMapping:Ud,EquirectangularRefractionMapping:Od,CubeUVReflectionMapping:Ph},d9={RepeatWrapping:hs,ClampToEdgeWrapping:Sn,MirroredRepeatWrapping:Ah},p9={NearestFilter:vt,NearestMipmapNearestFilter:kd,NearestMipmapLinearFilter:Zc,LinearFilter:nn,LinearMipmapNearestFilter:Vm,LinearMipmapLinearFilter:fs};class Hw extends Ti{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Cu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Cu.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let D3;class I4{static getContext(){return D3===void 0&&(D3=new(window.AudioContext||window.webkitAudioContext)),D3}static setContext(e){D3=e}}class GQ extends Ti{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new _i(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);I4.getContext().decodeAudioData(u,function(d){n(d)},a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class zQ extends v2{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Ee().set(e),s=new Ee().set(n),o=new D(r.r,r.g,r.b),a=new D(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class HQ extends v2{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new Ee().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const A9=new He,m9=new He,kl=new He;class VQ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,kl.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(fu*n.fov*.5)/n.zoom;let a,l;m9.elements[12]=-r,A9.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,kl.elements[0]=2*n.near/(l-a),kl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(kl),a=-o*n.aspect-s,l=o*n.aspect-s,kl.elements[0]=2*n.near/(l-a),kl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(kl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(m9),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(A9)}}class x2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=g9(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=g9();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function g9(){return(typeof performance>"u"?Date:performance).now()}const Ql=new D,v9=new Si,WQ=new D,Gl=new D;class XQ extends Qt{constructor(){super(),this.type="AudioListener",this.context=I4.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new x2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ql,v9,WQ),Gl.set(0,0,-1).applyQuaternion(v9),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ql.x,r),n.positionY.linearRampToValueAtTime(Ql.y,r),n.positionZ.linearRampToValueAtTime(Ql.z,r),n.forwardX.linearRampToValueAtTime(Gl.x,r),n.forwardY.linearRampToValueAtTime(Gl.y,r),n.forwardZ.linearRampToValueAtTime(Gl.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Ql.x,Ql.y,Ql.z),n.setOrientation(Gl.x,Gl.y,Gl.z,i.x,i.y,i.z)}}class Vw extends Qt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const zl=new D,y9=new Si,qQ=new D,Hl=new D;class YQ extends Vw{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(zl,y9,qQ),Hl.set(0,0,1).applyQuaternion(y9);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(zl.x,i),n.positionY.linearRampToValueAtTime(zl.y,i),n.positionZ.linearRampToValueAtTime(zl.z,i),n.orientationX.linearRampToValueAtTime(Hl.x,i),n.orientationY.linearRampToValueAtTime(Hl.y,i),n.orientationZ.linearRampToValueAtTime(Hl.z,i)}else n.setPosition(zl.x,zl.y,zl.z),n.setOrientation(Hl.x,Hl.y,Hl.z)}}class KQ{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class Ww{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Si.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;Si.multiplyQuaternionsFlat(e,o,e,n,e,i),Si.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const w4="\\[\\]\\.:\\/",jQ=new RegExp("["+w4+"]","g"),M4="[^"+w4+"]",JQ="[^"+w4.replace("\\.","")+"]",ZQ=/((?:WC+[\/:])*)/.source.replace("WC",M4),$Q=/(WCOD+)?/.source.replace("WCOD",JQ),eG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",M4),tG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",M4),nG=new RegExp("^"+ZQ+$Q+eG+tG+"$"),iG=["material","materials","bones","map"];class rG{constructor(e,n,i){const r=i||zt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class zt{constructor(e,n,i){this.path=n,this.parsedPath=i||zt.parseTrackName(n),this.node=zt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new zt.Composite(e,n,i):new zt(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jQ,"")}static parseTrackName(e){const n=nG.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);iG.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=zt.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}zt.Composite=rG;zt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};zt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};zt.prototype.GetterByBindingType=[zt.prototype._getValue_direct,zt.prototype._getValue_array,zt.prototype._getValue_arrayElement,zt.prototype._getValue_toArray];zt.prototype.SetterByBindingTypeAndVersioning=[[zt.prototype._setValue_direct,zt.prototype._setValue_direct_setNeedsUpdate,zt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[zt.prototype._setValue_array,zt.prototype._setValue_array_setNeedsUpdate,zt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[zt.prototype._setValue_arrayElement,zt.prototype._setValue_arrayElement_setNeedsUpdate,zt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[zt.prototype._setValue_fromArray,zt.prototype._setValue_fromArray_setNeedsUpdate,zt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class sG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=br(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],A=p.uuid;let g=n[A];if(g===void 0){g=l++,n[A]=g,e.push(p);for(let S=0,E=o;S!==E;++S)s[S].push(new zt(p,i[S],r[S]))}else if(g<u){a=e[g];const S=--u,E=e[S];n[E.uuid]=g,e[g]=E,n[A]=S,e[S]=p;for(let m=0,x=o;m!==x;++m){const y=s[m],C=y[S];let I=y[g];y[g]=C,I===void 0&&(I=new zt(p,i[m],r[m])),y[S]=I}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=n[u];if(h!==void 0&&h>=s){const d=s++,p=e[d];n[p.uuid]=h,e[h]=p,n[u]=d,e[d]=l;for(let A=0,g=r;A!==g;++A){const S=i[A],E=S[d],m=S[h];S[h]=E,S[d]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,d=n[h];if(d!==void 0)if(delete n[h],d<s){const p=--s,A=e[p],g=--o,S=e[g];n[A.uuid]=d,e[d]=A,n[S.uuid]=p,e[p]=S,e.pop();for(let E=0,m=r;E!==m;++E){const x=i[E],y=x[p],C=x[g];x[d]=y,x[p]=C,x.pop()}}else{const p=--o,A=e[p];p>0&&(n[A.uuid]=d),e[d]=A,e.pop();for(let g=0,S=r;g!==S;++g){const E=i[g];E[d]=E[p],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(d);for(let p=h,A=l.length;p!==A;++p){const g=l[p];d[p]=new zt(g,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class Xw{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:su,endingEnd:su};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=OI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case K8:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case Xm:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===kI;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===UI){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=ou,r.endingEnd=ou):(e?r.endingStart=this.zeroSlopeAtStart?ou:su:r.endingStart=Wd,n?r.endingEnd=this.zeroSlopeAtEnd?ou:su:r.endingEnd=Wd)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const oG=new Float32Array(1);class aG extends ha{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let d=0;d!==s;++d){const p=r[d],A=p.name;let g=h[A];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,A));continue}const S=n&&n._propertyBindings[d].binding.parsedPath;g=new Ww(zt.create(i,A,S),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,A),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new y4(new Float32Array(2),new Float32Array(2),1,oG),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?Sh.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Xm),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new Xw(this,o,n,i);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?Sh.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)n[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,d=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,n[h]=d,n.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class R4{constructor(e){this.value=e}clone(){return new R4(this.value.clone===void 0?this.value:this.value.clone())}}let lG=0;class uG extends ha{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:lG++}),this.name="",this.usage=Xd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class cG extends gp{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class hG{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class b4{constructor(e,n,i=0,r=1/0){this.ray=new Dh(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new du,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return h6(e,this,i,n),i.sort(x9),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)h6(e[r],this,i,n);return i.sort(x9),i}}function x9(t,e){return t.distance-e.distance}function h6(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)h6(r[s],e,n,!0)}}class fG{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Dn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class dG{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const E9=new oe;class qw{constructor(e=new oe(1/0,1/0),n=new oe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=E9.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,E9).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const S9=new D,N3=new D;class pG{constructor(e=new D,n=new D){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){S9.subVectors(e,this.start),N3.subVectors(this.end,this.start);const i=N3.dot(N3);let s=N3.dot(S9)/i;return n&&(s=Dn(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _9=new D;class AG extends Qt{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new xt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Je(r,3));const s=new Qi({fog:!1,toneMapped:!1});this.cone=new Hs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),_9.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_9),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ba=new D,F3=new He,n5=new He;class mG extends Hs{constructor(e){const n=Yw(e),i=new xt,r=[],s=[],o=new Ee(0,0,1),a=new Ee(0,1,0);for(let u=0;u<n.length;u++){const h=n[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Je(r,3)),i.setAttribute("color",new Je(s,3));const l=new Qi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");n5.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(F3.multiplyMatrices(n5,a.matrixWorld),Ba.setFromMatrixPosition(F3),r.setXYZ(o,Ba.x,Ba.y,Ba.z),F3.multiplyMatrices(n5,a.parent.matrixWorld),Ba.setFromMatrixPosition(F3),r.setXYZ(o+1,Ba.x,Ba.y,Ba.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yw(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Yw(t.children[n]));return e}class gG extends Kt{constructor(e,n,i){const r=new kh(n,4,2),s=new di({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vG=new D,C9=new Ee,T9=new Ee;class yG extends Qt{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new xp(n);r.rotateY(Math.PI*.5),this.material=new di({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new jt(o,3)),this.add(new Kt(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");C9.copy(this.light.color),T9.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?C9:T9;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(vG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xG extends Hs{constructor(e=10,n=10,i=4473924,r=8947848){i=new Ee(i),r=new Ee(r);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let p=0,A=0,g=-a;p<=n;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const S=p===s?i:r;S.toArray(u,A),A+=3,S.toArray(u,A),A+=3,S.toArray(u,A),A+=3,S.toArray(u,A),A+=3}const h=new xt;h.setAttribute("position",new Je(l,3)),h.setAttribute("color",new Je(u,3));const d=new Qi({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class EG extends Hs{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new Ee(s),o=new Ee(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),A=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(A,0,g);const S=d&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let d=0;d<i;d++){const p=d&1?s:o,A=e-e/i*d;for(let g=0;g<r;g++){let S=g/r*(Math.PI*2),E=Math.sin(S)*A,m=Math.cos(S)*A;a.push(E,0,m),l.push(p.r,p.g,p.b),S=(g+1)/r*(Math.PI*2),E=Math.sin(S)*A,m=Math.cos(S)*A,a.push(E,0,m),l.push(p.r,p.g,p.b)}}const u=new xt;u.setAttribute("position",new Je(a,3)),u.setAttribute("color",new Je(l,3));const h=new Qi({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const I9=new D,U3=new D,w9=new D;class SG extends Qt{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new xt;r.setAttribute("position",new Je([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Qi({fog:!1,toneMapped:!1});this.lightPlane=new oa(r,s),this.add(this.lightPlane),r=new xt,r.setAttribute("position",new Je([0,0,0,0,0,1],3)),this.targetLine=new oa(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),I9.setFromMatrixPosition(this.light.matrixWorld),U3.setFromMatrixPosition(this.light.target.matrixWorld),w9.subVectors(U3,I9),this.lightPlane.lookAt(U3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(U3),this.targetLine.scale.z=w9.length()}}const O3=new D,Bn=new Ap;class _G extends Hs{constructor(e){const n=new xt,i=new Qi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,S){l(g),l(S)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}n.setAttribute("position",new Je(r,3)),n.setAttribute("color",new Je(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Ee(16755200),h=new Ee(16711680),d=new Ee(43775),p=new Ee(16777215),A=new Ee(3355443);this.setColors(u,h,d,p,A)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;Bn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gn("c",n,e,Bn,0,0,-1),Gn("t",n,e,Bn,0,0,1),Gn("n1",n,e,Bn,-i,-r,-1),Gn("n2",n,e,Bn,i,-r,-1),Gn("n3",n,e,Bn,-i,r,-1),Gn("n4",n,e,Bn,i,r,-1),Gn("f1",n,e,Bn,-i,-r,1),Gn("f2",n,e,Bn,i,-r,1),Gn("f3",n,e,Bn,-i,r,1),Gn("f4",n,e,Bn,i,r,1),Gn("u1",n,e,Bn,i*.7,r*1.1,-1),Gn("u2",n,e,Bn,-i*.7,r*1.1,-1),Gn("u3",n,e,Bn,0,r*2,-1),Gn("cf1",n,e,Bn,-i,0,1),Gn("cf2",n,e,Bn,i,0,1),Gn("cf3",n,e,Bn,0,-r,1),Gn("cf4",n,e,Bn,0,r,1),Gn("cn1",n,e,Bn,-i,0,-1),Gn("cn2",n,e,Bn,i,0,-1),Gn("cn3",n,e,Bn,0,-r,-1),Gn("cn4",n,e,Bn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gn(t,e,n,i,r,s,o){O3.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],O3.x,O3.y,O3.z)}}const k3=new As;class CG extends Hs{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new xt;s.setIndex(new jt(i,1)),s.setAttribute("position",new jt(r,3)),super(s,new Qi({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&k3.setFromObject(this.object),k3.isEmpty())return;const n=k3.min,i=k3.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TG extends Hs{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new xt;s.setIndex(new jt(i,1)),s.setAttribute("position",new Je(r,3)),super(s,new Qi({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class IG extends oa{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new xt;o.setAttribute("position",new Je(s,3)),o.computeBoundingSphere(),super(o,new Qi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new xt;l.setAttribute("position",new Je(a,3)),l.computeBoundingSphere(),this.add(new Kt(l,new di({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const M9=new D;let Q3,i5;class wG extends Qt{constructor(e=new D(0,0,1),n=new D(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Q3===void 0&&(Q3=new xt,Q3.setAttribute("position",new Je([0,0,0,0,1,0],3)),i5=new Oh(0,.5,1,5,1),i5.translate(0,-.5,0)),this.position.copy(n),this.line=new oa(Q3,new Qi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Kt(i5,new di({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{M9.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(M9,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class MG extends Hs{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new xt;r.setAttribute("position",new Je(n,3)),r.setAttribute("color",new Je(i,3));const s=new Qi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new Ee,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kw{constructor(){this.type="ShapePath",this.color=new Ee,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Kd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(m){const x=[];for(let y=0,C=m.length;y<C;y++){const I=m[y],M=new pu;M.curves=I.curves,x.push(M)}return x}function i(m,x){const y=x.length;let C=!1;for(let I=y-1,M=0;M<y;I=M++){let w=x[I],L=x[M],R=L.x-w.x,B=L.y-w.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(w=x[M],R=-R,L=x[I],B=-B),m.y<w.y||m.y>L.y)continue;if(m.y===w.y){if(m.x===w.x)return!0}else{const F=B*(m.x-w.x)-R*(m.y-w.y);if(F===0)return!0;if(F<0)continue;C=!C}}else{if(m.y!==w.y)continue;if(L.x<=m.x&&m.x<=w.x||w.x<=m.x&&m.x<=L.x)return!0}}return C}const r=vo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new pu,l.curves=a.curves,u.push(l),u;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],p=[];let A=[],g=0,S;p[g]=void 0,A[g]=[];for(let m=0,x=s.length;m<x;m++)a=s[m],S=a.getPoints(),o=r(S),o=e?!o:o,o?(!h&&p[g]&&g++,p[g]={s:new pu,p:S},p[g].s.curves=a.curves,h&&g++,A[g]=[]):A[g].push({h:a,p:S[0]});if(!p[0])return n(s);if(p.length>1){let m=!1,x=0;for(let y=0,C=p.length;y<C;y++)d[y]=[];for(let y=0,C=p.length;y<C;y++){const I=A[y];for(let M=0;M<I.length;M++){const w=I[M];let L=!0;for(let R=0;R<p.length;R++)i(w.p,p[R].p)&&(y!==R&&x++,L?(L=!1,d[R].push(w)):m=!0);L&&d[y].push(w)}}x>0&&m===!1&&(A=d)}let E;for(let m=0,x=p.length;m<x;m++){l=p[m].s,u.push(l),E=A[m];for(let y=0,C=E.length;y<C;y++)l.holes.push(E[y].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ca}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ca);const RG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:G8,AddEquation:Cr,AddOperation:wI,AdditiveAnimationBlendMode:K8,AdditiveBlending:Pd,AlphaFormat:DI,AlwaysCompare:JI,AlwaysDepth:xI,AlwaysStencilFunc:HI,AmbientLight:Ow,AmbientLightProbe:HQ,AnimationAction:Xw,AnimationClip:Sh,AnimationLoader:LQ,AnimationMixer:aG,AnimationObjectGroup:sG,AnimationUtils:MQ,ArcCurve:Aw,ArrayCamera:cw,ArrowHelper:wG,Audio:Vw,AudioAnalyser:KQ,AudioContext:I4,AudioListener:XQ,AudioLoader:GQ,AxesHelper:MG,BackSide:Ui,BasicDepthPacking:GI,BasicShadowMap:cI,Bone:e2,BooleanKeyframeTrack:Pu,Box2:qw,Box3:As,Box3Helper:TG,BoxGeometry:yl,BoxHelper:CG,BufferAttribute:jt,BufferGeometry:xt,BufferGeometryLoader:zw,ByteType:LI,Cache:Cu,Camera:Ap,CameraHelper:_G,CanvasTexture:Zk,CapsuleGeometry:s2,CatmullRomCurve3:mw,CineonToneMapping:bI,CircleGeometry:o2,ClampToEdgeWrapping:Sn,Clock:x2,Color:Ee,ColorKeyframeTrack:x4,ColorManagement:jr,CompressedArrayTexture:Jk,CompressedTexture:Su,CompressedTextureLoader:PQ,ConeGeometry:a2,CubeCamera:nw,CubeReflectionMapping:ol,CubeRefractionMapping:al,CubeTexture:mp,CubeTextureLoader:DQ,CubeUVReflectionMapping:Ph,CubicBezierCurve:f4,CubicBezierCurve3:gw,CubicInterpolant:Lw,CullFaceBack:Dv,CullFaceFront:uI,CullFaceFrontBack:jP,CullFaceNone:lI,Curve:Vs,CurvePath:yw,CustomBlending:Dd,CustomToneMapping:BI,CylinderGeometry:Oh,Cylindrical:dG,Data3DTexture:n4,DataArrayTexture:qm,DataTexture:go,DataTextureLoader:NQ,DataUtils:rN,DecrementStencilOp:sD,DecrementWrapStencilOp:aD,DefaultLoadingManager:Nw,DepthFormat:el,DepthStencilFormat:ll,DepthTexture:Uh,DirectionalLight:T4,DirectionalLightHelper:SG,DiscreteInterpolant:Pw,DisplayP3ColorSpace:$8,DodecahedronGeometry:l2,DoubleSide:Ls,DstAlphaFactor:Gm,DstColorFactor:zm,DynamicCopyUsage:ED,DynamicDrawUsage:yA,DynamicReadUsage:vD,EdgesGeometry:xw,EllipseCurve:i2,EqualCompare:XI,EqualDepth:SI,EqualStencilFunc:hD,EquirectangularReflectionMapping:Ud,EquirectangularRefractionMapping:Od,Euler:pp,EventDispatcher:ha,ExtrudeGeometry:c2,FileLoader:_i,Float16BufferAttribute:cN,Float32BufferAttribute:Je,Float64BufferAttribute:hN,FloatType:Yi,Fog:$m,FogExp2:Zm,FramebufferTexture:jk,FrontSide:_o,Frustum:Km,GLBufferAttribute:hG,GLSL1:_D,GLSL3:i6,GreaterCompare:YI,GreaterDepth:CI,GreaterEqualCompare:jI,GreaterEqualDepth:_I,GreaterEqualStencilFunc:AD,GreaterStencilFunc:dD,GridHelper:xG,Group:ss,HalfFloatType:Hn,HemisphereLight:Uw,HemisphereLightHelper:yG,HemisphereLightProbe:zQ,IcosahedronGeometry:h2,ImageBitmapLoader:Hw,ImageLoader:$d,ImageUtils:t4,IncrementStencilOp:rD,IncrementWrapStencilOp:oD,InstancedBufferAttribute:yh,InstancedBufferGeometry:Gw,InstancedInterleavedBuffer:cG,InstancedMesh:u4,Int16BufferAttribute:lN,Int32BufferAttribute:uN,Int8BufferAttribute:sN,IntType:z8,InterleavedBuffer:gp,InterleavedBufferAttribute:ul,Interpolant:Qh,InterpolateDiscrete:mh,InterpolateLinear:Eu,InterpolateSmooth:gA,InvertStencilOp:lD,KeepStencilOp:vA,KeyframeTrack:Ws,LOD:pw,LatheGeometry:yp,Layers:du,LessCompare:WI,LessDepth:EI,LessEqualCompare:qI,LessEqualDepth:em,LessEqualStencilFunc:fD,LessStencilFunc:cD,Light:El,LightProbe:v2,Line:oa,Line3:pG,LineBasicMaterial:Qi,LineCurve:r2,LineCurve3:vw,LineDashedMaterial:bw,LineLoop:c4,LineSegments:Hs,LinearEncoding:J8,LinearFilter:nn,LinearInterpolant:y4,LinearMipMapLinearFilter:tD,LinearMipMapNearestFilter:eD,LinearMipmapLinearFilter:fs,LinearMipmapNearestFilter:Vm,LinearSRGBColorSpace:Os,LinearToneMapping:MI,Loader:Ti,LoaderUtils:yo,LoadingManager:E4,LoopOnce:UI,LoopPingPong:kI,LoopRepeat:OI,LuminanceAlphaFormat:NI,LuminanceFormat:W8,MOUSE:YP,Material:jn,MaterialLoader:y2,MathUtils:nh,Matrix3:Bt,Matrix4:He,MaxEquation:Ov,Mesh:Kt,MeshBasicMaterial:di,MeshDepthMaterial:Jm,MeshDistanceMaterial:s4,MeshLambertMaterial:Mw,MeshMatcapMaterial:Rw,MeshNormalMaterial:Sp,MeshPhongMaterial:Iw,MeshPhysicalMaterial:Co,MeshStandardMaterial:Ep,MeshToonMaterial:ww,MinEquation:Uv,MirroredRepeatWrapping:Ah,MixOperation:II,MultiplyBlending:Fv,MultiplyOperation:dp,NearestFilter:vt,NearestMipMapLinearFilter:$P,NearestMipMapNearestFilter:ZP,NearestMipmapLinearFilter:Zc,NearestMipmapNearestFilter:kd,NeverCompare:VI,NeverDepth:yI,NeverStencilFunc:uD,NoBlending:Nt,NoColorSpace:nl,NoToneMapping:Rr,NormalAnimationBlendMode:Xm,NormalBlending:mo,NotEqualCompare:KI,NotEqualDepth:TI,NotEqualStencilFunc:pD,NumberKeyframeTrack:xh,Object3D:Qt,ObjectLoader:kQ,ObjectSpaceNormalMap:zI,OctahedronGeometry:xp,OneFactor:dI,OneMinusDstAlphaFactor:mI,OneMinusDstColorFactor:gI,OneMinusSrcAlphaFactor:Fd,OneMinusSrcColorFactor:AI,OrthographicCamera:Lu,PCFShadowMap:Qm,PCFSoftShadowMap:sd,PMREMGenerator:s6,Path:Kd,PerspectiveCamera:Nn,Plane:ns,PlaneGeometry:Nh,PlaneHelper:IG,PointLight:C4,PointLightHelper:gG,Points:n2,PointsMaterial:t2,PolarGridHelper:EG,PolyhedronGeometry:xl,PositionalAudio:YQ,PropertyBinding:zt,PropertyMixer:Ww,QuadraticBezierCurve:d4,QuadraticBezierCurve3:p4,Quaternion:Si,QuaternionKeyframeTrack:cl,QuaternionLinearInterpolant:Dw,RED_GREEN_RGTC2_Format:t6,RED_RGTC1_Format:FI,REVISION:ca,RGBADepthPacking:Z8,RGBAFormat:Un,RGBAIntegerFormat:Y8,RGBA_ASTC_10x10_Format:Jv,RGBA_ASTC_10x5_Format:Yv,RGBA_ASTC_10x6_Format:Kv,RGBA_ASTC_10x8_Format:jv,RGBA_ASTC_12x10_Format:Zv,RGBA_ASTC_12x12_Format:$v,RGBA_ASTC_4x4_Format:Vd,RGBA_ASTC_5x4_Format:Gv,RGBA_ASTC_5x5_Format:zv,RGBA_ASTC_6x5_Format:Hv,RGBA_ASTC_6x6_Format:Vv,RGBA_ASTC_8x5_Format:Wv,RGBA_ASTC_8x6_Format:Xv,RGBA_ASTC_8x8_Format:qv,RGBA_BPTC_Format:th,RGBA_ETC2_EAC_Format:Hd,RGBA_PVRTC_2BPPV1_Format:Qv,RGBA_PVRTC_4BPPV1_Format:Gd,RGBA_S3TC_DXT1_Format:AA,RGBA_S3TC_DXT3_Format:mA,RGBA_S3TC_DXT5_Format:eh,RGB_ETC1_Format:Wm,RGB_ETC2_Format:zd,RGB_PVRTC_2BPPV1_Format:kv,RGB_PVRTC_4BPPV1_Format:Qd,RGB_S3TC_DXT1_Format:$c,RGFormat:Gc,RGIntegerFormat:q8,RawShaderMaterial:cd,Ray:Dh,Raycaster:b4,RectAreaLight:kw,RedFormat:ru,RedIntegerFormat:X8,ReinhardToneMapping:RI,RepeatWrapping:hs,ReplaceStencilOp:iD,ReverseSubtractEquation:fI,RingGeometry:f2,SIGNED_RED_GREEN_RGTC2_Format:n6,SIGNED_RED_RGTC1_Format:e6,SRGBColorSpace:It,Scene:rm,ShaderChunk:Rt,ShaderLib:Bs,ShaderMaterial:Vt,ShadowMaterial:Tw,Shape:pu,ShapeGeometry:d2,ShapePath:Kw,ShapeUtils:vo,ShortType:PI,Skeleton:vp,SkeletonHelper:mG,SkinnedMesh:l4,Source:au,Sphere:Or,SphereGeometry:kh,Spherical:fG,SphericalHarmonics3:Qw,SplineCurve:A4,SpotLight:_4,SpotLightHelper:AG,Sprite:dw,SpriteMaterial:a4,SrcAlphaFactor:Nd,SrcAlphaSaturateFactor:vI,SrcColorFactor:pI,StaticCopyUsage:xD,StaticDrawUsage:Xd,StaticReadUsage:gD,StereoCamera:VQ,StreamCopyUsage:SD,StreamDrawUsage:mD,StreamReadUsage:yD,StringKeyframeTrack:Du,SubtractEquation:hI,SubtractiveBlending:Nv,TOUCH:KP,TangentSpaceNormalMap:vl,TetrahedronGeometry:p2,Texture:mn,TextureLoader:Fw,TorusGeometry:A2,TorusKnotGeometry:m2,Triangle:sr,TriangleFanDrawMode:tm,TriangleStripDrawMode:j8,TrianglesDrawMode:QI,TubeGeometry:g2,TwoPassDoubleSide:JP,UVMapping:Hm,Uint16BufferAttribute:i4,Uint32BufferAttribute:Ym,Uint8BufferAttribute:oN,Uint8ClampedBufferAttribute:aN,Uniform:R4,UniformsGroup:uG,UniformsLib:Pe,UniformsUtils:_n,UnsignedByteType:ni,UnsignedInt248Type:ea,UnsignedIntType:Jo,UnsignedShort4444Type:H8,UnsignedShort5551Type:V8,UnsignedShortType:Bu,VSMShadowMap:Ms,Vector2:oe,Vector3:D,Vector4:kt,VectorKeyframeTrack:Eh,VideoTexture:Kk,WebGL1Renderer:hw,WebGL3DRenderTarget:qD,WebGLArrayRenderTarget:XD,WebGLCoordinateSystem:co,WebGLCubeRenderTarget:iw,WebGLMultipleRenderTargets:YD,WebGLRenderTarget:rn,WebGLRenderer:o4,WebGLUtils:uw,WebGPUCoordinateSystem:qd,WireframeGeometry:Cw,WrapAroundEnding:Wd,ZeroCurvatureEnding:su,ZeroFactor:ph,ZeroSlopeEnding:ou,ZeroStencilOp:nD,_SRGBAFormat:nm,sRGBEncoding:tl},Symbol.toStringTag,{value:"Module"}));var jw={exports:{}},Nu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Nu.ConcurrentRoot=1;Nu.ContinuousEventPriority=4;Nu.DefaultEventPriority=16;Nu.DiscreteEventPriority=1;Nu.IdleEventPriority=536870912;Nu.LegacyRoot=0;jw.exports=Nu;var Wc=jw.exports;function bG(t){let e;const n=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),n.forEach(A=>A(e,p))}},r=()=>e,s=(u,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function A(){const g=h(e);if(!d(p,g)){const S=p;u(p=g,S)}}return n.add(A),()=>n.delete(A)},l={setState:i,getState:r,subscribe:(u,h,d)=>h||d?s(u,h,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(i,r,l),l}const BG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),R9=BG?le.useEffect:le.useLayoutEffect;function E2(t){const e=typeof t=="function"?bG(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=le.useReducer(E=>E+1,0),o=e.getState(),a=le.useRef(o),l=le.useRef(i),u=le.useRef(r),h=le.useRef(!1),d=le.useRef();d.current===void 0&&(d.current=i(o));let p,A=!1;(a.current!==o||l.current!==i||u.current!==r||h.current)&&(p=i(o),A=!r(d.current,p)),R9(()=>{A&&(d.current=p),a.current=o,l.current=i,u.current=r,h.current=!1});const g=le.useRef(o);R9(()=>{const E=()=>{try{const x=e.getState(),y=l.current(x);u.current(d.current,y)||(a.current=x,d.current=y,s())}catch{h.current=!0,s()}},m=e.subscribe(E);return e.getState()!==g.current&&E(),m},[]);const S=A?p:d.current;return le.useDebugValue(S),S};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var Jw={exports:{}},r5={exports:{}},s5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b9;function LG(){return b9||(b9=1,function(t){function e(P,Q){var U=P.length;P.push(Q);e:for(;0<U;){var O=U-1>>>1,V=P[O];if(0<r(V,Q))P[O]=Q,P[U]=V,U=O;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var Q=P[0],U=P.pop();if(U!==Q){P[0]=U;e:for(var O=0,V=P.length,me=V>>>1;O<me;){var re=2*(O+1)-1,xe=P[re],ge=re+1,Ie=P[ge];if(0>r(xe,U))ge<V&&0>r(Ie,xe)?(P[O]=Ie,P[ge]=U,O=ge):(P[O]=xe,P[re]=U,O=re);else if(ge<V&&0>r(Ie,U))P[O]=Ie,P[ge]=U,O=ge;else break e}}return Q}function r(P,Q){var U=P.sortIndex-Q.sortIndex;return U!==0?U:P.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,A=!1,g=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var Q=n(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=P)i(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function C(P){if(S=!1,y(P),!g)if(n(l)!==null)g=!0,$(I);else{var Q=n(u);Q!==null&&j(C,Q.startTime-P)}}function I(P,Q){g=!1,S&&(S=!1,m(L),L=-1),A=!0;var U=p;try{for(y(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||P&&!F());){var O=d.callback;if(typeof O=="function"){d.callback=null,p=d.priorityLevel;var V=O(d.expirationTime<=Q);Q=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&i(l),y(Q)}else i(l);d=n(l)}if(d!==null)var me=!0;else{var re=n(u);re!==null&&j(C,re.startTime-Q),me=!1}return me}finally{d=null,p=U,A=!1}}var M=!1,w=null,L=-1,R=5,B=-1;function F(){return!(t.unstable_now()-B<R)}function X(){if(w!==null){var P=t.unstable_now();B=P;var Q=!0;try{Q=w(!0,P)}finally{Q?G():(M=!1,w=null)}}else M=!1}var G;if(typeof x=="function")G=function(){x(X)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Y=q.port2;q.port1.onmessage=X,G=function(){Y.postMessage(null)}}else G=function(){E(X,0)};function $(P){w=P,M||(M=!0,G())}function j(P,Q){L=E(function(){P(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||A||(g=!0,$(I))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var U=p;p=Q;try{return P()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,Q){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=p;p=P;try{return Q()}finally{p=U}},t.unstable_scheduleCallback=function(P,Q,U){var O=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?O+U:O):U=O,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,P={id:h++,callback:Q,priorityLevel:P,startTime:U,expirationTime:V,sortIndex:-1},U>O?(P.sortIndex=U,e(u,P),n(l)===null&&P===n(u)&&(S?(m(L),L=-1):S=!0,j(C,U-O))):(P.sortIndex=V,e(l,P),g||A||(g=!0,$(I))),P},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(P){var Q=p;return function(){var U=p;p=Q;try{return P.apply(this,arguments)}finally{p=U}}}}(s5)),s5}var B9;function PG(){return B9||(B9=1,r5.exports=LG()),r5.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DG=function(e){var n={},i=le,r=PG(),s=Object.assign;function o(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),g=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),I=Symbol.iterator;function M(c){return c===null||typeof c!="object"?null:(c=I&&c[I]||c["@@iterator"],typeof c=="function"?c:null)}function w(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case E:return"Suspense";case m:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case g:return(c.displayName||"Context")+".Consumer";case A:return(c._context.displayName||"Context")+".Provider";case S:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case x:return f=c.displayName||null,f!==null?f:w(c.type)||"Memo";case y:f=c._payload,c=c._init;try{return w(c(f))}catch{}}return null}function L(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function R(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function B(c){if(R(c)!==c)throw Error(o(188))}function F(c){var f=c.alternate;if(!f){if(f=R(c),f===null)throw Error(o(188));return f!==c?null:c}for(var v=c,_=f;;){var T=v.return;if(T===null)break;var b=T.alternate;if(b===null){if(_=T.return,_!==null){v=_;continue}break}if(T.child===b.child){for(b=T.child;b;){if(b===v)return B(T),c;if(b===_)return B(T),f;b=b.sibling}throw Error(o(188))}if(v.return!==_.return)v=T,_=b;else{for(var z=!1,J=T.child;J;){if(J===v){z=!0,v=T,_=b;break}if(J===_){z=!0,_=T,v=b;break}J=J.sibling}if(!z){for(J=b.child;J;){if(J===v){z=!0,v=b,_=T;break}if(J===_){z=!0,_=b,v=T;break}J=J.sibling}if(!z)throw Error(o(189))}}if(v.alternate!==_)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?c:f}function X(c){return c=F(c),c!==null?G(c):null}function G(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=G(c);if(f!==null)return f;c=c.sibling}return null}function q(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=q(c);if(f!==null)return f}c=c.sibling}return null}var Y=Array.isArray,$=e.getPublicInstance,j=e.getRootHostContext,P=e.getChildHostContext,Q=e.prepareForCommit,U=e.resetAfterCommit,O=e.createInstance,V=e.appendInitialChild,me=e.finalizeInitialChildren,re=e.prepareUpdate,xe=e.shouldSetTextContent,ge=e.createTextInstance,Ie=e.scheduleTimeout,Ne=e.cancelTimeout,$e=e.noTimeout,ct=e.isPrimaryRenderer,De=e.supportsMutation,W=e.supportsPersistence,ve=e.supportsHydration,Ae=e.getInstanceFromNode,Se=e.preparePortalMount,ye=e.getCurrentEventPriority,Ze=e.detachDeletedInstance,Qe=e.supportsMicrotasks,Ge=e.scheduleMicrotask,st=e.supportsTestSelectors,Mt=e.findFiberRoot,$t=e.getBoundingRect,H=e.getTextContent,N=e.isHiddenSubtree,ue=e.matchAccessibilityRole,_e=e.setFocusIfFocusable,Ce=e.setupIntersectionObserver,Le=e.appendChild,Xe=e.appendChildToContainer,be=e.commitTextUpdate,he=e.commitMount,et=e.commitUpdate,rt=e.insertBefore,ot=e.insertInContainerBefore,qe=e.removeChild,Ye=e.removeChildFromContainer,Tt=e.resetTextContent,Gt=e.hideInstance,K=e.hideTextInstance,Be=e.unhideInstance,ie=e.unhideTextInstance,we=e.clearContainer,Oe=e.cloneInstance,Ut=e.createContainerChildSet,sn=e.appendChildToContainerChildSet,Vn=e.finalizeContainerChildren,dr=e.replaceContainerChildren,hn=e.cloneHiddenInstance,pr=e.cloneHiddenTextInstance,mi=e.canHydrateInstance,Qp=e.canHydrateTextInstance,Gp=e.canHydrateSuspenseInstance,zp=e.isSuspenseInstancePending,ma=e.isSuspenseInstanceFallback,Hp=e.registerSuspenseInstanceRetry,Js=e.getNextHydratableSibling,Vp=e.getFirstHydratableChild,X2=e.getFirstHydratableChildWithinContainer,q2=e.getFirstHydratableChildWithinSuspenseInstance,Y2=e.hydrateInstance,k=e.hydrateTextInstance,ne=e.hydrateSuspenseInstance,de=e.getNextHydratableInstanceAfterSuspenseInstance,ee=e.commitHydratedContainer,pe=e.commitHydratedSuspenseInstance,Ve=e.clearSuspenseBoundary,at=e.clearSuspenseBoundaryFromContainer,dt=e.shouldDeleteUnhydratedTailInstances,At=e.didNotMatchHydratedContainerTextInstance,Pt=e.didNotMatchHydratedTextInstance,mt;function gt(c){if(mt===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);mt=f&&f[1]||""}return`
`+mt+c}var on=!1;function fn(c,f){if(!c||on)return"";on=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Me){var _=Me}Reflect.construct(c,[],f)}else{try{f.call()}catch(Me){_=Me}c.call(f.prototype)}else{try{throw Error()}catch(Me){_=Me}c()}}catch(Me){if(Me&&_&&typeof Me.stack=="string"){for(var T=Me.stack.split(`
`),b=_.stack.split(`
`),z=T.length-1,J=b.length-1;1<=z&&0<=J&&T[z]!==b[J];)J--;for(;1<=z&&0<=J;z--,J--)if(T[z]!==b[J]){if(z!==1||J!==1)do if(z--,J--,0>J||T[z]!==b[J]){var ce=`
`+T[z].replace(" at new "," at ");return c.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",c.displayName)),ce}while(1<=z&&0<=J);break}}}finally{on=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?gt(c):""}var Ar=Object.prototype.hasOwnProperty,mr=[],en=-1;function St(c){return{current:c}}function Jt(c){0>en||(c.current=mr[en],mr[en]=null,en--)}function yt(c,f){en++,mr[en]=c.current,c.current=f}var Ii={},Jn=St(Ii),Wn=St(!1),vs=Ii;function Mn(c,f){var v=c.type.contextTypes;if(!v)return Ii;var _=c.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===f)return _.__reactInternalMemoizedMaskedChildContext;var T={},b;for(b in v)T[b]=f[b];return _&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=T),T}function Rn(c){return c=c.childContextTypes,c!=null}function ga(){Jt(Wn),Jt(Jn)}function wi(c,f,v){if(Jn.current!==Ii)throw Error(o(168));yt(Jn,f),yt(Wn,v)}function ku(c,f,v){var _=c.stateNode;if(f=f.childContextTypes,typeof _.getChildContext!="function")return v;_=_.getChildContext();for(var T in _)if(!(T in f))throw Error(o(108,L(c)||"Unknown",T));return s({},v,_)}function Qu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ii,vs=Jn.current,yt(Jn,c),yt(Wn,Wn.current),!0}function Wh(c,f,v){var _=c.stateNode;if(!_)throw Error(o(169));v?(c=ku(c,f,vs),_.__reactInternalMemoizedMergedChildContext=c,Jt(Wn),Jt(Jn),yt(Jn,c)):Jt(Wn),yt(Wn,v)}var ys=Math.clz32?Math.clz32:Lb,bb=Math.log,Bb=Math.LN2;function Lb(c){return c>>>=0,c===0?32:31-(bb(c)/Bb|0)|0}var Wp=64,Xp=4194304;function Xh(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function qp(c,f){var v=c.pendingLanes;if(v===0)return 0;var _=0,T=c.suspendedLanes,b=c.pingedLanes,z=v&268435455;if(z!==0){var J=z&~T;J!==0?_=Xh(J):(b&=z,b!==0&&(_=Xh(b)))}else z=v&~T,z!==0?_=Xh(z):b!==0&&(_=Xh(b));if(_===0)return 0;if(f!==0&&f!==_&&!(f&T)&&(T=_&-_,b=f&-f,T>=b||T===16&&(b&4194240)!==0))return f;if(_&4&&(_|=v&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=_;0<f;)v=31-ys(f),T=1<<v,_|=c[v],f&=~T;return _}function Pb(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Db(c,f){for(var v=c.suspendedLanes,_=c.pingedLanes,T=c.expirationTimes,b=c.pendingLanes;0<b;){var z=31-ys(b),J=1<<z,ce=T[z];ce===-1?(!(J&v)||J&_)&&(T[z]=Pb(J,f)):ce<=f&&(c.expiredLanes|=J),b&=~J}}function K2(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function j2(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function qh(c,f,v){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-ys(f),c[f]=v}function Nb(c,f){var v=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var _=c.eventTimes;for(c=c.expirationTimes;0<v;){var T=31-ys(v),b=1<<T;f[T]=0,_[T]=-1,c[T]=-1,v&=~b}}function J2(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var _=31-ys(v),T=1<<_;T&f|c[_]&f&&(c[_]|=f),v&=~T}}var Xt=0;function gy(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Z2=r.unstable_scheduleCallback,vy=r.unstable_cancelCallback,Fb=r.unstable_shouldYield,Ub=r.unstable_requestPaint,li=r.unstable_now,$2=r.unstable_ImmediatePriority,Ob=r.unstable_UserBlockingPriority,eg=r.unstable_NormalPriority,kb=r.unstable_IdlePriority,Yp=null,Zs=null;function Qb(c){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(Yp,c,void 0,(c.current.flags&128)===128)}catch{}}function Gb(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var $s=typeof Object.is=="function"?Object.is:Gb,Lo=null,Kp=!1,tg=!1;function yy(c){Lo===null?Lo=[c]:Lo.push(c)}function zb(c){Kp=!0,yy(c)}function eo(){if(!tg&&Lo!==null){tg=!0;var c=0,f=Xt;try{var v=Lo;for(Xt=1;c<v.length;c++){var _=v[c];do _=_(!0);while(_!==null)}Lo=null,Kp=!1}catch(T){throw Lo!==null&&(Lo=Lo.slice(c+1)),Z2($2,eo),T}finally{Xt=f,tg=!1}}return null}var Hb=a.ReactCurrentBatchConfig;function jp(c,f){if($s(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),_=Object.keys(f);if(v.length!==_.length)return!1;for(_=0;_<v.length;_++){var T=v[_];if(!Ar.call(f,T)||!$s(c[T],f[T]))return!1}return!0}function Vb(c){switch(c.tag){case 5:return gt(c.type);case 16:return gt("Lazy");case 13:return gt("Suspense");case 19:return gt("SuspenseList");case 0:case 2:case 15:return c=fn(c.type,!1),c;case 11:return c=fn(c.type.render,!1),c;case 1:return c=fn(c.type,!0),c;default:return""}}function xs(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var v in c)f[v]===void 0&&(f[v]=c[v]);return f}return f}var Jp=St(null),Zp=null,Gu=null,ng=null;function ig(){ng=Gu=Zp=null}function xy(c,f,v){ct?(yt(Jp,f._currentValue),f._currentValue=v):(yt(Jp,f._currentValue2),f._currentValue2=v)}function rg(c){var f=Jp.current;Jt(Jp),ct?c._currentValue=f:c._currentValue2=f}function sg(c,f,v){for(;c!==null;){var _=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),c===v)break;c=c.return}}function zu(c,f){Zp=c,ng=Gu=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(yr=!0),c.firstContext=null)}function Gr(c){var f=ct?c._currentValue:c._currentValue2;if(ng!==c)if(c={context:c,memoizedValue:f,next:null},Gu===null){if(Zp===null)throw Error(o(308));Gu=c,Zp.dependencies={lanes:0,firstContext:c}}else Gu=Gu.next=c;return f}var to=null,va=!1;function og(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ey(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Po(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function ya(c,f){var v=c.updateQueue;v!==null&&(v=v.shared,Xn!==null&&c.mode&1&&!(Dt&2)?(c=v.interleaved,c===null?(f.next=f,to===null?to=[v]:to.push(v)):(f.next=c.next,c.next=f),v.interleaved=f):(c=v.pending,c===null?f.next=f:(f.next=c.next,c.next=f),v.pending=f))}function $p(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var _=f.lanes;_&=c.pendingLanes,v|=_,f.lanes=v,J2(c,v)}}function Sy(c,f){var v=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,v===_)){var T=null,b=null;if(v=v.firstBaseUpdate,v!==null){do{var z={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};b===null?T=b=z:b=b.next=z,v=v.next}while(v!==null);b===null?T=b=f:b=b.next=f}else T=b=f;v={baseState:_.baseState,firstBaseUpdate:T,lastBaseUpdate:b,shared:_.shared,effects:_.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}function e0(c,f,v,_){var T=c.updateQueue;va=!1;var b=T.firstBaseUpdate,z=T.lastBaseUpdate,J=T.shared.pending;if(J!==null){T.shared.pending=null;var ce=J,Me=ce.next;ce.next=null,z===null?b=Me:z.next=Me,z=ce;var We=c.alternate;We!==null&&(We=We.updateQueue,J=We.lastBaseUpdate,J!==z&&(J===null?We.firstBaseUpdate=Me:J.next=Me,We.lastBaseUpdate=ce))}if(b!==null){var _t=T.baseState;z=0,We=Me=ce=null,J=b;do{var lt=J.lane,tn=J.eventTime;if((_&lt)===lt){We!==null&&(We=We.next={eventTime:tn,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var nt=c,Bi=J;switch(lt=f,tn=v,Bi.tag){case 1:if(nt=Bi.payload,typeof nt=="function"){_t=nt.call(tn,_t,lt);break e}_t=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=Bi.payload,lt=typeof nt=="function"?nt.call(tn,_t,lt):nt,lt==null)break e;_t=s({},_t,lt);break e;case 2:va=!0}}J.callback!==null&&J.lane!==0&&(c.flags|=64,lt=T.effects,lt===null?T.effects=[J]:lt.push(J))}else tn={eventTime:tn,lane:lt,tag:J.tag,payload:J.payload,callback:J.callback,next:null},We===null?(Me=We=tn,ce=_t):We=We.next=tn,z|=lt;if(J=J.next,J===null){if(J=T.shared.pending,J===null)break;lt=J,J=lt.next,lt.next=null,T.lastBaseUpdate=lt,T.shared.pending=null}}while(1);if(We===null&&(ce=_t),T.baseState=ce,T.firstBaseUpdate=Me,T.lastBaseUpdate=We,f=T.shared.interleaved,f!==null){T=f;do z|=T.lane,T=T.next;while(T!==f)}else b===null&&(T.shared.lanes=0);Ju|=z,c.lanes=z,c.memoizedState=_t}}function _y(c,f,v){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var _=c[f],T=_.callback;if(T!==null){if(_.callback=null,_=v,typeof T!="function")throw Error(o(191,T));T.call(_)}}}var Cy=new i.Component().refs;function ag(c,f,v,_){f=c.memoizedState,v=v(_,f),v=v==null?f:s({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var t0={isMounted:function(c){return(c=c._reactInternals)?R(c)===c:!1},enqueueSetState:function(c,f,v){c=c._reactInternals;var _=zi(),T=Sa(c),b=Po(_,T);b.payload=f,v!=null&&(b.callback=v),ya(c,b),f=Xr(c,T,_),f!==null&&$p(f,c,T)},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var _=zi(),T=Sa(c),b=Po(_,T);b.tag=1,b.payload=f,v!=null&&(b.callback=v),ya(c,b),f=Xr(c,T,_),f!==null&&$p(f,c,T)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=zi(),_=Sa(c),T=Po(v,_);T.tag=2,f!=null&&(T.callback=f),ya(c,T),f=Xr(c,_,v),f!==null&&$p(f,c,_)}};function Ty(c,f,v,_,T,b,z){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,b,z):f.prototype&&f.prototype.isPureReactComponent?!jp(v,_)||!jp(T,b):!0}function Iy(c,f,v){var _=!1,T=Ii,b=f.contextType;return typeof b=="object"&&b!==null?b=Gr(b):(T=Rn(f)?vs:Jn.current,_=f.contextTypes,b=(_=_!=null)?Mn(c,T):Ii),f=new f(v,b),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=t0,c.stateNode=f,f._reactInternals=c,_&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=b),f}function wy(c,f,v,_){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,_),f.state!==c&&t0.enqueueReplaceState(f,f.state,null)}function lg(c,f,v,_){var T=c.stateNode;T.props=v,T.state=c.memoizedState,T.refs=Cy,og(c);var b=f.contextType;typeof b=="object"&&b!==null?T.context=Gr(b):(b=Rn(f)?vs:Jn.current,T.context=Mn(c,b)),T.state=c.memoizedState,b=f.getDerivedStateFromProps,typeof b=="function"&&(ag(c,f,b,v),T.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(f=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),f!==T.state&&t0.enqueueReplaceState(T,T.state,null),e0(c,v,T,_),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}var Hu=[],Vu=0,n0=null,i0=0,zr=[],Hr=0,Il=null,Do=1,No="";function wl(c,f){Hu[Vu++]=i0,Hu[Vu++]=n0,n0=c,i0=f}function My(c,f,v){zr[Hr++]=Do,zr[Hr++]=No,zr[Hr++]=Il,Il=c;var _=Do;c=No;var T=32-ys(_)-1;_&=~(1<<T),v+=1;var b=32-ys(f)+T;if(30<b){var z=T-T%5;b=(_&(1<<z)-1).toString(32),_>>=z,T-=z,Do=1<<32-ys(f)+T|v<<T|_,No=b+c}else Do=1<<b|v<<T|_,No=c}function ug(c){c.return!==null&&(wl(c,1),My(c,1,0))}function cg(c){for(;c===n0;)n0=Hu[--Vu],Hu[Vu]=null,i0=Hu[--Vu],Hu[Vu]=null;for(;c===Il;)Il=zr[--Hr],zr[Hr]=null,No=zr[--Hr],zr[Hr]=null,Do=zr[--Hr],zr[Hr]=null}var gr=null,vr=null,gn=!1,Yh=!1,Es=null;function Ry(c,f){var v=qr(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=c,f=c.deletions,f===null?(c.deletions=[v],c.flags|=16):f.push(v)}function by(c,f){switch(c.tag){case 5:return f=mi(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,gr=c,vr=Vp(f),!0):!1;case 6:return f=Qp(f,c.pendingProps),f!==null?(c.stateNode=f,gr=c,vr=null,!0):!1;case 13:if(f=Gp(f),f!==null){var v=Il!==null?{id:Do,overflow:No}:null;return c.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=qr(18,null,null,0),v.stateNode=f,v.return=c,c.child=v,gr=c,vr=null,!0}return!1;default:return!1}}function hg(c){return(c.mode&1)!==0&&(c.flags&128)===0}function fg(c){if(gn){var f=vr;if(f){var v=f;if(!by(c,f)){if(hg(c))throw Error(o(418));f=Js(v);var _=gr;f&&by(c,f)?Ry(_,v):(c.flags=c.flags&-4097|2,gn=!1,gr=c)}}else{if(hg(c))throw Error(o(418));c.flags=c.flags&-4097|2,gn=!1,gr=c}}}function By(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;gr=c}function Kh(c){if(!ve||c!==gr)return!1;if(!gn)return By(c),gn=!0,!1;if(c.tag!==3&&(c.tag!==5||dt(c.type)&&!xe(c.type,c.memoizedProps))){var f=vr;if(f){if(hg(c)){for(c=vr;c;)c=Js(c);throw Error(o(418))}for(;f;)Ry(c,f),f=Js(f)}}if(By(c),c.tag===13){if(!ve)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));vr=de(c)}else vr=gr?Js(c.stateNode):null;return!0}function Wu(){ve&&(vr=gr=null,Yh=gn=!1)}function dg(c){Es===null?Es=[c]:Es.push(c)}function jh(c,f,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var _=v.stateNode}if(!_)throw Error(o(147,c));var T=_,b=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===b?f.ref:(f=function(z){var J=T.refs;J===Cy&&(J=T.refs={}),z===null?delete J[b]:J[b]=z},f._stringRef=b,f)}if(typeof c!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,c))}return c}function r0(c,f){throw c=Object.prototype.toString.call(f),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function Ly(c){var f=c._init;return f(c._payload)}function Py(c){function f(te,Z){if(c){var se=te.deletions;se===null?(te.deletions=[Z],te.flags|=16):se.push(Z)}}function v(te,Z){if(!c)return null;for(;Z!==null;)f(te,Z),Z=Z.sibling;return null}function _(te,Z){for(te=new Map;Z!==null;)Z.key!==null?te.set(Z.key,Z):te.set(Z.index,Z),Z=Z.sibling;return te}function T(te,Z){return te=Ca(te,Z),te.index=0,te.sibling=null,te}function b(te,Z,se){return te.index=se,c?(se=te.alternate,se!==null?(se=se.index,se<Z?(te.flags|=2,Z):se):(te.flags|=2,Z)):(te.flags|=1048576,Z)}function z(te){return c&&te.alternate===null&&(te.flags|=2),te}function J(te,Z,se,ke){return Z===null||Z.tag!==6?(Z=jg(se,te.mode,ke),Z.return=te,Z):(Z=T(Z,se),Z.return=te,Z)}function ce(te,Z,se,ke){var tt=se.type;return tt===h?We(te,Z,se.props.children,ke,se.key):Z!==null&&(Z.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===y&&Ly(tt)===Z.type)?(ke=T(Z,se.props),ke.ref=jh(te,Z,se),ke.return=te,ke):(ke=N0(se.type,se.key,se.props,null,te.mode,ke),ke.ref=jh(te,Z,se),ke.return=te,ke)}function Me(te,Z,se,ke){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=Jg(se,te.mode,ke),Z.return=te,Z):(Z=T(Z,se.children||[]),Z.return=te,Z)}function We(te,Z,se,ke,tt){return Z===null||Z.tag!==7?(Z=Dl(se,te.mode,ke,tt),Z.return=te,Z):(Z=T(Z,se),Z.return=te,Z)}function _t(te,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=jg(""+Z,te.mode,se),Z.return=te,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case l:return se=N0(Z.type,Z.key,Z.props,null,te.mode,se),se.ref=jh(te,null,Z),se.return=te,se;case u:return Z=Jg(Z,te.mode,se),Z.return=te,Z;case y:var ke=Z._init;return _t(te,ke(Z._payload),se)}if(Y(Z)||M(Z))return Z=Dl(Z,te.mode,se,null),Z.return=te,Z;r0(te,Z)}return null}function lt(te,Z,se,ke){var tt=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return tt!==null?null:J(te,Z,""+se,ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case l:return se.key===tt?ce(te,Z,se,ke):null;case u:return se.key===tt?Me(te,Z,se,ke):null;case y:return tt=se._init,lt(te,Z,tt(se._payload),ke)}if(Y(se)||M(se))return tt!==null?null:We(te,Z,se,ke,null);r0(te,se)}return null}function tn(te,Z,se,ke,tt){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return te=te.get(se)||null,J(Z,te,""+ke,tt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:return te=te.get(ke.key===null?se:ke.key)||null,ce(Z,te,ke,tt);case u:return te=te.get(ke.key===null?se:ke.key)||null,Me(Z,te,ke,tt);case y:var bt=ke._init;return tn(te,Z,se,bt(ke._payload),tt)}if(Y(ke)||M(ke))return te=te.get(se)||null,We(Z,te,ke,tt,null);r0(Z,ke)}return null}function nt(te,Z,se,ke){for(var tt=null,bt=null,Ct=Z,qt=Z=0,ci=null;Ct!==null&&qt<se.length;qt++){Ct.index>qt?(ci=Ct,Ct=null):ci=Ct.sibling;var Yt=lt(te,Ct,se[qt],ke);if(Yt===null){Ct===null&&(Ct=ci);break}c&&Ct&&Yt.alternate===null&&f(te,Ct),Z=b(Yt,Z,qt),bt===null?tt=Yt:bt.sibling=Yt,bt=Yt,Ct=ci}if(qt===se.length)return v(te,Ct),gn&&wl(te,qt),tt;if(Ct===null){for(;qt<se.length;qt++)Ct=_t(te,se[qt],ke),Ct!==null&&(Z=b(Ct,Z,qt),bt===null?tt=Ct:bt.sibling=Ct,bt=Ct);return gn&&wl(te,qt),tt}for(Ct=_(te,Ct);qt<se.length;qt++)ci=tn(Ct,te,qt,se[qt],ke),ci!==null&&(c&&ci.alternate!==null&&Ct.delete(ci.key===null?qt:ci.key),Z=b(ci,Z,qt),bt===null?tt=ci:bt.sibling=ci,bt=ci);return c&&Ct.forEach(function(Ta){return f(te,Ta)}),gn&&wl(te,qt),tt}function Bi(te,Z,se,ke){var tt=M(se);if(typeof tt!="function")throw Error(o(150));if(se=tt.call(se),se==null)throw Error(o(151));for(var bt=tt=null,Ct=Z,qt=Z=0,ci=null,Yt=se.next();Ct!==null&&!Yt.done;qt++,Yt=se.next()){Ct.index>qt?(ci=Ct,Ct=null):ci=Ct.sibling;var Ta=lt(te,Ct,Yt.value,ke);if(Ta===null){Ct===null&&(Ct=ci);break}c&&Ct&&Ta.alternate===null&&f(te,Ct),Z=b(Ta,Z,qt),bt===null?tt=Ta:bt.sibling=Ta,bt=Ta,Ct=ci}if(Yt.done)return v(te,Ct),gn&&wl(te,qt),tt;if(Ct===null){for(;!Yt.done;qt++,Yt=se.next())Yt=_t(te,Yt.value,ke),Yt!==null&&(Z=b(Yt,Z,qt),bt===null?tt=Yt:bt.sibling=Yt,bt=Yt);return gn&&wl(te,qt),tt}for(Ct=_(te,Ct);!Yt.done;qt++,Yt=se.next())Yt=tn(Ct,te,qt,Yt.value,ke),Yt!==null&&(c&&Yt.alternate!==null&&Ct.delete(Yt.key===null?qt:Yt.key),Z=b(Yt,Z,qt),bt===null?tt=Yt:bt.sibling=Yt,bt=Yt);return c&&Ct.forEach(function(xB){return f(te,xB)}),gn&&wl(te,qt),tt}function Yr(te,Z,se,ke){if(typeof se=="object"&&se!==null&&se.type===h&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case l:e:{for(var tt=se.key,bt=Z;bt!==null;){if(bt.key===tt){if(tt=se.type,tt===h){if(bt.tag===7){v(te,bt.sibling),Z=T(bt,se.props.children),Z.return=te,te=Z;break e}}else if(bt.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===y&&Ly(tt)===bt.type){v(te,bt.sibling),Z=T(bt,se.props),Z.ref=jh(te,bt,se),Z.return=te,te=Z;break e}v(te,bt);break}else f(te,bt);bt=bt.sibling}se.type===h?(Z=Dl(se.props.children,te.mode,ke,se.key),Z.return=te,te=Z):(ke=N0(se.type,se.key,se.props,null,te.mode,ke),ke.ref=jh(te,Z,se),ke.return=te,te=ke)}return z(te);case u:e:{for(bt=se.key;Z!==null;){if(Z.key===bt)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){v(te,Z.sibling),Z=T(Z,se.children||[]),Z.return=te,te=Z;break e}else{v(te,Z);break}else f(te,Z);Z=Z.sibling}Z=Jg(se,te.mode,ke),Z.return=te,te=Z}return z(te);case y:return bt=se._init,Yr(te,Z,bt(se._payload),ke)}if(Y(se))return nt(te,Z,se,ke);if(M(se))return Bi(te,Z,se,ke);r0(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Z!==null&&Z.tag===6?(v(te,Z.sibling),Z=T(Z,se),Z.return=te,te=Z):(v(te,Z),Z=jg(se,te.mode,ke),Z.return=te,te=Z),z(te)):v(te,Z)}return Yr}var Xu=Py(!0),Dy=Py(!1),Jh={},Vr=St(Jh),Zh=St(Jh),qu=St(Jh);function no(c){if(c===Jh)throw Error(o(174));return c}function pg(c,f){yt(qu,f),yt(Zh,c),yt(Vr,Jh),c=j(f),Jt(Vr),yt(Vr,c)}function Yu(){Jt(Vr),Jt(Zh),Jt(qu)}function Ny(c){var f=no(qu.current),v=no(Vr.current);f=P(v,c.type,f),v!==f&&(yt(Zh,c),yt(Vr,f))}function Ag(c){Zh.current===c&&(Jt(Vr),Jt(Zh))}var xn=St(0);function s0(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||zp(v)||ma(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var mg=[];function gg(){for(var c=0;c<mg.length;c++){var f=mg[c];ct?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}mg.length=0}var o0=a.ReactCurrentDispatcher,Wr=a.ReactCurrentBatchConfig,Ku=0,bn=null,Mi=null,ui=null,a0=!1,$h=!1,ef=0,Wb=0;function Ri(){throw Error(o(321))}function vg(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!$s(c[v],f[v]))return!1;return!0}function yg(c,f,v,_,T,b){if(Ku=b,bn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,o0.current=c===null||c.memoizedState===null?Kb:jb,c=v(_,T),$h){b=0;do{if($h=!1,ef=0,25<=b)throw Error(o(301));b+=1,ui=Mi=null,f.updateQueue=null,o0.current=Jb,c=v(_,T)}while($h)}if(o0.current=f0,f=Mi!==null&&Mi.next!==null,Ku=0,ui=Mi=bn=null,a0=!1,f)throw Error(o(300));return c}function xg(){var c=ef!==0;return ef=0,c}function Fo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?bn.memoizedState=ui=c:ui=ui.next=c,ui}function io(){if(Mi===null){var c=bn.alternate;c=c!==null?c.memoizedState:null}else c=Mi.next;var f=ui===null?bn.memoizedState:ui.next;if(f!==null)ui=f,Mi=c;else{if(c===null)throw Error(o(310));Mi=c,c={memoizedState:Mi.memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},ui===null?bn.memoizedState=ui=c:ui=ui.next=c}return ui}function Ml(c,f){return typeof f=="function"?f(c):f}function l0(c){var f=io(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var _=Mi,T=_.baseQueue,b=v.pending;if(b!==null){if(T!==null){var z=T.next;T.next=b.next,b.next=z}_.baseQueue=T=b,v.pending=null}if(T!==null){b=T.next,_=_.baseState;var J=z=null,ce=null,Me=b;do{var We=Me.lane;if((Ku&We)===We)ce!==null&&(ce=ce.next={lane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),_=Me.hasEagerState?Me.eagerState:c(_,Me.action);else{var _t={lane:We,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};ce===null?(J=ce=_t,z=_):ce=ce.next=_t,bn.lanes|=We,Ju|=We}Me=Me.next}while(Me!==null&&Me!==b);ce===null?z=_:ce.next=J,$s(_,f.memoizedState)||(yr=!0),f.memoizedState=_,f.baseState=z,f.baseQueue=ce,v.lastRenderedState=_}if(c=v.interleaved,c!==null){T=c;do b=T.lane,bn.lanes|=b,Ju|=b,T=T.next;while(T!==c)}else T===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function u0(c){var f=io(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var _=v.dispatch,T=v.pending,b=f.memoizedState;if(T!==null){v.pending=null;var z=T=T.next;do b=c(b,z.action),z=z.next;while(z!==T);$s(b,f.memoizedState)||(yr=!0),f.memoizedState=b,f.baseQueue===null&&(f.baseState=b),v.lastRenderedState=b}return[b,_]}function Fy(){}function Uy(c,f){var v=bn,_=io(),T=f(),b=!$s(_.memoizedState,T);if(b&&(_.memoizedState=T,yr=!0),_=_.queue,nf(Qy.bind(null,v,_,c),[c]),_.getSnapshot!==f||b||ui!==null&&ui.memoizedState.tag&1){if(v.flags|=2048,tf(9,ky.bind(null,v,_,T,f),void 0,null),Xn===null)throw Error(o(349));Ku&30||Oy(v,f,T)}return T}function Oy(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=bn.updateQueue,f===null?(f={lastEffect:null,stores:null},bn.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function ky(c,f,v,_){f.value=v,f.getSnapshot=_,Gy(f)&&Xr(c,1,-1)}function Qy(c,f,v){return v(function(){Gy(f)&&Xr(c,1,-1)})}function Gy(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!$s(c,v)}catch{return!0}}function Eg(c){var f=Fo();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:c},f.queue=c,c=c.dispatch=Yb.bind(null,bn,c),[f.memoizedState,c]}function tf(c,f,v,_){return c={tag:c,create:f,destroy:v,deps:_,next:null},f=bn.updateQueue,f===null?(f={lastEffect:null,stores:null},bn.updateQueue=f,f.lastEffect=c.next=c):(v=f.lastEffect,v===null?f.lastEffect=c.next=c:(_=v.next,v.next=c,c.next=_,f.lastEffect=c)),c}function zy(){return io().memoizedState}function c0(c,f,v,_){var T=Fo();bn.flags|=c,T.memoizedState=tf(1|f,v,void 0,_===void 0?null:_)}function h0(c,f,v,_){var T=io();_=_===void 0?null:_;var b=void 0;if(Mi!==null){var z=Mi.memoizedState;if(b=z.destroy,_!==null&&vg(_,z.deps)){T.memoizedState=tf(f,v,b,_);return}}bn.flags|=c,T.memoizedState=tf(1|f,v,b,_)}function Sg(c,f){return c0(8390656,8,c,f)}function nf(c,f){return h0(2048,8,c,f)}function Hy(c,f){return h0(4,2,c,f)}function Vy(c,f){return h0(4,4,c,f)}function Wy(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Xy(c,f,v){return v=v!=null?v.concat([c]):null,h0(4,4,Wy.bind(null,f,c),v)}function _g(){}function qy(c,f){var v=io();f=f===void 0?null:f;var _=v.memoizedState;return _!==null&&f!==null&&vg(f,_[1])?_[0]:(v.memoizedState=[c,f],c)}function Yy(c,f){var v=io();f=f===void 0?null:f;var _=v.memoizedState;return _!==null&&f!==null&&vg(f,_[1])?_[0]:(c=c(),v.memoizedState=[c,f],c)}function Xb(c,f){var v=Xt;Xt=v!==0&&4>v?v:4,c(!0);var _=Wr.transition;Wr.transition={};try{c(!1),f()}finally{Xt=v,Wr.transition=_}}function Ky(){return io().memoizedState}function qb(c,f,v){var _=Sa(c);v={lane:_,action:v,hasEagerState:!1,eagerState:null,next:null},jy(c)?Jy(f,v):(Zy(c,f,v),v=zi(),c=Xr(c,_,v),c!==null&&$y(c,f,_))}function Yb(c,f,v){var _=Sa(c),T={lane:_,action:v,hasEagerState:!1,eagerState:null,next:null};if(jy(c))Jy(f,T);else{Zy(c,f,T);var b=c.alternate;if(c.lanes===0&&(b===null||b.lanes===0)&&(b=f.lastRenderedReducer,b!==null))try{var z=f.lastRenderedState,J=b(z,v);if(T.hasEagerState=!0,T.eagerState=J,$s(J,z))return}catch{}finally{}v=zi(),c=Xr(c,_,v),c!==null&&$y(c,f,_)}}function jy(c){var f=c.alternate;return c===bn||f!==null&&f===bn}function Jy(c,f){$h=a0=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function Zy(c,f,v){Xn!==null&&c.mode&1&&!(Dt&2)?(c=f.interleaved,c===null?(v.next=v,to===null?to=[f]:to.push(f)):(v.next=c.next,c.next=v),f.interleaved=v):(c=f.pending,c===null?v.next=v:(v.next=c.next,c.next=v),f.pending=v)}function $y(c,f,v){if(v&4194240){var _=f.lanes;_&=c.pendingLanes,v|=_,f.lanes=v,J2(c,v)}}var f0={readContext:Gr,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},Kb={readContext:Gr,useCallback:function(c,f){return Fo().memoizedState=[c,f===void 0?null:f],c},useContext:Gr,useEffect:Sg,useImperativeHandle:function(c,f,v){return v=v!=null?v.concat([c]):null,c0(4194308,4,Wy.bind(null,f,c),v)},useLayoutEffect:function(c,f){return c0(4194308,4,c,f)},useInsertionEffect:function(c,f){return c0(4,2,c,f)},useMemo:function(c,f){var v=Fo();return f=f===void 0?null:f,c=c(),v.memoizedState=[c,f],c},useReducer:function(c,f,v){var _=Fo();return f=v!==void 0?v(f):f,_.memoizedState=_.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},_.queue=c,c=c.dispatch=qb.bind(null,bn,c),[_.memoizedState,c]},useRef:function(c){var f=Fo();return c={current:c},f.memoizedState=c},useState:Eg,useDebugValue:_g,useDeferredValue:function(c){var f=Eg(c),v=f[0],_=f[1];return Sg(function(){var T=Wr.transition;Wr.transition={};try{_(c)}finally{Wr.transition=T}},[c]),v},useTransition:function(){var c=Eg(!1),f=c[0];return c=Xb.bind(null,c[1]),Fo().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,v){var _=bn,T=Fo();if(gn){if(v===void 0)throw Error(o(407));v=v()}else{if(v=f(),Xn===null)throw Error(o(349));Ku&30||Oy(_,f,v)}T.memoizedState=v;var b={value:v,getSnapshot:f};return T.queue=b,Sg(Qy.bind(null,_,b,c),[c]),_.flags|=2048,tf(9,ky.bind(null,_,b,v,f),void 0,null),v},useId:function(){var c=Fo(),f=Xn.identifierPrefix;if(gn){var v=No,_=Do;v=(_&~(1<<32-ys(_)-1)).toString(32)+v,f=":"+f+"R"+v,v=ef++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=Wb++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},jb={readContext:Gr,useCallback:qy,useContext:Gr,useEffect:nf,useImperativeHandle:Xy,useInsertionEffect:Hy,useLayoutEffect:Vy,useMemo:Yy,useReducer:l0,useRef:zy,useState:function(){return l0(Ml)},useDebugValue:_g,useDeferredValue:function(c){var f=l0(Ml),v=f[0],_=f[1];return nf(function(){var T=Wr.transition;Wr.transition={};try{_(c)}finally{Wr.transition=T}},[c]),v},useTransition:function(){var c=l0(Ml)[0],f=io().memoizedState;return[c,f]},useMutableSource:Fy,useSyncExternalStore:Uy,useId:Ky,unstable_isNewReconciler:!1},Jb={readContext:Gr,useCallback:qy,useContext:Gr,useEffect:nf,useImperativeHandle:Xy,useInsertionEffect:Hy,useLayoutEffect:Vy,useMemo:Yy,useReducer:u0,useRef:zy,useState:function(){return u0(Ml)},useDebugValue:_g,useDeferredValue:function(c){var f=u0(Ml),v=f[0],_=f[1];return nf(function(){var T=Wr.transition;Wr.transition={};try{_(c)}finally{Wr.transition=T}},[c]),v},useTransition:function(){var c=u0(Ml)[0],f=io().memoizedState;return[c,f]},useMutableSource:Fy,useSyncExternalStore:Uy,useId:Ky,unstable_isNewReconciler:!1};function Cg(c,f){try{var v="",_=f;do v+=Vb(_),_=_.return;while(_);var T=v}catch(b){T=`
Error generating stack: `+b.message+`
`+b.stack}return{value:c,source:f,stack:T}}function Tg(c,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var Zb=typeof WeakMap=="function"?WeakMap:Map;function ex(c,f,v){v=Po(-1,v),v.tag=3,v.payload={element:null};var _=f.value;return v.callback=function(){M0||(M0=!0,Hg=_),Tg(c,f)},v}function tx(c,f,v){v=Po(-1,v),v.tag=3;var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var T=f.value;v.payload=function(){return _(T)},v.callback=function(){Tg(c,f)}}var b=c.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(v.callback=function(){Tg(c,f),typeof _!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var z=f.stack;this.componentDidCatch(f.value,{componentStack:z!==null?z:""})}),v}function nx(c,f,v){var _=c.pingCache;if(_===null){_=c.pingCache=new Zb;var T=new Set;_.set(f,T)}else T=_.get(f),T===void 0&&(T=new Set,_.set(f,T));T.has(v)||(T.add(v),c=fB.bind(null,c,f,v),f.then(c,c))}function ix(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function rx(c,f,v,_,T){return c.mode&1?(c.flags|=65536,c.lanes=T,c):(c===f?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=Po(-1,1),f.tag=2,ya(v,f))),v.lanes|=1),c)}function ro(c){c.flags|=4}function sx(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var rf,sf,d0,p0;if(De)rf=function(c,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)V(c,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},sf=function(){},d0=function(c,f,v,_,T){if(c=c.memoizedProps,c!==_){var b=f.stateNode,z=no(Vr.current);v=re(b,v,c,_,T,z),(f.updateQueue=v)&&ro(f)}},p0=function(c,f,v,_){v!==_&&ro(f)};else if(W){rf=function(c,f,v,_){for(var T=f.child;T!==null;){if(T.tag===5){var b=T.stateNode;v&&_&&(b=hn(b,T.type,T.memoizedProps,T)),V(c,b)}else if(T.tag===6)b=T.stateNode,v&&_&&(b=pr(b,T.memoizedProps,T)),V(c,b);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)b=T.child,b!==null&&(b.return=T),rf(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var ox=function(c,f,v,_){for(var T=f.child;T!==null;){if(T.tag===5){var b=T.stateNode;v&&_&&(b=hn(b,T.type,T.memoizedProps,T)),sn(c,b)}else if(T.tag===6)b=T.stateNode,v&&_&&(b=pr(b,T.memoizedProps,T)),sn(c,b);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)b=T.child,b!==null&&(b.return=T),ox(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};sf=function(c,f){var v=f.stateNode;if(!sx(c,f)){c=v.containerInfo;var _=Ut(c);ox(_,f,!1,!1),v.pendingChildren=_,ro(f),Vn(c,_)}},d0=function(c,f,v,_,T){var b=c.stateNode,z=c.memoizedProps;if((c=sx(c,f))&&z===_)f.stateNode=b;else{var J=f.stateNode,ce=no(Vr.current),Me=null;z!==_&&(Me=re(J,v,z,_,T,ce)),c&&Me===null?f.stateNode=b:(b=Oe(b,Me,v,z,_,f,c,J),me(b,v,_,T,ce)&&ro(f),f.stateNode=b,c?ro(f):rf(b,f,!1,!1))}},p0=function(c,f,v,_){v!==_?(c=no(qu.current),v=no(Vr.current),f.stateNode=ge(_,c,v,f),ro(f)):f.stateNode=c.stateNode}}else sf=function(){},d0=function(){},p0=function(){};function of(c,f){if(!gn)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var _=null;v!==null;)v.alternate!==null&&(_=v),v=v.sibling;_===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function bi(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,_=0;if(f)for(var T=c.child;T!==null;)v|=T.lanes|T.childLanes,_|=T.subtreeFlags&14680064,_|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)v|=T.lanes|T.childLanes,_|=T.subtreeFlags,_|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=_,c.childLanes=v,f}function $b(c,f,v){var _=f.pendingProps;switch(cg(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(f),null;case 1:return Rn(f.type)&&ga(),bi(f),null;case 3:return _=f.stateNode,Yu(),Jt(Wn),Jt(Jn),gg(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(c===null||c.child===null)&&(Kh(f)?ro(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Es!==null&&(Xg(Es),Es=null))),sf(c,f),bi(f),null;case 5:Ag(f),v=no(qu.current);var T=f.type;if(c!==null&&f.stateNode!=null)d0(c,f,T,_,v),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!_){if(f.stateNode===null)throw Error(o(166));return bi(f),null}if(c=no(Vr.current),Kh(f)){if(!ve)throw Error(o(175));c=Y2(f.stateNode,f.type,f.memoizedProps,v,c,f,!Yh),f.updateQueue=c,c!==null&&ro(f)}else{var b=O(T,_,v,c,f);rf(b,f,!1,!1),f.stateNode=b,me(b,T,_,v,c)&&ro(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return bi(f),null;case 6:if(c&&f.stateNode!=null)p0(c,f,c.memoizedProps,_);else{if(typeof _!="string"&&f.stateNode===null)throw Error(o(166));if(c=no(qu.current),v=no(Vr.current),Kh(f)){if(!ve)throw Error(o(176));if(c=f.stateNode,_=f.memoizedProps,(v=k(c,_,f,!Yh))&&(T=gr,T!==null))switch(b=(T.mode&1)!==0,T.tag){case 3:At(T.stateNode.containerInfo,c,_,b);break;case 5:Pt(T.type,T.memoizedProps,T.stateNode,c,_,b)}v&&ro(f)}else f.stateNode=ge(_,c,v,f)}return bi(f),null;case 13:if(Jt(xn),_=f.memoizedState,gn&&vr!==null&&f.mode&1&&!(f.flags&128)){for(c=vr;c;)c=Js(c);return Wu(),f.flags|=98560,f}if(_!==null&&_.dehydrated!==null){if(_=Kh(f),c===null){if(!_)throw Error(o(318));if(!ve)throw Error(o(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));ne(c,f)}else Wu(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return bi(f),null}return Es!==null&&(Xg(Es),Es=null),f.flags&128?(f.lanes=v,f):(_=_!==null,v=!1,c===null?Kh(f):v=c.memoizedState!==null,_&&!v&&(f.child.flags|=8192,f.mode&1&&(c===null||xn.current&1?Zn===0&&(Zn=3):Yg())),f.updateQueue!==null&&(f.flags|=4),bi(f),null);case 4:return Yu(),sf(c,f),c===null&&Se(f.stateNode.containerInfo),bi(f),null;case 10:return rg(f.type._context),bi(f),null;case 17:return Rn(f.type)&&ga(),bi(f),null;case 19:if(Jt(xn),T=f.memoizedState,T===null)return bi(f),null;if(_=(f.flags&128)!==0,b=T.rendering,b===null)if(_)of(T,!1);else{if(Zn!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(b=s0(c),b!==null){for(f.flags|=128,of(T,!1),c=b.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=v,_=f.child;_!==null;)v=_,T=c,v.flags&=14680066,b=v.alternate,b===null?(v.childLanes=0,v.lanes=T,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=b.childLanes,v.lanes=b.lanes,v.child=b.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=b.memoizedProps,v.memoizedState=b.memoizedState,v.updateQueue=b.updateQueue,v.type=b.type,T=b.dependencies,v.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),_=_.sibling;return yt(xn,xn.current&1|2),f.child}c=c.sibling}T.tail!==null&&li()>zg&&(f.flags|=128,_=!0,of(T,!1),f.lanes=4194304)}else{if(!_)if(c=s0(b),c!==null){if(f.flags|=128,_=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),of(T,!0),T.tail===null&&T.tailMode==="hidden"&&!b.alternate&&!gn)return bi(f),null}else 2*li()-T.renderingStartTime>zg&&v!==1073741824&&(f.flags|=128,_=!0,of(T,!1),f.lanes=4194304);T.isBackwards?(b.sibling=f.child,f.child=b):(c=T.last,c!==null?c.sibling=b:f.child=b,T.last=b)}return T.tail!==null?(f=T.tail,T.rendering=f,T.tail=f.sibling,T.renderingStartTime=li(),f.sibling=null,c=xn.current,yt(xn,_?c&1|2:c&1),f):(bi(f),null);case 22:case 23:return qg(),_=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==_&&(f.flags|=8192),_&&f.mode&1?xr&1073741824&&(bi(f),De&&f.subtreeFlags&6&&(f.flags|=8192)):bi(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var eB=a.ReactCurrentOwner,yr=!1;function Gi(c,f,v,_){f.child=c===null?Dy(f,null,v,_):Xu(f,c.child,v,_)}function ax(c,f,v,_,T){v=v.render;var b=f.ref;return zu(f,T),_=yg(c,f,v,_,b,T),v=xg(),c!==null&&!yr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~T,Uo(c,f,T)):(gn&&v&&ug(f),f.flags|=1,Gi(c,f,_,T),f.child)}function lx(c,f,v,_,T){if(c===null){var b=v.type;return typeof b=="function"&&!Kg(b)&&b.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=b,ux(c,f,b,_,T)):(c=N0(v.type,null,_,f,f.mode,T),c.ref=f.ref,c.return=f,f.child=c)}if(b=c.child,!(c.lanes&T)){var z=b.memoizedProps;if(v=v.compare,v=v!==null?v:jp,v(z,_)&&c.ref===f.ref)return Uo(c,f,T)}return f.flags|=1,c=Ca(b,_),c.ref=f.ref,c.return=f,f.child=c}function ux(c,f,v,_,T){if(c!==null&&jp(c.memoizedProps,_)&&c.ref===f.ref)if(yr=!1,(c.lanes&T)!==0)c.flags&131072&&(yr=!0);else return f.lanes=c.lanes,Uo(c,f,T);return Ig(c,f,v,_,T)}function cx(c,f,v){var _=f.pendingProps,T=_.children,b=c!==null?c.memoizedState:null;if(_.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},yt(ju,xr),xr|=v;else if(v&1073741824)f.memoizedState={baseLanes:0,cachePool:null},_=b!==null?b.baseLanes:v,yt(ju,xr),xr|=_;else return c=b!==null?b.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,yt(ju,xr),xr|=c,null;else b!==null?(_=b.baseLanes|v,f.memoizedState=null):_=v,yt(ju,xr),xr|=_;return Gi(c,f,T,v),f.child}function hx(c,f){var v=f.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(f.flags|=512,f.flags|=2097152)}function Ig(c,f,v,_,T){var b=Rn(v)?vs:Jn.current;return b=Mn(f,b),zu(f,T),v=yg(c,f,v,_,b,T),_=xg(),c!==null&&!yr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~T,Uo(c,f,T)):(gn&&_&&ug(f),f.flags|=1,Gi(c,f,v,T),f.child)}function fx(c,f,v,_,T){if(Rn(v)){var b=!0;Qu(f)}else b=!1;if(zu(f,T),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),Iy(f,v,_),lg(f,v,_,T),_=!0;else if(c===null){var z=f.stateNode,J=f.memoizedProps;z.props=J;var ce=z.context,Me=v.contextType;typeof Me=="object"&&Me!==null?Me=Gr(Me):(Me=Rn(v)?vs:Jn.current,Me=Mn(f,Me));var We=v.getDerivedStateFromProps,_t=typeof We=="function"||typeof z.getSnapshotBeforeUpdate=="function";_t||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==_||ce!==Me)&&wy(f,z,_,Me),va=!1;var lt=f.memoizedState;z.state=lt,e0(f,_,z,T),ce=f.memoizedState,J!==_||lt!==ce||Wn.current||va?(typeof We=="function"&&(ag(f,v,We,_),ce=f.memoizedState),(J=va||Ty(f,v,J,_,lt,ce,Me))?(_t||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(f.flags|=4194308)):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=ce),z.props=_,z.state=ce,z.context=Me,_=J):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{z=f.stateNode,Ey(c,f),J=f.memoizedProps,Me=f.type===f.elementType?J:xs(f.type,J),z.props=Me,_t=f.pendingProps,lt=z.context,ce=v.contextType,typeof ce=="object"&&ce!==null?ce=Gr(ce):(ce=Rn(v)?vs:Jn.current,ce=Mn(f,ce));var tn=v.getDerivedStateFromProps;(We=typeof tn=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(J!==_t||lt!==ce)&&wy(f,z,_,ce),va=!1,lt=f.memoizedState,z.state=lt,e0(f,_,z,T);var nt=f.memoizedState;J!==_t||lt!==nt||Wn.current||va?(typeof tn=="function"&&(ag(f,v,tn,_),nt=f.memoizedState),(Me=va||Ty(f,v,Me,_,lt,nt,ce)||!1)?(We||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(_,nt,ce),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(_,nt,ce)),typeof z.componentDidUpdate=="function"&&(f.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof z.componentDidUpdate!="function"||J===c.memoizedProps&&lt===c.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&lt===c.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=nt),z.props=_,z.state=nt,z.context=ce,_=Me):(typeof z.componentDidUpdate!="function"||J===c.memoizedProps&&lt===c.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&lt===c.memoizedState||(f.flags|=1024),_=!1)}return wg(c,f,v,_,b,T)}function wg(c,f,v,_,T,b){hx(c,f);var z=(f.flags&128)!==0;if(!_&&!z)return T&&Wh(f,v,!1),Uo(c,f,b);_=f.stateNode,eB.current=f;var J=z&&typeof v.getDerivedStateFromError!="function"?null:_.render();return f.flags|=1,c!==null&&z?(f.child=Xu(f,c.child,null,b),f.child=Xu(f,null,J,b)):Gi(c,f,J,b),f.memoizedState=_.state,T&&Wh(f,v,!0),f.child}function dx(c){var f=c.stateNode;f.pendingContext?wi(c,f.pendingContext,f.pendingContext!==f.context):f.context&&wi(c,f.context,!1),pg(c,f.containerInfo)}function px(c,f,v,_,T){return Wu(),dg(T),f.flags|=256,Gi(c,f,v,_),f.child}var A0={dehydrated:null,treeContext:null,retryLane:0};function m0(c){return{baseLanes:c,cachePool:null}}function Ax(c,f,v){var _=f.pendingProps,T=xn.current,b=!1,z=(f.flags&128)!==0,J;if((J=z)||(J=c!==null&&c.memoizedState===null?!1:(T&2)!==0),J?(b=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),yt(xn,T&1),c===null)return fg(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?ma(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(T=_.children,c=_.fallback,b?(_=f.mode,b=f.child,T={mode:"hidden",children:T},!(_&1)&&b!==null?(b.childLanes=0,b.pendingProps=T):b=F0(T,_,0,null),c=Dl(c,_,v,null),b.return=f,c.return=f,b.sibling=c,f.child=b,f.child.memoizedState=m0(v),f.memoizedState=A0,c):Mg(f,T));if(T=c.memoizedState,T!==null){if(J=T.dehydrated,J!==null){if(z)return f.flags&256?(f.flags&=-257,g0(c,f,v,Error(o(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(b=_.fallback,T=f.mode,_=F0({mode:"visible",children:_.children},T,0,null),b=Dl(b,T,v,null),b.flags|=2,_.return=f,b.return=f,_.sibling=b,f.child=_,f.mode&1&&Xu(f,c.child,null,v),f.child.memoizedState=m0(v),f.memoizedState=A0,b);if(!(f.mode&1))f=g0(c,f,v,null);else if(ma(J))f=g0(c,f,v,Error(o(419)));else if(_=(v&c.childLanes)!==0,yr||_){if(_=Xn,_!==null){switch(v&-v){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}_=b&(_.suspendedLanes|v)?0:b,_!==0&&_!==T.retryLane&&(T.retryLane=_,Xr(c,_,-1))}Yg(),f=g0(c,f,v,Error(o(421)))}else zp(J)?(f.flags|=128,f.child=c.child,f=dB.bind(null,c),Hp(J,f),f=null):(v=T.treeContext,ve&&(vr=q2(J),gr=f,gn=!0,Es=null,Yh=!1,v!==null&&(zr[Hr++]=Do,zr[Hr++]=No,zr[Hr++]=Il,Do=v.id,No=v.overflow,Il=f)),f=Mg(f,f.pendingProps.children),f.flags|=4096);return f}return b?(_=gx(c,f,_.children,_.fallback,v),b=f.child,T=c.child.memoizedState,b.memoizedState=T===null?m0(v):{baseLanes:T.baseLanes|v,cachePool:null},b.childLanes=c.childLanes&~v,f.memoizedState=A0,_):(v=mx(c,f,_.children,v),f.memoizedState=null,v)}return b?(_=gx(c,f,_.children,_.fallback,v),b=f.child,T=c.child.memoizedState,b.memoizedState=T===null?m0(v):{baseLanes:T.baseLanes|v,cachePool:null},b.childLanes=c.childLanes&~v,f.memoizedState=A0,_):(v=mx(c,f,_.children,v),f.memoizedState=null,v)}function Mg(c,f){return f=F0({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function mx(c,f,v,_){var T=c.child;return c=T.sibling,v=Ca(T,{mode:"visible",children:v}),!(f.mode&1)&&(v.lanes=_),v.return=f,v.sibling=null,c!==null&&(_=f.deletions,_===null?(f.deletions=[c],f.flags|=16):_.push(c)),f.child=v}function gx(c,f,v,_,T){var b=f.mode;c=c.child;var z=c.sibling,J={mode:"hidden",children:v};return!(b&1)&&f.child!==c?(v=f.child,v.childLanes=0,v.pendingProps=J,f.deletions=null):(v=Ca(c,J),v.subtreeFlags=c.subtreeFlags&14680064),z!==null?_=Ca(z,_):(_=Dl(_,b,T,null),_.flags|=2),_.return=f,v.return=f,v.sibling=_,f.child=v,_}function g0(c,f,v,_){return _!==null&&dg(_),Xu(f,c.child,null,v),c=Mg(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function vx(c,f,v){c.lanes|=f;var _=c.alternate;_!==null&&(_.lanes|=f),sg(c.return,f,v)}function Rg(c,f,v,_,T){var b=c.memoizedState;b===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:v,tailMode:T}:(b.isBackwards=f,b.rendering=null,b.renderingStartTime=0,b.last=_,b.tail=v,b.tailMode=T)}function yx(c,f,v){var _=f.pendingProps,T=_.revealOrder,b=_.tail;if(Gi(c,f,_.children,v),_=xn.current,_&2)_=_&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&vx(c,v,f);else if(c.tag===19)vx(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}_&=1}if(yt(xn,_),!(f.mode&1))f.memoizedState=null;else switch(T){case"forwards":for(v=f.child,T=null;v!==null;)c=v.alternate,c!==null&&s0(c)===null&&(T=v),v=v.sibling;v=T,v===null?(T=f.child,f.child=null):(T=v.sibling,v.sibling=null),Rg(f,!1,T,v,b);break;case"backwards":for(v=null,T=f.child,f.child=null;T!==null;){if(c=T.alternate,c!==null&&s0(c)===null){f.child=T;break}c=T.sibling,T.sibling=v,v=T,T=c}Rg(f,!0,v,null,b);break;case"together":Rg(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Uo(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),Ju|=f.lanes,!(v&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(o(153));if(f.child!==null){for(c=f.child,v=Ca(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=Ca(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function tB(c,f,v){switch(f.tag){case 3:dx(f),Wu();break;case 5:Ny(f);break;case 1:Rn(f.type)&&Qu(f);break;case 4:pg(f,f.stateNode.containerInfo);break;case 10:xy(f,f.type._context,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(yt(xn,xn.current&1),f.flags|=128,null):v&f.child.childLanes?Ax(c,f,v):(yt(xn,xn.current&1),c=Uo(c,f,v),c!==null?c.sibling:null);yt(xn,xn.current&1);break;case 19:if(_=(v&f.childLanes)!==0,c.flags&128){if(_)return yx(c,f,v);f.flags|=128}var T=f.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),yt(xn,xn.current),_)break;return null;case 22:case 23:return f.lanes=0,cx(c,f,v)}return Uo(c,f,v)}function nB(c,f){switch(cg(f),f.tag){case 1:return Rn(f.type)&&ga(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Yu(),Jt(Wn),Jt(Jn),gg(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return Ag(f),null;case 13:if(Jt(xn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Wu()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Jt(xn),null;case 4:return Yu(),null;case 10:return rg(f.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var v0=!1,Rl=!1,iB=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function y0(c,f){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(_){nr(c,f,_)}else v.current=null}function bg(c,f,v){try{v()}catch(_){nr(c,f,_)}}var xx=!1;function rB(c,f){for(Q(c.containerInfo),Ue=f;Ue!==null;)if(c=Ue,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,Ue=f;else for(;Ue!==null;){c=Ue;try{var v=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,T=v.memoizedState,b=c.stateNode,z=b.getSnapshotBeforeUpdate(c.elementType===c.type?_:xs(c.type,_),T);b.__reactInternalSnapshotBeforeUpdate=z}break;case 3:De&&we(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(J){nr(c,c.return,J)}if(f=c.sibling,f!==null){f.return=c.return,Ue=f;break}Ue=c.return}return v=xx,xx=!1,v}function bl(c,f,v){var _=f.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var T=_=_.next;do{if((T.tag&c)===c){var b=T.destroy;T.destroy=void 0,b!==void 0&&bg(f,v,b)}T=T.next}while(T!==_)}}function af(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&c)===c){var _=v.create;v.destroy=_()}v=v.next}while(v!==f)}}function Bg(c){var f=c.ref;if(f!==null){var v=c.stateNode;switch(c.tag){case 5:c=$(v);break;default:c=v}typeof f=="function"?f(c):f.current=c}}function Ex(c,f,v){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(Yp,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var _=c=c.next;do{var T=_,b=T.destroy;T=T.tag,b!==void 0&&(T&2||T&4)&&bg(f,v,b),_=_.next}while(_!==c)}break;case 1:if(y0(f,v),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(z){nr(f,v,z)}break;case 5:y0(f,v);break;case 4:De?wx(c,f,v):W&&W&&(f=f.stateNode.containerInfo,v=Ut(f),dr(f,v))}}function Sx(c,f,v){for(var _=f;;)if(Ex(c,_,v),_.child===null||De&&_.tag===4){if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else _.child.return=_,_=_.child}function _x(c){var f=c.alternate;f!==null&&(c.alternate=null,_x(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Ze(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Cx(c){return c.tag===5||c.tag===3||c.tag===4}function Tx(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Cx(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ix(c){if(De){e:{for(var f=c.return;f!==null;){if(Cx(f))break e;f=f.return}throw Error(o(160))}var v=f;switch(v.tag){case 5:f=v.stateNode,v.flags&32&&(Tt(f),v.flags&=-33),v=Tx(c),Pg(c,v,f);break;case 3:case 4:f=v.stateNode.containerInfo,v=Tx(c),Lg(c,v,f);break;default:throw Error(o(161))}}}function Lg(c,f,v){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?ot(v,c,f):Xe(v,c);else if(_!==4&&(c=c.child,c!==null))for(Lg(c,f,v),c=c.sibling;c!==null;)Lg(c,f,v),c=c.sibling}function Pg(c,f,v){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?rt(v,c,f):Le(v,c);else if(_!==4&&(c=c.child,c!==null))for(Pg(c,f,v),c=c.sibling;c!==null;)Pg(c,f,v),c=c.sibling}function wx(c,f,v){for(var _=f,T=!1,b,z;;){if(!T){T=_.return;e:for(;;){if(T===null)throw Error(o(160));switch(b=T.stateNode,T.tag){case 5:z=!1;break e;case 3:b=b.containerInfo,z=!0;break e;case 4:b=b.containerInfo,z=!0;break e}T=T.return}T=!0}if(_.tag===5||_.tag===6)Sx(c,_,v),z?Ye(b,_.stateNode):qe(b,_.stateNode);else if(_.tag===18)z?at(b,_.stateNode):Ve(b,_.stateNode);else if(_.tag===4){if(_.child!==null){b=_.stateNode.containerInfo,z=!0,_.child.return=_,_=_.child;continue}}else if(Ex(c,_,v),_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return,_.tag===4&&(T=!1)}_.sibling.return=_.return,_=_.sibling}}function Dg(c,f){if(De){switch(f.tag){case 0:case 11:case 14:case 15:bl(3,f,f.return),af(3,f),bl(5,f,f.return);return;case 1:return;case 5:var v=f.stateNode;if(v!=null){var _=f.memoizedProps;c=c!==null?c.memoizedProps:_;var T=f.type,b=f.updateQueue;f.updateQueue=null,b!==null&&et(v,b,T,c,_,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));v=f.memoizedProps,be(f.stateNode,c!==null?c.memoizedProps:v,v);return;case 3:ve&&c!==null&&c.memoizedState.isDehydrated&&ee(f.stateNode.containerInfo);return;case 12:return;case 13:x0(f);return;case 19:x0(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:bl(3,f,f.return),af(3,f),bl(5,f,f.return);return;case 12:return;case 13:x0(f);return;case 19:x0(f);return;case 3:ve&&c!==null&&c.memoizedState.isDehydrated&&ee(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(W){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,dr(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function x0(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new iB),f.forEach(function(_){var T=pB.bind(null,c,_);v.has(_)||(v.add(_),_.then(T,T))})}}function sB(c,f){for(Ue=f;Ue!==null;){f=Ue;var v=f.deletions;if(v!==null)for(var _=0;_<v.length;_++){var T=v[_];try{var b=c;De?wx(b,T,f):Sx(b,T,f);var z=T.alternate;z!==null&&(z.return=null),T.return=null}catch(tt){nr(T,f,tt)}}if(v=f.child,f.subtreeFlags&12854&&v!==null)v.return=f,Ue=v;else for(;Ue!==null;){f=Ue;try{var J=f.flags;if(J&32&&De&&Tt(f.stateNode),J&512){var ce=f.alternate;if(ce!==null){var Me=ce.ref;Me!==null&&(typeof Me=="function"?Me(null):Me.current=null)}}if(J&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var We=f.alternate;(We===null||We.memoizedState===null)&&(Gg=li())}break;case 22:var _t=f.memoizedState!==null,lt=f.alternate,tn=lt!==null&&lt.memoizedState!==null;if(v=f,De){e:if(_=v,T=_t,b=null,De)for(var nt=_;;){if(nt.tag===5){if(b===null){b=nt;var Bi=nt.stateNode;T?Gt(Bi):Be(nt.stateNode,nt.memoizedProps)}}else if(nt.tag===6){if(b===null){var Yr=nt.stateNode;T?K(Yr):ie(Yr,nt.memoizedProps)}}else if((nt.tag!==22&&nt.tag!==23||nt.memoizedState===null||nt===_)&&nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===_)break;for(;nt.sibling===null;){if(nt.return===null||nt.return===_)break e;b===nt&&(b=null),nt=nt.return}b===nt&&(b=null),nt.sibling.return=nt.return,nt=nt.sibling}}if(_t&&!tn&&v.mode&1){Ue=v;for(var te=v.child;te!==null;){for(v=Ue=te;Ue!==null;){_=Ue;var Z=_.child;switch(_.tag){case 0:case 11:case 14:case 15:bl(4,_,_.return);break;case 1:y0(_,_.return);var se=_.stateNode;if(typeof se.componentWillUnmount=="function"){var ke=_.return;try{se.props=_.memoizedProps,se.state=_.memoizedState,se.componentWillUnmount()}catch(tt){nr(_,ke,tt)}}break;case 5:y0(_,_.return);break;case 22:if(_.memoizedState!==null){bx(v);continue}}Z!==null?(Z.return=_,Ue=Z):bx(v)}te=te.sibling}}}switch(J&4102){case 2:Ix(f),f.flags&=-3;break;case 6:Ix(f),f.flags&=-3,Dg(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Dg(f.alternate,f);break;case 4:Dg(f.alternate,f)}}catch(tt){nr(f,f.return,tt)}if(v=f.sibling,v!==null){v.return=f.return,Ue=v;break}Ue=f.return}}}function oB(c,f,v){Ue=c,Mx(c)}function Mx(c,f,v){for(var _=(c.mode&1)!==0;Ue!==null;){var T=Ue,b=T.child;if(T.tag===22&&_){var z=T.memoizedState!==null||v0;if(!z){var J=T.alternate,ce=J!==null&&J.memoizedState!==null||Rl;J=v0;var Me=Rl;if(v0=z,(Rl=ce)&&!Me)for(Ue=T;Ue!==null;)z=Ue,ce=z.child,z.tag===22&&z.memoizedState!==null?Bx(T):ce!==null?(ce.return=z,Ue=ce):Bx(T);for(;b!==null;)Ue=b,Mx(b),b=b.sibling;Ue=T,v0=J,Rl=Me}Rx(c)}else T.subtreeFlags&8772&&b!==null?(b.return=T,Ue=b):Rx(c)}}function Rx(c){for(;Ue!==null;){var f=Ue;if(f.flags&8772){var v=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Rl||af(5,f);break;case 1:var _=f.stateNode;if(f.flags&4&&!Rl)if(v===null)_.componentDidMount();else{var T=f.elementType===f.type?v.memoizedProps:xs(f.type,v.memoizedProps);_.componentDidUpdate(T,v.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var b=f.updateQueue;b!==null&&_y(f,b,_);break;case 3:var z=f.updateQueue;if(z!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=$(f.child.stateNode);break;case 1:v=f.child.stateNode}_y(f,z,v)}break;case 5:var J=f.stateNode;v===null&&f.flags&4&&he(J,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(ve&&f.memoizedState===null){var ce=f.alternate;if(ce!==null){var Me=ce.memoizedState;if(Me!==null){var We=Me.dehydrated;We!==null&&pe(We)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Rl||f.flags&512&&Bg(f)}catch(_t){nr(f,f.return,_t)}}if(f===c){Ue=null;break}if(v=f.sibling,v!==null){v.return=f.return,Ue=v;break}Ue=f.return}}function bx(c){for(;Ue!==null;){var f=Ue;if(f===c){Ue=null;break}var v=f.sibling;if(v!==null){v.return=f.return,Ue=v;break}Ue=f.return}}function Bx(c){for(;Ue!==null;){var f=Ue;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{af(4,f)}catch(ce){nr(f,v,ce)}break;case 1:var _=f.stateNode;if(typeof _.componentDidMount=="function"){var T=f.return;try{_.componentDidMount()}catch(ce){nr(f,T,ce)}}var b=f.return;try{Bg(f)}catch(ce){nr(f,b,ce)}break;case 5:var z=f.return;try{Bg(f)}catch(ce){nr(f,z,ce)}}}catch(ce){nr(f,f.return,ce)}if(f===c){Ue=null;break}var J=f.sibling;if(J!==null){J.return=f.return,Ue=J;break}Ue=f.return}}var E0=0,S0=1,_0=2,C0=3,T0=4;if(typeof Symbol=="function"&&Symbol.for){var lf=Symbol.for;E0=lf("selector.component"),S0=lf("selector.has_pseudo_class"),_0=lf("selector.role"),C0=lf("selector.test_id"),T0=lf("selector.text")}function Ng(c){var f=Ae(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(c=Mt(c),c===null)throw Error(o(362));return c.stateNode.current}function Fg(c,f){switch(f.$$typeof){case E0:if(c.type===f.value)return!0;break;case S0:e:{f=f.value,c=[c,0];for(var v=0;v<c.length;){var _=c[v++],T=c[v++],b=f[T];if(_.tag!==5||!N(_)){for(;b!=null&&Fg(_,b);)T++,b=f[T];if(T===f.length){f=!0;break e}else for(_=_.child;_!==null;)c.push(_,T),_=_.sibling}}f=!1}return f;case _0:if(c.tag===5&&ue(c.stateNode,f.value))return!0;break;case T0:if((c.tag===5||c.tag===6)&&(c=H(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case C0:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ug(c){switch(c.$$typeof){case E0:return"<"+(w(c.value)||"Unknown")+">";case S0:return":has("+(Ug(c)||"")+")";case _0:return'[role="'+c.value+'"]';case T0:return'"'+c.value+'"';case C0:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function Lx(c,f){var v=[];c=[c,0];for(var _=0;_<c.length;){var T=c[_++],b=c[_++],z=f[b];if(T.tag!==5||!N(T)){for(;z!=null&&Fg(T,z);)b++,z=f[b];if(b===f.length)v.push(T);else for(T=T.child;T!==null;)c.push(T,b),T=T.sibling}}return v}function Og(c,f){if(!st)throw Error(o(363));c=Ng(c),c=Lx(c,f),f=[],c=Array.from(c);for(var v=0;v<c.length;){var _=c[v++];if(_.tag===5)N(_)||f.push(_.stateNode);else for(_=_.child;_!==null;)c.push(_),_=_.sibling}return f}var aB=Math.ceil,I0=a.ReactCurrentDispatcher,kg=a.ReactCurrentOwner,Qn=a.ReactCurrentBatchConfig,Dt=0,Xn=null,qn=null,gi=0,xr=0,ju=St(0),Zn=0,uf=null,Ju=0,w0=0,Qg=0,cf=null,er=null,Gg=0,zg=1/0;function Zu(){zg=li()+500}var M0=!1,Hg=null,xa=null,R0=!1,Ea=null,b0=0,hf=0,Vg=null,B0=-1,L0=0;function zi(){return Dt&6?li():B0!==-1?B0:B0=li()}function Sa(c){return c.mode&1?Dt&2&&gi!==0?gi&-gi:Hb.transition!==null?(L0===0&&(c=Wp,Wp<<=1,!(Wp&4194240)&&(Wp=64),L0=c),L0):(c=Xt,c!==0?c:ye()):1}function Xr(c,f,v){if(50<hf)throw hf=0,Vg=null,Error(o(185));var _=P0(c,f);return _===null?null:(qh(_,f,v),(!(Dt&2)||_!==Xn)&&(_===Xn&&(!(Dt&2)&&(w0|=f),Zn===4&&_a(_,gi)),tr(_,v),f===1&&Dt===0&&!(c.mode&1)&&(Zu(),Kp&&eo())),_)}function P0(c,f){c.lanes|=f;var v=c.alternate;for(v!==null&&(v.lanes|=f),v=c,c=c.return;c!==null;)c.childLanes|=f,v=c.alternate,v!==null&&(v.childLanes|=f),v=c,c=c.return;return v.tag===3?v.stateNode:null}function tr(c,f){var v=c.callbackNode;Db(c,f);var _=qp(c,c===Xn?gi:0);if(_===0)v!==null&&vy(v),c.callbackNode=null,c.callbackPriority=0;else if(f=_&-_,c.callbackPriority!==f){if(v!=null&&vy(v),f===1)c.tag===0?zb(Dx.bind(null,c)):yy(Dx.bind(null,c)),Qe?Ge(function(){Dt===0&&eo()}):Z2($2,eo),v=null;else{switch(gy(_)){case 1:v=$2;break;case 4:v=Ob;break;case 16:v=eg;break;case 536870912:v=kb;break;default:v=eg}v=Hx(v,Px.bind(null,c))}c.callbackPriority=f,c.callbackNode=v}}function Px(c,f){if(B0=-1,L0=0,Dt&6)throw Error(o(327));var v=c.callbackNode;if(Pl()&&c.callbackNode!==v)return null;var _=qp(c,c===Xn?gi:0);if(_===0)return null;if(_&30||_&c.expiredLanes||f)f=D0(c,_);else{f=_;var T=Dt;Dt|=2;var b=Ux();(Xn!==c||gi!==f)&&(Zu(),Bl(c,f));do try{cB();break}catch(J){Fx(c,J)}while(1);ig(),I0.current=b,Dt=T,qn!==null?f=0:(Xn=null,gi=0,f=Zn)}if(f!==0){if(f===2&&(T=K2(c),T!==0&&(_=T,f=Wg(c,T))),f===1)throw v=uf,Bl(c,0),_a(c,_),tr(c,li()),v;if(f===6)_a(c,_);else{if(T=c.current.alternate,!(_&30)&&!lB(T)&&(f=D0(c,_),f===2&&(b=K2(c),b!==0&&(_=b,f=Wg(c,b))),f===1))throw v=uf,Bl(c,0),_a(c,_),tr(c,li()),v;switch(c.finishedWork=T,c.finishedLanes=_,f){case 0:case 1:throw Error(o(345));case 2:Ll(c,er);break;case 3:if(_a(c,_),(_&130023424)===_&&(f=Gg+500-li(),10<f)){if(qp(c,0)!==0)break;if(T=c.suspendedLanes,(T&_)!==_){zi(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Ie(Ll.bind(null,c,er),f);break}Ll(c,er);break;case 4:if(_a(c,_),(_&4194240)===_)break;for(f=c.eventTimes,T=-1;0<_;){var z=31-ys(_);b=1<<z,z=f[z],z>T&&(T=z),_&=~b}if(_=T,_=li()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*aB(_/1960))-_,10<_){c.timeoutHandle=Ie(Ll.bind(null,c,er),_);break}Ll(c,er);break;case 5:Ll(c,er);break;default:throw Error(o(329))}}}return tr(c,li()),c.callbackNode===v?Px.bind(null,c):null}function Wg(c,f){var v=cf;return c.current.memoizedState.isDehydrated&&(Bl(c,f).flags|=256),c=D0(c,f),c!==2&&(f=er,er=v,f!==null&&Xg(f)),c}function Xg(c){er===null?er=c:er.push.apply(er,c)}function lB(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var _=0;_<v.length;_++){var T=v[_],b=T.getSnapshot;T=T.value;try{if(!$s(b(),T))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function _a(c,f){for(f&=~Qg,f&=~w0,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-ys(f),_=1<<v;c[v]=-1,f&=~_}}function Dx(c){if(Dt&6)throw Error(o(327));Pl();var f=qp(c,0);if(!(f&1))return tr(c,li()),null;var v=D0(c,f);if(c.tag!==0&&v===2){var _=K2(c);_!==0&&(f=_,v=Wg(c,_))}if(v===1)throw v=uf,Bl(c,0),_a(c,f),tr(c,li()),v;if(v===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Ll(c,er),tr(c,li()),null}function Nx(c){Ea!==null&&Ea.tag===0&&!(Dt&6)&&Pl();var f=Dt;Dt|=1;var v=Qn.transition,_=Xt;try{if(Qn.transition=null,Xt=1,c)return c()}finally{Xt=_,Qn.transition=v,Dt=f,!(Dt&6)&&eo()}}function qg(){xr=ju.current,Jt(ju)}function Bl(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==$e&&(c.timeoutHandle=$e,Ne(v)),qn!==null)for(v=qn.return;v!==null;){var _=v;switch(cg(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&ga();break;case 3:Yu(),Jt(Wn),Jt(Jn),gg();break;case 5:Ag(_);break;case 4:Yu();break;case 13:Jt(xn);break;case 19:Jt(xn);break;case 10:rg(_.type._context);break;case 22:case 23:qg()}v=v.return}if(Xn=c,qn=c=Ca(c.current,null),gi=xr=f,Zn=0,uf=null,Qg=w0=Ju=0,er=cf=null,to!==null){for(f=0;f<to.length;f++)if(v=to[f],_=v.interleaved,_!==null){v.interleaved=null;var T=_.next,b=v.pending;if(b!==null){var z=b.next;b.next=T,_.next=z}v.pending=_}to=null}return c}function Fx(c,f){do{var v=qn;try{if(ig(),o0.current=f0,a0){for(var _=bn.memoizedState;_!==null;){var T=_.queue;T!==null&&(T.pending=null),_=_.next}a0=!1}if(Ku=0,ui=Mi=bn=null,$h=!1,ef=0,kg.current=null,v===null||v.return===null){Zn=1,uf=f,qn=null;break}e:{var b=c,z=v.return,J=v,ce=f;if(f=gi,J.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Me=ce,We=J,_t=We.tag;if(!(We.mode&1)&&(_t===0||_t===11||_t===15)){var lt=We.alternate;lt?(We.updateQueue=lt.updateQueue,We.memoizedState=lt.memoizedState,We.lanes=lt.lanes):(We.updateQueue=null,We.memoizedState=null)}var tn=ix(z);if(tn!==null){tn.flags&=-257,rx(tn,z,J,b,f),tn.mode&1&&nx(b,Me,f),f=tn,ce=Me;var nt=f.updateQueue;if(nt===null){var Bi=new Set;Bi.add(ce),f.updateQueue=Bi}else nt.add(ce);break e}else{if(!(f&1)){nx(b,Me,f),Yg();break e}ce=Error(o(426))}}else if(gn&&J.mode&1){var Yr=ix(z);if(Yr!==null){!(Yr.flags&65536)&&(Yr.flags|=256),rx(Yr,z,J,b,f),dg(ce);break e}}b=ce,Zn!==4&&(Zn=2),cf===null?cf=[b]:cf.push(b),ce=Cg(ce,J),J=z;do{switch(J.tag){case 3:J.flags|=65536,f&=-f,J.lanes|=f;var te=ex(J,ce,f);Sy(J,te);break e;case 1:b=ce;var Z=J.type,se=J.stateNode;if(!(J.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(xa===null||!xa.has(se)))){J.flags|=65536,f&=-f,J.lanes|=f;var ke=tx(J,b,f);Sy(J,ke);break e}}J=J.return}while(J!==null)}kx(v)}catch(tt){f=tt,qn===v&&v!==null&&(qn=v=v.return);continue}break}while(1)}function Ux(){var c=I0.current;return I0.current=f0,c===null?f0:c}function Yg(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),Xn===null||!(Ju&268435455)&&!(w0&268435455)||_a(Xn,gi)}function D0(c,f){var v=Dt;Dt|=2;var _=Ux();Xn===c&&gi===f||Bl(c,f);do try{uB();break}catch(T){Fx(c,T)}while(1);if(ig(),Dt=v,I0.current=_,qn!==null)throw Error(o(261));return Xn=null,gi=0,Zn}function uB(){for(;qn!==null;)Ox(qn)}function cB(){for(;qn!==null&&!Fb();)Ox(qn)}function Ox(c){var f=zx(c.alternate,c,xr);c.memoizedProps=c.pendingProps,f===null?kx(c):qn=f,kg.current=null}function kx(c){var f=c;do{var v=f.alternate;if(c=f.return,f.flags&32768){if(v=nB(v,f),v!==null){v.flags&=32767,qn=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Zn=6,qn=null;return}}else if(v=$b(v,f,xr),v!==null){qn=v;return}if(f=f.sibling,f!==null){qn=f;return}qn=f=c}while(f!==null);Zn===0&&(Zn=5)}function Ll(c,f){var v=Xt,_=Qn.transition;try{Qn.transition=null,Xt=1,hB(c,f,v)}finally{Qn.transition=_,Xt=v}return null}function hB(c,f,v){do Pl();while(Ea!==null);if(Dt&6)throw Error(o(327));var _=c.finishedWork,T=c.finishedLanes;if(_===null)return null;if(c.finishedWork=null,c.finishedLanes=0,_===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var b=_.lanes|_.childLanes;if(Nb(c,b),c===Xn&&(qn=Xn=null,gi=0),!(_.subtreeFlags&2064)&&!(_.flags&2064)||R0||(R0=!0,Hx(eg,function(){return Pl(),null})),b=(_.flags&15990)!==0,_.subtreeFlags&15990||b){b=Qn.transition,Qn.transition=null;var z=Xt;Xt=1;var J=Dt;Dt|=4,kg.current=null,rB(c,_),sB(c,_),U(c.containerInfo),c.current=_,oB(_),Ub(),Dt=J,Xt=z,Qn.transition=b}else c.current=_;if(R0&&(R0=!1,Ea=c,b0=T),b=c.pendingLanes,b===0&&(xa=null),Qb(_.stateNode),tr(c,li()),f!==null)for(v=c.onRecoverableError,_=0;_<f.length;_++)v(f[_]);if(M0)throw M0=!1,c=Hg,Hg=null,c;return b0&1&&c.tag!==0&&Pl(),b=c.pendingLanes,b&1?c===Vg?hf++:(hf=0,Vg=c):hf=0,eo(),null}function Pl(){if(Ea!==null){var c=gy(b0),f=Qn.transition,v=Xt;try{if(Qn.transition=null,Xt=16>c?16:c,Ea===null)var _=!1;else{if(c=Ea,Ea=null,b0=0,Dt&6)throw Error(o(331));var T=Dt;for(Dt|=4,Ue=c.current;Ue!==null;){var b=Ue,z=b.child;if(Ue.flags&16){var J=b.deletions;if(J!==null){for(var ce=0;ce<J.length;ce++){var Me=J[ce];for(Ue=Me;Ue!==null;){var We=Ue;switch(We.tag){case 0:case 11:case 15:bl(8,We,b)}var _t=We.child;if(_t!==null)_t.return=We,Ue=_t;else for(;Ue!==null;){We=Ue;var lt=We.sibling,tn=We.return;if(_x(We),We===Me){Ue=null;break}if(lt!==null){lt.return=tn,Ue=lt;break}Ue=tn}}}var nt=b.alternate;if(nt!==null){var Bi=nt.child;if(Bi!==null){nt.child=null;do{var Yr=Bi.sibling;Bi.sibling=null,Bi=Yr}while(Bi!==null)}}Ue=b}}if(b.subtreeFlags&2064&&z!==null)z.return=b,Ue=z;else e:for(;Ue!==null;){if(b=Ue,b.flags&2048)switch(b.tag){case 0:case 11:case 15:bl(9,b,b.return)}var te=b.sibling;if(te!==null){te.return=b.return,Ue=te;break e}Ue=b.return}}var Z=c.current;for(Ue=Z;Ue!==null;){z=Ue;var se=z.child;if(z.subtreeFlags&2064&&se!==null)se.return=z,Ue=se;else e:for(z=Z;Ue!==null;){if(J=Ue,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:af(9,J)}}catch(tt){nr(J,J.return,tt)}if(J===z){Ue=null;break e}var ke=J.sibling;if(ke!==null){ke.return=J.return,Ue=ke;break e}Ue=J.return}}if(Dt=T,eo(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(Yp,c)}catch{}_=!0}return _}finally{Xt=v,Qn.transition=f}}return!1}function Qx(c,f,v){f=Cg(v,f),f=ex(c,f,1),ya(c,f),f=zi(),c=P0(c,1),c!==null&&(qh(c,1,f),tr(c,f))}function nr(c,f,v){if(c.tag===3)Qx(c,c,v);else for(;f!==null;){if(f.tag===3){Qx(f,c,v);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(xa===null||!xa.has(_))){c=Cg(v,c),c=tx(f,c,1),ya(f,c),c=zi(),f=P0(f,1),f!==null&&(qh(f,1,c),tr(f,c));break}}f=f.return}}function fB(c,f,v){var _=c.pingCache;_!==null&&_.delete(f),f=zi(),c.pingedLanes|=c.suspendedLanes&v,Xn===c&&(gi&v)===v&&(Zn===4||Zn===3&&(gi&130023424)===gi&&500>li()-Gg?Bl(c,0):Qg|=v),tr(c,f)}function Gx(c,f){f===0&&(c.mode&1?(f=Xp,Xp<<=1,!(Xp&130023424)&&(Xp=4194304)):f=1);var v=zi();c=P0(c,f),c!==null&&(qh(c,f,v),tr(c,v))}function dB(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),Gx(c,v)}function pB(c,f){var v=0;switch(c.tag){case 13:var _=c.stateNode,T=c.memoizedState;T!==null&&(v=T.retryLane);break;case 19:_=c.stateNode;break;default:throw Error(o(314))}_!==null&&_.delete(f),Gx(c,v)}var zx;zx=function(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps||Wn.current)yr=!0;else{if(!(c.lanes&v)&&!(f.flags&128))return yr=!1,tB(c,f,v);yr=!!(c.flags&131072)}else yr=!1,gn&&f.flags&1048576&&My(f,i0,f.index);switch(f.lanes=0,f.tag){case 2:var _=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var T=Mn(f,Jn.current);zu(f,v),T=yg(null,f,_,c,T,v);var b=xg();return f.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Rn(_)?(b=!0,Qu(f)):b=!1,f.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,og(f),T.updater=t0,f.stateNode=T,T._reactInternals=f,lg(f,_,c,v),f=wg(null,f,_,!0,b,v)):(f.tag=0,gn&&b&&ug(f),Gi(null,f,T,v),f=f.child),f;case 16:_=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,T=_._init,_=T(_._payload),f.type=_,T=f.tag=mB(_),c=xs(_,c),T){case 0:f=Ig(null,f,_,c,v);break e;case 1:f=fx(null,f,_,c,v);break e;case 11:f=ax(null,f,_,c,v);break e;case 14:f=lx(null,f,_,xs(_.type,c),v);break e}throw Error(o(306,_,""))}return f;case 0:return _=f.type,T=f.pendingProps,T=f.elementType===_?T:xs(_,T),Ig(c,f,_,T,v);case 1:return _=f.type,T=f.pendingProps,T=f.elementType===_?T:xs(_,T),fx(c,f,_,T,v);case 3:e:{if(dx(f),c===null)throw Error(o(387));_=f.pendingProps,b=f.memoizedState,T=b.element,Ey(c,f),e0(f,_,null,v);var z=f.memoizedState;if(_=z.element,ve&&b.isDehydrated)if(b={element:_,isDehydrated:!1,cache:z.cache,transitions:z.transitions},f.updateQueue.baseState=b,f.memoizedState=b,f.flags&256){T=Error(o(423)),f=px(c,f,_,v,T);break e}else if(_!==T){T=Error(o(424)),f=px(c,f,_,v,T);break e}else for(ve&&(vr=X2(f.stateNode.containerInfo),gr=f,gn=!0,Es=null,Yh=!1),v=Dy(f,null,_,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Wu(),_===T){f=Uo(c,f,v);break e}Gi(c,f,_,v)}f=f.child}return f;case 5:return Ny(f),c===null&&fg(f),_=f.type,T=f.pendingProps,b=c!==null?c.memoizedProps:null,z=T.children,xe(_,T)?z=null:b!==null&&xe(_,b)&&(f.flags|=32),hx(c,f),Gi(c,f,z,v),f.child;case 6:return c===null&&fg(f),null;case 13:return Ax(c,f,v);case 4:return pg(f,f.stateNode.containerInfo),_=f.pendingProps,c===null?f.child=Xu(f,null,_,v):Gi(c,f,_,v),f.child;case 11:return _=f.type,T=f.pendingProps,T=f.elementType===_?T:xs(_,T),ax(c,f,_,T,v);case 7:return Gi(c,f,f.pendingProps,v),f.child;case 8:return Gi(c,f,f.pendingProps.children,v),f.child;case 12:return Gi(c,f,f.pendingProps.children,v),f.child;case 10:e:{if(_=f.type._context,T=f.pendingProps,b=f.memoizedProps,z=T.value,xy(f,_,z),b!==null)if($s(b.value,z)){if(b.children===T.children&&!Wn.current){f=Uo(c,f,v);break e}}else for(b=f.child,b!==null&&(b.return=f);b!==null;){var J=b.dependencies;if(J!==null){z=b.child;for(var ce=J.firstContext;ce!==null;){if(ce.context===_){if(b.tag===1){ce=Po(-1,v&-v),ce.tag=2;var Me=b.updateQueue;if(Me!==null){Me=Me.shared;var We=Me.pending;We===null?ce.next=ce:(ce.next=We.next,We.next=ce),Me.pending=ce}}b.lanes|=v,ce=b.alternate,ce!==null&&(ce.lanes|=v),sg(b.return,v,f),J.lanes|=v;break}ce=ce.next}}else if(b.tag===10)z=b.type===f.type?null:b.child;else if(b.tag===18){if(z=b.return,z===null)throw Error(o(341));z.lanes|=v,J=z.alternate,J!==null&&(J.lanes|=v),sg(z,v,f),z=b.sibling}else z=b.child;if(z!==null)z.return=b;else for(z=b;z!==null;){if(z===f){z=null;break}if(b=z.sibling,b!==null){b.return=z.return,z=b;break}z=z.return}b=z}Gi(c,f,T.children,v),f=f.child}return f;case 9:return T=f.type,_=f.pendingProps.children,zu(f,v),T=Gr(T),_=_(T),f.flags|=1,Gi(c,f,_,v),f.child;case 14:return _=f.type,T=xs(_,f.pendingProps),T=xs(_.type,T),lx(c,f,_,T,v);case 15:return ux(c,f,f.type,f.pendingProps,v);case 17:return _=f.type,T=f.pendingProps,T=f.elementType===_?T:xs(_,T),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Rn(_)?(c=!0,Qu(f)):c=!1,zu(f,v),Iy(f,_,T),lg(f,_,T,v),wg(null,f,_,!0,c,v);case 19:return yx(c,f,v);case 22:return cx(c,f,v)}throw Error(o(156,f.tag))};function Hx(c,f){return Z2(c,f)}function AB(c,f,v,_){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(c,f,v,_){return new AB(c,f,v,_)}function Kg(c){return c=c.prototype,!(!c||!c.isReactComponent)}function mB(c){if(typeof c=="function")return Kg(c)?1:0;if(c!=null){if(c=c.$$typeof,c===S)return 11;if(c===x)return 14}return 2}function Ca(c,f){var v=c.alternate;return v===null?(v=qr(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function N0(c,f,v,_,T,b){var z=2;if(_=c,typeof c=="function")Kg(c)&&(z=1);else if(typeof c=="string")z=5;else e:switch(c){case h:return Dl(v.children,T,b,f);case d:z=8,T|=8;break;case p:return c=qr(12,v,f,T|2),c.elementType=p,c.lanes=b,c;case E:return c=qr(13,v,f,T),c.elementType=E,c.lanes=b,c;case m:return c=qr(19,v,f,T),c.elementType=m,c.lanes=b,c;case C:return F0(v,T,b,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case A:z=10;break e;case g:z=9;break e;case S:z=11;break e;case x:z=14;break e;case y:z=16,_=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return f=qr(z,v,f,T),f.elementType=c,f.type=_,f.lanes=b,f}function Dl(c,f,v,_){return c=qr(7,c,_,f),c.lanes=v,c}function F0(c,f,v,_){return c=qr(22,c,_,f),c.elementType=C,c.lanes=v,c.stateNode={},c}function jg(c,f,v){return c=qr(6,c,null,f),c.lanes=v,c}function Jg(c,f,v){return f=qr(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function gB(c,f,v,_,T){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$e,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=j2(0),this.expirationTimes=j2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j2(0),this.identifierPrefix=_,this.onRecoverableError=T,ve&&(this.mutableSourceEagerHydrationData=null)}function Vx(c,f,v,_,T,b,z,J,ce){return c=new gB(c,f,v,J,ce),f===1?(f=1,b===!0&&(f|=8)):f=0,b=qr(3,null,null,f),c.current=b,b.stateNode=c,b.memoizedState={element:_,isDehydrated:v,cache:null,transitions:null},og(b),c}function Wx(c){if(!c)return Ii;c=c._reactInternals;e:{if(R(c)!==c||c.tag!==1)throw Error(o(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Rn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(c.tag===1){var v=c.type;if(Rn(v))return ku(c,v,f)}return f}function Xx(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=X(f),c===null?null:c.stateNode}function qx(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function Zg(c,f){qx(c,f),(c=c.alternate)&&qx(c,f)}function vB(c){return c=X(c),c===null?null:c.stateNode}function yB(){return null}return n.attemptContinuousHydration=function(c){if(c.tag===13){var f=zi();Xr(c,134217728,f),Zg(c,134217728)}},n.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=zi(),v=Sa(c);Xr(c,v,f),Zg(c,v)}},n.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var v=Xh(f.pendingLanes);v!==0&&(J2(f,v|1),tr(f,li()),!(Dt&6)&&(Zu(),eo()))}break;case 13:var _=zi();Nx(function(){return Xr(c,1,_)}),Zg(c,1)}},n.batchedUpdates=function(c,f){var v=Dt;Dt|=1;try{return c(f)}finally{Dt=v,Dt===0&&(Zu(),Kp&&eo())}},n.createComponentSelector=function(c){return{$$typeof:E0,value:c}},n.createContainer=function(c,f,v,_,T,b,z){return Vx(c,f,!1,null,v,_,T,b,z)},n.createHasPseudoClassSelector=function(c){return{$$typeof:S0,value:c}},n.createHydrationContainer=function(c,f,v,_,T,b,z,J,ce){return c=Vx(v,_,!0,c,T,b,z,J,ce),c.context=Wx(null),v=c.current,_=zi(),T=Sa(v),b=Po(_,T),b.callback=f??null,ya(v,b),c.current.lanes=T,qh(c,T,_),tr(c,_),c},n.createPortal=function(c,f,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:_==null?null:""+_,children:c,containerInfo:f,implementation:v}},n.createRoleSelector=function(c){return{$$typeof:_0,value:c}},n.createTestNameSelector=function(c){return{$$typeof:C0,value:c}},n.createTextSelector=function(c){return{$$typeof:T0,value:c}},n.deferredUpdates=function(c){var f=Xt,v=Qn.transition;try{return Qn.transition=null,Xt=16,c()}finally{Xt=f,Qn.transition=v}},n.discreteUpdates=function(c,f,v,_,T){var b=Xt,z=Qn.transition;try{return Qn.transition=null,Xt=1,c(f,v,_,T)}finally{Xt=b,Qn.transition=z,Dt===0&&Zu()}},n.findAllNodes=Og,n.findBoundingRects=function(c,f){if(!st)throw Error(o(363));f=Og(c,f),c=[];for(var v=0;v<f.length;v++)c.push($t(f[v]));for(f=c.length-1;0<f;f--){v=c[f];for(var _=v.x,T=_+v.width,b=v.y,z=b+v.height,J=f-1;0<=J;J--)if(f!==J){var ce=c[J],Me=ce.x,We=Me+ce.width,_t=ce.y,lt=_t+ce.height;if(_>=Me&&b>=_t&&T<=We&&z<=lt){c.splice(f,1);break}else if(_!==Me||v.width!==ce.width||lt<b||_t>z){if(!(b!==_t||v.height!==ce.height||We<_||Me>T)){Me>_&&(ce.width+=Me-_,ce.x=_),We<T&&(ce.width=T-Me),c.splice(f,1);break}}else{_t>b&&(ce.height+=_t-b,ce.y=b),lt<z&&(ce.height=z-_t),c.splice(f,1);break}}}return c},n.findHostInstance=Xx,n.findHostInstanceWithNoPortals=function(c){return c=F(c),c=c!==null?q(c):null,c===null?null:c.stateNode},n.findHostInstanceWithWarning=function(c){return Xx(c)},n.flushControlled=function(c){var f=Dt;Dt|=1;var v=Qn.transition,_=Xt;try{Qn.transition=null,Xt=1,c()}finally{Xt=_,Qn.transition=v,Dt=f,Dt===0&&(Zu(),eo())}},n.flushPassiveEffects=Pl,n.flushSync=Nx,n.focusWithin=function(c,f){if(!st)throw Error(o(363));for(c=Ng(c),f=Lx(c,f),f=Array.from(f),c=0;c<f.length;){var v=f[c++];if(!N(v)){if(v.tag===5&&_e(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Xt},n.getFindAllNodesFailureDescription=function(c,f){if(!st)throw Error(o(363));var v=0,_=[];c=[Ng(c),0];for(var T=0;T<c.length;){var b=c[T++],z=c[T++],J=f[z];if((b.tag!==5||!N(b))&&(Fg(b,J)&&(_.push(Ug(J)),z++,z>v&&(v=z)),z<f.length))for(b=b.child;b!==null;)c.push(b,z),b=b.sibling}if(v<f.length){for(c=[];v<f.length;v++)c.push(Ug(f[v]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},n.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return $(c.child.stateNode);default:return c.child.stateNode}},n.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:vB,findFiberByHostInstance:c.findFiberByHostInstance||yB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Yp=f.inject(c),Zs=f}catch{}c=!!f.checkDCE}}return c},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(c,f,v,_){if(!st)throw Error(o(363));c=Og(c,f);var T=Ce(c,v,_).disconnect;return{disconnect:function(){T()}}},n.registerMutableSourceForHydration=function(c,f){var v=f._getVersion;v=v(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,v]:c.mutableSourceEagerHydrationData.push(f,v)},n.runWithPriority=function(c,f){var v=Xt;try{return Xt=c,f()}finally{Xt=v}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(c,f,v,_){var T=f.current,b=zi(),z=Sa(T);return v=Wx(v),f.context===null?f.context=v:f.pendingContext=v,f=Po(b,z),f.payload={element:c},_=_===void 0?null:_,_!==null&&(f.callback=_),ya(T,f),c=Xr(T,z,b),c!==null&&$p(c,T,z),z},n};Jw.exports=DG;var NG=Jw.exports;const FG=X6(NG);var Zw={exports:{}},$w={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,Q){var U=P.length;P.push(Q);e:for(;0<U;){var O=U-1>>>1,V=P[O];if(0<r(V,Q))P[O]=Q,P[U]=V,U=O;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var Q=P[0],U=P.pop();if(U!==Q){P[0]=U;e:for(var O=0,V=P.length,me=V>>>1;O<me;){var re=2*(O+1)-1,xe=P[re],ge=re+1,Ie=P[ge];if(0>r(xe,U))ge<V&&0>r(Ie,xe)?(P[O]=Ie,P[ge]=U,O=ge):(P[O]=xe,P[re]=U,O=re);else if(ge<V&&0>r(Ie,U))P[O]=Ie,P[ge]=U,O=ge;else break e}}return Q}function r(P,Q){var U=P.sortIndex-Q.sortIndex;return U!==0?U:P.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,A=!1,g=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var Q=n(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=P)i(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function C(P){if(S=!1,y(P),!g)if(n(l)!==null)g=!0,$(I);else{var Q=n(u);Q!==null&&j(C,Q.startTime-P)}}function I(P,Q){g=!1,S&&(S=!1,m(L),L=-1),A=!0;var U=p;try{for(y(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||P&&!F());){var O=d.callback;if(typeof O=="function"){d.callback=null,p=d.priorityLevel;var V=O(d.expirationTime<=Q);Q=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&i(l),y(Q)}else i(l);d=n(l)}if(d!==null)var me=!0;else{var re=n(u);re!==null&&j(C,re.startTime-Q),me=!1}return me}finally{d=null,p=U,A=!1}}var M=!1,w=null,L=-1,R=5,B=-1;function F(){return!(t.unstable_now()-B<R)}function X(){if(w!==null){var P=t.unstable_now();B=P;var Q=!0;try{Q=w(!0,P)}finally{Q?G():(M=!1,w=null)}}else M=!1}var G;if(typeof x=="function")G=function(){x(X)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Y=q.port2;q.port1.onmessage=X,G=function(){Y.postMessage(null)}}else G=function(){E(X,0)};function $(P){w=P,M||(M=!0,G())}function j(P,Q){L=E(function(){P(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||A||(g=!0,$(I))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var U=p;p=Q;try{return P()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,Q){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=p;p=P;try{return Q()}finally{p=U}},t.unstable_scheduleCallback=function(P,Q,U){var O=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?O+U:O):U=O,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,P={id:h++,callback:Q,priorityLevel:P,startTime:U,expirationTime:V,sortIndex:-1},U>O?(P.sortIndex=U,e(u,P),n(l)===null&&P===n(u)&&(S?(m(L),L=-1):S=!0,j(C,U-O))):(P.sortIndex=V,e(l,P),g||A||(g=!0,$(I))),P},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(P){var Q=p;return function(){var U=p;p=Q;try{return P.apply(this,arguments)}finally{p=U}}}})($w);Zw.exports=$w;var L9=Zw.exports;const B4={},L4=t=>void Object.assign(B4,t);function UG(t,e){function n(h,{args:d=[],attach:p,...A},g){let S=`${h[0].toUpperCase()}${h.slice(1)}`,E;if(h==="primitive"){if(A.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=A.object;E=wc(m,{type:h,root:g,attach:p,primitive:!0})}else{const m=B4[S];if(!m)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");E=wc(new m(...d),{type:h,root:g,attach:p,memoizedProps:{args:d}})}return E.__r3f.attach===void 0&&(E instanceof xt?E.__r3f.attach="geometry":E instanceof jn&&(E.__r3f.attach="material")),S!=="inject"&&l5(E,A),E}function i(h,d){let p=!1;if(d){var A,g;(A=d.__r3f)!=null&&A.attach?a5(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(g=h.__r3f)==null||g.objects.push(d),d.__r3f||wc(d,{}),d.__r3f.parent=h,d6(d),Mc(d)}}function r(h,d,p){let A=!1;if(d){var g,S;if((g=d.__r3f)!=null&&g.attach)a5(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"});const E=h.children.filter(x=>x!==d),m=E.indexOf(p);h.children=[...E.slice(0,m),d,...E.slice(m)],A=!0}A||(S=h.__r3f)==null||S.objects.push(d),d.__r3f||wc(d,{}),d.__r3f.parent=h,d6(d),Mc(d)}}function s(h,d,p=!1){h&&[...h].forEach(A=>o(d,A,p))}function o(h,d,p){if(d){var A,g,S;if(d.__r3f&&(d.__r3f.parent=null),(A=h.__r3f)!=null&&A.objects&&(h.__r3f.objects=h.__r3f.objects.filter(C=>C!==d)),(g=d.__r3f)!=null&&g.attach)U9(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var E;h.remove(d),(E=d.__r3f)!=null&&E.root&&HG(d.__r3f.root,d)}const x=(S=d.__r3f)==null?void 0:S.primitive,y=p===void 0?d.dispose!==null&&!x:p;if(!x){var m;s((m=d.__r3f)==null?void 0:m.objects,d,y),s(d.children,d,y)}delete d.__r3f,y&&d.dispose&&d.type!=="Scene"&&L9.unstable_scheduleCallback(L9.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),Mc(h)}}function a(h,d,p,A){var g;const S=(g=h.__r3f)==null?void 0:g.parent;if(!S)return;const E=n(d,p,h.__r3f.root);if(h.children){for(const m of h.children)m.__r3f&&i(E,m);h.children=h.children.filter(m=>!m.__r3f)}h.__r3f.objects.forEach(m=>i(E,m)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(S,h),E.parent&&(E.__r3f.autoRemovedBeforeAppend=!0),i(S,E),E.raycast&&E.__r3f.eventCount&&E.__r3f.root.getState().internal.interaction.push(E),[A,A.alternate].forEach(m=>{m!==null&&(m.stateNode=E,m.ref&&(typeof m.ref=="function"?m.ref(E):m.ref.current=E))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:FG({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const A=h.getState().scene;A.__r3f&&r(A,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,A){var g;if(((g=h==null?void 0:h.__r3f)!=null?g:{}).primitive&&A.object&&A.object!==h)return[!0];{const{args:E=[],children:m,...x}=A,{args:y=[],children:C,...I}=p;if(!Array.isArray(E))throw new Error("R3F: the args prop must be an array!");if(E.some((w,L)=>w!==y[L]))return[!0];const M=oM(h,x,I,!0);return M.changes.length?[!1,M]:null}},commitUpdate(h,[d,p],A,g,S,E){d?a(h,A,S,E):l5(h,p)},commitMount(h,d,p,A){var g;const S=(g=h.__r3f)!=null?g:{};h.raycast&&S.handlers&&S.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>wc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:A}=(d=h.__r3f)!=null?d:{};p&&A&&U9(A,h,p),h.isObject3D&&(h.visible=!1),Mc(h)},unhideInstance(h,d){var p;const{attach:A,parent:g}=(p=h.__r3f)!=null?p:{};A&&g&&a5(g,h,A),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),Mc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Wc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&vn.fun(performance.now)?performance.now:vn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:vn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:vn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:l5}}var P9,D9;const o5=t=>"colorSpace"in t||"outputColorSpace"in t,eM=()=>{var t;return(t=B4.ColorManagement)!=null?t:null},tM=t=>t&&t.isOrthographicCamera,OG=t=>t&&t.hasOwnProperty("current"),_p=typeof window<"u"&&((P9=window.document)!=null&&P9.createElement||((D9=window.navigator)==null?void 0:D9.product)==="ReactNative")?le.useLayoutEffect:le.useEffect;function nM(t){const e=le.useRef(t);return _p(()=>void(e.current=t),[t]),e}function kG({set:t}){return _p(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class iM extends le.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}iM.getDerivedStateFromError=()=>({error:!0});const rM="__default",N9=new Map,QG=t=>t&&!!t.memoized&&!!t.changes;function sM(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const bf=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},vn={obj:t=>t===Object(t)&&!vn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(vn.str(t)||vn.num(t))return t===e;const s=vn.obj(t);if(s&&i==="reference")return t===e;const o=vn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!vn.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(vn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function GG(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function wc(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function f6(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const F9=/-\d+$/;function a5(t,e,n){if(vn.str(n)){if(F9.test(n)){const s=n.replace(F9,""),{target:o,key:a}=f6(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=f6(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function U9(t,e,n){var i,r;if(vn.str(n)){const{target:s,key:o}=f6(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function oM(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){var h;const d=(h=t==null?void 0:t.__r3f)!=null?h:{},p=Object.entries(r),A=[];if(u){const S=Object.keys(l);for(let E=0;E<S.length;E++)r.hasOwnProperty(S[E])||p.unshift([S[E],rM+"remove"])}p.forEach(([S,E])=>{var m;if((m=t.__r3f)!=null&&m.primitive&&S==="object"||vn.equ(E,l[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return A.push([S,E,!0,[]]);let x=[];S.includes("-")&&(x=S.split("-")),A.push([S,E,!1,x]);for(const y in r){const C=r[y];y.startsWith(`${S}-`)&&A.push([y,C,!1,y.split("-")])}});const g={...r};return d.memoizedProps&&d.memoizedProps.args&&(g.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(g.attach=d.memoizedProps.attach),{memoized:g,changes:A}}function l5(t,e){var n,i,r;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:u}=QG(e)?e:oM(t,e),h=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<u.length;p++){let[A,g,S,E]=u[p];if(o5(t)){const C="srgb",I="srgb-linear";A==="encoding"?(A="colorSpace",g=g===3001?C:I):A==="outputEncoding"&&(A="outputColorSpace",g=g===3001?C:I)}let m=t,x=m[A];if(E.length&&(x=E.reduce((y,C)=>y[C],t),!(x&&x.set))){const[y,...C]=E.reverse();m=C.reverse().reduce((I,M)=>I[M],t),A=y}if(g===rM+"remove")if(m.constructor){let y=N9.get(m.constructor);y||(y=new m.constructor,N9.set(m.constructor,y)),g=y[A]}else g=0;if(S)g?s.handlers[A]=g:delete s.handlers[A],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof du)){if(Array.isArray(g))x.fromArray?x.fromArray(g):x.set(...g);else if(x.copy&&g&&g.constructor&&x.constructor===g.constructor)x.copy(g);else if(g!==void 0){const y=x instanceof Ee;!y&&x.setScalar?x.setScalar(g):x instanceof du&&g instanceof du?x.mask=g.mask:x.set(g),!eM()&&!a.linear&&y&&x.convertSRGBToLinear()}}else if(m[A]=g,m[A]instanceof mn&&m[A].format===Un&&m[A].type===ni){const y=m[A];o5(y)&&o5(a.gl)?y.colorSpace=a.gl.outputColorSpace:y.encoding=a.gl.outputEncoding}Mc(t)}if(s.parent&&a.internal&&t.raycast&&h!==s.eventCount){const p=a.internal.interaction.indexOf(t);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(t)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(r=t.__r3f)!=null&&r.parent&&d6(t),t}function Mc(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function d6(t){t.onUpdate==null||t.onUpdate(t)}function aM(t,e){t.manual||(tM(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function G3(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function zG(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Wc.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wc.ContinuousEventPriority;default:return Wc.DefaultEventPriority}}function lM(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function HG(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{lM(n.capturedMap,e,i,r)})}function VG(t){function e(l){const{internal:u}=t.getState(),h=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,u){const h=t.getState(),d=new Set,p=[],A=u?u(h.internal.interaction):h.internal.interaction;for(let m=0;m<A.length;m++){const x=bf(A[m]);x&&(x.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function g(m){const x=bf(m);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var y;x.events.compute==null||x.events.compute(l,x,(y=x.previousRoot)==null?void 0:y.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(m,!0):[]}let S=A.flatMap(g).sort((m,x)=>{const y=bf(m.object),C=bf(x.object);return!y||!C?m.distance-x.distance:C.events.priority-y.events.priority||m.distance-x.distance}).filter(m=>{const x=G3(m);return d.has(x)?!1:(d.add(x),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const m of S){let x=m.object;for(;x;){var E;(E=x.__r3f)!=null&&E.eventCount&&p.push({...m,eventObject:x}),x=x.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let m of h.internal.capturedMap.get(l.pointerId).values())d.has(G3(m.intersection))||p.push(m.intersection);return p}function r(l,u,h,d){const p=t.getState();if(l.length){const A={stopped:!1};for(const g of l){const S=bf(g.object)||p,{raycaster:E,pointer:m,camera:x,internal:y}=S,C=new D(m.x,m.y,0).unproject(x),I=B=>{var F,X;return(F=(X=y.capturedMap.get(B))==null?void 0:X.has(g.eventObject))!=null?F:!1},M=B=>{const F={intersection:g,target:u.target};y.capturedMap.has(B)?y.capturedMap.get(B).set(g.eventObject,F):y.capturedMap.set(B,new Map([[g.eventObject,F]])),u.target.setPointerCapture(B)},w=B=>{const F=y.capturedMap.get(B);F&&lM(y.capturedMap,g.eventObject,F,B)};let L={};for(let B in u){let F=u[B];typeof F!="function"&&(L[B]=F)}let R={...g,...L,pointer:m,intersections:l,stopped:A.stopped,delta:h,unprojectedPoint:C,ray:E.ray,camera:x,stopPropagation(){const B="pointerId"in u&&y.capturedMap.get(u.pointerId);if((!B||B.has(g.eventObject))&&(R.stopped=A.stopped=!0,y.hovered.size&&Array.from(y.hovered.values()).find(F=>F.eventObject===g.eventObject))){const F=l.slice(0,l.indexOf(g));s([...F,g])}},target:{hasPointerCapture:I,setPointerCapture:M,releasePointerCapture:w},currentTarget:{hasPointerCapture:I,setPointerCapture:M,releasePointerCapture:w},nativeEvent:u};if(d(R),A.stopped===!0)break}}return l}function s(l){const{internal:u}=t.getState();for(const h of u.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,A=p==null?void 0:p.handlers;if(u.hovered.delete(G3(h)),p!=null&&p.eventCount){const g={...h,intersections:l};A.onPointerOut==null||A.onPointerOut(g),A.onPointerLeave==null||A.onPointerLeave(g)}}}function o(l,u){for(let h=0;h<u.length;h++){const d=u[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=t.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=t.getState();p.lastEvent.current=h;const A=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",E=i(h,A?n:void 0),m=g?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=E.map(y=>y.eventObject)),g&&!E.length&&m<=2&&(o(h,p.interaction),d&&d(h)),A&&s(E);function x(y){const C=y.eventObject,I=C.__r3f,M=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(A){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const w=G3(y),L=p.hovered.get(w);L?L.stopped&&y.stopPropagation():(p.hovered.set(w,y),M.onPointerOver==null||M.onPointerOver(y),M.onPointerEnter==null||M.onPointerEnter(y))}M.onPointerMove==null||M.onPointerMove(y)}else{const w=M[l];w?(!g||p.initialHits.includes(C))&&(o(h,p.interaction.filter(L=>!p.initialHits.includes(L))),w(y)):g&&p.initialHits.includes(C)&&o(h,p.interaction.filter(L=>!p.initialHits.includes(L)))}}r(E,h,m,x)}}return{handlePointer:a}}const WG=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],uM=t=>!!(t!=null&&t.render),P4=le.createContext(null),XG=(t,e)=>{const n=E2((a,l)=>{const u=new D,h=new D,d=new D;function p(m=l().camera,x=h,y=l().size){const{width:C,height:I,top:M,left:w}=y,L=C/I;x instanceof D?d.copy(x):d.set(...x);const R=m.getWorldPosition(u).distanceTo(d);if(tM(m))return{width:C/m.zoom,height:I/m.zoom,top:M,left:w,factor:1,distance:R,aspect:L};{const B=m.fov*Math.PI/180,F=2*Math.tan(B/2)*R,X=F*(C/I);return{width:X,height:F,top:M,left:w,factor:C/X,distance:R,aspect:L}}}let A;const g=m=>a(x=>({performance:{...x.performance,current:m}})),S=new oe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>t(l(),m),advance:(m,x)=>e(m,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new x2,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();A&&clearTimeout(A),m.performance.current!==m.performance.min&&g(m.performance.min),A=setTimeout(()=>g(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:m=>a(x=>({...x,events:{...x.events,...m}})),setSize:(m,x,y,C,I)=>{const M=l().camera,w={width:m,height:x,top:C||0,left:I||0,updateStyle:y};a(L=>({size:w,viewport:{...L.viewport,...p(M,h,w)}}))},setDpr:m=>a(x=>{const y=sM(m);return{viewport:{...x.viewport,dpr:y,initialDpr:x.viewport.initialDpr||y}}}),setFrameloop:(m="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,m!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:le.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,x,y)=>{const C=l().internal;return C.priority=C.priority+(x>0?1:0),C.subscribers.push({ref:m,priority:x,store:y}),C.subscribers=C.subscribers.sort((I,M)=>I.priority-M.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(x>0?1:0),I.subscribers=I.subscribers.filter(M=>M.ref!==m))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:d}=n.getState();if(l!==r||u.dpr!==s){var p;r=l,s=u.dpr,aM(a,l),h.setPixelRatio(u.dpr);const A=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,A)}a!==o&&(o=a,d(A=>({viewport:{...A.viewport,...A.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let z3,qG=new Set,YG=new Set,KG=new Set;function u5(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Bf(t,e){switch(t){case"before":return u5(qG,e);case"after":return u5(YG,e);case"tail":return u5(KG,e)}}let c5,h5;function f5(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),c5=e.internal.subscribers,z3=0;z3<c5.length;z3++)h5=c5[z3],h5.ref.current(h5.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function jG(t){let e=!1,n,i,r;function s(l){i=requestAnimationFrame(s),e=!0,n=0,Bf("before",l);for(const h of t.values()){var u;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(n+=f5(l,r))}if(Bf("after",l),n===0)return Bf("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,u=1){var h;if(!l)return t.forEach(d=>o(d.store.getState()),u);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,h,d){if(u&&Bf("before",l),h)f5(l,h,d);else for(const p of t.values())f5(l,p.store.getState());u&&Bf("after",l)}return{loop:s,invalidate:o,advance:a}}function D4(){const t=le.useContext(P4);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function hd(t=n=>n,e){return D4()(t,e)}function N4(t,e=0){const n=D4(),i=n.getState().internal.subscribe,r=nM(t);return _p(()=>i(r,e,n),[e,i,n]),null}const _h=new Map,{invalidate:O9,advance:k9}=jG(_h),{reconciler:ep,applyProps:Sc}=UG(_h,zG),_c={objects:"shallow",strict:!1},JG=(t,e)=>{const n=typeof t=="function"?t(e):t;return uM(n)?n:new o4({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function ZG(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function $G(t){const e=_h.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||XG(O9,k9),o=n||ep.createContainer(s,Wc.ConcurrentRoot,null,!1,null,"",r,null);e||_h.set(t,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:d,size:p,scene:A,events:g,onCreated:S,shadows:E=!1,linear:m=!1,flat:x=!1,legacy:y=!1,orthographic:C=!1,frameloop:I="always",dpr:M=[1,2],performance:w,raycaster:L,camera:R,onPointerMissed:B}=h,F=s.getState(),X=F.gl;F.gl||F.set({gl:X=JG(d,t)});let G=F.raycaster;G||F.set({raycaster:G=new b4});const{params:q,...Y}=L||{};if(vn.equ(Y,G,_c)||Sc(G,{...Y}),vn.equ(q,G.params,_c)||Sc(G,{params:{...G.params,...q}}),!F.camera||F.camera===u&&!vn.equ(u,R,_c)){u=R;const O=R instanceof Ap,V=O?R:C?new Lu(0,0,0,0,.1,1e3):new Nn(75,0,.1,1e3);O||(V.position.z=5,R&&Sc(V,R),!F.camera&&!(R!=null&&R.rotation)&&V.lookAt(0,0,0)),F.set({camera:V})}if(!F.scene){let O;A instanceof rm?O=A:(O=new rm,A&&Sc(O,A)),F.set({scene:wc(O)})}if(!F.xr){const O=(re,xe)=>{const ge=s.getState();ge.frameloop!=="never"&&k9(re,!0,ge,xe)},V=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?O:null),re.gl.xr.isPresenting||O9(re)},me={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",V),re.xr.addEventListener("sessionend",V)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",V),re.xr.removeEventListener("sessionend",V)}};X.xr&&me.connect(),F.set({xr:me})}if(X.shadowMap){const O=X.shadowMap.enabled,V=X.shadowMap.type;if(X.shadowMap.enabled=!!E,vn.boo(E))X.shadowMap.type=sd;else if(vn.str(E)){var $;const me={basic:cI,percentage:Qm,soft:sd,variance:Ms};X.shadowMap.type=($=me[E])!=null?$:sd}else vn.obj(E)&&Object.assign(X.shadowMap,E);(O!==X.shadowMap.enabled||V!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const j=eM();j&&("enabled"in j?j.enabled=!y:"legacyMode"in j&&(j.legacyMode=y)),Sc(X,{outputEncoding:m?3e3:3001,toneMapping:x?Rr:G8}),F.legacy!==y&&F.set(()=>({legacy:y})),F.linear!==m&&F.set(()=>({linear:m})),F.flat!==x&&F.set(()=>({flat:x})),d&&!vn.fun(d)&&!uM(d)&&!vn.equ(d,X,_c)&&Sc(X,d),g&&!F.events.handlers&&F.set({events:g(s)});const U=ZG(t,p);return vn.equ(U,F.size,_c)||F.setSize(U.width,U.height,U.updateStyle,U.top,U.left),M&&F.viewport.dpr!==sM(M)&&F.setDpr(M),F.frameloop!==I&&F.setFrameloop(I),F.onPointerMissed||F.set({onPointerMissed:B}),w&&!vn.equ(w,F.performance,_c)&&F.set(O=>({performance:{...O.performance,...w}})),a=S,l=!0,this},render(h){return l||this.configure(),ep.updateContainer(le.createElement(ez,{store:s,children:h,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){cM(t)}}}function ez({store:t,children:e,onCreated:n,rootElement:i}){return _p(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),le.createElement(P4.Provider,{value:t},e)}function cM(t,e){const n=_h.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),ep.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),GG(r),_h.delete(t),e&&e(t)}catch{}},500)})}}function p6(t,e,n){return le.createElement(tz,{key:e.uuid,children:t,container:e,state:n})}function tz({state:t={},children:e,container:n}){const{events:i,size:r,...s}=t,o=D4(),[a]=le.useState(()=>new b4),[l]=le.useState(()=>new oe),u=le.useCallback((d,p)=>{const A={...d};Object.keys(d).forEach(S=>{(WG.includes(S)||d[S]!==p[S]&&p[S])&&delete A[S]});let g;if(p&&r){const S=p.camera;g=d.viewport.getCurrentViewport(S,new D,r),S!==d.camera&&aM(S,r)}return{...A,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...p==null?void 0:p.events,...i},size:{...d.size,...r},viewport:{...d.viewport,...g},...s}},[t]),[h]=le.useState(()=>{const d=o.getState();return E2((A,g)=>({...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...i},size:{...d.size,...r},...s,set:A,get:g,setEvents:S=>A(E=>({...E,events:{...E.events,...S}}))}))});return le.useEffect(()=>{const d=o.subscribe(p=>h.setState(A=>u(p,A)));return()=>{d(),h.destroy()}},[]),le.useEffect(()=>{h.setState(d=>u(o.getState(),d))},[u]),le.createElement(le.Fragment,null,ep.createPortal(le.createElement(P4.Provider,{value:h},e),h,null))}ep.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:le.version});function sm(){return sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sm.apply(this,arguments)}function A6(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,n||(a=t.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var h=n&&!i;return i||(i=setTimeout(l,e)),h&&(a=t.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}A6.debounce=A6;var nz=A6;const Q9=X6(nz);function iz(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=le.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=le.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=le.useRef(!1);le.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,A,g]=le.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:y,top:C,width:I,height:M,bottom:w,right:L,x:R,y:B}=l.current.element.getBoundingClientRect(),F={left:y,top:C,width:I,height:M,bottom:w,right:L,x:R,y:B};l.current.element instanceof HTMLElement&&r&&(F.height=l.current.element.offsetHeight,F.width=l.current.element.offsetWidth),Object.freeze(F),d.current&&!az(l.current.lastBounds,F)&&a(l.current.lastBounds=F)};return[x,h?Q9(x,h):x,u?Q9(x,u):x]},[a,r,u,h]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function E(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",g,{capture:!0,passive:!0})))}const m=x=>{!x||x===l.current.element||(S(),l.current.element=x,l.current.scrollContainers=hM(x),E())};return sz(g,!!n),rz(A),le.useEffect(()=>{S(),E()},[n,g,A]),le.useEffect(()=>S,[]),[m,o,p]}function rz(t){le.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function sz(t,e){le.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function hM(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...hM(t.parentElement)]}const oz=["x","y","top","bottom","left","right","width","height"],az=(t,e)=>oz.every(n=>t[n]===e[n]);var lz=Object.defineProperty,uz=Object.defineProperties,cz=Object.getOwnPropertyDescriptors,G9=Object.getOwnPropertySymbols,hz=Object.prototype.hasOwnProperty,fz=Object.prototype.propertyIsEnumerable,z9=(t,e,n)=>e in t?lz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H9=(t,e)=>{for(var n in e||(e={}))hz.call(e,n)&&z9(t,n,e[n]);if(G9)for(var n of G9(e))fz.call(e,n)&&z9(t,n,e[n]);return t},dz=(t,e)=>uz(t,cz(e));function fM(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=fM(i,e,n);if(r)return r;i=e?null:i.sibling}}function dM(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const F4=dM(le.createContext(null));class pM extends le.Component{render(){return le.createElement(F4.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:V9,ReactCurrentDispatcher:W9}=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function pz(){const t=le.useContext(F4);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=le.useId();return le.useMemo(()=>{for(const i of[V9==null?void 0:V9.current,t,t==null?void 0:t.alternate]){if(!i)continue;const r=fM(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}function Az(){var t,e;const n=pz(),[i]=le.useState(()=>new Map);i.clear();let r=n;for(;r;){const s=(t=r.type)==null?void 0:t._context;s&&s!==F4&&!i.has(s)&&i.set(s,(e=W9==null?void 0:W9.current)==null?void 0:e.readContext(dM(s))),r=r.return}return i}function mz(){const t=Az();return le.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>le.createElement(e,null,le.createElement(n.Provider,dz(H9({},i),{value:t.get(n)}))),e=>le.createElement(pM,H9({},e))),[t])}const d5={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function gz(t){const{handlePointer:e}=VG(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(d5).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=d5[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=d5[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const vz=le.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=gz,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:d,legacy:p,orthographic:A,frameloop:g,dpr:S,performance:E,raycaster:m,camera:x,onPointerMissed:y,onCreated:C,...I},M){le.useMemo(()=>L4(RG),[]);const w=mz(),[L,R]=iz({scroll:!0,debounce:{scroll:50,resize:0},...i}),B=le.useRef(null),F=le.useRef(null);le.useImperativeHandle(M,()=>B.current);const X=nM(y),[G,q]=le.useState(!1),[Y,$]=le.useState(!1);if(G)throw G;if(Y)throw Y;const j=le.useRef(null);_p(()=>{const Q=B.current;R.width>0&&R.height>0&&Q&&(j.current||(j.current=$G(Q)),j.current.configure({gl:s,events:o,shadows:u,linear:h,flat:d,legacy:p,orthographic:A,frameloop:g,dpr:S,performance:E,raycaster:m,camera:x,size:R,onPointerMissed:(...U)=>X.current==null?void 0:X.current(...U),onCreated:U=>{U.events.connect==null||U.events.connect(a?OG(a)?a.current:a:F.current),l&&U.setEvents({compute:(O,V)=>{const me=O[l+"X"],re=O[l+"Y"];V.pointer.set(me/V.size.width*2-1,-(re/V.size.height)*2+1),V.raycaster.setFromCamera(V.pointer,V.camera)}}),C==null||C(U)}}),j.current.render(le.createElement(w,null,le.createElement(iM,{set:$},le.createElement(le.Suspense,{fallback:le.createElement(kG,{set:q})},e)))))}),le.useEffect(()=>{const Q=B.current;if(Q)return()=>cM(Q)},[]);const P=a?"none":"auto";return le.createElement("div",sm({ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:P,...r}},I),le.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},le.createElement("canvas",{ref:B,style:{display:"block"}},n)))}),yz=le.forwardRef(function(e,n){return le.createElement(pM,null,le.createElement(vz,sm({},e,{ref:n})))});class xz extends ss{constructor(e,n){super(),this.inputSource=null,this.xrControllerModel=null,this.index=e,this.controller=n.xr.getController(e),this.grip=n.xr.getControllerGrip(e),this.hand=n.xr.getHand(e),this.grip.userData.name="grip",this.controller.userData.name="controller",this.hand.userData.name="hand",this.visible=!1,this.add(this.controller,this.grip,this.hand),this._onConnected=this._onConnected.bind(this),this._onDisconnected=this._onDisconnected.bind(this),this.controller.addEventListener("connected",this._onConnected),this.controller.addEventListener("disconnected",this._onDisconnected)}_onConnected(e){e.fake||e.data&&(this.visible=!0,this.inputSource=e.data,this.dispatchEvent(e))}_onDisconnected(e){e.fake||(this.visible=!1,this.inputSource=null,this.dispatchEvent(e))}dispose(){this.controller.removeEventListener("connected",this._onConnected),this.controller.removeEventListener("disconnected",this._onDisconnected)}}var X9,q9;const Ez=t=>Array.from(new Set(t)),is=typeof window<"u"&&((X9=window.document)!=null&&X9.createElement||((q9=window.navigator)==null?void 0:q9.product)==="ReactNative")?le.useLayoutEffect:le.useEffect;function ho(t){const e=le.useRef(t);return is(()=>void(e.current=t),[t]),e}function Cc(t,e,{handedness:n}={}){const i=ho(e),r=xi(s=>s.controllers);is(()=>{const s=r.map(o=>{if(n&&o.inputSource&&o.inputSource.handedness!==n)return;const a=l=>i.current({nativeEvent:l,target:o});return o.controller.addEventListener(t,a),()=>o.controller.removeEventListener(t,a)});return()=>s.forEach(o=>o==null?void 0:o())},[r,n,t])}const Y9=new He;function Sz({children:t}){const e=hd(d=>d.events),n=hd(d=>d.get),i=hd(d=>d.raycaster),r=xi(d=>d.controllers),s=xi(d=>d.interactions),o=xi(d=>d.hoverState),a=xi(d=>d.hasInteraction),l=xi(d=>d.getInteraction),u=le.useCallback(d=>{const p=Array.from(s.keys());return Y9.identity().extractRotation(d.matrixWorld),i.ray.origin.setFromMatrixPosition(d.matrixWorld),i.ray.direction.set(0,0,-1).applyMatrix4(Y9),i.intersectObjects(p,!0)},[s,i]);N4(()=>{var d;if(s.size!==0)for(const p of r){if(!((d=p.inputSource)!=null&&d.handedness))return;const A=o[p.inputSource.handedness],g=new Set;let S=u(p.controller);if(e.filter)S=e.filter(S,n());else{const E=S.find(m=>m==null?void 0:m.object);E&&(S=[E])}for(const E of S){let m=E.object;for(;m;){if(a(m,"onHover")&&!A.has(m)){const y=l(m,"onHover");for(const C of y)C({target:p,intersection:E,intersections:S})}const x=l(m,"onMove");x==null||x.forEach(y=>y({target:p,intersection:E,intersections:S})),A.set(m,E),g.add(m.id),m=m.parent}}for(const E of A.keys())if(!g.has(E.id)){A.delete(E);const m=l(E,"onBlur");if(!m)continue;for(const x of m)x({target:p,intersections:S})}}});const h=le.useCallback(d=>p=>{var A;if(!((A=p.target.inputSource)!=null&&A.handedness))return;const g=o[p.target.inputSource.handedness],S=Array.from(new Set(g.values()));s.forEach((E,m)=>{var x,y,C;if(g.has(m)){if(!E[d])return;for(const I of E[d])(x=I.current)==null||x.call(I,{target:p.target,intersection:g.get(m),intersections:S})}else if(d==="onSelect"&&E.onSelectMissed)for(const I of E.onSelectMissed)(y=I.current)==null||y.call(I,{target:p.target,intersections:S});else if(d==="onSqueeze"&&E.onSqueezeMissed)for(const I of E.onSqueezeMissed)(C=I.current)==null||C.call(I,{target:p.target,intersections:S})})},[o,s]);return Cc("select",h("onSelect")),Cc("selectstart",h("onSelectStart")),Cc("selectend",h("onSelectEnd")),Cc("squeeze",h("onSqueeze")),Cc("squeezeend",h("onSqueezeEnd")),Cc("squeezestart",h("onSqueezeStart")),le.createElement(le.Fragment,null,t)}function Is(t,e,n){const i=xi(o=>o.addInteraction),r=xi(o=>o.removeInteraction),s=ho(n);is(()=>{const o=t.current;if(!(!o||!s.current))return i(o,e,s),()=>r(o,e,s)},[t,e,i,r])}const _z=le.forwardRef(function({onHover:e,onBlur:n,onSelectStart:i,onSelectEnd:r,onSelectMissed:s,onSelect:o,onSqueezeStart:a,onSqueezeEnd:l,onSqueezeMissed:u,onSqueeze:h,onMove:d,children:p},A){const g=le.useRef(null);return le.useImperativeHandle(A,()=>g.current),Is(g,"onHover",e),Is(g,"onBlur",n),Is(g,"onSelectStart",i),Is(g,"onSelectEnd",r),Is(g,"onSelectMissed",s),Is(g,"onSelect",o),Is(g,"onSqueezeStart",a),Is(g,"onSqueezeEnd",l),Is(g,"onSqueezeMissed",u),Is(g,"onSqueeze",h),Is(g,"onMove",d),le.createElement("group",{ref:g},p)});le.forwardRef(function({onSelectStart:e,onSelectEnd:n,children:i,...r},s){const o=le.useRef(),a=le.useRef(null),l=le.useMemo(()=>new He,[]);return le.useImperativeHandle(s,()=>a.current),N4(()=>{const u=o.current,h=a.current;u&&(h.applyMatrix4(l),h.applyMatrix4(u.matrixWorld),h.updateMatrixWorld(),l.copy(u.matrixWorld).invert())}),le.createElement(_z,{ref:a,onSelectStart:u=>{o.current=u.target.controller,l.copy(u.target.controller.matrixWorld).invert(),e==null||e(u)},onSelectEnd:u=>{u.target.controller===o.current&&(o.current=void 0),n==null||n(u)},...r},i)});const AM=le.createContext(null),Au=E2((t,e)=>({set:t,get:e,session:null,referenceSpaceType:null}));function Cz({foveation:t=0,frameRate:e=void 0,referenceSpace:n="local-floor",onSessionStart:i,onSessionEnd:r,onVisibilityChange:s,onInputSourcesChange:o,children:a}){const l=hd(y=>y.gl),u=hd(y=>y.camera),h=xi(y=>y.player),d=xi(y=>y.get),p=xi(y=>y.set),A=xi(y=>y.session),g=xi(y=>y.controllers),S=ho(i),E=ho(r),m=ho(s),x=ho(o);return is(()=>{const y=[0,1].map(C=>{const I=new xz(C,l),M=()=>p(L=>({controllers:[...L.controllers,I]})),w=()=>p(L=>({controllers:L.controllers.filter(R=>R!==I)}));return I.addEventListener("connected",M),I.addEventListener("disconnected",w),()=>{I.removeEventListener("connected",M),I.removeEventListener("disconnected",w)}});return()=>y.forEach(C=>C())},[l,p]),is(()=>Au.subscribe(({session:y})=>p(()=>({session:y}))),[l.xr,p]),is(()=>{l.xr.setFoveation(t),p(()=>({foveation:t}))},[l.xr,t,p]),is(()=>{var y;try{e&&((y=A==null?void 0:A.updateTargetFrameRate)==null||y.call(A,e))}catch{}p(()=>({frameRate:e}))},[A,e,p]),is(()=>{const y=Au.getState();l.xr.setReferenceSpaceType(n),p(()=>({referenceSpace:n})),y.set({referenceSpaceType:n})},[l.xr,n,p]),is(()=>{if(!A)return void l.xr.setSession(null);const y=w=>{var L;p(()=>({isPresenting:!0})),(L=S.current)==null||L.call(S,{nativeEvent:{...w,target:A},target:A})},C=w=>{var L;p(()=>({isPresenting:!1,session:null})),Au.setState(()=>({session:null})),(L=E.current)==null||L.call(E,{nativeEvent:{...w,target:A},target:A})},I=w=>{var L;(L=m.current)==null||L.call(m,{nativeEvent:w,target:A})},M=w=>{var L;const R=Object.values(A.inputSources).some(B=>B.hand);p(()=>({isHandTracking:R})),(L=x.current)==null||L.call(x,{nativeEvent:w,target:A})};return l.xr.addEventListener("sessionstart",y),l.xr.addEventListener("sessionend",C),A.addEventListener("visibilitychange",I),A.addEventListener("inputsourceschange",M),l.xr.setSession(A).then(()=>{l.xr.setFoveation(d().foveation)}),()=>{l.xr.removeEventListener("sessionstart",y),l.xr.removeEventListener("sessionend",C),A.removeEventListener("visibilitychange",I),A.removeEventListener("inputsourceschange",M)}},[A,l.xr,p,d]),le.createElement(Sz,null,le.createElement("primitive",{object:h},le.createElement("primitive",{object:u}),g.map(y=>le.createElement("primitive",{key:y.index,object:y}))),a)}function Tz(t){const e=le.useMemo(()=>E2((n,i)=>({set:n,get:i,controllers:[],isPresenting:!1,isHandTracking:!1,player:new ss,session:null,foveation:0,referenceSpace:"local-floor",hoverState:{left:new Map,right:new Map,none:new Map},interactions:new Map,hasInteraction(r,s){var o;return!!((o=i().interactions.get(r))!=null&&o[s].some(a=>a.current))},getInteraction(r,s){var o;return(o=i().interactions.get(r))==null?void 0:o[s].reduce((a,l)=>(l.current&&a.push(l.current),a),[])},addInteraction(r,s,o){const a=i().interactions;a.has(r)||a.set(r,{onHover:[],onBlur:[],onSelect:[],onSelectEnd:[],onSelectStart:[],onSelectMissed:[],onSqueeze:[],onSqueezeEnd:[],onSqueezeStart:[],onSqueezeMissed:[],onMove:[]}),a.get(r)[s].push(o)},removeInteraction(r,s,o){const a=i().interactions.get(r);if(a){const l=a[s].indexOf(o);l!==-1&&a[s].splice(l,1)}}})),[]);return le.createElement(AM.Provider,{value:e},le.createElement(Cz,{...t}))}const Iz=(t,e)=>{var n;if(!(!t&&!e))return t&&!e?{optionalFeatures:[t]}:t&&e?{...e,optionalFeatures:Ez([...(n=e.optionalFeatures)!=null?n:[],t])}:e},wz=async(t,e)=>{const n=Au.getState();if(n.session){console.warn("@react-three/xr: session already started, please stop it first");return}const i=Iz(n.referenceSpaceType,e),r=await navigator.xr.requestSession(t,i);return n.set(()=>({session:r})),r},Mz=async()=>{const t=Au.getState();if(!t.session){console.warn("@react-three/xr: no session to stop, please start it first");return}await t.session.end(),t.set({session:null})},Rz=async(t,{sessionInit:e,enterOnly:n,exitOnly:i}={})=>{const r=Au.getState();if(!(r.session&&n)&&!(!r.session&&i))return r.session?await Mz():await wz(t,e)},bz=(t,e,n)=>{switch(t){case"entered":return`Exit ${e}`;case"exited":return`Enter ${e}`;case"unsupported":default:switch(n){case"https":return"HTTPS needed";case"security":return`${e} blocked`;case"unknown":default:return`${e} unsupported`}}},mM=le.forwardRef(function({mode:e,sessionInit:n,enterOnly:i=!1,exitOnly:r=!1,onClick:s,onError:o,children:a,...l},u){var h;const[d,p]=le.useState("exited"),[A,g]=le.useState("unknown"),S=bz(d,e,A),E=e==="inline"?e:`immersive-${e.toLowerCase()}`,m=ho(o);is(()=>{if(!(navigator!=null&&navigator.xr))return void p("unsupported");navigator.xr.isSessionSupported(E).then(y=>{if(y)p("exited");else{const C=location.protocol==="https:";p("unsupported"),g(C?"unknown":"https")}}).catch(y=>{p("unsupported"),"name"in y&&y.name==="SecurityError"?g("security"):g("unknown")})},[E]),is(()=>Au.subscribe(y=>{y.session?p("entered"):d!=="unsupported"&&p("exited")}),[d]);const x=le.useCallback(async y=>{s==null||s(y);try{Rz(E,{sessionInit:n,enterOnly:i,exitOnly:r})}catch(C){const I=m.current;if(I&&C instanceof Error)I(C);else throw C}},[s,E,n,i,r,m]);return le.createElement("button",{...l,ref:u,onClick:d==="unsupported"?s:x},(h=typeof a=="function"?a(d):a)!=null?h:S)}),gM={position:"absolute",bottom:"24px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",border:"1px solid white",borderRadius:"4px",background:"rgba(0, 0, 0, 0.1)",color:"white",font:"normal 0.8125rem sans-serif",outline:"none",zIndex:99999,cursor:"pointer"};le.forwardRef(({style:t=gM,sessionInit:e={domOverlay:typeof document<"u"?{root:document.body}:void 0,optionalFeatures:["hit-test","dom-overlay","dom-overlay-for-handheld-ar"]},children:n,...i},r)=>le.createElement(mM,{...i,ref:r,mode:"AR",style:t,sessionInit:e},n));const Bz=le.forwardRef(({style:t=gM,sessionInit:e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]},children:n,...i},r)=>le.createElement(mM,{...i,ref:r,mode:"VR",style:t,sessionInit:e},n));function xi(t=n=>n,e){const n=le.useContext(AM);if(!n)throw new Error("useXR must be used within an <XR /> component!");return n(t,e)}function U4(){}U4.prototype.s2u=function(t){for(var e=this.s2uTable,n="",i=0;i<t.length;){var r=t[i++];if(!(r>=0&&r<=126||r>=161&&r<=223)&&i<t.length&&(r=r<<8|t[i++]),e[r]===void 0)return console.error("unknown char code "+r+"."),n;n+=String.fromCharCode(e[r])}return n};U4.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61e3:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657};function K9(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=e!==void 0?e:!0,this.encoder=new U4}K9.prototype={constructor:K9,getInt8:function(){var t=this.dv.getInt8(this.offset);return this.offset+=1,t},getInt8Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getInt8());return e},getUint8:function(){var t=this.dv.getUint8(this.offset);return this.offset+=1,t},getUint8Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getUint8());return e},getInt16:function(){var t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t},getInt16Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getInt16());return e},getUint16:function(){var t=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,t},getUint16Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getUint16());return e},getInt32:function(){var t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t},getInt32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getInt32());return e},getUint32:function(){var t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t},getUint32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getUint32());return e},getFloat32:function(){var t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t},getFloat32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getFloat32());return e},getFloat64:function(){var t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t},getFloat64Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getFloat64());return e},getIndex:function(t,e){switch(t){case 1:return e===!0?this.getUint8():this.getInt8();case 2:return e===!0?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+t+" exception."}},getIndexArray:function(t,e,n){for(var i=[],r=0;r<e;r++)i.push(this.getIndex(t,n));return i},getChars:function(t){for(var e="";t>0;){var n=this.getUint8();if(t--,n===0)break;e+=String.fromCharCode(n)}for(;t>0;)this.getUint8(),t--;return e},getSjisStringsAsUnicode:function(t){for(var e=[];t>0;){var n=this.getUint8();if(t--,n===0)break;e.push(n)}for(;t>0;)this.getUint8(),t--;return this.encoder.s2u(new Uint8Array(e))},getUnicodeStrings:function(t){for(var e="";t>0;){var n=this.getUint16();if(t-=2,n===0)break;e+=String.fromCharCode(n)}for(;t>0;)this.getUint8(),t--;return e},getTextBuffer:function(){var t=this.getUint32();return this.getUnicodeStrings(t)}};function j9(){}j9.prototype={constructor:j9,leftToRightVector3:function(t){t[2]=-t[2]},leftToRightQuaternion:function(t){t[0]=-t[0],t[1]=-t[1]},leftToRightEuler:function(t){t[0]=-t[0],t[1]=-t[1]},leftToRightIndexOrder:function(t){var e=t[2];t[2]=t[0],t[0]=e},leftToRightVector3Range:function(t,e){var n=-e[2];e[2]=-t[2],t[2]=n},leftToRightEulerRange:function(t,e){var n=-e[0],i=-e[1];e[0]=-t[0],e[1]=-t[1],t[0]=n,t[1]=i}};const vM=0,Lz=2,Pz=0,Dz=0,Nz=2,Fz=0,Uz=0,Oz=1,m6=2,kz=1,Qz=64,yM=0,xM=9,O4=15,EM=16,k4=22,SM=37,Q4=43,_M=76,CM=83,TM=97,IM=100,wM=103,MM=109;class Gz{constructor(){this.vkFormat=yM,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=vM,this.levels=[],this.dataFormatDescriptor=[{vendorId:Dz,descriptorType:Pz,descriptorBlockSize:0,versionNumber:Nz,colorModel:Fz,colorPrimaries:kz,transferFunction:m6,flags:Uz,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Lf{constructor(e,n,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+n,i),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),n=this._dataView.getUint32(this._offset+4,this._littleEndian),i=e+2**32*n;return this._offset+=8,i}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,n=0){const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==n&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const Vi=[171,75,84,88,32,50,48,187,13,10,26,10];function J9(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Buffer.from(t).toString("utf8")}function zz(t){const e=new Uint8Array(t.buffer,t.byteOffset,Vi.length);if(e[0]!==Vi[0]||e[1]!==Vi[1]||e[2]!==Vi[2]||e[3]!==Vi[3]||e[4]!==Vi[4]||e[5]!==Vi[5]||e[6]!==Vi[6]||e[7]!==Vi[7]||e[8]!==Vi[8]||e[9]!==Vi[9]||e[10]!==Vi[10]||e[11]!==Vi[11])throw new Error("Missing KTX 2.0 identifier.");const n=new Gz,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new Lf(t,Vi.length,i,!0);n.vkFormat=r._nextUint32(),n.typeSize=r._nextUint32(),n.pixelWidth=r._nextUint32(),n.pixelHeight=r._nextUint32(),n.pixelDepth=r._nextUint32(),n.layerCount=r._nextUint32(),n.faceCount=r._nextUint32();const s=r._nextUint32();n.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),u=r._nextUint32(),h=r._nextUint64(),d=r._nextUint64(),p=s*3*8,A=new Lf(t,Vi.length+i,p,!0);for(let U=0;U<s;U++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+A._nextUint64(),A._nextUint64()),uncompressedByteLength:A._nextUint64()});const g=new Lf(t,o,a,!0),S={vendorId:g._skip(4)._nextUint16(),descriptorType:g._nextUint16(),versionNumber:g._nextUint16(),descriptorBlockSize:g._nextUint16(),colorModel:g._nextUint8(),colorPrimaries:g._nextUint8(),transferFunction:g._nextUint8(),flags:g._nextUint8(),texelBlockDimension:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],bytesPlane:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],samples:[]},E=6,m=4,x=(S.descriptorBlockSize/4-E)/m;for(let U=0;U<x;U++){const O={bitOffset:g._nextUint16(),bitLength:g._nextUint8(),channelType:g._nextUint8(),samplePosition:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};O.channelType&Qz?(O.sampleLower=g._nextInt32(),O.sampleUpper=g._nextInt32()):(O.sampleLower=g._nextUint32(),O.sampleUpper=g._nextUint32()),S.samples[U]=O}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(S);const y=new Lf(t,l,u,!0);for(;y._offset<u;){const U=y._nextUint32(),O=y._scan(U),V=J9(O),me=y._scan(U-O.byteLength);n.keyValue[V]=V.match(/^ktx/i)?J9(me):me,y._offset%4&&y._skip(4-y._offset%4)}if(d<=0)return n;const C=new Lf(t,h,d,!0),I=C._nextUint16(),M=C._nextUint16(),w=C._nextUint32(),L=C._nextUint32(),R=C._nextUint32(),B=C._nextUint32(),F=[];for(let U=0;U<s;U++)F.push({imageFlags:C._nextUint32(),rgbSliceByteOffset:C._nextUint32(),rgbSliceByteLength:C._nextUint32(),alphaSliceByteOffset:C._nextUint32(),alphaSliceByteLength:C._nextUint32()});const X=h+C._offset,G=X+w,q=G+L,Y=q+R,$=new Uint8Array(t.buffer,t.byteOffset+X,w),j=new Uint8Array(t.buffer,t.byteOffset+G,L),P=new Uint8Array(t.buffer,t.byteOffset+q,R),Q=new Uint8Array(t.buffer,t.byteOffset+Y,B);return n.globalData={endpointCount:I,selectorCount:M,imageDescs:F,endpointsData:$,selectorsData:j,tablesData:P,extendedData:Q},n}let p5,Wo,g6;const A5={env:{emscripten_notify_memory_growth:function(t){g6=new Uint8Array(Wo.exports.memory.buffer)}}};class Hz{init(){return p5||(p5=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Z9).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,A5)).then(this._init):WebAssembly.instantiate(Buffer.from(Z9,"base64"),A5).then(this._init),p5)}_init(e){Wo=e.instance,A5.env.emscripten_notify_memory_growth(0)}decode(e,n=0){if(!Wo)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,r=Wo.exports.malloc(i);g6.set(e,r),n=n||Number(Wo.exports.ZSTD_findDecompressedSize(r,i));const s=Wo.exports.malloc(n),o=Wo.exports.ZSTD_decompress(s,n,r,i),a=g6.slice(s,s+o);return Wo.exports.free(r),Wo.exports.free(s),a}}const Z9="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var t=function(){try{var n={},i=Object.defineProperty,r=i(n,n,n)&&i}catch{}return r}(),e=function(n){if(this==null)throw TypeError();var i=String(this),r=i.length,s=n?Number(n):0;if(s!=s&&(s=0),!(s<0||s>=r)){var o=i.charCodeAt(s),a;return o>=55296&&o<=56319&&r>s+1&&(a=i.charCodeAt(s+1),a>=56320&&a<=57343)?(o-55296)*1024+a-56320+65536:o}};t?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();function RM(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var Vz=new RM,Wz=new RM,bM=new Uint8Array(30),BM=new Uint16Array(30),Xz=new Uint8Array(30),qz=new Uint16Array(30);function LM(t,e,n,i){var r,s;for(r=0;r<n;++r)t[r]=0;for(r=0;r<30-n;++r)t[r+n]=r/n|0;for(s=i,r=0;r<30;++r)e[r]=s,s+=1<<t[r]}function Yz(t,e){var n;for(n=0;n<7;++n)t.table[n]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,n=0;n<24;++n)t.trans[n]=256+n;for(n=0;n<144;++n)t.trans[24+n]=n;for(n=0;n<8;++n)t.trans[24+144+n]=280+n;for(n=0;n<112;++n)t.trans[24+144+8+n]=144+n;for(n=0;n<5;++n)e.table[n]=0;for(e.table[5]=32,n=0;n<32;++n)e.trans[n]=n}Yz(Vz,Wz);LM(bM,BM,4,3);LM(Xz,qz,2,1);bM[28]=0;BM[28]=258;function Tc(t,e,n,i,r){return Math.pow(1-r,3)*t+3*Math.pow(1-r,2)*r*e+3*(1-r)*Math.pow(r,2)*n+Math.pow(r,3)*i}function Sl(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Sl.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Sl.prototype.addPoint=function(t,e){typeof t=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};Sl.prototype.addX=function(t){this.addPoint(t,null)};Sl.prototype.addY=function(t){this.addPoint(null,t)};Sl.prototype.addBezier=function(t,e,n,i,r,s,o,a){var l=[t,e],u=[n,i],h=[r,s],d=[o,a];this.addPoint(t,e),this.addPoint(o,a);for(var p=0;p<=1;p++){var A=6*l[p]-12*u[p]+6*h[p],g=-3*l[p]+9*u[p]-9*h[p]+3*d[p],S=3*u[p]-3*l[p];if(g===0){if(A===0)continue;var E=-S/A;0<E&&E<1&&(p===0&&this.addX(Tc(l[p],u[p],h[p],d[p],E)),p===1&&this.addY(Tc(l[p],u[p],h[p],d[p],E)));continue}var m=Math.pow(A,2)-4*S*g;if(!(m<0)){var x=(-A+Math.sqrt(m))/(2*g);0<x&&x<1&&(p===0&&this.addX(Tc(l[p],u[p],h[p],d[p],x)),p===1&&this.addY(Tc(l[p],u[p],h[p],d[p],x)));var y=(-A-Math.sqrt(m))/(2*g);0<y&&y<1&&(p===0&&this.addX(Tc(l[p],u[p],h[p],d[p],y)),p===1&&this.addY(Tc(l[p],u[p],h[p],d[p],y)))}}};Sl.prototype.addQuad=function(t,e,n,i,r,s){var o=t+.6666666666666666*(n-t),a=e+2/3*(i-e),l=o+1/3*(r-t),u=a+1/3*(s-e);this.addBezier(t,e,o,a,l,u,r,s)};function ai(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}ai.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})};ai.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})};ai.prototype.curveTo=ai.prototype.bezierCurveTo=function(t,e,n,i,r,s){this.commands.push({type:"C",x1:t,y1:e,x2:n,y2:i,x:r,y:s})};ai.prototype.quadTo=ai.prototype.quadraticCurveTo=function(t,e,n,i){this.commands.push({type:"Q",x1:t,y1:e,x:n,y:i})};ai.prototype.close=ai.prototype.closePath=function(){this.commands.push({type:"Z"})};ai.prototype.extend=function(t){if(t.commands)t=t.commands;else if(t instanceof Sl){var e=t;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,t)};ai.prototype.getBoundingBox=function(){for(var t=new Sl,e=0,n=0,i=0,r=0,s=0;s<this.commands.length;s++){var o=this.commands[s];switch(o.type){case"M":t.addPoint(o.x,o.y),e=i=o.x,n=r=o.y;break;case"L":t.addPoint(o.x,o.y),i=o.x,r=o.y;break;case"Q":t.addQuad(i,r,o.x1,o.y1,o.x,o.y),i=o.x,r=o.y;break;case"C":t.addBezier(i,r,o.x1,o.y1,o.x2,o.y2,o.x,o.y),i=o.x,r=o.y;break;case"Z":i=e,r=n;break;default:throw new Error("Unexpected path command "+o.type)}}return t.isEmpty()&&t.addPoint(0,0),t};ai.prototype.draw=function(t){t.beginPath();for(var e=0;e<this.commands.length;e+=1){var n=this.commands[e];n.type==="M"?t.moveTo(n.x,n.y):n.type==="L"?t.lineTo(n.x,n.y):n.type==="C"?t.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"?t.quadraticCurveTo(n.x1,n.y1,n.x,n.y):n.type==="Z"&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())};ai.prototype.toPathData=function(t){t=t!==void 0?t:2;function e(o){return Math.round(o)===o?""+Math.round(o):o.toFixed(t)}function n(){for(var o=arguments,a="",l=0;l<arguments.length;l+=1){var u=o[l];u>=0&&l>0&&(a+=" "),a+=e(u)}return a}for(var i="",r=0;r<this.commands.length;r+=1){var s=this.commands[r];s.type==="M"?i+="M"+n(s.x,s.y):s.type==="L"?i+="L"+n(s.x,s.y):s.type==="C"?i+="C"+n(s.x1,s.y1,s.x2,s.y2,s.x,s.y):s.type==="Q"?i+="Q"+n(s.x1,s.y1,s.x,s.y):s.type==="Z"&&(i+="Z")}return i};ai.prototype.toSVG=function(t){var e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&&this.fill!=="black"&&(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e};ai.prototype.toDOMElement=function(t){var e=this.toPathData(t),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n};function PM(t){throw new Error(t)}function $9(t,e){t||PM(e)}var Et={fail:PM,argument:$9,assert:$9},eS=32768,tS=2147483648,Ch={},Fe={},pt={};function Xs(t){return function(){return t}}Fe.BYTE=function(t){return Et.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]};pt.BYTE=Xs(1);Fe.CHAR=function(t){return[t.charCodeAt(0)]};pt.CHAR=Xs(1);Fe.CHARARRAY=function(t){typeof t>"u"&&(t="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],n=0;n<t.length;n+=1)e[n]=t.charCodeAt(n);return e};pt.CHARARRAY=function(t){return typeof t>"u"?0:t.length};Fe.USHORT=function(t){return[t>>8&255,t&255]};pt.USHORT=Xs(2);Fe.SHORT=function(t){return t>=eS&&(t=-(2*eS-t)),[t>>8&255,t&255]};pt.SHORT=Xs(2);Fe.UINT24=function(t){return[t>>16&255,t>>8&255,t&255]};pt.UINT24=Xs(3);Fe.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]};pt.ULONG=Xs(4);Fe.LONG=function(t){return t>=tS&&(t=-(2*tS-t)),[t>>24&255,t>>16&255,t>>8&255,t&255]};pt.LONG=Xs(4);Fe.FIXED=Fe.ULONG;pt.FIXED=pt.ULONG;Fe.FWORD=Fe.SHORT;pt.FWORD=pt.SHORT;Fe.UFWORD=Fe.USHORT;pt.UFWORD=pt.USHORT;Fe.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]};pt.LONGDATETIME=Xs(8);Fe.TAG=function(t){return Et.argument(t.length===4,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]};pt.TAG=Xs(4);Fe.Card8=Fe.BYTE;pt.Card8=pt.BYTE;Fe.Card16=Fe.USHORT;pt.Card16=pt.USHORT;Fe.OffSize=Fe.BYTE;pt.OffSize=pt.BYTE;Fe.SID=Fe.USHORT;pt.SID=pt.USHORT;Fe.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?(t=t-108,[(t>>8)+247,t&255]):t>=-1131&&t<=-108?(t=-t-108,[(t>>8)+251,t&255]):t>=-32768&&t<=32767?Fe.NUMBER16(t):Fe.NUMBER32(t)};pt.NUMBER=function(t){return Fe.NUMBER(t).length};Fe.NUMBER16=function(t){return[28,t>>8&255,t&255]};pt.NUMBER16=Xs(3);Fe.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,t&255]};pt.NUMBER32=Xs(5);Fe.REAL=function(t){var e=t.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(n){var i=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));e=(Math.round(t*i)/i).toString()}for(var r="",s=0,o=e.length;s<o;s+=1){var a=e[s];a==="e"?r+=e[++s]==="-"?"c":"b":a==="."?r+="a":a==="-"?r+="e":r+=a}r+=r.length&1?"f":"ff";for(var l=[30],u=0,h=r.length;u<h;u+=2)l.push(parseInt(r.substr(u,2),16));return l};pt.REAL=function(t){return Fe.REAL(t).length};Fe.NAME=Fe.CHARARRAY;pt.NAME=pt.CHARARRAY;Fe.STRING=Fe.CHARARRAY;pt.STRING=pt.CHARARRAY;Ch.UTF8=function(t,e,n){for(var i=[],r=n,s=0;s<r;s++,e+=1)i[s]=t.getUint8(e);return String.fromCharCode.apply(null,i)};Ch.UTF16=function(t,e,n){for(var i=[],r=n/2,s=0;s<r;s++,e+=2)i[s]=t.getUint16(e);return String.fromCharCode.apply(null,i)};Fe.UTF16=function(t){for(var e=[],n=0;n<t.length;n+=1){var i=t.charCodeAt(n);e[e.length]=i>>8&255,e[e.length]=i&255}return e};pt.UTF16=function(t){return t.length*2};var v6={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};Ch.MACSTRING=function(t,e,n,i){var r=v6[i];if(r!==void 0){for(var s="",o=0;o<n;o++){var a=t.getUint8(e+o);a<=127?s+=String.fromCharCode(a):s+=r[a&127]}return s}};var H3=typeof WeakMap=="function"&&new WeakMap,V3,Kz=function(t){if(!V3){V3={};for(var e in v6)V3[e]=new String(e)}var n=V3[t];if(n!==void 0){if(H3){var i=H3.get(n);if(i!==void 0)return i}var r=v6[t];if(r!==void 0){for(var s={},o=0;o<r.length;o++)s[r.charCodeAt(o)]=o+128;return H3&&H3.set(n,s),s}}};Fe.MACSTRING=function(t,e){var n=Kz(e);if(n!==void 0){for(var i=[],r=0;r<t.length;r++){var s=t.charCodeAt(r);if(s>=128&&(s=n[s],s===void 0))return;i[r]=s}return i}};pt.MACSTRING=function(t,e){var n=Fe.MACSTRING(t,e);return n!==void 0?n.length:0};function y6(t){return t>=-128&&t<=127}function jz(t,e,n){for(var i=0,r=t.length;e<r&&i<64&&t[e]===0;)++e,++i;return n.push(128|i-1),e}function Jz(t,e,n){for(var i=0,r=t.length,s=e;s<r&&i<64;){var o=t[s];if(!y6(o)||o===0&&s+1<r&&t[s+1]===0)break;++s,++i}n.push(i-1);for(var a=e;a<s;++a)n.push(t[a]+256&255);return s}function Zz(t,e,n){for(var i=0,r=t.length,s=e;s<r&&i<64;){var o=t[s];if(o===0||y6(o)&&s+1<r&&y6(t[s+1]))break;++s,++i}n.push(64|i-1);for(var a=e;a<s;++a){var l=t[a];n.push(l+65536>>8&255,l+256&255)}return s}Fe.VARDELTAS=function(t){for(var e=0,n=[];e<t.length;){var i=t[e];i===0?e=jz(t,e,n):i>=-128&&i<=127?e=Jz(t,e,n):e=Zz(t,e,n)}return n};Fe.INDEX=function(t){for(var e=1,n=[e],i=[],r=0;r<t.length;r+=1){var s=Fe.OBJECT(t[r]);Array.prototype.push.apply(i,s),e+=s.length,n.push(e)}if(i.length===0)return[0,0];for(var o=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,Fe.BYTE,Fe.USHORT,Fe.UINT24,Fe.ULONG][a],u=0;u<n.length;u+=1){var h=l(n[u]);Array.prototype.push.apply(o,h)}return Array.prototype.concat(Fe.Card16(t.length),Fe.OffSize(a),o,i)};pt.INDEX=function(t){return Fe.INDEX(t).length};Fe.DICT=function(t){for(var e=[],n=Object.keys(t),i=n.length,r=0;r<i;r+=1){var s=parseInt(n[r],0),o=t[s];e=e.concat(Fe.OPERAND(o.value,o.type)),e=e.concat(Fe.OPERATOR(s))}return e};pt.DICT=function(t){return Fe.DICT(t).length};Fe.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]};Fe.OPERAND=function(t,e){var n=[];if(Array.isArray(e))for(var i=0;i<e.length;i+=1)Et.argument(t.length===e.length,"Not enough arguments given for type"+e),n=n.concat(Fe.OPERAND(t[i],e[i]));else if(e==="SID")n=n.concat(Fe.NUMBER(t));else if(e==="offset")n=n.concat(Fe.NUMBER32(t));else if(e==="number")n=n.concat(Fe.NUMBER(t));else if(e==="real")n=n.concat(Fe.REAL(t));else throw new Error("Unknown operand type "+e);return n};Fe.OP=Fe.BYTE;pt.OP=pt.BYTE;var W3=typeof WeakMap=="function"&&new WeakMap;Fe.CHARSTRING=function(t){if(W3){var e=W3.get(t);if(e!==void 0)return e}for(var n=[],i=t.length,r=0;r<i;r+=1){var s=t[r];n=n.concat(Fe[s.type](s.value))}return W3&&W3.set(t,n),n};pt.CHARSTRING=function(t){return Fe.CHARSTRING(t).length};Fe.OBJECT=function(t){var e=Fe[t.type];return Et.argument(e!==void 0,"No encoding function for type "+t.type),e(t.value)};pt.OBJECT=function(t){var e=pt[t.type];return Et.argument(e!==void 0,"No sizeOf function for type "+t.type),e(t.value)};Fe.TABLE=function(t){for(var e=[],n=t.fields.length,i=[],r=[],s=0;s<n;s+=1){var o=t.fields[s],a=Fe[o.type];Et.argument(a!==void 0,"No encoding function for field type "+o.type+" ("+o.name+")");var l=t[o.name];l===void 0&&(l=o.value);var u=a(l);o.type==="TABLE"?(r.push(e.length),e=e.concat([0,0]),i.push(u)):e=e.concat(u)}for(var h=0;h<i.length;h+=1){var d=r[h],p=e.length;Et.argument(p<65536,"Table "+t.tableName+" too big."),e[d]=p>>8,e[d+1]=p&255,e=e.concat(i[h])}return e};pt.TABLE=function(t){for(var e=0,n=t.fields.length,i=0;i<n;i+=1){var r=t.fields[i],s=pt[r.type];Et.argument(s!==void 0,"No sizeOf function for field type "+r.type+" ("+r.name+")");var o=t[r.name];o===void 0&&(o=r.value),e+=s(o),r.type==="TABLE"&&(e+=2)}return e};Fe.RECORD=Fe.TABLE;pt.RECORD=pt.TABLE;Fe.LITERAL=function(t){return t};pt.LITERAL=function(t){return t.length};function pi(t,e,n){if(e.length&&(e[0].name!=="coverageFormat"||e[0].value===1))for(var i=0;i<e.length;i+=1){var r=e[i];this[r.name]=r.value}if(this.tableName=t,this.fields=e,n)for(var s=Object.keys(n),o=0;o<s.length;o+=1){var a=s[o],l=n[a];this[a]!==void 0&&(this[a]=l)}}pi.prototype.encode=function(){return Fe.TABLE(this)};pi.prototype.sizeOf=function(){return pt.TABLE(this)};function tp(t,e,n){n===void 0&&(n=e.length);var i=new Array(e.length+1);i[0]={name:t+"Count",type:"USHORT",value:n};for(var r=0;r<e.length;r++)i[r+1]={name:t+r,type:"USHORT",value:e[r]};return i}function x6(t,e,n){var i=e.length,r=new Array(i+1);r[0]={name:t+"Count",type:"USHORT",value:i};for(var s=0;s<i;s++)r[s+1]={name:t+s,type:"TABLE",value:n(e[s],s)};return r}function np(t,e,n){var i=e.length,r=[];r[0]={name:t+"Count",type:"USHORT",value:i};for(var s=0;s<i;s++)r=r.concat(n(e[s],s));return r}function om(t){t.format===1?pi.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(tp("glyph",t.glyphs))):t.format===2?pi.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(np("rangeRecord",t.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):Et.assert(!1,"Coverage format must be 1 or 2.")}om.prototype=Object.create(pi.prototype);om.prototype.constructor=om;function am(t){pi.call(this,"scriptListTable",np("scriptRecord",t,function(e,n){var i=e.script,r=i.defaultLangSys;return Et.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+n,type:"TAG",value:e.tag},{name:"script"+n,type:"TABLE",value:new pi("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new pi("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(tp("featureIndex",r.featureIndexes)))}].concat(np("langSys",i.langSysRecords,function(s,o){var a=s.langSys;return[{name:"langSysTag"+o,type:"TAG",value:s.tag},{name:"langSys"+o,type:"TABLE",value:new pi("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(tp("featureIndex",a.featureIndexes)))}]})))}]}))}am.prototype=Object.create(pi.prototype);am.prototype.constructor=am;function lm(t){pi.call(this,"featureListTable",np("featureRecord",t,function(e,n){var i=e.feature;return[{name:"featureTag"+n,type:"TAG",value:e.tag},{name:"feature"+n,type:"TABLE",value:new pi("featureTable",[{name:"featureParams",type:"USHORT",value:i.featureParams}].concat(tp("lookupListIndex",i.lookupListIndexes)))}]}))}lm.prototype=Object.create(pi.prototype);lm.prototype.constructor=lm;function um(t,e){pi.call(this,"lookupListTable",x6("lookup",t,function(n){var i=e[n.lookupType];return Et.assert(!!i,"Unable to write GSUB lookup type "+n.lookupType+" tables."),new pi("lookupTable",[{name:"lookupType",type:"USHORT",value:n.lookupType},{name:"lookupFlag",type:"USHORT",value:n.lookupFlag}].concat(x6("subtable",n.subtables,i)))}))}um.prototype=Object.create(pi.prototype);um.prototype.constructor=um;var je={Table:pi,Record:pi,Coverage:om,ScriptList:am,FeatureList:lm,LookupList:um,ushortList:tp,tableList:x6,recordList:np};function nS(t,e){return t.getUint8(e)}function cm(t,e){return t.getUint16(e,!1)}function $z(t,e){return t.getInt16(e,!1)}function G4(t,e){return t.getUint32(e,!1)}function DM(t,e){var n=t.getInt16(e,!1),i=t.getUint16(e+2,!1);return n+i/65535}function eH(t,e){for(var n="",i=e;i<e+4;i+=1)n+=String.fromCharCode(t.getInt8(i));return n}function tH(t,e,n){for(var i=0,r=0;r<n;r+=1)i<<=8,i+=t.getUint8(e+r);return i}function nH(t,e,n){for(var i=[],r=e;r<n;r+=1)i.push(t.getUint8(r));return i}function iH(t){for(var e="",n=0;n<t.length;n+=1)e+=String.fromCharCode(t[n]);return e}var rH={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ae(t,e){this.data=t,this.offset=e,this.relativeOffset=0}ae.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};ae.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};ae.prototype.parseCard8=ae.prototype.parseByte;ae.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};ae.prototype.parseCard16=ae.prototype.parseUShort;ae.prototype.parseSID=ae.prototype.parseUShort;ae.prototype.parseOffset16=ae.prototype.parseUShort;ae.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};ae.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t};ae.prototype.parseULong=function(){var t=G4(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};ae.prototype.parseOffset32=ae.prototype.parseULong;ae.prototype.parseFixed=function(){var t=DM(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};ae.prototype.parseString=function(t){var e=this.data,n=this.offset+this.relativeOffset,i="";this.relativeOffset+=t;for(var r=0;r<t;r++)i+=String.fromCharCode(e.getUint8(n+r));return i};ae.prototype.parseTag=function(){return this.parseString(4)};ae.prototype.parseLongDateTime=function(){var t=G4(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t};ae.prototype.parseVersion=function(t){var e=cm(this.data,this.offset+this.relativeOffset),n=cm(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t===void 0&&(t=4096),e+n/t/10};ae.prototype.skip=function(t,e){e===void 0&&(e=1),this.relativeOffset+=rH[t]*e};ae.prototype.parseULongList=function(t){t===void 0&&(t=this.parseULong());for(var e=new Array(t),n=this.data,i=this.offset+this.relativeOffset,r=0;r<t;r++)e[r]=n.getUint32(i),i+=4;return this.relativeOffset+=t*4,e};ae.prototype.parseOffset16List=ae.prototype.parseUShortList=function(t){t===void 0&&(t=this.parseUShort());for(var e=new Array(t),n=this.data,i=this.offset+this.relativeOffset,r=0;r<t;r++)e[r]=n.getUint16(i),i+=2;return this.relativeOffset+=t*2,e};ae.prototype.parseShortList=function(t){for(var e=new Array(t),n=this.data,i=this.offset+this.relativeOffset,r=0;r<t;r++)e[r]=n.getInt16(i),i+=2;return this.relativeOffset+=t*2,e};ae.prototype.parseByteList=function(t){for(var e=new Array(t),n=this.data,i=this.offset+this.relativeOffset,r=0;r<t;r++)e[r]=n.getUint8(i++);return this.relativeOffset+=t,e};ae.prototype.parseList=function(t,e){e||(e=t,t=this.parseUShort());for(var n=new Array(t),i=0;i<t;i++)n[i]=e.call(this);return n};ae.prototype.parseList32=function(t,e){e||(e=t,t=this.parseULong());for(var n=new Array(t),i=0;i<t;i++)n[i]=e.call(this);return n};ae.prototype.parseRecordList=function(t,e){e||(e=t,t=this.parseUShort());for(var n=new Array(t),i=Object.keys(e),r=0;r<t;r++){for(var s={},o=0;o<i.length;o++){var a=i[o],l=e[a];s[a]=l.call(this)}n[r]=s}return n};ae.prototype.parseRecordList32=function(t,e){e||(e=t,t=this.parseULong());for(var n=new Array(t),i=Object.keys(e),r=0;r<t;r++){for(var s={},o=0;o<i.length;o++){var a=i[o],l=e[a];s[a]=l.call(this)}n[r]=s}return n};ae.prototype.parseStruct=function(t){if(typeof t=="function")return t.call(this);for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i],s=t[r];n[r]=s.call(this)}return n};ae.prototype.parseValueRecord=function(t){if(t===void 0&&(t=this.parseUShort()),t!==0){var e={};return t&1&&(e.xPlacement=this.parseShort()),t&2&&(e.yPlacement=this.parseShort()),t&4&&(e.xAdvance=this.parseShort()),t&8&&(e.yAdvance=this.parseShort()),t&16&&(e.xPlaDevice=void 0,this.parseShort()),t&32&&(e.yPlaDevice=void 0,this.parseShort()),t&64&&(e.xAdvDevice=void 0,this.parseShort()),t&128&&(e.yAdvDevice=void 0,this.parseShort()),e}};ae.prototype.parseValueRecordList=function(){for(var t=this.parseUShort(),e=this.parseUShort(),n=new Array(e),i=0;i<e;i++)n[i]=this.parseValueRecord(t);return n};ae.prototype.parsePointer=function(t){var e=this.parseOffset16();if(e>0)return new ae(this.data,this.offset+e).parseStruct(t)};ae.prototype.parsePointer32=function(t){var e=this.parseOffset32();if(e>0)return new ae(this.data,this.offset+e).parseStruct(t)};ae.prototype.parseListOfLists=function(t){for(var e=this.parseOffset16List(),n=e.length,i=this.relativeOffset,r=new Array(n),s=0;s<n;s++){var o=e[s];if(o===0){r[s]=void 0;continue}if(this.relativeOffset=o,t){for(var a=this.parseOffset16List(),l=new Array(a.length),u=0;u<a.length;u++)this.relativeOffset=o+a[u],l[u]=t.call(this);r[s]=l}else r[s]=this.parseUShortList()}return this.relativeOffset=i,r};ae.prototype.parseCoverage=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort(),n=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(n)};if(e===2){for(var i=new Array(n),r=0;r<n;r++)i[r]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:i}}throw new Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.")};ae.prototype.parseClassDef=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:ae.uShort,end:ae.uShort,classId:ae.uShort})};throw new Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")};ae.list=function(t,e){return function(){return this.parseList(t,e)}};ae.list32=function(t,e){return function(){return this.parseList32(t,e)}};ae.recordList=function(t,e){return function(){return this.parseRecordList(t,e)}};ae.recordList32=function(t,e){return function(){return this.parseRecordList32(t,e)}};ae.pointer=function(t){return function(){return this.parsePointer(t)}};ae.pointer32=function(t){return function(){return this.parsePointer32(t)}};ae.tag=ae.prototype.parseTag;ae.byte=ae.prototype.parseByte;ae.uShort=ae.offset16=ae.prototype.parseUShort;ae.uShortList=ae.prototype.parseUShortList;ae.uLong=ae.offset32=ae.prototype.parseULong;ae.uLongList=ae.prototype.parseULongList;ae.struct=ae.prototype.parseStruct;ae.coverage=ae.prototype.parseCoverage;ae.classDef=ae.prototype.parseClassDef;var iS={reserved:ae.uShort,reqFeatureIndex:ae.uShort,featureIndexes:ae.uShortList};ae.prototype.parseScriptList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,script:ae.pointer({defaultLangSys:ae.pointer(iS),langSysRecords:ae.recordList({tag:ae.tag,langSys:ae.pointer(iS)})})}))||[]};ae.prototype.parseFeatureList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,feature:ae.pointer({featureParams:ae.offset16,lookupListIndexes:ae.uShortList})}))||[]};ae.prototype.parseLookupList=function(t){return this.parsePointer(ae.list(ae.pointer(function(){var e=this.parseUShort();Et.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var n=this.parseUShort(),i=n&16;return{lookupType:e,lookupFlag:n,subtables:this.parseList(ae.pointer(t[e])),markFilteringSet:i?this.parseUShort():void 0}})))||[]};ae.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var t=this.parseUShort(),e=this.parseUShort();Et.argument(t===1&&e<1,"GPOS/GSUB feature variations table unknown.");var n=this.parseRecordList32({conditionSetOffset:ae.offset32,featureTableSubstitutionOffset:ae.offset32});return n})||[]};var wt={getByte:nS,getCard8:nS,getUShort:cm,getCard16:cm,getShort:$z,getULong:G4,getFixed:DM,getTag:eH,getOffset:tH,getBytes:nH,bytesToString:iH,Parser:ae};function sH(t,e){e.parseUShort(),t.length=e.parseULong(),t.language=e.parseULong();var n;t.groupCount=n=e.parseULong(),t.glyphIndexMap={};for(var i=0;i<n;i+=1)for(var r=e.parseULong(),s=e.parseULong(),o=e.parseULong(),a=r;a<=s;a+=1)t.glyphIndexMap[a]=o,o++}function oH(t,e,n,i,r){t.length=e.parseUShort(),t.language=e.parseUShort();var s;t.segCount=s=e.parseUShort()>>1,e.skip("uShort",3),t.glyphIndexMap={};for(var o=new wt.Parser(n,i+r+14),a=new wt.Parser(n,i+r+16+s*2),l=new wt.Parser(n,i+r+16+s*4),u=new wt.Parser(n,i+r+16+s*6),h=i+r+16+s*8,d=0;d<s-1;d+=1)for(var p=void 0,A=o.parseUShort(),g=a.parseUShort(),S=l.parseShort(),E=u.parseUShort(),m=g;m<=A;m+=1)E!==0?(h=u.offset+u.relativeOffset-2,h+=E,h+=(m-g)*2,p=wt.getUShort(n,h),p!==0&&(p=p+S&65535)):p=m+S&65535,t.glyphIndexMap[m]=p}function aH(t,e){var n={};n.version=wt.getUShort(t,e),Et.argument(n.version===0,"cmap table version should be 0."),n.numTables=wt.getUShort(t,e+2);for(var i=-1,r=n.numTables-1;r>=0;r-=1){var s=wt.getUShort(t,e+4+r*8),o=wt.getUShort(t,e+4+r*8+2);if(s===3&&(o===0||o===1||o===10)||s===0&&(o===0||o===1||o===2||o===3||o===4)){i=wt.getULong(t,e+4+r*8+4);break}}if(i===-1)throw new Error("No valid cmap sub-tables found.");var a=new wt.Parser(t,e+i);if(n.format=a.parseUShort(),n.format===12)sH(n,a);else if(n.format===4)oH(n,a,t,e,i);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");return n}function lH(t,e,n){t.segments.push({end:e,start:e,delta:-(e-n),offset:0,glyphIndex:n})}function uH(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function cH(t){var e=!0,n;for(n=t.length-1;n>0;n-=1){var i=t.get(n);if(i.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:12+8}];e||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new je.Table("cmap",r);for(s.segments=[],n=0;n<t.length;n+=1){for(var o=t.get(n),a=0;a<o.unicodes.length;a+=1)lH(s,o.unicodes[a],n);s.segments=s.segments.sort(function(x,y){return x.start-y.start})}uH(s);var l=s.segments.length,u=0,h=[],d=[],p=[],A=[],g=[],S=[];for(n=0;n<l;n+=1){var E=s.segments[n];E.end<=65535&&E.start<=65535?(h=h.concat({name:"end_"+n,type:"USHORT",value:E.end}),d=d.concat({name:"start_"+n,type:"USHORT",value:E.start}),p=p.concat({name:"idDelta_"+n,type:"SHORT",value:E.delta}),A=A.concat({name:"idRangeOffset_"+n,type:"USHORT",value:E.offset}),E.glyphId!==void 0&&(g=g.concat({name:"glyph_"+n,type:"USHORT",value:E.glyphId}))):u+=1,!e&&E.glyphIndex!==void 0&&(S=S.concat({name:"cmap12Start_"+n,type:"ULONG",value:E.start}),S=S.concat({name:"cmap12End_"+n,type:"ULONG",value:E.end}),S=S.concat({name:"cmap12Glyph_"+n,type:"ULONG",value:E.glyphIndex}))}if(s.segCountX2=(l-u)*2,s.searchRange=Math.pow(2,Math.floor(Math.log(l-u)/Math.log(2)))*2,s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(h),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(d),s.fields=s.fields.concat(p),s.fields=s.fields.concat(A),s.fields=s.fields.concat(g),s.cmap4Length=14+h.length*2+2+d.length*2+p.length*2+A.length*2+g.length*2,!e){var m=16+S.length*4;s.cmap12Offset=12+2*2+4+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:m},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:S.length/3}]),s.fields=s.fields.concat(S)}return s}var hH={parse:aH,make:cH},EA=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],fH=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],dH=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],rS=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function NM(t){this.font=t}NM.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),n=this.font.glyphs;if(n){for(var i=0;i<n.length;i+=1)for(var r=n.get(i),s=0;s<r.unicodes.length;s+=1)if(r.unicodes[s]===e)return i}return null};function hm(t,e){this.encoding=t,this.charset=e}hm.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),n=this.encoding[e];return this.charset.indexOf(n)};function pH(t,e,n,i,r){t.beginPath(),t.moveTo(e,n),t.lineTo(i,r),t.stroke()}var Vl={line:pH};function AH(t,e){var n=e||new ai;return{configurable:!0,get:function(){return typeof n=="function"&&(n=n()),n},set:function(i){n=i}}}function ms(t){this.bindConstructorValues(t)}ms.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||t.unicode!==void 0?[t.unicode]:[],"xMin"in t&&(this.xMin=t.xMin),"yMin"in t&&(this.yMin=t.yMin),"xMax"in t&&(this.xMax=t.xMax),"yMax"in t&&(this.yMax=t.yMax),"advanceWidth"in t&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",AH(this,t.path))};ms.prototype.addUnicode=function(t){this.unicodes.length===0&&(this.unicode=t),this.unicodes.push(t)};ms.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};ms.prototype.getPath=function(t,e,n,i,r){t=t!==void 0?t:0,e=e!==void 0?e:0,n=n!==void 0?n:72;var s,o;i||(i={});var a=i.xScale,l=i.yScale;if(i.hinting&&r&&r.hinting&&(o=this.path&&r.hinting.exec(this,n)),o)s=r.hinting.getCommands(o),t=Math.round(t),e=Math.round(e),a=l=1;else{s=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*n;a===void 0&&(a=u),l===void 0&&(l=u)}for(var h=new ai,d=0;d<s.length;d+=1){var p=s[d];p.type==="M"?h.moveTo(t+p.x*a,e+-p.y*l):p.type==="L"?h.lineTo(t+p.x*a,e+-p.y*l):p.type==="Q"?h.quadraticCurveTo(t+p.x1*a,e+-p.y1*l,t+p.x*a,e+-p.y*l):p.type==="C"?h.curveTo(t+p.x1*a,e+-p.y1*l,t+p.x2*a,e+-p.y2*l,t+p.x*a,e+-p.y*l):p.type==="Z"&&h.closePath()}return h};ms.prototype.getContours=function(){if(this.points===void 0)return[];for(var t=[],e=[],n=0;n<this.points.length;n+=1){var i=this.points[n];e.push(i),i.lastPointOfContour&&(t.push(e),e=[])}return Et.argument(e.length===0,"There are still points left in the current contour."),t};ms.prototype.getMetrics=function(){for(var t=this.path.commands,e=[],n=[],i=0;i<t.length;i+=1){var r=t[i];r.type!=="Z"&&(e.push(r.x),n.push(r.y)),(r.type==="Q"||r.type==="C")&&(e.push(r.x1),n.push(r.y1)),r.type==="C"&&(e.push(r.x2),n.push(r.y2))}var s={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(s.xMin)||(s.xMin=0),isFinite(s.xMax)||(s.xMax=this.advanceWidth),isFinite(s.yMin)||(s.yMin=0),isFinite(s.yMax)||(s.yMax=0),s.rightSideBearing=this.advanceWidth-s.leftSideBearing-(s.xMax-s.xMin),s};ms.prototype.draw=function(t,e,n,i,r){this.getPath(e,n,i,r).draw(t)};ms.prototype.drawPoints=function(t,e,n,i){function r(d,p,A,g){t.beginPath();for(var S=0;S<d.length;S+=1)t.moveTo(p+d[S].x*g,A+d[S].y*g),t.arc(p+d[S].x*g,A+d[S].y*g,2,0,Math.PI*2,!1);t.closePath(),t.fill()}e=e!==void 0?e:0,n=n!==void 0?n:0,i=i!==void 0?i:24;for(var s=1/this.path.unitsPerEm*i,o=[],a=[],l=this.path,u=0;u<l.commands.length;u+=1){var h=l.commands[u];h.x!==void 0&&o.push({x:h.x,y:-h.y}),h.x1!==void 0&&a.push({x:h.x1,y:-h.y1}),h.x2!==void 0&&a.push({x:h.x2,y:-h.y2})}t.fillStyle="blue",r(o,e,n,s),t.fillStyle="red",r(a,e,n,s)};ms.prototype.drawMetrics=function(t,e,n,i){var r;e=e!==void 0?e:0,n=n!==void 0?n:0,i=i!==void 0?i:24,r=1/this.path.unitsPerEm*i,t.lineWidth=1,t.strokeStyle="black",Vl.line(t,e,-1e4,e,1e4),Vl.line(t,-1e4,n,1e4,n);var s=this.xMin||0,o=this.yMin||0,a=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;t.strokeStyle="blue",Vl.line(t,e+s*r,-1e4,e+s*r,1e4),Vl.line(t,e+a*r,-1e4,e+a*r,1e4),Vl.line(t,-1e4,n+-o*r,1e4,n+-o*r),Vl.line(t,-1e4,n+-l*r,1e4,n+-l*r),t.strokeStyle="green",Vl.line(t,e+u*r,-1e4,e+u*r,1e4)};function X3(t,e,n){Object.defineProperty(t,e,{get:function(){return t.path,t[n]},set:function(i){t[n]=i},enumerable:!0,configurable:!0})}function z4(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];i.path.unitsPerEm=t.unitsPerEm,this.glyphs[n]=i}this.length=e&&e.length||0}z4.prototype.get=function(t){if(this.glyphs[t]===void 0){this.font._push(t),typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());var e=this.glyphs[t],n=this.font._IndexToUnicodeMap[t];if(n)for(var i=0;i<n.unicodes.length;i++)e.addUnicode(n.unicodes[i]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+t:e.name=this.font.cffEncoding.charset[t]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(t)),this.glyphs[t].advanceWidth=this.font._hmtxTableData[t].advanceWidth,this.glyphs[t].leftSideBearing=this.font._hmtxTableData[t].leftSideBearing}else typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());return this.glyphs[t]};z4.prototype.push=function(t,e){this.glyphs[t]=e,this.length++};function mH(t,e){return new ms({index:e,font:t})}function gH(t,e,n,i,r,s){return function(){var o=new ms({index:e,font:t});return o.path=function(){n(o,i,r);var a=s(t.glyphs,o);return a.unitsPerEm=t.unitsPerEm,a},X3(o,"xMin","_xMin"),X3(o,"xMax","_xMax"),X3(o,"yMin","_yMin"),X3(o,"yMax","_yMax"),o}}function vH(t,e,n,i){return function(){var r=new ms({index:e,font:t});return r.path=function(){var s=n(t,r,i);return s.unitsPerEm=t.unitsPerEm,s},r}}var xo={GlyphSet:z4,glyphLoader:mH,ttfGlyphLoader:gH,cffGlyphLoader:vH};function FM(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(!FM(t[n],e[n]))return!1;return!0}else return!1}function E6(t){var e;return t.length<1240?e=107:t.length<33900?e=1131:e=32768,e}function Ua(t,e,n){var i=[],r=[],s=wt.getCard16(t,e),o,a;if(s!==0){var l=wt.getByte(t,e+2);o=e+(s+1)*l+2;for(var u=e+3,h=0;h<s+1;h+=1)i.push(wt.getOffset(t,u,l)),u+=l;a=o+i[s]}else a=e+2;for(var d=0;d<i.length-1;d+=1){var p=wt.getBytes(t,o+i[d],o+i[d+1]);n&&(p=n(p)),r.push(p)}return{objects:r,startOffset:e,endOffset:a}}function yH(t,e){var n=[],i=wt.getCard16(t,e),r,s;if(i!==0){var o=wt.getByte(t,e+2);r=e+(i+1)*o+2;for(var a=e+3,l=0;l<i+1;l+=1)n.push(wt.getOffset(t,a,o)),a+=o;s=r+n[i]}else s=e+2;return{offsets:n,startOffset:e,endOffset:s}}function xH(t,e,n,i,r){var s=wt.getCard16(n,i),o=0;if(s!==0){var a=wt.getByte(n,i+2);o=i+(s+1)*a+2}var l=wt.getBytes(n,o+e[t],o+e[t+1]);return r&&(l=r(l)),l}function EH(t){for(var e="",n=15,i=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=t.parseByte(),s=r>>4,o=r&15;if(s===n||(e+=i[s],o===n))break;e+=i[o]}return parseFloat(e)}function SH(t,e){var n,i,r,s;if(e===28)return n=t.parseByte(),i=t.parseByte(),n<<8|i;if(e===29)return n=t.parseByte(),i=t.parseByte(),r=t.parseByte(),s=t.parseByte(),n<<24|i<<16|r<<8|s;if(e===30)return EH(t);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return n=t.parseByte(),(e-247)*256+n+108;if(e>=251&&e<=254)return n=t.parseByte(),-(e-251)*256-n-108;throw new Error("Invalid b0 "+e)}function _H(t){for(var e={},n=0;n<t.length;n+=1){var i=t[n][0],r=t[n][1],s=void 0;if(r.length===1?s=r[0]:s=r,e.hasOwnProperty(i)&&!isNaN(e[i]))throw new Error("Object "+e+" already has key "+i);e[i]=s}return e}function UM(t,e,n){e=e!==void 0?e:0;var i=new wt.Parser(t,e),r=[],s=[];for(n=n!==void 0?n:t.length;i.relativeOffset<n;){var o=i.parseByte();o<=21?(o===12&&(o=1200+i.parseByte()),r.push([o,s]),s=[]):s.push(SH(i,o))}return _H(r)}function fd(t,e){return e<=390?e=EA[e]:e=t[e-391],e}function OM(t,e,n){for(var i={},r,s=0;s<e.length;s+=1){var o=e[s];if(Array.isArray(o.type)){var a=[];a.length=o.type.length;for(var l=0;l<o.type.length;l++)r=t[o.op]!==void 0?t[o.op][l]:void 0,r===void 0&&(r=o.value!==void 0&&o.value[l]!==void 0?o.value[l]:null),o.type[l]==="SID"&&(r=fd(n,r)),a[l]=r;i[o.name]=a}else r=t[o.op],r===void 0&&(r=o.value!==void 0?o.value:null),o.type==="SID"&&(r=fd(n,r)),i[o.name]=r}return i}function CH(t,e){var n={};return n.formatMajor=wt.getCard8(t,e),n.formatMinor=wt.getCard8(t,e+1),n.size=wt.getCard8(t,e+2),n.offsetSize=wt.getCard8(t,e+3),n.startOffset=e,n.endOffset=e+4,n}var kM=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],QM=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function TH(t,e){var n=UM(t,0,t.byteLength);return OM(n,kM,e)}function GM(t,e,n,i){var r=UM(t,e,n);return OM(r,QM,i)}function sS(t,e,n,i){for(var r=[],s=0;s<n.length;s+=1){var o=new DataView(new Uint8Array(n[s]).buffer),a=TH(o,i);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],u=a.private[1];if(l!==0&&u!==0){var h=GM(t,u+e,l,i);if(a._defaultWidthX=h.defaultWidthX,a._nominalWidthX=h.nominalWidthX,h.subrs!==0){var d=u+h.subrs,p=Ua(t,d+e);a._subrs=p.objects,a._subrsBias=E6(a._subrs)}a._privateDict=h}r.push(a)}return r}function IH(t,e,n,i){var r,s,o=new wt.Parser(t,e);n-=1;var a=[".notdef"],l=o.parseCard8();if(l===0)for(var u=0;u<n;u+=1)r=o.parseSID(),a.push(fd(i,r));else if(l===1)for(;a.length<=n;){r=o.parseSID(),s=o.parseCard8();for(var h=0;h<=s;h+=1)a.push(fd(i,r)),r+=1}else if(l===2)for(;a.length<=n;){r=o.parseSID(),s=o.parseCard16();for(var d=0;d<=s;d+=1)a.push(fd(i,r)),r+=1}else throw new Error("Unknown charset format "+l);return a}function wH(t,e,n){var i,r={},s=new wt.Parser(t,e),o=s.parseCard8();if(o===0)for(var a=s.parseCard8(),l=0;l<a;l+=1)i=s.parseCard8(),r[i]=l;else if(o===1){var u=s.parseCard8();i=1;for(var h=0;h<u;h+=1)for(var d=s.parseCard8(),p=s.parseCard8(),A=d;A<=d+p;A+=1)r[A]=i,i+=1}else throw new Error("Unknown encoding format "+o);return new hm(r,n)}function oS(t,e,n){var i,r,s,o,a=new ai,l=[],u=0,h=!1,d=!1,p=0,A=0,g,S,E,m;if(t.isCIDFont){var x=t.tables.cff.topDict._fdSelect[e.index],y=t.tables.cff.topDict._fdArray[x];g=y._subrs,S=y._subrsBias,E=y._defaultWidthX,m=y._nominalWidthX}else g=t.tables.cff.topDict._subrs,S=t.tables.cff.topDict._subrsBias,E=t.tables.cff.topDict._defaultWidthX,m=t.tables.cff.topDict._nominalWidthX;var C=E;function I(L,R){d&&a.closePath(),a.moveTo(L,R),d=!0}function M(){var L;L=l.length%2!==0,L&&!h&&(C=l.shift()+m),u+=l.length>>1,l.length=0,h=!0}function w(L){for(var R,B,F,X,G,q,Y,$,j,P,Q,U,O=0;O<L.length;){var V=L[O];switch(O+=1,V){case 1:M();break;case 3:M();break;case 4:l.length>1&&!h&&(C=l.shift()+m,h=!0),A+=l.pop(),I(p,A);break;case 5:for(;l.length>0;)p+=l.shift(),A+=l.shift(),a.lineTo(p,A);break;case 6:for(;l.length>0&&(p+=l.shift(),a.lineTo(p,A),l.length!==0);)A+=l.shift(),a.lineTo(p,A);break;case 7:for(;l.length>0&&(A+=l.shift(),a.lineTo(p,A),l.length!==0);)p+=l.shift(),a.lineTo(p,A);break;case 8:for(;l.length>0;)i=p+l.shift(),r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),p=s+l.shift(),A=o+l.shift(),a.curveTo(i,r,s,o,p,A);break;case 10:G=l.pop()+S,q=g[G],q&&w(q);break;case 11:return;case 12:switch(V=L[O],O+=1,V){case 35:i=p+l.shift(),r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),Y=s+l.shift(),$=o+l.shift(),j=Y+l.shift(),P=$+l.shift(),Q=j+l.shift(),U=P+l.shift(),p=Q+l.shift(),A=U+l.shift(),l.shift(),a.curveTo(i,r,s,o,Y,$),a.curveTo(j,P,Q,U,p,A);break;case 34:i=p+l.shift(),r=A,s=i+l.shift(),o=r+l.shift(),Y=s+l.shift(),$=o,j=Y+l.shift(),P=o,Q=j+l.shift(),U=A,p=Q+l.shift(),a.curveTo(i,r,s,o,Y,$),a.curveTo(j,P,Q,U,p,A);break;case 36:i=p+l.shift(),r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),Y=s+l.shift(),$=o,j=Y+l.shift(),P=o,Q=j+l.shift(),U=P+l.shift(),p=Q+l.shift(),a.curveTo(i,r,s,o,Y,$),a.curveTo(j,P,Q,U,p,A);break;case 37:i=p+l.shift(),r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),Y=s+l.shift(),$=o+l.shift(),j=Y+l.shift(),P=$+l.shift(),Q=j+l.shift(),U=P+l.shift(),Math.abs(Q-p)>Math.abs(U-A)?p=Q+l.shift():A=U+l.shift(),a.curveTo(i,r,s,o,Y,$),a.curveTo(j,P,Q,U,p,A);break;default:console.log("Glyph "+e.index+": unknown operator 1200"+V),l.length=0}break;case 14:l.length>0&&!h&&(C=l.shift()+m,h=!0),d&&(a.closePath(),d=!1);break;case 18:M();break;case 19:case 20:M(),O+=u+7>>3;break;case 21:l.length>2&&!h&&(C=l.shift()+m,h=!0),A+=l.pop(),p+=l.pop(),I(p,A);break;case 22:l.length>1&&!h&&(C=l.shift()+m,h=!0),p+=l.pop(),I(p,A);break;case 23:M();break;case 24:for(;l.length>2;)i=p+l.shift(),r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),p=s+l.shift(),A=o+l.shift(),a.curveTo(i,r,s,o,p,A);p+=l.shift(),A+=l.shift(),a.lineTo(p,A);break;case 25:for(;l.length>6;)p+=l.shift(),A+=l.shift(),a.lineTo(p,A);i=p+l.shift(),r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),p=s+l.shift(),A=o+l.shift(),a.curveTo(i,r,s,o,p,A);break;case 26:for(l.length%2&&(p+=l.shift());l.length>0;)i=p,r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),p=s,A=o+l.shift(),a.curveTo(i,r,s,o,p,A);break;case 27:for(l.length%2&&(A+=l.shift());l.length>0;)i=p+l.shift(),r=A,s=i+l.shift(),o=r+l.shift(),p=s+l.shift(),A=o,a.curveTo(i,r,s,o,p,A);break;case 28:R=L[O],B=L[O+1],l.push((R<<24|B<<16)>>16),O+=2;break;case 29:G=l.pop()+t.gsubrsBias,q=t.gsubrs[G],q&&w(q);break;case 30:for(;l.length>0&&(i=p,r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),p=s+l.shift(),A=o+(l.length===1?l.shift():0),a.curveTo(i,r,s,o,p,A),l.length!==0);)i=p+l.shift(),r=A,s=i+l.shift(),o=r+l.shift(),A=o+l.shift(),p=s+(l.length===1?l.shift():0),a.curveTo(i,r,s,o,p,A);break;case 31:for(;l.length>0&&(i=p+l.shift(),r=A,s=i+l.shift(),o=r+l.shift(),A=o+l.shift(),p=s+(l.length===1?l.shift():0),a.curveTo(i,r,s,o,p,A),l.length!==0);)i=p,r=A+l.shift(),s=i+l.shift(),o=r+l.shift(),p=s+l.shift(),A=o+(l.length===1?l.shift():0),a.curveTo(i,r,s,o,p,A);break;default:V<32?console.log("Glyph "+e.index+": unknown operator "+V):V<247?l.push(V-139):V<251?(R=L[O],O+=1,l.push((V-247)*256+R+108)):V<255?(R=L[O],O+=1,l.push(-(V-251)*256-R-108)):(R=L[O],B=L[O+1],F=L[O+2],X=L[O+3],O+=4,l.push((R<<24|B<<16|F<<8|X)/65536))}}}return w(n),e.advanceWidth=C,a}function MH(t,e,n,i){var r=[],s,o=new wt.Parser(t,e),a=o.parseCard8();if(a===0)for(var l=0;l<n;l++){if(s=o.parseCard8(),s>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+i+")");r.push(s)}else if(a===3){var u=o.parseCard16(),h=o.parseCard16();if(h!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+h);for(var d,p=0;p<u;p++){if(s=o.parseCard8(),d=o.parseCard16(),s>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+i+")");if(d>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+d);for(;h<d;h++)r.push(s);h=d}if(d!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+d)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return r}function RH(t,e,n,i){n.tables.cff={};var r=CH(t,e),s=Ua(t,r.endOffset,wt.bytesToString),o=Ua(t,s.endOffset),a=Ua(t,o.endOffset,wt.bytesToString),l=Ua(t,a.endOffset);n.gsubrs=l.objects,n.gsubrsBias=E6(n.gsubrs);var u=sS(t,e,o.objects,a.objects);if(u.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var h=u[0];if(n.tables.cff.topDict=h,h._privateDict&&(n.defaultWidthX=h._privateDict.defaultWidthX,n.nominalWidthX=h._privateDict.nominalWidthX),h.ros[0]!==void 0&&h.ros[1]!==void 0&&(n.isCIDFont=!0),n.isCIDFont){var d=h.fdArray,p=h.fdSelect;if(d===0||p===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");d+=e;var A=Ua(t,d),g=sS(t,e,A.objects,a.objects);h._fdArray=g,p+=e,h._fdSelect=MH(t,p,n.numGlyphs,g.length)}var S=e+h.private[1],E=GM(t,S,h.private[0],a.objects);if(n.defaultWidthX=E.defaultWidthX,n.nominalWidthX=E.nominalWidthX,E.subrs!==0){var m=S+E.subrs,x=Ua(t,m);n.subrs=x.objects,n.subrsBias=E6(n.subrs)}else n.subrs=[],n.subrsBias=0;var y;i.lowMemory?(y=yH(t,e+h.charStrings),n.nGlyphs=y.offsets.length):(y=Ua(t,e+h.charStrings),n.nGlyphs=y.objects.length);var C=IH(t,e+h.charset,n.nGlyphs,a.objects);if(h.encoding===0?n.cffEncoding=new hm(fH,C):h.encoding===1?n.cffEncoding=new hm(dH,C):n.cffEncoding=wH(t,e+h.encoding,C),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new xo.GlyphSet(n),i.lowMemory)n._push=function(w){var L=xH(w,y.offsets,t,e+h.charStrings);n.glyphs.push(w,xo.cffGlyphLoader(n,w,oS,L))};else for(var I=0;I<n.nGlyphs;I+=1){var M=y.objects[I];n.glyphs.push(I,xo.cffGlyphLoader(n,I,oS,M))}}function zM(t,e){var n,i=EA.indexOf(t);return i>=0&&(n=i),i=e.indexOf(t),i>=0?n=i+EA.length:(n=EA.length+e.length,e.push(t)),n}function bH(){return new je.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function BH(t){var e=new je.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var n=0;n<t.length;n+=1)e.names.push({name:"name_"+n,type:"NAME",value:t[n]});return e}function HM(t,e,n){for(var i={},r=0;r<t.length;r+=1){var s=t[r],o=e[s.name];o!==void 0&&!FM(o,s.value)&&(s.type==="SID"&&(o=zM(o,n)),i[s.op]={name:s.name,type:s.type,value:o})}return i}function aS(t,e){var n=new je.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=HM(kM,t,e),n}function lS(t){var e=new je.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function LH(t){var e=new je.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var n=0;n<t.length;n+=1)e.strings.push({name:"string_"+n,type:"STRING",value:t[n]});return e}function PH(){return new je.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function DH(t,e){for(var n=new je.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<t.length;i+=1){var r=t[i],s=zM(r,e);n.fields.push({name:"glyph_"+i,type:"SID",value:s})}return n}function NH(t){var e=[],n=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var i=0,r=0,s=0;s<n.commands.length;s+=1){var o=void 0,a=void 0,l=n.commands[s];if(l.type==="Q"){var u=.3333333333333333,h=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(u*i+h*l.x1),y1:Math.round(u*r+h*l.y1),x2:Math.round(u*l.x+h*l.x1),y2:Math.round(u*l.y+h*l.y1)}}if(l.type==="M")o=Math.round(l.x-i),a=Math.round(l.y-r),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),i=Math.round(l.x),r=Math.round(l.y);else if(l.type==="L")o=Math.round(l.x-i),a=Math.round(l.y-r),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),i=Math.round(l.x),r=Math.round(l.y);else if(l.type==="C"){var d=Math.round(l.x1-i),p=Math.round(l.y1-r),A=Math.round(l.x2-l.x1),g=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:d}),e.push({name:"dy1",type:"NUMBER",value:p}),e.push({name:"dx2",type:"NUMBER",value:A}),e.push({name:"dy2",type:"NUMBER",value:g}),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),i=Math.round(l.x),r=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function FH(t){for(var e=new je.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<t.length;n+=1){var i=t.get(n),r=NH(i);e.charStrings.push({name:i.name,type:"CHARSTRING",value:r})}return e}function UH(t,e){var n=new je.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=HM(QM,t,e),n}function OH(t,e){for(var n=new je.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),i=1/e.unitsPerEm,r={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s={},o=[],a,l=1;l<t.length;l+=1)a=t.get(l),o.push(a.name);var u=[];n.header=bH(),n.nameIndex=BH([e.postScriptName]);var h=aS(r,u);n.topDictIndex=lS(h),n.globalSubrIndex=PH(),n.charsets=DH(o,u),n.charStringsIndex=FH(t),n.privateDict=UH(s,u),n.stringIndex=LH(u);var d=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return r.charset=d,r.encoding=0,r.charStrings=r.charset+n.charsets.sizeOf(),r.private[1]=r.charStrings+n.charStringsIndex.sizeOf(),h=aS(r,u),n.topDictIndex=lS(h),n}var kH={parse:RH,make:OH};function QH(t,e){var n={},i=new wt.Parser(t,e);return n.version=i.parseVersion(),n.fontRevision=Math.round(i.parseFixed()*1e3)/1e3,n.checkSumAdjustment=i.parseULong(),n.magicNumber=i.parseULong(),Et.argument(n.magicNumber===1594834165,"Font header has wrong magic number."),n.flags=i.parseUShort(),n.unitsPerEm=i.parseUShort(),n.created=i.parseLongDateTime(),n.modified=i.parseLongDateTime(),n.xMin=i.parseShort(),n.yMin=i.parseShort(),n.xMax=i.parseShort(),n.yMax=i.parseShort(),n.macStyle=i.parseUShort(),n.lowestRecPPEM=i.parseUShort(),n.fontDirectionHint=i.parseShort(),n.indexToLocFormat=i.parseShort(),n.glyphDataFormat=i.parseShort(),n}function GH(t){var e=Math.round(new Date().getTime()/1e3)+2082844800,n=e;return t.createdTimestamp&&(n=t.createdTimestamp+2082844800),new je.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var zH={parse:QH,make:GH};function HH(t,e){var n={},i=new wt.Parser(t,e);return n.version=i.parseVersion(),n.ascender=i.parseShort(),n.descender=i.parseShort(),n.lineGap=i.parseShort(),n.advanceWidthMax=i.parseUShort(),n.minLeftSideBearing=i.parseShort(),n.minRightSideBearing=i.parseShort(),n.xMaxExtent=i.parseShort(),n.caretSlopeRise=i.parseShort(),n.caretSlopeRun=i.parseShort(),n.caretOffset=i.parseShort(),i.relativeOffset+=8,n.metricDataFormat=i.parseShort(),n.numberOfHMetrics=i.parseUShort(),n}function VH(t){return new je.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var WH={parse:HH,make:VH};function XH(t,e,n,i,r){for(var s,o,a=new wt.Parser(t,e),l=0;l<i;l+=1){l<n&&(s=a.parseUShort(),o=a.parseShort());var u=r.get(l);u.advanceWidth=s,u.leftSideBearing=o}}function qH(t,e,n,i,r){t._hmtxTableData={};for(var s,o,a=new wt.Parser(e,n),l=0;l<r;l+=1)l<i&&(s=a.parseUShort(),o=a.parseShort()),t._hmtxTableData[l]={advanceWidth:s,leftSideBearing:o}}function YH(t,e,n,i,r,s,o){o.lowMemory?qH(t,e,n,i,r):XH(e,n,i,r,s)}function KH(t){for(var e=new je.Table("hmtx",[]),n=0;n<t.length;n+=1){var i=t.get(n),r=i.advanceWidth||0,s=i.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:r}),e.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:s})}return e}var jH={parse:YH,make:KH};function JH(t){for(var e=new je.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),n="",i=12+t.length*4,r=0;r<t.length;++r){var s=n.indexOf(t[r]);s<0&&(s=n.length,n+=t[r]),e.fields.push({name:"offset "+r,type:"USHORT",value:i+s}),e.fields.push({name:"length "+r,type:"USHORT",value:t[r].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),e}function ZH(t,e){var n=new wt.Parser(t,e),i=n.parseULong();Et.argument(i===1,"Unsupported ltag table version."),n.skip("uLong",1);for(var r=n.parseULong(),s=[],o=0;o<r;o++){for(var a="",l=e+n.parseUShort(),u=n.parseUShort(),h=l;h<l+u;++h)a+=String.fromCharCode(t.getInt8(h));s.push(a)}return s}var $H={make:JH,parse:ZH};function eV(t,e){var n={},i=new wt.Parser(t,e);return n.version=i.parseVersion(),n.numGlyphs=i.parseUShort(),n.version===1&&(n.maxPoints=i.parseUShort(),n.maxContours=i.parseUShort(),n.maxCompositePoints=i.parseUShort(),n.maxCompositeContours=i.parseUShort(),n.maxZones=i.parseUShort(),n.maxTwilightPoints=i.parseUShort(),n.maxStorage=i.parseUShort(),n.maxFunctionDefs=i.parseUShort(),n.maxInstructionDefs=i.parseUShort(),n.maxStackElements=i.parseUShort(),n.maxSizeOfInstructions=i.parseUShort(),n.maxComponentElements=i.parseUShort(),n.maxComponentDepth=i.parseUShort()),n}function tV(t){return new je.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var nV={parse:eV,make:tV},VM=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],WM={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},iV={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},XM={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function rV(t,e,n){switch(t){case 0:if(e===65535)return"und";if(n)return n[e];break;case 1:return WM[e];case 3:return XM[e]}}var S6="utf-16",sV={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},oV={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function qM(t,e,n){switch(t){case 0:return S6;case 1:return oV[n]||sV[e];case 3:if(e===1||e===10)return S6;break}}function aV(t,e,n){for(var i={},r=new wt.Parser(t,e),s=r.parseUShort(),o=r.parseUShort(),a=r.offset+r.parseUShort(),l=0;l<o;l++){var u=r.parseUShort(),h=r.parseUShort(),d=r.parseUShort(),p=r.parseUShort(),A=VM[p]||p,g=r.parseUShort(),S=r.parseUShort(),E=rV(u,d,n),m=qM(u,h,d);if(m!==void 0&&E!==void 0){var x=void 0;if(m===S6?x=Ch.UTF16(t,a+S,g):x=Ch.MACSTRING(t,a+S,g,m),x){var y=i[A];y===void 0&&(y=i[A]={}),y[E]=x}}}return s===1&&r.parseUShort(),i}function m5(t){var e={};for(var n in t)e[t[n]]=parseInt(n);return e}function uS(t,e,n,i,r,s){return new je.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:i},{name:"length",type:"USHORT",value:r},{name:"offset",type:"USHORT",value:s}])}function lV(t,e){var n=t.length,i=e.length-n+1;e:for(var r=0;r<i;r++)for(;r<i;r++){for(var s=0;s<n;s++)if(e[r+s]!==t[s])continue e;return r}return-1}function cS(t,e){var n=lV(t,e);if(n<0){n=e.length;for(var i=0,r=t.length;i<r;++i)e.push(t[i])}return n}function uV(t,e){var n,i=[],r={},s=m5(VM);for(var o in t){var a=s[o];if(a===void 0&&(a=o),n=parseInt(a),isNaN(n))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');r[n]=t[o],i.push(n)}for(var l=m5(WM),u=m5(XM),h=[],d=[],p=0;p<i.length;p++){n=i[p];var A=r[n];for(var g in A){var S=A[g],E=1,m=l[g],x=iV[m],y=qM(E,x,m),C=Fe.MACSTRING(S,y);C===void 0&&(E=0,m=e.indexOf(g),m<0&&(m=e.length,e.push(g)),x=4,C=Fe.UTF16(S));var I=cS(C,d);h.push(uS(E,x,m,n,C.length,I));var M=u[g];if(M!==void 0){var w=Fe.UTF16(S),L=cS(w,d);h.push(uS(3,1,M,n,w.length,L))}}}h.sort(function(F,X){return F.platformID-X.platformID||F.encodingID-X.encodingID||F.languageID-X.languageID||F.nameID-X.nameID});for(var R=new je.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:h.length},{name:"stringOffset",type:"USHORT",value:6+h.length*12}]),B=0;B<h.length;B++)R.fields.push({name:"record_"+B,type:"RECORD",value:h[B]});return R.fields.push({name:"strings",type:"LITERAL",value:d}),R}var cV={parse:aV,make:uV},_6=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function hV(t){for(var e=0;e<_6.length;e+=1){var n=_6[e];if(t>=n.begin&&t<n.end)return e}return-1}function fV(t,e){var n={},i=new wt.Parser(t,e);n.version=i.parseUShort(),n.xAvgCharWidth=i.parseShort(),n.usWeightClass=i.parseUShort(),n.usWidthClass=i.parseUShort(),n.fsType=i.parseUShort(),n.ySubscriptXSize=i.parseShort(),n.ySubscriptYSize=i.parseShort(),n.ySubscriptXOffset=i.parseShort(),n.ySubscriptYOffset=i.parseShort(),n.ySuperscriptXSize=i.parseShort(),n.ySuperscriptYSize=i.parseShort(),n.ySuperscriptXOffset=i.parseShort(),n.ySuperscriptYOffset=i.parseShort(),n.yStrikeoutSize=i.parseShort(),n.yStrikeoutPosition=i.parseShort(),n.sFamilyClass=i.parseShort(),n.panose=[];for(var r=0;r<10;r++)n.panose[r]=i.parseByte();return n.ulUnicodeRange1=i.parseULong(),n.ulUnicodeRange2=i.parseULong(),n.ulUnicodeRange3=i.parseULong(),n.ulUnicodeRange4=i.parseULong(),n.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),n.fsSelection=i.parseUShort(),n.usFirstCharIndex=i.parseUShort(),n.usLastCharIndex=i.parseUShort(),n.sTypoAscender=i.parseShort(),n.sTypoDescender=i.parseShort(),n.sTypoLineGap=i.parseShort(),n.usWinAscent=i.parseUShort(),n.usWinDescent=i.parseUShort(),n.version>=1&&(n.ulCodePageRange1=i.parseULong(),n.ulCodePageRange2=i.parseULong()),n.version>=2&&(n.sxHeight=i.parseShort(),n.sCapHeight=i.parseShort(),n.usDefaultChar=i.parseUShort(),n.usBreakChar=i.parseUShort(),n.usMaxContent=i.parseUShort()),n}function dV(t){return new je.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var hS={parse:fV,make:dV,unicodeRanges:_6,getUnicodeRange:hV};function pV(t,e){var n={},i=new wt.Parser(t,e);switch(n.version=i.parseVersion(),n.italicAngle=i.parseFixed(),n.underlinePosition=i.parseShort(),n.underlineThickness=i.parseShort(),n.isFixedPitch=i.parseULong(),n.minMemType42=i.parseULong(),n.maxMemType42=i.parseULong(),n.minMemType1=i.parseULong(),n.maxMemType1=i.parseULong(),n.version){case 1:n.names=rS.slice();break;case 2:n.numberOfGlyphs=i.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=i.parseUShort();n.names=[];for(var s=0;s<n.numberOfGlyphs;s++)if(n.glyphNameIndex[s]>=rS.length){var o=i.parseChar();n.names.push(i.parseString(o))}break;case 2.5:n.numberOfGlyphs=i.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var a=0;a<n.numberOfGlyphs;a++)n.offset[a]=i.parseChar();break}return n}function AV(){return new je.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var mV={parse:pV,make:AV},ks=new Array(9);ks[1]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(ae.coverage),deltaGlyphId:this.parseUShort()};if(n===2)return{substFormat:2,coverage:this.parsePointer(ae.coverage),substitute:this.parseOffset16List()};Et.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")};ks[2]=function(){var e=this.parseUShort();return Et.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),sequences:this.parseListOfLists()}};ks[3]=function(){var e=this.parseUShort();return Et.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),alternateSets:this.parseListOfLists()}};ks[4]=function(){var e=this.parseUShort();return Et.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var rh={sequenceIndex:ae.uShort,lookupListIndex:ae.uShort};ks[5]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:n,coverage:this.parsePointer(ae.coverage),ruleSets:this.parseListOfLists(function(){var s=this.parseUShort(),o=this.parseUShort();return{input:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(o,rh)}})};if(n===2)return{substFormat:n,coverage:this.parsePointer(ae.coverage),classDef:this.parsePointer(ae.classDef),classSets:this.parseListOfLists(function(){var s=this.parseUShort(),o=this.parseUShort();return{classes:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(o,rh)}})};if(n===3){var i=this.parseUShort(),r=this.parseUShort();return{substFormat:n,coverages:this.parseList(i,ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(r,rh)}}Et.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};ks[6]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(ae.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(rh)}})};if(n===2)return{substFormat:2,coverage:this.parsePointer(ae.coverage),backtrackClassDef:this.parsePointer(ae.classDef),inputClassDef:this.parsePointer(ae.classDef),lookaheadClassDef:this.parsePointer(ae.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(rh)}})};if(n===3)return{substFormat:3,backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),inputCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(rh)};Et.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};ks[7]=function(){var e=this.parseUShort();Et.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");var n=this.parseUShort(),i=new ae(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:n,extension:ks[n].call(i)}};ks[8]=function(){var e=this.parseUShort();return Et.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),substitutes:this.parseUShortList()}};function gV(t,e){e=e||0;var n=new ae(t,e),i=n.parseVersion(1);return Et.argument(i===1||i===1.1,"Unsupported GSUB table version."),i===1?{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ks)}:{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ks),variations:n.parseFeatureVariationsList()}}var Gh=new Array(9);Gh[1]=function(e){return e.substFormat===1?new je.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new je.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new je.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new je.Coverage(e.coverage)}].concat(je.ushortList("substitute",e.substitute)))};Gh[2]=function(e){return Et.assert(e.substFormat===1,"Lookup type 2 substFormat must be 1."),new je.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new je.Coverage(e.coverage)}].concat(je.tableList("seqSet",e.sequences,function(n){return new je.Table("sequenceSetTable",je.ushortList("sequence",n))})))};Gh[3]=function(e){return Et.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new je.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new je.Coverage(e.coverage)}].concat(je.tableList("altSet",e.alternateSets,function(n){return new je.Table("alternateSetTable",je.ushortList("alternate",n))})))};Gh[4]=function(e){return Et.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new je.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new je.Coverage(e.coverage)}].concat(je.tableList("ligSet",e.ligatureSets,function(n){return new je.Table("ligatureSetTable",je.tableList("ligature",n,function(i){return new je.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:i.ligGlyph}].concat(je.ushortList("component",i.components,i.components.length+1)))}))})))};Gh[6]=function(e){if(e.substFormat===1){var n=new je.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new je.Coverage(e.coverage)}].concat(je.tableList("chainRuleSet",e.chainRuleSets,function(s){return new je.Table("chainRuleSetTable",je.tableList("chainRule",s,function(o){var a=je.ushortList("backtrackGlyph",o.backtrack,o.backtrack.length).concat(je.ushortList("inputGlyph",o.input,o.input.length+1)).concat(je.ushortList("lookaheadGlyph",o.lookahead,o.lookahead.length)).concat(je.ushortList("substitution",[],o.lookupRecords.length));return o.lookupRecords.forEach(function(l,u){a=a.concat({name:"sequenceIndex"+u,type:"USHORT",value:l.sequenceIndex}).concat({name:"lookupListIndex"+u,type:"USHORT",value:l.lookupListIndex})}),new je.Table("chainRuleTable",a)}))})));return n}else if(e.substFormat===2)Et.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(e.substFormat===3){var i=[{name:"substFormat",type:"USHORT",value:e.substFormat}];i.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach(function(s,o){i.push({name:"backtrackCoverage"+o,type:"TABLE",value:new je.Coverage(s)})}),i.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach(function(s,o){i.push({name:"inputCoverage"+o,type:"TABLE",value:new je.Coverage(s)})}),i.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach(function(s,o){i.push({name:"lookaheadCoverage"+o,type:"TABLE",value:new je.Coverage(s)})}),i.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach(function(s,o){i=i.concat({name:"sequenceIndex"+o,type:"USHORT",value:s.sequenceIndex}).concat({name:"lookupListIndex"+o,type:"USHORT",value:s.lookupListIndex})});var r=new je.Table("chainContextTable",i);return r}Et.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function vV(t){return new je.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new je.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new je.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new je.LookupList(t.lookups,Gh)}])}var yV={parse:gV,make:vV};function xV(t,e){var n=new wt.Parser(t,e),i=n.parseULong();Et.argument(i===1,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var r=n.parseULong(),s={},o=0;o<r;o++){var a=n.parseTag(),l=n.parseULong(),u=n.parseULong(),h=Ch.UTF8(t,e+l,u);s[a]=h}return s}function EV(t){var e=Object.keys(t).length,n="",i=16+e*12,r=new je.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:e}]);for(var s in t){var o=n.length;n+=t[s],r.fields.push({name:"tag "+s,type:"TAG",value:s}),r.fields.push({name:"offset "+s,type:"ULONG",value:i+o}),r.fields.push({name:"length "+s,type:"ULONG",value:t[s].length})}return r.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),r}var SV={parse:xV,make:EV};function fS(t){return Math.log(t)/Math.log(2)|0}function H4(t){for(;t.length%4!==0;)t.push(0);for(var e=0,n=0;n<t.length;n+=4)e+=(t[n]<<24)+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3];return e%=Math.pow(2,32),e}function dS(t,e,n,i){return new je.Record("Table Record",[{name:"tag",type:"TAG",value:t!==void 0?t:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:n!==void 0?n:0},{name:"length",type:"ULONG",value:i!==void 0?i:0}])}function YM(t){var e=new je.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;var n=Math.pow(2,fS(e.numTables));e.searchRange=16*n,e.entrySelector=fS(n),e.rangeShift=e.numTables*16-e.searchRange;for(var i=[],r=[],s=e.sizeOf()+dS().sizeOf()*e.numTables;s%4!==0;)s+=1,r.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<t.length;o+=1){var a=t[o];Et.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),u=dS(a.tableName,H4(a.encode()),s,l);for(i.push({name:u.tag+" Table Record",type:"RECORD",value:u}),r.push({name:a.tableName+" table",type:"RECORD",value:a}),s+=l,Et.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!==0;)s+=1,r.push({name:"padding",type:"BYTE",value:0})}return i.sort(function(h,d){return h.value.tag>d.value.tag?1:-1}),e.fields=e.fields.concat(i),e.fields=e.fields.concat(r),e}function pS(t,e,n){for(var i=0;i<e.length;i+=1){var r=t.charToGlyphIndex(e[i]);if(r>0){var s=t.glyphs.get(r);return s.getMetrics()}}return n}function _V(t){for(var e=0,n=0;n<t.length;n+=1)e+=t[n];return e/t.length}function CV(t){for(var e=[],n=[],i=[],r=[],s=[],o=[],a=[],l,u=0,h=0,d=0,p=0,A=0,g=0;g<t.glyphs.length;g+=1){var S=t.glyphs.get(g),E=S.unicode|0;if(isNaN(S.advanceWidth))throw new Error("Glyph "+S.name+" ("+g+"): advanceWidth is not a number.");(l>E||l===void 0)&&E>0&&(l=E),u<E&&(u=E);var m=hS.getUnicodeRange(E);if(m<32)h|=1<<m;else if(m<64)d|=1<<m-32;else if(m<96)p|=1<<m-64;else if(m<123)A|=1<<m-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(S.name!==".notdef"){var x=S.getMetrics();e.push(x.xMin),n.push(x.yMin),i.push(x.xMax),r.push(x.yMax),o.push(x.leftSideBearing),a.push(x.rightSideBearing),s.push(S.advanceWidth)}}var y={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,r),advanceWidthMax:Math.max.apply(null,s),advanceWidthAvg:_V(s),minLeftSideBearing:Math.min.apply(null,o),maxLeftSideBearing:Math.max.apply(null,o),minRightSideBearing:Math.min.apply(null,a)};y.ascender=t.ascender,y.descender=t.descender;var C=zH.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp}),I=WH.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:t.glyphs.length}),M=nV.make(t.glyphs.length),w=hS.make(Object.assign({xAvgCharWidth:Math.round(y.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:u,ulUnicodeRange1:h,ulUnicodeRange2:d,ulUnicodeRange3:p,ulUnicodeRange4:A,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:pS(t,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:pS(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0},t.tables.os2)),L=jH.make(t.glyphs),R=hH.make(t.glyphs),B=t.getEnglishName("fontFamily"),F=t.getEnglishName("fontSubfamily"),X=B+" "+F,G=t.getEnglishName("postScriptName");G||(G=B.replace(/\s/g,"")+"-"+F);var q={};for(var Y in t.names)q[Y]=t.names[Y];q.uniqueID||(q.uniqueID={en:t.getEnglishName("manufacturer")+":"+X}),q.postScriptName||(q.postScriptName={en:G}),q.preferredFamily||(q.preferredFamily=t.names.fontFamily),q.preferredSubfamily||(q.preferredSubfamily=t.names.fontSubfamily);var $=[],j=cV.make(q,$),P=$.length>0?$H.make($):void 0,Q=mV.make(),U=kH.make(t.glyphs,{version:t.getEnglishName("version"),fullName:X,familyName:B,weightName:F,postScriptName:G,unitsPerEm:t.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),O=t.metas&&Object.keys(t.metas).length>0?SV.make(t.metas):void 0,V=[C,I,M,w,j,R,Q,U,L];P&&V.push(P),t.tables.gsub&&V.push(yV.make(t.tables.gsub)),O&&V.push(O);for(var me=YM(V),re=me.encode(),xe=H4(re),ge=me.fields,Ie=!1,Ne=0;Ne<ge.length;Ne+=1)if(ge[Ne].name==="head table"){ge[Ne].value.checkSumAdjustment=2981146554-xe,Ie=!0;break}if(!Ie)throw new Error("Could not find head table with checkSum to adjust.");return me}var TV={make:YM,fontToTable:CV,computeCheckSum:H4};function g5(t,e){for(var n=0,i=t.length-1;n<=i;){var r=n+i>>>1,s=t[r].tag;if(s===e)return r;s<e?n=r+1:i=r-1}return-n-1}function AS(t,e){for(var n=0,i=t.length-1;n<=i;){var r=n+i>>>1,s=t[r];if(s===e)return r;s<e?n=r+1:i=r-1}return-n-1}function mS(t,e){for(var n,i=0,r=t.length-1;i<=r;){var s=i+r>>>1;n=t[s];var o=n.start;if(o===e)return n;o<e?i=s+1:r=s-1}if(i>0)return n=t[i-1],e>n.end?0:n}function Cp(t,e){this.font=t,this.tableName=e}Cp.prototype={searchTag:g5,binSearch:AS,getTable:function(t){var e=this.font.tables[this.tableName];return!e&&t&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var t=this.getTable();return t?t.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var t=this.getTable();if(t){for(var e=!1,n=0;n<t.scripts.length;n++){var i=t.scripts[n].tag;if(i==="DFLT")return i;i==="latn"&&(e=!0)}if(e)return"latn"}},getScriptTable:function(t,e){var n=this.getTable(e);if(n){t=t||"DFLT";var i=n.scripts,r=g5(n.scripts,t);if(r>=0)return i[r].script;if(e){var s={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-r,0,s),s.script}}},getLangSysTable:function(t,e,n){var i=this.getScriptTable(t,n);if(i){if(!e||e==="dflt"||e==="DFLT")return i.defaultLangSys;var r=g5(i.langSysRecords,e);if(r>=0)return i.langSysRecords[r].langSys;if(n){var s={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-r,0,s),s.langSys}}},getFeatureTable:function(t,e,n,i){var r=this.getLangSysTable(t,e,i);if(r){for(var s,o=r.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if(s=a[o[l]],s.tag===n)return s.feature;if(i){var u=a.length;return Et.assert(u===0||n>=a[u-1].tag,"Features must be added in alphabetical order."),s={tag:n,feature:{params:0,lookupListIndexes:[]}},a.push(s),o.push(u),s.feature}}},getLookupTables:function(t,e,n,i,r){var s=this.getFeatureTable(t,e,n,r),o=[];if(s){for(var a,l=s.lookupListIndexes,u=this.font.tables[this.tableName].lookups,h=0;h<l.length;h++)a=u[l[h]],a.lookupType===i&&o.push(a);if(o.length===0&&r){a={lookupType:i,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=u.length;return u.push(a),l.push(d),[a]}}return o},getGlyphClass:function(t,e){switch(t.format){case 1:return t.startGlyph<=e&&e<t.startGlyph+t.classes.length?t.classes[e-t.startGlyph]:0;case 2:var n=mS(t.ranges,e);return n?n.classId:0}},getCoverageIndex:function(t,e){switch(t.format){case 1:var n=AS(t.glyphs,e);return n>=0?n:-1;case 2:var i=mS(t.ranges,e);return i?i.index+e-i.start:-1}},expandCoverage:function(t){if(t.format===1)return t.glyphs;for(var e=[],n=t.ranges,i=0;i<n.length;i++)for(var r=n[i],s=r.start,o=r.end,a=s;a<=o;a++)e.push(a);return e}};function Tp(t){Cp.call(this,t,"gpos")}Tp.prototype=Cp.prototype;Tp.prototype.init=function(){var t=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(t)};Tp.prototype.getKerningValue=function(t,e,n){for(var i=0;i<t.length;i++)for(var r=t[i].subtables,s=0;s<r.length;s++){var o=r[s],a=this.getCoverageIndex(o.coverage,e);if(!(a<0))switch(o.posFormat){case 1:for(var l=o.pairSets[a],u=0;u<l.length;u++){var h=l[u];if(h.secondGlyph===n)return h.value1&&h.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(o.classDef1,e),p=this.getGlyphClass(o.classDef2,n),A=o.classRecords[d][p];return A.value1&&A.value1.xAdvance||0}}return 0};Tp.prototype.getKerningTables=function(t,e){if(this.font.tables.gpos)return this.getLookupTables(t,e,"kern",2)};function kr(t){Cp.call(this,t,"gsub")}function IV(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function V4(t,e,n){for(var i=t.subtables,r=0;r<i.length;r++){var s=i[r];if(s.substFormat===e)return s}if(n)return i.push(n),n}kr.prototype=Cp.prototype;kr.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};kr.prototype.getSingle=function(t,e,n){for(var i=[],r=this.getLookupTables(e,n,t,1),s=0;s<r.length;s++)for(var o=r[s].subtables,a=0;a<o.length;a++){var l=o[a],u=this.expandCoverage(l.coverage),h=void 0;if(l.substFormat===1){var d=l.deltaGlyphId;for(h=0;h<u.length;h++){var p=u[h];i.push({sub:p,by:p+d})}}else{var A=l.substitute;for(h=0;h<u.length;h++)i.push({sub:u[h],by:A[h]})}}return i};kr.prototype.getMultiple=function(t,e,n){for(var i=[],r=this.getLookupTables(e,n,t,2),s=0;s<r.length;s++)for(var o=r[s].subtables,a=0;a<o.length;a++){var l=o[a],u=this.expandCoverage(l.coverage),h=void 0;for(h=0;h<u.length;h++){var d=u[h],p=l.sequences[h];i.push({sub:d,by:p})}}return i};kr.prototype.getAlternates=function(t,e,n){for(var i=[],r=this.getLookupTables(e,n,t,3),s=0;s<r.length;s++)for(var o=r[s].subtables,a=0;a<o.length;a++)for(var l=o[a],u=this.expandCoverage(l.coverage),h=l.alternateSets,d=0;d<u.length;d++)i.push({sub:u[d],by:h[d]});return i};kr.prototype.getLigatures=function(t,e,n){for(var i=[],r=this.getLookupTables(e,n,t,4),s=0;s<r.length;s++)for(var o=r[s].subtables,a=0;a<o.length;a++)for(var l=o[a],u=this.expandCoverage(l.coverage),h=l.ligatureSets,d=0;d<u.length;d++)for(var p=u[d],A=h[d],g=0;g<A.length;g++){var S=A[g];i.push({sub:[p].concat(S.components),by:S.ligGlyph})}return i};kr.prototype.addSingle=function(t,e,n,i){var r=this.getLookupTables(n,i,t,1,!0)[0],s=V4(r,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Et.assert(s.coverage.format===1,"Single: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.substitute.splice(a,0,0)),s.substitute[a]=e.by};kr.prototype.addMultiple=function(t,e,n,i){Et.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');var r=this.getLookupTables(n,i,t,2,!0)[0],s=V4(r,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Et.assert(s.coverage.format===1,"Multiple: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.sequences.splice(a,0,0)),s.sequences[a]=e.by};kr.prototype.addAlternate=function(t,e,n,i){var r=this.getLookupTables(n,i,t,3,!0)[0],s=V4(r,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Et.assert(s.coverage.format===1,"Alternate: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.alternateSets.splice(a,0,0)),s.alternateSets[a]=e.by};kr.prototype.addLigature=function(t,e,n,i){var r=this.getLookupTables(n,i,t,4,!0)[0],s=r.subtables[0];s||(s={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},r.subtables[0]=s),Et.assert(s.coverage.format===1,"Ligature: unable to modify coverage table format "+s.coverage.format);var o=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},u=this.binSearch(s.coverage.glyphs,o);if(u>=0){for(var h=s.ligatureSets[u],d=0;d<h.length;d++)if(IV(h[d].components,a))return;h.push(l)}else u=-1-u,s.coverage.glyphs.splice(u,0,o),s.ligatureSets.splice(u,0,[l])};kr.prototype.getFeature=function(t,e,n){if(/ss\d\d/.test(t))return this.getSingle(t,e,n);switch(t){case"aalt":case"salt":return this.getSingle(t,e,n).concat(this.getAlternates(t,e,n));case"dlig":case"liga":case"rlig":return this.getLigatures(t,e,n);case"ccmp":return this.getMultiple(t,e,n).concat(this.getLigatures(t,e,n));case"stch":return this.getMultiple(t,e,n)}};kr.prototype.add=function(t,e,n,i){if(/ss\d\d/.test(t))return this.addSingle(t,e,n,i);switch(t){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(t,e,n,i):this.addAlternate(t,e,n,i);case"dlig":case"liga":case"rlig":return this.addLigature(t,e,n,i);case"ccmp":return e.by instanceof Array?this.addMultiple(t,e,n,i):this.addLigature(t,e,n,i)}};function wV(){return typeof window<"u"}function MV(t){for(var e=new Buffer(t.byteLength),n=new Uint8Array(t),i=0;i<e.length;++i)e[i]=n[i];return e}function Pf(t,e){if(!t)throw e}function gS(t,e,n,i,r){var s;return(e&i)>0?(s=t.parseByte(),e&r||(s=-s),s=n+s):(e&r)>0?s=n:s=n+t.parseShort(),s}function KM(t,e,n){var i=new wt.Parser(e,n);t.numberOfContours=i.parseShort(),t._xMin=i.parseShort(),t._yMin=i.parseShort(),t._xMax=i.parseShort(),t._yMax=i.parseShort();var r,s;if(t.numberOfContours>0){for(var o=t.endPointIndices=[],a=0;a<t.numberOfContours;a+=1)o.push(i.parseUShort());t.instructionLength=i.parseUShort(),t.instructions=[];for(var l=0;l<t.instructionLength;l+=1)t.instructions.push(i.parseByte());var u=o[o.length-1]+1;r=[];for(var h=0;h<u;h+=1)if(s=i.parseByte(),r.push(s),(s&8)>0)for(var d=i.parseByte(),p=0;p<d;p+=1)r.push(s),h+=1;if(Et.argument(r.length===u,"Bad flags."),o.length>0){var A=[],g;if(u>0){for(var S=0;S<u;S+=1)s=r[S],g={},g.onCurve=!!(s&1),g.lastPointOfContour=o.indexOf(S)>=0,A.push(g);for(var E=0,m=0;m<u;m+=1)s=r[m],g=A[m],g.x=gS(i,s,E,2,16),E=g.x;for(var x=0,y=0;y<u;y+=1)s=r[y],g=A[y],g.y=gS(i,s,x,4,32),x=g.y}t.points=A}else t.points=[]}else if(t.numberOfContours===0)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];for(var C=!0;C;){r=i.parseUShort();var I={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(r&1)>0?(r&2)>0?(I.dx=i.parseShort(),I.dy=i.parseShort()):I.matchedPoints=[i.parseUShort(),i.parseUShort()]:(r&2)>0?(I.dx=i.parseChar(),I.dy=i.parseChar()):I.matchedPoints=[i.parseByte(),i.parseByte()],(r&8)>0?I.xScale=I.yScale=i.parseF2Dot14():(r&64)>0?(I.xScale=i.parseF2Dot14(),I.yScale=i.parseF2Dot14()):(r&128)>0&&(I.xScale=i.parseF2Dot14(),I.scale01=i.parseF2Dot14(),I.scale10=i.parseF2Dot14(),I.yScale=i.parseF2Dot14()),t.components.push(I),C=!!(r&32)}if(r&256){t.instructionLength=i.parseUShort(),t.instructions=[];for(var M=0;M<t.instructionLength;M+=1)t.instructions.push(i.parseByte())}}}function v5(t,e){for(var n=[],i=0;i<t.length;i+=1){var r=t[i],s={x:e.xScale*r.x+e.scale01*r.y+e.dx,y:e.scale10*r.x+e.yScale*r.y+e.dy,onCurve:r.onCurve,lastPointOfContour:r.lastPointOfContour};n.push(s)}return n}function RV(t){for(var e=[],n=[],i=0;i<t.length;i+=1){var r=t[i];n.push(r),r.lastPointOfContour&&(e.push(n),n=[])}return Et.argument(n.length===0,"There are still points left in the current contour."),e}function jM(t){var e=new ai;if(!t)return e;for(var n=RV(t),i=0;i<n.length;++i){var r=n[i],s=null,o=r[r.length-1],a=r[0];if(o.onCurve)e.moveTo(o.x,o.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5};e.moveTo(l.x,l.y)}for(var u=0;u<r.length;++u)if(s=o,o=a,a=r[(u+1)%r.length],o.onCurve)e.lineTo(o.x,o.y);else{var h=a;s.onCurve||((o.x+s.x)*.5,(o.y+s.y)*.5),a.onCurve||(h={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5}),e.quadraticCurveTo(o.x,o.y,h.x,h.y)}e.closePath()}return e}function JM(t,e){if(e.isComposite)for(var n=0;n<e.components.length;n+=1){var i=e.components[n],r=t.get(i.glyphIndex);if(r.getPath(),r.points){var s=void 0;if(i.matchedPoints===void 0)s=v5(r.points,i);else{if(i.matchedPoints[0]>e.points.length-1||i.matchedPoints[1]>r.points.length-1)throw Error("Matched points out of range in "+e.name);var o=e.points[i.matchedPoints[0]],a=r.points[i.matchedPoints[1]],l={xScale:i.xScale,scale01:i.scale01,scale10:i.scale10,yScale:i.yScale,dx:0,dy:0};a=v5([a],l)[0],l.dx=o.x-a.x,l.dy=o.y-a.y,s=v5(r.points,l)}e.points=e.points.concat(s)}}return jM(e.points)}function bV(t,e,n,i){for(var r=new xo.GlyphSet(i),s=0;s<n.length-1;s+=1){var o=n[s],a=n[s+1];o!==a?r.push(s,xo.ttfGlyphLoader(i,s,KM,t,e+o,JM)):r.push(s,xo.glyphLoader(i,s))}return r}function BV(t,e,n,i){var r=new xo.GlyphSet(i);return i._push=function(s){var o=n[s],a=n[s+1];o!==a?r.push(s,xo.ttfGlyphLoader(i,s,KM,t,e+o,JM)):r.push(s,xo.glyphLoader(i,s))},r}function LV(t,e,n,i,r){return r.lowMemory?BV(t,e,n,i):bV(t,e,n,i)}var PV={getPath:jM,parse:LV},ZM,Tu,$M,C6;function eR(t){this.font=t,this.getCommands=function(e){return PV.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function DV(t){return t}function tR(t){return Math.sign(t)*Math.round(Math.abs(t))}function NV(t){return Math.sign(t)*Math.round(Math.abs(t*2))/2}function FV(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function UV(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function OV(t){return Math.sign(t)*Math.floor(Math.abs(t))}var nR=function(t){var e=this.srPeriod,n=this.srPhase,i=this.srThreshold,r=1;return t<0&&(t=-t,r=-1),t+=i-n,t=Math.trunc(t/e)*e,t+=n,t<0?n*r:t*r},fo={x:1,y:0,axis:"x",distance:function(t,e,n,i){return(n?t.xo:t.x)-(i?e.xo:e.x)},interpolate:function(t,e,n,i){var r,s,o,a,l,u,h;if(!i||i===this){if(r=t.xo-e.xo,s=t.xo-n.xo,l=e.x-e.xo,u=n.x-n.xo,o=Math.abs(r),a=Math.abs(s),h=o+a,h===0){t.x=t.xo+(l+u)/2;return}t.x=t.xo+(l*a+u*o)/h;return}if(r=i.distance(t,e,!0,!0),s=i.distance(t,n,!0,!0),l=i.distance(e,e,!1,!0),u=i.distance(n,n,!1,!0),o=Math.abs(r),a=Math.abs(s),h=o+a,h===0){fo.setRelative(t,t,(l+u)/2,i,!0);return}fo.setRelative(t,t,(l*a+u*o)/h,i,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,e,n,i,r){if(!i||i===this){t.x=(r?e.xo:e.x)+n;return}var s=r?e.xo:e.x,o=r?e.yo:e.y,a=s+n*i.x,l=o+n*i.y;t.x=a+(t.y-l)/i.normalSlope},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},Zo={x:0,y:1,axis:"y",distance:function(t,e,n,i){return(n?t.yo:t.y)-(i?e.yo:e.y)},interpolate:function(t,e,n,i){var r,s,o,a,l,u,h;if(!i||i===this){if(r=t.yo-e.yo,s=t.yo-n.yo,l=e.y-e.yo,u=n.y-n.yo,o=Math.abs(r),a=Math.abs(s),h=o+a,h===0){t.y=t.yo+(l+u)/2;return}t.y=t.yo+(l*a+u*o)/h;return}if(r=i.distance(t,e,!0,!0),s=i.distance(t,n,!0,!0),l=i.distance(e,e,!1,!0),u=i.distance(n,n,!1,!0),o=Math.abs(r),a=Math.abs(s),h=o+a,h===0){Zo.setRelative(t,t,(l+u)/2,i,!0);return}Zo.setRelative(t,t,(l*a+u*o)/h,i,!0)},normalSlope:0,setRelative:function(t,e,n,i,r){if(!i||i===this){t.y=(r?e.yo:e.y)+n;return}var s=r?e.xo:e.x,o=r?e.yo:e.y,a=s+n*i.x,l=o+n*i.y;t.y=l+i.normalSlope*(t.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};Object.freeze(fo);Object.freeze(Zo);function Ip(t,e){this.x=t,this.y=e,this.axis=void 0,this.slope=e/t,this.normalSlope=-t/e,Object.freeze(this)}Ip.prototype.distance=function(t,e,n,i){return this.x*fo.distance(t,e,n,i)+this.y*Zo.distance(t,e,n,i)};Ip.prototype.interpolate=function(t,e,n,i){var r,s,o,a,l,u,h;if(o=i.distance(t,e,!0,!0),a=i.distance(t,n,!0,!0),r=i.distance(e,e,!1,!0),s=i.distance(n,n,!1,!0),l=Math.abs(o),u=Math.abs(a),h=l+u,h===0){this.setRelative(t,t,(r+s)/2,i,!0);return}this.setRelative(t,t,(r*u+s*l)/h,i,!0)};Ip.prototype.setRelative=function(t,e,n,i,r){i=i||this;var s=r?e.xo:e.x,o=r?e.yo:e.y,a=s+n*i.x,l=o+n*i.y,u=i.normalSlope,h=this.slope,d=t.x,p=t.y;t.x=(h*d-u*a+l-p)/(h-u),t.y=h*(t.x-d)+p};Ip.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0};function wp(t,e){var n=Math.sqrt(t*t+e*e);return t/=n,e/=n,t===1&&e===0?fo:t===0&&e===1?Zo:new Ip(t,e)}function ta(t,e,n,i){this.x=this.xo=Math.round(t*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=n,this.onCurve=i,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}ta.prototype.nextTouched=function(t){for(var e=this.nextPointOnContour;!t.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};ta.prototype.prevTouched=function(t){for(var e=this.prevPointOnContour;!t.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var ip=Object.freeze(new ta(0,0)),kV={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Wa(t,e){switch(this.env=t,this.stack=[],this.prog=e,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=fo,this.round=tR}}eR.prototype.exec=function(t,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,i=this._prepState;if(!i||i.ppem!==e){var r=this._fpgmState;if(!r){Wa.prototype=kV,r=this._fpgmState=new Wa("fpgm",n.tables.fpgm),r.funcs=[],r.font=n,fe.DEBUG&&(console.log("---EXEC FPGM---"),r.step=-1);try{Tu(r)}catch(u){console.log("Hinting error in FPGM:"+u),this._errorState=3;return}}Wa.prototype=r,i=this._prepState=new Wa("prep",n.tables.prep),i.ppem=e;var s=n.tables.cvt;if(s)for(var o=i.cvt=new Array(s.length),a=e/n.unitsPerEm,l=0;l<s.length;l++)o[l]=s[l]*a;else i.cvt=[];fe.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{Tu(i)}catch(u){this._errorState<2&&console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState>1))try{return $M(t,i)}catch(u){this._errorState<1&&(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};$M=function(t,e){var n=e.ppem/e.font.unitsPerEm,i=n,r=t.components,s,o,a;if(Wa.prototype=e,!r)a=new Wa("glyf",t.instructions),fe.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),C6(t,a,n,i),o=a.gZone;else{var l=e.font;o=[],s=[];for(var u=0;u<r.length;u++){var h=r[u],d=l.glyphs.get(h.glyphIndex);a=new Wa("glyf",d.instructions),fe.DEBUG&&(console.log("---EXEC COMP "+u+"---"),a.step=-1),C6(d,a,n,i);for(var p=Math.round(h.dx*n),A=Math.round(h.dy*i),g=a.gZone,S=a.contours,E=0;E<g.length;E++){var m=g[E];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+p,m.yo=m.y=m.y+A}var x=o.length;o.push.apply(o,g);for(var y=0;y<S.length;y++)s.push(S[y]+x)}t.instructions&&!a.inhibitGridFit&&(a=new Wa("glyf",t.instructions),a.gZone=a.z0=a.z1=a.z2=o,a.contours=s,o.push(new ta(0,0),new ta(Math.round(t.advanceWidth*n),0)),fe.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),Tu(a),o.length-=2)}return o};C6=function(t,e,n,i){for(var r=t.points||[],s=r.length,o=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[],l,u=0;u<s;u++)l=r[u],o[u]=new ta(l.x*n,l.y*i,l.lastPointOfContour,l.onCurve);for(var h,d,p=0;p<s;p++)l=o[p],h||(h=l,a.push(p)),l.lastPointOfContour?(l.nextPointOnContour=h,h.prevPointOnContour=l,h=void 0):(d=o[p+1],l.nextPointOnContour=d,d.prevPointOnContour=l);if(!e.inhibitGridFit){if(fe.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var A=0;A<s;A++)console.log(A,o[A].x,o[A].y)}if(o.push(new ta(0,0),new ta(Math.round(t.advanceWidth*n),0)),Tu(e),o.length-=2,fe.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var g=0;g<s;g++)console.log(g,o[g].x,o[g].y)}}};Tu=function(t){var e=t.prog;if(e){var n=e.length,i;for(t.ip=0;t.ip<n;t.ip++){if(fe.DEBUG&&t.step++,i=ZM[e[t.ip]],!i)throw new Error("unknown instruction: 0x"+Number(e[t.ip]).toString(16));i(t)}}};function S2(t){for(var e=t.tZone=new Array(t.gZone.length),n=0;n<e.length;n++)e[n]=new ta(0,0)}function iR(t,e){var n=t.prog,i=t.ip,r=1,s;do if(s=n[++i],s===88)r++;else if(s===89)r--;else if(s===64)i+=n[i+1]+1;else if(s===65)i+=2*n[i+1]+1;else if(s>=176&&s<=183)i+=s-176+1;else if(s>=184&&s<=191)i+=(s-184+1)*2;else if(e&&r===1&&s===27)break;while(r>0);t.ip=i}function vS(t,e){fe.DEBUG&&console.log(e.step,"SVTCA["+t.axis+"]"),e.fv=e.pv=e.dpv=t}function yS(t,e){fe.DEBUG&&console.log(e.step,"SPVTCA["+t.axis+"]"),e.pv=e.dpv=t}function xS(t,e){fe.DEBUG&&console.log(e.step,"SFVTCA["+t.axis+"]"),e.fv=t}function ES(t,e){var n=e.stack,i=n.pop(),r=n.pop(),s=e.z2[i],o=e.z1[r];fe.DEBUG&&console.log("SPVTL["+t+"]",i,r);var a,l;t?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.pv=e.dpv=wp(a,l)}function SS(t,e){var n=e.stack,i=n.pop(),r=n.pop(),s=e.z2[i],o=e.z1[r];fe.DEBUG&&console.log("SFVTL["+t+"]",i,r);var a,l;t?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.fv=wp(a,l)}function QV(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"SPVFS[]",n,i),t.pv=t.dpv=wp(i,n)}function GV(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"SPVFS[]",n,i),t.fv=wp(i,n)}function zV(t){var e=t.stack,n=t.pv;fe.DEBUG&&console.log(t.step,"GPV[]"),e.push(n.x*16384),e.push(n.y*16384)}function HV(t){var e=t.stack,n=t.fv;fe.DEBUG&&console.log(t.step,"GFV[]"),e.push(n.x*16384),e.push(n.y*16384)}function VV(t){t.fv=t.pv,fe.DEBUG&&console.log(t.step,"SFVTPV[]")}function WV(t){var e=t.stack,n=e.pop(),i=e.pop(),r=e.pop(),s=e.pop(),o=e.pop(),a=t.z0,l=t.z1,u=a[n],h=a[i],d=l[r],p=l[s],A=t.z2[o];fe.DEBUG&&console.log("ISECT[], ",n,i,r,s,o);var g=u.x,S=u.y,E=h.x,m=h.y,x=d.x,y=d.y,C=p.x,I=p.y,M=(g-E)*(y-I)-(S-m)*(x-C),w=g*m-S*E,L=x*I-y*C;A.x=(w*(x-C)-L*(g-E))/M,A.y=(w*(y-I)-L*(S-m))/M}function XV(t){t.rp0=t.stack.pop(),fe.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)}function qV(t){t.rp1=t.stack.pop(),fe.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)}function YV(t){t.rp2=t.stack.pop(),fe.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)}function KV(t){var e=t.stack.pop();switch(fe.DEBUG&&console.log(t.step,"SZP0[]",e),t.zp0=e,e){case 0:t.tZone||S2(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function jV(t){var e=t.stack.pop();switch(fe.DEBUG&&console.log(t.step,"SZP1[]",e),t.zp1=e,e){case 0:t.tZone||S2(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function JV(t){var e=t.stack.pop();switch(fe.DEBUG&&console.log(t.step,"SZP2[]",e),t.zp2=e,e){case 0:t.tZone||S2(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function ZV(t){var e=t.stack.pop();switch(fe.DEBUG&&console.log(t.step,"SZPS[]",e),t.zp0=t.zp1=t.zp2=e,e){case 0:t.tZone||S2(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function $V(t){t.loop=t.stack.pop(),fe.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)}function eW(t){fe.DEBUG&&console.log(t.step,"RTG[]"),t.round=tR}function tW(t){fe.DEBUG&&console.log(t.step,"RTHG[]"),t.round=FV}function nW(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"SMD[]",e),t.minDis=e/64}function iW(t){fe.DEBUG&&console.log(t.step,"ELSE[]"),iR(t,!1)}function rW(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"JMPR[]",e),t.ip+=e-1}function sW(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"SCVTCI[]",e),t.cvCutIn=e/64}function oW(t){var e=t.stack;fe.DEBUG&&console.log(t.step,"DUP[]"),e.push(e[e.length-1])}function y5(t){fe.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function aW(t){fe.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0}function lW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"SWAP[]"),e.push(n),e.push(i)}function uW(t){var e=t.stack;fe.DEBUG&&console.log(t.step,"DEPTH[]"),e.push(e.length)}function cW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"LOOPCALL[]",n,i);var r=t.ip,s=t.prog;t.prog=t.funcs[n];for(var o=0;o<i;o++)Tu(t),fe.DEBUG&&console.log(++t.step,o+1<i?"next loopcall":"done loopcall",o);t.ip=r,t.prog=s}function hW(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"CALL[]",e);var n=t.ip,i=t.prog;t.prog=t.funcs[e],Tu(t),t.ip=n,t.prog=i,fe.DEBUG&&console.log(++t.step,"returning from",e)}function fW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"CINDEX[]",n),e.push(e[e.length-n])}function dW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"MINDEX[]",n),e.push(e.splice(e.length-n,1)[0])}function pW(t){if(t.env!=="fpgm")throw new Error("FDEF not allowed here");var e=t.stack,n=t.prog,i=t.ip,r=e.pop(),s=i;for(fe.DEBUG&&console.log(t.step,"FDEF[]",r);n[++i]!==45;);t.ip=i,t.funcs[r]=n.slice(s+1,i)}function _S(t,e){var n=e.stack.pop(),i=e.z0[n],r=e.fv,s=e.pv;fe.DEBUG&&console.log(e.step,"MDAP["+t+"]",n);var o=s.distance(i,ip);t&&(o=e.round(o)),r.setRelative(i,ip,o,s),r.touch(i),e.rp0=e.rp1=n}function CS(t,e){var n=e.z2,i=n.length-2,r,s,o;fe.DEBUG&&console.log(e.step,"IUP["+t.axis+"]");for(var a=0;a<i;a++)r=n[a],!t.touched(r)&&(s=r.prevTouched(t),s!==r&&(o=r.nextTouched(t),s===o&&t.setRelative(r,r,t.distance(s,s,!1,!0),t,!0),t.interpolate(r,s,o,t)))}function TS(t,e){for(var n=e.stack,i=t?e.rp1:e.rp2,r=(t?e.z0:e.z1)[i],s=e.fv,o=e.pv,a=e.loop,l=e.z2;a--;){var u=n.pop(),h=l[u],d=o.distance(r,r,!1,!0);s.setRelative(h,h,d,o),s.touch(h),fe.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",u)}e.loop=1}function IS(t,e){var n=e.stack,i=t?e.rp1:e.rp2,r=(t?e.z0:e.z1)[i],s=e.fv,o=e.pv,a=n.pop(),l=e.z2[e.contours[a]],u=l;fe.DEBUG&&console.log(e.step,"SHC["+t+"]",a);var h=o.distance(r,r,!1,!0);do u!==r&&s.setRelative(u,u,h,o),u=u.nextPointOnContour;while(u!==l)}function wS(t,e){var n=e.stack,i=t?e.rp1:e.rp2,r=(t?e.z0:e.z1)[i],s=e.fv,o=e.pv,a=n.pop();fe.DEBUG&&console.log(e.step,"SHZ["+t+"]",a);var l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}for(var u,h=o.distance(r,r,!1,!0),d=l.length-2,p=0;p<d;p++)u=l[p],s.setRelative(u,u,h,o)}function AW(t){for(var e=t.stack,n=t.loop,i=t.fv,r=e.pop()/64,s=t.z2;n--;){var o=e.pop(),a=s[o];fe.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-n)+": ":"")+"SHPIX[]",o,r),i.setRelative(a,a,r),i.touch(a)}t.loop=1}function mW(t){for(var e=t.stack,n=t.rp1,i=t.rp2,r=t.loop,s=t.z0[n],o=t.z1[i],a=t.fv,l=t.dpv,u=t.z2;r--;){var h=e.pop(),d=u[h];fe.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-r)+": ":"")+"IP[]",h,n,"<->",i),a.interpolate(d,s,o,l),a.touch(d)}t.loop=1}function MS(t,e){var n=e.stack,i=n.pop()/64,r=n.pop(),s=e.z1[r],o=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(s,o,i,l),a.touch(s),fe.DEBUG&&console.log(e.step,"MSIRP["+t+"]",i,r),e.rp1=e.rp0,e.rp2=r,t&&(e.rp0=r)}function gW(t){for(var e=t.stack,n=t.rp0,i=t.z0[n],r=t.loop,s=t.fv,o=t.pv,a=t.z1;r--;){var l=e.pop(),u=a[l];fe.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-r)+": ":"")+"ALIGNRP[]",l),s.setRelative(u,i,0,o),s.touch(u)}t.loop=1}function vW(t){fe.DEBUG&&console.log(t.step,"RTDG[]"),t.round=NV}function RS(t,e){var n=e.stack,i=n.pop(),r=n.pop(),s=e.z0[r],o=e.fv,a=e.pv,l=e.cvt[i];fe.DEBUG&&console.log(e.step,"MIAP["+t+"]",i,"(",l,")",r);var u=a.distance(s,ip);t&&(Math.abs(u-l)<e.cvCutIn&&(u=l),u=e.round(u)),o.setRelative(s,ip,u,a),e.zp0===0&&(s.xo=s.x,s.yo=s.y),o.touch(s),e.rp0=e.rp1=r}function yW(t){var e=t.prog,n=t.ip,i=t.stack,r=e[++n];fe.DEBUG&&console.log(t.step,"NPUSHB[]",r);for(var s=0;s<r;s++)i.push(e[++n]);t.ip=n}function xW(t){var e=t.ip,n=t.prog,i=t.stack,r=n[++e];fe.DEBUG&&console.log(t.step,"NPUSHW[]",r);for(var s=0;s<r;s++){var o=n[++e]<<8|n[++e];o&32768&&(o=-((o^65535)+1)),i.push(o)}t.ip=e}function EW(t){var e=t.stack,n=t.store;n||(n=t.store=[]);var i=e.pop(),r=e.pop();fe.DEBUG&&console.log(t.step,"WS",i,r),n[r]=i}function SW(t){var e=t.stack,n=t.store,i=e.pop();fe.DEBUG&&console.log(t.step,"RS",i);var r=n&&n[i]||0;e.push(r)}function _W(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"WCVTP",n,i),t.cvt[i]=n/64}function CW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"RCVT",n),e.push(t.cvt[n]*64)}function bS(t,e){var n=e.stack,i=n.pop(),r=e.z2[i];fe.DEBUG&&console.log(e.step,"GC["+t+"]",i),n.push(e.dpv.distance(r,ip,t,!1)*64)}function BS(t,e){var n=e.stack,i=n.pop(),r=n.pop(),s=e.z1[i],o=e.z0[r],a=e.dpv.distance(o,s,t,t);fe.DEBUG&&console.log(e.step,"MD["+t+"]",i,r,"->",a),e.stack.push(Math.round(a*64))}function TW(t){fe.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)}function IW(t){fe.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0}function wW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"LT[]",n,i),e.push(i<n?1:0)}function MW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"LTEQ[]",n,i),e.push(i<=n?1:0)}function RW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"GT[]",n,i),e.push(i>n?1:0)}function bW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"GTEQ[]",n,i),e.push(i>=n?1:0)}function BW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"EQ[]",n,i),e.push(n===i?1:0)}function LW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"NEQ[]",n,i),e.push(n!==i?1:0)}function PW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"ODD[]",n),e.push(Math.trunc(n)%2?1:0)}function DW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"EVEN[]",n),e.push(Math.trunc(n)%2?0:1)}function NW(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"IF[]",e),e||(iR(t,!0),fe.DEBUG&&console.log(t.step,"EIF[]"))}function FW(t){fe.DEBUG&&console.log(t.step,"EIF[]")}function UW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"AND[]",n,i),e.push(n&&i?1:0)}function OW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"OR[]",n,i),e.push(n||i?1:0)}function kW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"NOT[]",n),e.push(n?0:1)}function x5(t,e){var n=e.stack,i=n.pop(),r=e.fv,s=e.pv,o=e.ppem,a=e.deltaBase+(t-1)*16,l=e.deltaShift,u=e.z0;fe.DEBUG&&console.log(e.step,"DELTAP["+t+"]",i,n);for(var h=0;h<i;h++){var d=n.pop(),p=n.pop(),A=a+((p&240)>>4);if(A===o){var g=(p&15)-8;g>=0&&g++,fe.DEBUG&&console.log(e.step,"DELTAPFIX",d,"by",g*l);var S=u[d];r.setRelative(S,S,g*l,s)}}}function QW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"SDB[]",n),t.deltaBase=n}function GW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"SDS[]",n),t.deltaShift=Math.pow(.5,n)}function zW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"ADD[]",n,i),e.push(i+n)}function HW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"SUB[]",n,i),e.push(i-n)}function VW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"DIV[]",n,i),e.push(i*64/n)}function WW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"MUL[]",n,i),e.push(i*n/64)}function XW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"ABS[]",n),e.push(Math.abs(n))}function qW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"NEG[]",n),e.push(-n)}function YW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"FLOOR[]",n),e.push(Math.floor(n/64)*64)}function KW(t){var e=t.stack,n=e.pop();fe.DEBUG&&console.log(t.step,"CEILING[]",n),e.push(Math.ceil(n/64)*64)}function q3(t,e){var n=e.stack,i=n.pop();fe.DEBUG&&console.log(e.step,"ROUND[]"),n.push(e.round(i/64)*64)}function jW(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"WCVTF[]",n,i),t.cvt[i]=n*t.ppem/t.font.unitsPerEm}function E5(t,e){var n=e.stack,i=n.pop(),r=e.ppem,s=e.deltaBase+(t-1)*16,o=e.deltaShift;fe.DEBUG&&console.log(e.step,"DELTAC["+t+"]",i,n);for(var a=0;a<i;a++){var l=n.pop(),u=n.pop(),h=s+((u&240)>>4);if(h===r){var d=(u&15)-8;d>=0&&d++;var p=d*o;fe.DEBUG&&console.log(e.step,"DELTACFIX",l,"by",p),e.cvt[l]+=p}}}function JW(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"SROUND[]",e),t.round=nR;var n;switch(e&192){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(t.srPeriod=n,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*n;break;case 32:t.srPhase=.5*n;break;case 48:t.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*n}function ZW(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"S45ROUND[]",e),t.round=nR;var n;switch(e&192){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(t.srPeriod=n,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*n;break;case 32:t.srPhase=.5*n;break;case 48:t.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*n}function $W(t){fe.DEBUG&&console.log(t.step,"ROFF[]"),t.round=DV}function eX(t){fe.DEBUG&&console.log(t.step,"RUTG[]"),t.round=UV}function tX(t){fe.DEBUG&&console.log(t.step,"RDTG[]"),t.round=OV}function nX(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"SCANCTRL[]",e)}function LS(t,e){var n=e.stack,i=n.pop(),r=n.pop(),s=e.z2[i],o=e.z1[r];fe.DEBUG&&console.log(e.step,"SDPVTL["+t+"]",i,r);var a,l;t?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.dpv=wp(a,l)}function iX(t){var e=t.stack,n=e.pop(),i=0;fe.DEBUG&&console.log(t.step,"GETINFO[]",n),n&1&&(i=35),n&32&&(i|=4096),e.push(i)}function rX(t){var e=t.stack,n=e.pop(),i=e.pop(),r=e.pop();fe.DEBUG&&console.log(t.step,"ROLL[]"),e.push(i),e.push(n),e.push(r)}function sX(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"MAX[]",n,i),e.push(Math.max(i,n))}function oX(t){var e=t.stack,n=e.pop(),i=e.pop();fe.DEBUG&&console.log(t.step,"MIN[]",n,i),e.push(Math.min(i,n))}function aX(t){var e=t.stack.pop();fe.DEBUG&&console.log(t.step,"SCANTYPE[]",e)}function lX(t){var e=t.stack.pop(),n=t.stack.pop();switch(fe.DEBUG&&console.log(t.step,"INSTCTRL[]",e,n),e){case 1:t.inhibitGridFit=!!n;return;case 2:t.ignoreCvt=!!n;return;default:throw new Error("invalid INSTCTRL[] selector")}}function La(t,e){var n=e.stack,i=e.prog,r=e.ip;fe.DEBUG&&console.log(e.step,"PUSHB["+t+"]");for(var s=0;s<t;s++)n.push(i[++r]);e.ip=r}function Pa(t,e){var n=e.ip,i=e.prog,r=e.stack;fe.DEBUG&&console.log(e.ip,"PUSHW["+t+"]");for(var s=0;s<t;s++){var o=i[++n]<<8|i[++n];o&32768&&(o=-((o^65535)+1)),r.push(o)}e.ip=n}function Ke(t,e,n,i,r,s){var o=s.stack,a=t&&o.pop(),l=o.pop(),u=s.rp0,h=s.z0[u],d=s.z1[l],p=s.minDis,A=s.fv,g=s.dpv,S,E,m,x;E=S=g.distance(d,h,!0,!0),m=E>=0?1:-1,E=Math.abs(E),t&&(x=s.cvt[a],i&&Math.abs(E-x)<s.cvCutIn&&(E=x)),n&&E<p&&(E=p),i&&(E=s.round(E)),A.setRelative(d,h,m*E,g),A.touch(d),fe.DEBUG&&console.log(s.step,(t?"MIRP[":"MDRP[")+(e?"M":"m")+(n?">":"_")+(i?"R":"_")+(r===0?"Gr":r===1?"Bl":r===2?"Wh":"")+"]",t?a+"("+s.cvt[a]+","+x+")":"",l,"(d =",S,"->",m*E,")"),s.rp1=s.rp0,s.rp2=l,e&&(s.rp0=l)}ZM=[vS.bind(void 0,Zo),vS.bind(void 0,fo),yS.bind(void 0,Zo),yS.bind(void 0,fo),xS.bind(void 0,Zo),xS.bind(void 0,fo),ES.bind(void 0,0),ES.bind(void 0,1),SS.bind(void 0,0),SS.bind(void 0,1),QV,GV,zV,HV,VV,WV,XV,qV,YV,KV,jV,JV,ZV,$V,eW,tW,nW,iW,rW,sW,void 0,void 0,oW,y5,aW,lW,uW,fW,dW,void 0,void 0,void 0,cW,hW,pW,void 0,_S.bind(void 0,0),_S.bind(void 0,1),CS.bind(void 0,Zo),CS.bind(void 0,fo),TS.bind(void 0,0),TS.bind(void 0,1),IS.bind(void 0,0),IS.bind(void 0,1),wS.bind(void 0,0),wS.bind(void 0,1),AW,mW,MS.bind(void 0,0),MS.bind(void 0,1),gW,vW,RS.bind(void 0,0),RS.bind(void 0,1),yW,xW,EW,SW,_W,CW,bS.bind(void 0,0),bS.bind(void 0,1),void 0,BS.bind(void 0,0),BS.bind(void 0,1),TW,void 0,IW,void 0,void 0,wW,MW,RW,bW,BW,LW,PW,DW,NW,FW,UW,OW,kW,x5.bind(void 0,1),QW,GW,zW,HW,VW,WW,XW,qW,YW,KW,q3.bind(void 0,0),q3.bind(void 0,1),q3.bind(void 0,2),q3.bind(void 0,3),void 0,void 0,void 0,void 0,jW,x5.bind(void 0,2),x5.bind(void 0,3),E5.bind(void 0,1),E5.bind(void 0,2),E5.bind(void 0,3),JW,ZW,void 0,void 0,$W,void 0,eX,tX,y5,y5,void 0,void 0,void 0,void 0,void 0,nX,LS.bind(void 0,0),LS.bind(void 0,1),iX,void 0,rX,sX,oX,aX,lX,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,La.bind(void 0,1),La.bind(void 0,2),La.bind(void 0,3),La.bind(void 0,4),La.bind(void 0,5),La.bind(void 0,6),La.bind(void 0,7),La.bind(void 0,8),Pa.bind(void 0,1),Pa.bind(void 0,2),Pa.bind(void 0,3),Pa.bind(void 0,4),Pa.bind(void 0,5),Pa.bind(void 0,6),Pa.bind(void 0,7),Pa.bind(void 0,8),Ke.bind(void 0,0,0,0,0,0),Ke.bind(void 0,0,0,0,0,1),Ke.bind(void 0,0,0,0,0,2),Ke.bind(void 0,0,0,0,0,3),Ke.bind(void 0,0,0,0,1,0),Ke.bind(void 0,0,0,0,1,1),Ke.bind(void 0,0,0,0,1,2),Ke.bind(void 0,0,0,0,1,3),Ke.bind(void 0,0,0,1,0,0),Ke.bind(void 0,0,0,1,0,1),Ke.bind(void 0,0,0,1,0,2),Ke.bind(void 0,0,0,1,0,3),Ke.bind(void 0,0,0,1,1,0),Ke.bind(void 0,0,0,1,1,1),Ke.bind(void 0,0,0,1,1,2),Ke.bind(void 0,0,0,1,1,3),Ke.bind(void 0,0,1,0,0,0),Ke.bind(void 0,0,1,0,0,1),Ke.bind(void 0,0,1,0,0,2),Ke.bind(void 0,0,1,0,0,3),Ke.bind(void 0,0,1,0,1,0),Ke.bind(void 0,0,1,0,1,1),Ke.bind(void 0,0,1,0,1,2),Ke.bind(void 0,0,1,0,1,3),Ke.bind(void 0,0,1,1,0,0),Ke.bind(void 0,0,1,1,0,1),Ke.bind(void 0,0,1,1,0,2),Ke.bind(void 0,0,1,1,0,3),Ke.bind(void 0,0,1,1,1,0),Ke.bind(void 0,0,1,1,1,1),Ke.bind(void 0,0,1,1,1,2),Ke.bind(void 0,0,1,1,1,3),Ke.bind(void 0,1,0,0,0,0),Ke.bind(void 0,1,0,0,0,1),Ke.bind(void 0,1,0,0,0,2),Ke.bind(void 0,1,0,0,0,3),Ke.bind(void 0,1,0,0,1,0),Ke.bind(void 0,1,0,0,1,1),Ke.bind(void 0,1,0,0,1,2),Ke.bind(void 0,1,0,0,1,3),Ke.bind(void 0,1,0,1,0,0),Ke.bind(void 0,1,0,1,0,1),Ke.bind(void 0,1,0,1,0,2),Ke.bind(void 0,1,0,1,0,3),Ke.bind(void 0,1,0,1,1,0),Ke.bind(void 0,1,0,1,1,1),Ke.bind(void 0,1,0,1,1,2),Ke.bind(void 0,1,0,1,1,3),Ke.bind(void 0,1,1,0,0,0),Ke.bind(void 0,1,1,0,0,1),Ke.bind(void 0,1,1,0,0,2),Ke.bind(void 0,1,1,0,0,3),Ke.bind(void 0,1,1,0,1,0),Ke.bind(void 0,1,1,0,1,1),Ke.bind(void 0,1,1,0,1,2),Ke.bind(void 0,1,1,0,1,3),Ke.bind(void 0,1,1,1,0,0),Ke.bind(void 0,1,1,1,0,1),Ke.bind(void 0,1,1,1,0,2),Ke.bind(void 0,1,1,1,0,3),Ke.bind(void 0,1,1,1,1,0),Ke.bind(void 0,1,1,1,1,1),Ke.bind(void 0,1,1,1,1,2),Ke.bind(void 0,1,1,1,1,3)];function zh(t){this.char=t,this.state={},this.activeState=null}function W4(t,e,n){this.contextName=n,this.startIndex=t,this.endOffset=e}function uX(t,e,n){this.contextName=t,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=n}function Qs(t,e){this.context=t,this.index=e,this.length=t.length,this.current=t[e],this.backtrack=t.slice(0,e),this.lookahead=t.slice(e+1)}function _2(t){this.eventId=t,this.subscribers=[]}function cX(t){var e=this,n=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];n.forEach(function(r){Object.defineProperty(e.events,r,{value:new _2(r)})}),t&&n.forEach(function(r){var s=t[r];typeof s=="function"&&e.events[r].subscribe(s)});var i=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];i.forEach(function(r){e.events[r].subscribe(e.updateContextsRanges)})}function kn(t){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],cX.call(this,t)}zh.prototype.setState=function(t,e){return this.state[t]=e,this.activeState={key:t,value:this.state[t]},this.activeState};zh.prototype.getState=function(t){return this.state[t]||null};kn.prototype.inboundIndex=function(t){return t>=0&&t<this.tokens.length};kn.prototype.composeRUD=function(t){var e=this,n=!0,i=t.map(function(s){return e[s[0]].apply(e,s.slice(1).concat(n))}),r=function(s){return typeof s=="object"&&s.hasOwnProperty("FAIL")};if(i.every(r))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:i.filter(r)};this.dispatch("composeRUD",[i.filter(function(s){return!r(s)})])};kn.prototype.replaceRange=function(t,e,n,i){e=e!==null?e:this.tokens.length;var r=n.every(function(o){return o instanceof zh});if(!isNaN(t)&&this.inboundIndex(t)&&r){var s=this.tokens.splice.apply(this.tokens,[t,e].concat(n));return i||this.dispatch("replaceToken",[t,e,n]),[s,n]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};kn.prototype.replaceToken=function(t,e,n){if(!isNaN(t)&&this.inboundIndex(t)&&e instanceof zh){var i=this.tokens.splice(t,1,e);return n||this.dispatch("replaceToken",[t,e]),[i[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};kn.prototype.removeRange=function(t,e,n){e=isNaN(e)?this.tokens.length:e;var i=this.tokens.splice(t,e);return n||this.dispatch("removeRange",[i,t,e]),i};kn.prototype.removeToken=function(t,e){if(!isNaN(t)&&this.inboundIndex(t)){var n=this.tokens.splice(t,1);return e||this.dispatch("removeToken",[n,t]),n}else return{FAIL:"removeToken: invalid token index."}};kn.prototype.insertToken=function(t,e,n){var i=t.every(function(r){return r instanceof zh});return i?(this.tokens.splice.apply(this.tokens,[e,0].concat(t)),n||this.dispatch("insertToken",[t,e]),t):{FAIL:"insertToken: invalid token(s)."}};kn.prototype.registerModifier=function(t,e,n){this.events.newToken.subscribe(function(i,r){var s=[i,r],o=e===null||e.apply(this,s)===!0,a=[i,r];if(o){var l=n.apply(this,a);i.setState(t,l)}}),this.registeredModifiers.push(t)};_2.prototype.subscribe=function(t){return typeof t=="function"?this.subscribers.push(t)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};_2.prototype.unsubscribe=function(t){this.subscribers.splice(t,1)};Qs.prototype.setCurrentIndex=function(t){this.index=t,this.current=this.context[t],this.backtrack=this.context.slice(0,t),this.lookahead=this.context.slice(t+1)};Qs.prototype.get=function(t){switch(!0){case t===0:return this.current;case(t<0&&Math.abs(t)<=this.backtrack.length):return this.backtrack.slice(t)[0];case(t>0&&t<=this.lookahead.length):return this.lookahead[t-1];default:return null}};kn.prototype.rangeToText=function(t){if(t instanceof W4)return this.getRangeTokens(t).map(function(e){return e.char}).join("")};kn.prototype.getText=function(){return this.tokens.map(function(t){return t.char}).join("")};kn.prototype.getContext=function(t){var e=this.registeredContexts[t];return e||null};kn.prototype.on=function(t,e){var n=this.events[t];return n?n.subscribe(e):null};kn.prototype.dispatch=function(t,e){var n=this,i=this.events[t];i instanceof _2&&i.subscribers.forEach(function(r){r.apply(n,e||[])})};kn.prototype.registerContextChecker=function(t,e,n){if(this.getContext(t))return{FAIL:"context name '"+t+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof n!="function")return{FAIL:"missing context end check."};var i=new uX(t,e,n);return this.registeredContexts[t]=i,this.contextCheckers.push(i),i};kn.prototype.getRangeTokens=function(t){var e=t.startIndex+t.endOffset;return[].concat(this.tokens.slice(t.startIndex,e))};kn.prototype.getContextRanges=function(t){var e=this.getContext(t);return e?e.ranges:{FAIL:"context checker '"+t+"' is not registered."}};kn.prototype.resetContextsRanges=function(){var t=this.registeredContexts;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n.ranges=[]}};kn.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var t=this.tokens.map(function(i){return i.char}),e=0;e<t.length;e++){var n=new Qs(t,e);this.runContextCheck(n)}this.dispatch("updateContextsRanges",[this.registeredContexts])};kn.prototype.setEndOffset=function(t,e){var n=this.getContext(e).openRange.startIndex,i=new W4(n,t,e),r=this.getContext(e).ranges;return i.rangeId=e+"."+r.length,r.push(i),this.getContext(e).openRange=null,i};kn.prototype.runContextCheck=function(t){var e=this,n=t.index;this.contextCheckers.forEach(function(i){var r=i.contextName,s=e.getContext(r).openRange;if(!s&&i.checkStart(t)&&(s=new W4(n,null,r),e.getContext(r).openRange=s,e.dispatch("contextStart",[r,n])),s&&i.checkEnd(t)){var o=n-s.startIndex+1,a=e.setEndOffset(o,r);e.dispatch("contextEnd",[r,a])}})};kn.prototype.tokenize=function(t){this.tokens=[],this.resetContextsRanges();var e=Array.from(t);this.dispatch("start");for(var n=0;n<e.length;n++){var i=e[n],r=new Qs(e,n);this.dispatch("next",[r]),this.runContextCheck(r);var s=new zh(i);this.tokens.push(s),this.dispatch("newToken",[s,r])}return this.dispatch("end",[this.tokens]),this.tokens};function il(t){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(t)}function rR(t){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(t)}function hl(t){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(t)}function SA(t){return/[A-z]/.test(t)}function hX(t){return/\s/.test(t)}function Qr(t){this.font=t,this.features={}}function eu(t){this.id=t.id,this.tag=t.tag,this.substitution=t.substitution}function Mp(t,e){if(!t)return-1;switch(e.format){case 1:return e.glyphs.indexOf(t);case 2:for(var n=e.ranges,i=0;i<n.length;i++){var r=n[i];if(t>=r.start&&t<=r.end){var s=t-r.start;return r.index+s}}break;default:return-1}return-1}function fX(t,e){var n=Mp(t,e.coverage);return n===-1?null:t+e.deltaGlyphId}function dX(t,e){var n=Mp(t,e.coverage);return n===-1?null:e.substitute[n]}function S5(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],s=e.current;s=Array.isArray(s)?s[0]:s;var o=Mp(s,r);o!==-1&&n.push(o)}return n.length!==t.length?-1:n}function pX(t,e){var n=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(t.context.length<n)return[];var i=S5(e.inputCoverage,t);if(i===-1)return[];var r=e.inputCoverage.length-1;if(t.lookahead.length<e.lookaheadCoverage.length)return[];for(var s=t.lookahead.slice(r);s.length&&hl(s[0].char);)s.shift();var o=new Qs(s,0),a=S5(e.lookaheadCoverage,o),l=[].concat(t.backtrack);for(l.reverse();l.length&&hl(l[0].char);)l.shift();if(l.length<e.backtrackCoverage.length)return[];var u=new Qs(l,0),h=S5(e.backtrackCoverage,u),d=i.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&h.length===e.backtrackCoverage.length,p=[];if(d)for(var A=0;A<e.lookupRecords.length;A++)for(var g=e.lookupRecords[A],S=g.lookupListIndex,E=this.getLookupByIndex(S),m=0;m<E.subtables.length;m++){var x=E.subtables[m],y=this.getLookupMethod(E,x),C=this.getSubstitutionType(E,x);if(C==="12")for(var I=0;I<i.length;I++){var M=t.get(I),w=y(M);w&&p.push(w)}}return p}function AX(t,e){var n=t.current,i=Mp(n,e.coverage);if(i===-1)return null;for(var r,s=e.ligatureSets[i],o=0;o<s.length;o++){r=s[o];for(var a=0;a<r.components.length;a++){var l=t.lookahead[a],u=r.components[a];if(l!==u)break;if(a===r.components.length-1)return r}}return null}function mX(t,e){var n=Mp(t,e.coverage);return n===-1?null:e.sequences[n]}Qr.prototype.getDefaultScriptFeaturesIndexes=function(){for(var t=this.font.tables.gsub.scripts,e=0;e<t.length;e++){var n=t[e];if(n.tag==="DFLT")return n.script.defaultLangSys.featureIndexes}return[]};Qr.prototype.getScriptFeaturesIndexes=function(t){var e=this.font.tables;if(!e.gsub)return[];if(!t)return this.getDefaultScriptFeaturesIndexes();for(var n=this.font.tables.gsub.scripts,i=0;i<n.length;i++){var r=n[i];if(r.tag===t&&r.script.defaultLangSys)return r.script.defaultLangSys.featureIndexes;var s=r.langSysRecords;if(s)for(var o=0;o<s.length;o++){var a=s[o];if(a.tag===t){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};Qr.prototype.mapTagsToFeatures=function(t,e){for(var n={},i=0;i<t.length;i++){var r=t[i].tag,s=t[i].feature;n[r]=s}this.features[e].tags=n};Qr.prototype.getScriptFeatures=function(t){var e=this.features[t];if(this.features.hasOwnProperty(t))return e;var n=this.getScriptFeaturesIndexes(t);if(!n)return null;var i=this.font.tables.gsub;return e=n.map(function(r){return i.features[r]}),this.features[t]=e,this.mapTagsToFeatures(e,t),e};Qr.prototype.getSubstitutionType=function(t,e){var n=t.lookupType.toString(),i=e.substFormat.toString();return n+i};Qr.prototype.getLookupMethod=function(t,e){var n=this,i=this.getSubstitutionType(t,e);switch(i){case"11":return function(r){return fX.apply(n,[r,e])};case"12":return function(r){return dX.apply(n,[r,e])};case"63":return function(r){return pX.apply(n,[r,e])};case"41":return function(r){return AX.apply(n,[r,e])};case"21":return function(r){return mX.apply(n,[r,e])};default:throw new Error("lookupType: "+t.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};Qr.prototype.lookupFeature=function(t){var e=t.contextParams,n=e.index,i=this.getFeature({tag:t.tag,script:t.script});if(!i)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+t.tag+"' for script '"+t.script+"'.");for(var r=this.getFeatureLookups(i),s=[].concat(e.context),o=0;o<r.length;o++)for(var a=r[o],l=this.getLookupSubtables(a),u=0;u<l.length;u++){var h=l[u],d=this.getSubstitutionType(a,h),p=this.getLookupMethod(a,h),A=void 0;switch(d){case"11":A=p(e.current),A&&s.splice(n,1,new eu({id:11,tag:t.tag,substitution:A}));break;case"12":A=p(e.current),A&&s.splice(n,1,new eu({id:12,tag:t.tag,substitution:A}));break;case"63":A=p(e),Array.isArray(A)&&A.length&&s.splice(n,1,new eu({id:63,tag:t.tag,substitution:A}));break;case"41":A=p(e),A&&s.splice(n,1,new eu({id:41,tag:t.tag,substitution:A}));break;case"21":A=p(e.current),A&&s.splice(n,1,new eu({id:21,tag:t.tag,substitution:A}));break}e=new Qs(s,n),!(Array.isArray(A)&&!A.length)&&(A=null)}return s.length?s:null};Qr.prototype.supports=function(t){if(!t.script)return!1;this.getScriptFeatures(t.script);var e=this.features.hasOwnProperty(t.script);if(!t.tag)return e;var n=this.features[t.script].some(function(i){return i.tag===t.tag});return e&&n};Qr.prototype.getLookupSubtables=function(t){return t.subtables||null};Qr.prototype.getLookupByIndex=function(t){var e=this.font.tables.gsub.lookups;return e[t]||null};Qr.prototype.getFeatureLookups=function(t){return t.lookupListIndexes.map(this.getLookupByIndex.bind(this))};Qr.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var n=this.features[e.script];return n?n.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};function gX(t){var e=t.current,n=t.get(-1);return n===null&&il(e)||!il(n)&&il(e)}function vX(t){var e=t.get(1);return e===null||!il(e)}var yX={startCheck:gX,endCheck:vX};function xX(t){var e=t.current,n=t.get(-1);return(il(e)||hl(e))&&!il(n)}function EX(t){var e=t.get(1);switch(!0){case e===null:return!0;case(!il(e)&&!hl(e)):var n=hX(e);if(!n)return!0;if(n){var i=!1;if(i=t.lookahead.some(function(r){return il(r)||hl(r)}),!i)return!0}break;default:return!1}}var SX={startCheck:xX,endCheck:EX};function _X(t,e,n){e[n].setState(t.tag,t.substitution)}function CX(t,e,n){e[n].setState(t.tag,t.substitution)}function TX(t,e,n){t.substitution.forEach(function(i,r){var s=e[n+r];s.setState(t.tag,i)})}function IX(t,e,n){var i=e[n];i.setState(t.tag,t.substitution.ligGlyph);for(var r=t.substitution.components.length,s=0;s<r;s++)i=e[n+s+1],i.setState("deleted",!0)}var PS={11:_X,12:CX,63:TX,41:IX};function X4(t,e,n){t instanceof eu&&PS[t.id]&&PS[t.id](t,e,n)}function wX(t){for(var e=[].concat(t.backtrack),n=e.length-1;n>=0;n--){var i=e[n],r=rR(i),s=hl(i);if(!r&&!s)return!0;if(r)return!1}return!1}function MX(t){if(rR(t.current))return!1;for(var e=0;e<t.lookahead.length;e++){var n=t.lookahead[e],i=hl(n);if(!i)return!0}return!1}function RX(t){var e=this,n="arab",i=this.featuresTags[n],r=this.tokenizer.getRangeTokens(t);if(r.length!==1){var s=new Qs(r.map(function(a){return a.getState("glyphIndex")}),0),o=new Qs(r.map(function(a){return a.char}),0);r.forEach(function(a,l){if(!hl(a.char)){s.setCurrentIndex(l),o.setCurrentIndex(l);var u=0;wX(o)&&(u|=1),MX(o)&&(u|=2);var h;switch(u){case 1:h="fina";break;case 2:h="init";break;case 3:h="medi";break}if(i.indexOf(h)!==-1){var d=e.query.lookupFeature({tag:h,script:n,contextParams:s});if(d instanceof Error)return console.info(d.message);d.forEach(function(p,A){p instanceof eu&&(X4(p,r,A),s.context[A]=p.substitution)})}}})}}function DS(t,e){var n=t.map(function(i){return i.activeState.value});return new Qs(n,e||0)}function bX(t){var e=this,n="arab",i=this.tokenizer.getRangeTokens(t),r=DS(i);r.context.forEach(function(s,o){r.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"rlig",script:n,contextParams:r});a.length&&(a.forEach(function(l){return X4(l,i,o)}),r=DS(i))})}function BX(t){var e=t.current,n=t.get(-1);return n===null&&SA(e)||!SA(n)&&SA(e)}function LX(t){var e=t.get(1);return e===null||!SA(e)}var PX={startCheck:BX,endCheck:LX};function NS(t,e){var n=t.map(function(i){return i.activeState.value});return new Qs(n,e||0)}function DX(t){var e=this,n="latn",i=this.tokenizer.getRangeTokens(t),r=NS(i);r.context.forEach(function(s,o){r.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"liga",script:n,contextParams:r});a.length&&(a.forEach(function(l){return X4(l,i,o)}),r=NS(i))})}function qs(t){this.baseDir=t||"ltr",this.tokenizer=new kn,this.featuresTags={}}qs.prototype.setText=function(t){this.text=t};qs.prototype.contextChecks={latinWordCheck:PX,arabicWordCheck:yX,arabicSentenceCheck:SX};function _5(t){var e=this.contextChecks[t+"Check"];return this.tokenizer.registerContextChecker(t,e.startCheck,e.endCheck)}function NX(){return _5.call(this,"latinWord"),_5.call(this,"arabicWord"),_5.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function FX(){var t=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(n){var i=t.tokenizer.getRangeTokens(n);t.tokenizer.replaceRange(n.startIndex,n.endOffset,i.reverse())})}qs.prototype.registerFeatures=function(t,e){var n=this,i=e.filter(function(r){return n.query.supports({script:t,tag:r})});this.featuresTags.hasOwnProperty(t)?this.featuresTags[t]=this.featuresTags[t].concat(i):this.featuresTags[t]=i};qs.prototype.applyFeatures=function(t,e){if(!t)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Qr(t));for(var n=0;n<e.length;n++){var i=e[n];this.query.supports({script:i.script})&&this.registerFeatures(i.script,i.tags)}};qs.prototype.registerModifier=function(t,e,n){this.tokenizer.registerModifier(t,e,n)};function q4(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function UX(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){q4.call(this);var n=this.tokenizer.getContextRanges("arabicWord");n.forEach(function(i){RX.call(t,i)})}}function OX(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){var n=this.featuresTags[e];if(n.indexOf("rlig")!==-1){q4.call(this);var i=this.tokenizer.getContextRanges("arabicWord");i.forEach(function(r){bX.call(t,r)})}}}function kX(){var t=this,e="latn";if(this.featuresTags.hasOwnProperty(e)){var n=this.featuresTags[e];if(n.indexOf("liga")!==-1){q4.call(this);var i=this.tokenizer.getContextRanges("latinWord");i.forEach(function(r){DX.call(t,r)})}}}qs.prototype.checkContextReady=function(t){return!!this.tokenizer.getContext(t)};qs.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(UX.call(this),OX.call(this)),this.checkContextReady("latinWord")&&kX.call(this),this.checkContextReady("arabicSentence")&&FX.call(this)};qs.prototype.processText=function(t){(!this.text||this.text!==t)&&(this.setText(t),NX.call(this),this.applyFeaturesToContexts())};qs.prototype.getBidiText=function(t){return this.processText(t),this.tokenizer.getText()};qs.prototype.getTextGlyphs=function(t){this.processText(t);for(var e=[],n=0;n<this.tokenizer.tokens.length;n++){var i=this.tokenizer.tokens[n];if(!i.state.deleted){var r=i.activeState.value;e.push(Array.isArray(r)?r[0]:r)}}return e};function cn(t){t=t||{},t.tables=t.tables||{},t.empty||(Pf(t.familyName,"When creating a new Font object, familyName is required."),Pf(t.styleName,"When creating a new Font object, styleName is required."),Pf(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Pf(t.ascender,"When creating a new Font object, ascender is required."),Pf(t.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||(t.familyName+t.styleName).replace(/\s/g,"")},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables=Object.assign(t.tables,{os2:Object.assign({usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR},t.tables.os2)})),this.supported=!0,this.glyphs=new xo.GlyphSet(this,t.glyphs||[]),this.encoding=new NM(this),this.position=new Tp(this),this.substitution=new kr(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new eR(this)}})}cn.prototype.hasChar=function(t){return this.encoding.charToGlyphIndex(t)!==null};cn.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)};cn.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n};cn.prototype.updateFeatures=function(t){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(n){return t[n]})}:e})};cn.prototype.stringToGlyphs=function(t,e){var n=this,i=new qs,r=function(d){return n.charToGlyphIndex(d.char)};i.registerModifier("glyphIndex",null,r);var s=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;i.applyFeatures(this,s);for(var o=i.getTextGlyphs(t),a=o.length,l=new Array(a),u=this.glyphs.get(0),h=0;h<a;h+=1)l[h]=this.glyphs.get(o[h])||u;return l};cn.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)};cn.prototype.nameToGlyph=function(t){var e=this.nameToGlyphIndex(t),n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n};cn.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""};cn.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,t,e):this.kerningPairs[t+","+e]||0};cn.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};cn.prototype.forEachGlyph=function(t,e,n,i,r,s){e=e!==void 0?e:0,n=n!==void 0?n:0,i=i!==void 0?i:72,r=Object.assign({},this.defaultRenderOptions,r);var o=1/this.unitsPerEm*i,a=this.stringToGlyphs(t,r),l;if(r.kerning){var u=r.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(u,r.language)}for(var h=0;h<a.length;h+=1){var d=a[h];if(s.call(this,d,e,n,i,r),d.advanceWidth&&(e+=d.advanceWidth*o),r.kerning&&h<a.length-1){var p=l?this.position.getKerningValue(l,d.index,a[h+1].index):this.getKerningValue(d,a[h+1]);e+=p*o}r.letterSpacing?e+=r.letterSpacing*i:r.tracking&&(e+=r.tracking/1e3*i)}return e};cn.prototype.getPath=function(t,e,n,i,r){var s=new ai;return this.forEachGlyph(t,e,n,i,r,function(o,a,l,u){var h=o.getPath(a,l,u,r,this);s.extend(h)}),s};cn.prototype.getPaths=function(t,e,n,i,r){var s=[];return this.forEachGlyph(t,e,n,i,r,function(o,a,l,u){var h=o.getPath(a,l,u,r,this);s.push(h)}),s};cn.prototype.getAdvanceWidth=function(t,e,n){return this.forEachGlyph(t,0,0,e,n,function(){})};cn.prototype.draw=function(t,e,n,i,r,s){this.getPath(e,n,i,r,s).draw(t)};cn.prototype.drawPoints=function(t,e,n,i,r,s){this.forEachGlyph(e,n,i,r,s,function(o,a,l,u){o.drawPoints(t,a,l,u)})};cn.prototype.drawMetrics=function(t,e,n,i,r,s){this.forEachGlyph(e,n,i,r,s,function(o,a,l,u){o.drawMetrics(t,a,l,u)})};cn.prototype.getEnglishName=function(t){var e=this.names[t];if(e)return e.en};cn.prototype.validate=function(){var t=this;function e(i,r){}function n(i){var r=t.getEnglishName(i);r&&r.trim().length>0}n("fontFamily"),n("weightName"),n("manufacturer"),n("copyright"),n("version"),this.unitsPerEm>0};cn.prototype.toTables=function(){return TV.fontToTable(this)};cn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};cn.prototype.toArrayBuffer=function(){for(var t=this.toTables(),e=t.encode(),n=new ArrayBuffer(e.length),i=new Uint8Array(n),r=0;r<e.length;r++)i[r]=e[r];return n};cn.prototype.download=function(t){var e=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");t=t||e.replace(/\s/g,"")+"-"+n+".otf";var i=this.toArrayBuffer();if(wV())if(window.URL=window.URL||window.webkitURL,window.URL){var r=new DataView(i),s=new Blob([r],{type:"font/opentype"}),o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=t;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),o.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=require("fs"),u=MV(i);l.writeFileSync(t,u)}};cn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};cn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};cn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var fa=new Array(10);fa[1]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{posFormat:1,coverage:this.parsePointer(ae.coverage),value:this.parseValueRecord()};if(n===2)return{posFormat:2,coverage:this.parsePointer(ae.coverage),values:this.parseValueRecordList()};Et.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};fa[2]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();Et.assert(n===1||n===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var i=this.parsePointer(ae.coverage),r=this.parseUShort(),s=this.parseUShort();if(n===1)return{posFormat:n,coverage:i,valueFormat1:r,valueFormat2:s,pairSets:this.parseList(ae.pointer(ae.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(s)}})))};if(n===2){var o=this.parsePointer(ae.classDef),a=this.parsePointer(ae.classDef),l=this.parseUShort(),u=this.parseUShort();return{posFormat:n,coverage:i,valueFormat1:r,valueFormat2:s,classDef1:o,classDef2:a,class1Count:l,class2Count:u,classRecords:this.parseList(l,ae.list(u,function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(s)}}))}}};fa[3]=function(){return{error:"GPOS Lookup 3 not supported"}};fa[4]=function(){return{error:"GPOS Lookup 4 not supported"}};fa[5]=function(){return{error:"GPOS Lookup 5 not supported"}};fa[6]=function(){return{error:"GPOS Lookup 6 not supported"}};fa[7]=function(){return{error:"GPOS Lookup 7 not supported"}};fa[8]=function(){return{error:"GPOS Lookup 8 not supported"}};fa[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var QX=Object.defineProperty,GX=(t,e,n)=>e in t?QX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Re=(t,e,n)=>(GX(t,typeof e!="symbol"?e+"":e,n),n);function FS(t,e){if(e===QI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===tm||e===j8){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(n)if(e===tm)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}new Ee;const sR=class{parse(t,e={decodeSpeed:5,encodeSpeed:5,encoderMethod:sR.MESH_EDGEBREAKER_ENCODING,quantization:[16,8,8,8,8],exportUvs:!0,exportNormals:!0,exportColor:!1}){if(t instanceof xt&&t.isBufferGeometry)throw new Error("DRACOExporter: The first parameter of parse() is now an instance of Mesh or Points.");if(DracoEncoderModule===void 0)throw new Error("THREE.DRACOExporter: required the draco_encoder to work.");const n=t.geometry,i=DracoEncoderModule(),r=new i.Encoder;let s,o;if(!n.isBufferGeometry)throw new Error("THREE.DRACOExporter.parse(geometry, options): geometry is not a THREE.BufferGeometry instance.");if(t instanceof Kt&&t.isMesh){s=new i.MeshBuilder,o=new i.Mesh;const p=n.getAttribute("position");s.AddFloatAttributeToMesh(o,i.POSITION,p.count,p.itemSize,p.array);const A=n.getIndex();if(A!==null)s.AddFacesToMesh(o,A.count/3,A.array);else{const g=new(p.count>65535?Uint32Array:Uint16Array)(p.count);for(let S=0;S<g.length;S++)g[S]=S;s.AddFacesToMesh(o,p.count,g)}if(e.exportNormals){const g=n.getAttribute("normal");g!==void 0&&s.AddFloatAttributeToMesh(o,i.NORMAL,g.count,g.itemSize,g.array)}if(e.exportUvs){const g=n.getAttribute("uv");g!==void 0&&s.AddFloatAttributeToMesh(o,i.TEX_COORD,g.count,g.itemSize,g.array)}if(e.exportColor){const g=n.getAttribute("color");g!==void 0&&s.AddFloatAttributeToMesh(o,i.COLOR,g.count,g.itemSize,g.array)}}else if(t instanceof n2&&t.isPoints){s=new i.PointCloudBuilder,o=new i.PointCloud;const p=n.getAttribute("position");if(s.AddFloatAttribute(o,i.POSITION,p.count,p.itemSize,p.array),e.exportColor){const A=n.getAttribute("color");A!==void 0&&s.AddFloatAttribute(o,i.COLOR,A.count,A.itemSize,A.array)}}else throw new Error("DRACOExporter: Unsupported object type.");const a=new i.DracoInt8Array,l=e.encodeSpeed!==void 0?e.encodeSpeed:5,u=e.decodeSpeed!==void 0?e.decodeSpeed:5;if(r.SetSpeedOptions(l,u),e.encoderMethod!==void 0&&r.SetEncodingMethod(e.encoderMethod),e.quantization!==void 0)for(let p=0;p<5;p++)e.quantization[p]!==void 0&&r.SetAttributeQuantization(p,e.quantization[p]);let h;if(t instanceof Kt&&t.isMesh?h=r.EncodeMeshToDracoBuffer(o,a):h=r.EncodePointCloudToDracoBuffer(o,!0,a),i.destroy(o),h===0)throw new Error("THREE.DRACOExporter: Draco encoding failed.");const d=new Int8Array(new ArrayBuffer(h));for(let p=0;p<h;p++)d[p]=a.GetValue(p);return i.destroy(a),i.destroy(r),i.destroy(s),d}};let To=sR;Re(To,"MESH_EDGEBREAKER_ENCODING",1);Re(To,"MESH_SEQUENTIAL_ENCODING",0);Re(To,"POINT_CLOUD",0);Re(To,"TRIANGULAR_MESH",1);Re(To,"INVALID",-1);Re(To,"POSITION",0);Re(To,"NORMAL",1);Re(To,"COLOR",2);Re(To,"TEX_COORD",3);Re(To,"GENERIC",4);const oR=class extends Kt{constructor(t,e={}){super(t),this.isReflector=!0,this.type="Reflector",this.camera=new Nn;const n=this,i=e.color!==void 0?new Ee(e.color):new Ee(8355711),r=e.textureWidth||512,s=e.textureHeight||512,o=e.clipBias||0,a=e.shader||oR.ReflectorShader,l=e.multisample!==void 0?e.multisample:4,u=new ns,h=new D,d=new D,p=new D,A=new He,g=new D(0,0,-1),S=new kt,E=new D,m=new D,x=new kt,y=new He,C=this.camera,I=new rn(r,s,{samples:l,type:Hn}),M=new Vt({uniforms:_n.clone(a.uniforms),fragmentShader:a.fragmentShader,vertexShader:a.vertexShader});M.uniforms.tDiffuse.value=I.texture,M.uniforms.color.value=i,M.uniforms.textureMatrix.value=y,this.material=M,this.onBeforeRender=function(w,L,R){if(d.setFromMatrixPosition(n.matrixWorld),p.setFromMatrixPosition(R.matrixWorld),A.extractRotation(n.matrixWorld),h.set(0,0,1),h.applyMatrix4(A),E.subVectors(d,p),E.dot(h)>0)return;E.reflect(h).negate(),E.add(d),A.extractRotation(R.matrixWorld),g.set(0,0,-1),g.applyMatrix4(A),g.add(p),m.subVectors(d,g),m.reflect(h).negate(),m.add(d),C.position.copy(E),C.up.set(0,1,0),C.up.applyMatrix4(A),C.up.reflect(h),C.lookAt(m),C.far=R.far,C.updateMatrixWorld(),C.projectionMatrix.copy(R.projectionMatrix),y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(C.projectionMatrix),y.multiply(C.matrixWorldInverse),y.multiply(n.matrixWorld),u.setFromNormalAndCoplanarPoint(h,d),u.applyMatrix4(C.matrixWorldInverse),S.set(u.normal.x,u.normal.y,u.normal.z,u.constant);const B=C.projectionMatrix;x.x=(Math.sign(S.x)+B.elements[8])/B.elements[0],x.y=(Math.sign(S.y)+B.elements[9])/B.elements[5],x.z=-1,x.w=(1+B.elements[10])/B.elements[14],S.multiplyScalar(2/S.dot(x)),B.elements[2]=S.x,B.elements[6]=S.y,B.elements[10]=S.z+1-o,B.elements[14]=S.w,n.visible=!1;const F=w.getRenderTarget(),X=w.xr.enabled,G=w.shadowMap.autoUpdate,q=w.toneMapping;let Y=!1;"outputColorSpace"in w?Y=w.outputColorSpace==="srgb":Y=w.outputEncoding===3001,w.xr.enabled=!1,w.shadowMap.autoUpdate=!1,"outputColorSpace"in w?w.outputColorSpace="linear-srgb":w.outputEncoding=3e3,w.toneMapping=Rr,w.setRenderTarget(I),w.state.buffers.depth.setMask(!0),w.autoClear===!1&&w.clear(),w.render(L,C),w.xr.enabled=X,w.shadowMap.autoUpdate=G,w.toneMapping=q,"outputColorSpace"in w?w.outputColorSpace=Y?"srgb":"srgb-linear":w.outputEncoding=Y?3001:3e3,w.setRenderTarget(F);const $=R.viewport;$!==void 0&&w.state.viewport($),n.visible=!0},this.getRenderTarget=function(){return I},this.dispose=function(){I.dispose(),n.material.dispose()}}};let T6=oR;Re(T6,"ReflectorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(ca.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

		}`});const aR=class extends Kt{constructor(t,e={}){super(t),this.isRefractor=!0,this.type="Refractor",this.camera=new Nn;const n=this,i=e.color!==void 0?new Ee(e.color):new Ee(8355711),r=e.textureWidth||512,s=e.textureHeight||512,o=e.clipBias||0,a=e.shader||aR.RefractorShader,l=e.multisample!==void 0?e.multisample:4,u=this.camera;u.matrixAutoUpdate=!1,u.userData.refractor=!0;const h=new ns,d=new He,p=new rn(r,s,{samples:l,type:Hn});this.material=new Vt({uniforms:_n.clone(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,transparent:!0}),this.material.uniforms.color.value=i,this.material.uniforms.tDiffuse.value=p.texture,this.material.uniforms.textureMatrix.value=d;const A=function(){const x=new D,y=new D,C=new He,I=new D,M=new D;return function(L){return x.setFromMatrixPosition(n.matrixWorld),y.setFromMatrixPosition(L.matrixWorld),I.subVectors(x,y),C.extractRotation(n.matrixWorld),M.set(0,0,1),M.applyMatrix4(C),I.dot(M)<0}}(),g=function(){const x=new D,y=new D,C=new Si,I=new D;return function(){n.matrixWorld.decompose(y,C,I),x.set(0,0,1).applyQuaternion(C).normalize(),x.negate(),h.setFromNormalAndCoplanarPoint(x,y)}}(),S=function(){const x=new ns,y=new kt,C=new kt;return function(M){u.matrixWorld.copy(M.matrixWorld),u.matrixWorldInverse.copy(u.matrixWorld).invert(),u.projectionMatrix.copy(M.projectionMatrix),u.far=M.far,x.copy(h),x.applyMatrix4(u.matrixWorldInverse),y.set(x.normal.x,x.normal.y,x.normal.z,x.constant);const w=u.projectionMatrix;C.x=(Math.sign(y.x)+w.elements[8])/w.elements[0],C.y=(Math.sign(y.y)+w.elements[9])/w.elements[5],C.z=-1,C.w=(1+w.elements[10])/w.elements[14],y.multiplyScalar(2/y.dot(C)),w.elements[2]=y.x,w.elements[6]=y.y,w.elements[10]=y.z+1-o,w.elements[14]=y.w}}();function E(x){d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(x.projectionMatrix),d.multiply(x.matrixWorldInverse),d.multiply(n.matrixWorld)}function m(x,y,C){n.visible=!1;const I=x.getRenderTarget(),M=x.xr.enabled,w=x.shadowMap.autoUpdate,L=x.toneMapping;let R=!1;"outputColorSpace"in x?R=x.outputColorSpace==="srgb":R=x.outputEncoding===3001,x.xr.enabled=!1,x.shadowMap.autoUpdate=!1,"outputColorSpace"in x?x.outputColorSpace="linear-srgb":x.outputEncoding=3e3,x.toneMapping=Rr,x.setRenderTarget(p),x.autoClear===!1&&x.clear(),x.render(y,u),x.xr.enabled=M,x.shadowMap.autoUpdate=w,x.toneMapping=L,x.setRenderTarget(I),"outputColorSpace"in x?x.outputColorSpace=R?"srgb":"srgb-linear":x.outputEncoding=R?3001:3e3;const B=C.viewport;B!==void 0&&x.state.viewport(B),n.visible=!0}this.onBeforeRender=function(x,y,C){C.userData.refractor!==!0&&A(C)&&(g(),E(C),S(C),m(x,y,C))},this.getRenderTarget=function(){return p},this.dispose=function(){p.dispose(),n.material.dispose()}}};let I6=aR;Re(I6,"RefractorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(ca.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

		}`});const zX=new xt,w6=class extends Kt{constructor(){super(w6.Geometry,new di({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const t=new D,e=new D,n=new go(new Uint8Array(16*16*3),16,16,Un);n.minFilter=vt,n.magFilter=vt,n.wrapS=Sn,n.wrapT=Sn;const i=new go(new Uint8Array(16*16*3),16,16,Un);i.minFilter=vt,i.magFilter=vt,i.wrapS=Sn,i.wrapT=Sn;const r=w6.Geometry,s=new cd({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),o=new cd({uniforms:{map:{value:n},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),a=new Kt(r,s),l=[],u=lR.Shader,h=new cd({uniforms:{map:{value:null},occlusionMap:{value:i},color:{value:new Ee(16777215)},scale:{value:new oe},screenPosition:{value:new D}},vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:Pd,transparent:!0,depthWrite:!1}),d=new Kt(r,h);this.addElement=function(E){l.push(E)};const p=new oe,A=new oe,g=new qw,S=new kt;this.onBeforeRender=function(E,m,x){E.getCurrentViewport(S);const y=S.w/S.z,C=S.z/2,I=S.w/2;let M=16/S.w;if(p.set(M*y,M),g.min.set(S.x,S.y),g.max.set(S.x+(S.z-16),S.y+(S.w-16)),e.setFromMatrixPosition(this.matrixWorld),e.applyMatrix4(x.matrixWorldInverse),!(e.z>0)&&(t.copy(e).applyMatrix4(x.projectionMatrix),A.x=S.x+t.x*C+C-8,A.y=S.y+t.y*I+I-8,g.containsPoint(A))){E.copyFramebufferToTexture(A,n);let w=s.uniforms;w.scale.value=p,w.screenPosition.value=t,E.renderBufferDirect(x,null,r,s,a,null),E.copyFramebufferToTexture(A,i),w=o.uniforms,w.scale.value=p,w.screenPosition.value=t,E.renderBufferDirect(x,null,r,o,a,null);const L=-t.x*2,R=-t.y*2;for(let B=0,F=l.length;B<F;B++){const X=l[B],G=h.uniforms;G.color.value.copy(X.color),G.map.value=X.texture,G.screenPosition.value.x=t.x+L*X.distance,G.screenPosition.value.y=t.y+R*X.distance,M=X.size/S.w;const q=S.w/S.z;G.scale.value.set(M*q,M),h.uniformsNeedUpdate=!0,E.renderBufferDirect(x,null,r,h,d,null)}}},this.dispose=function(){s.dispose(),o.dispose(),h.dispose(),n.dispose(),i.dispose();for(let E=0,m=l.length;E<m;E++)l[E].texture.dispose()}}};let HX=w6;Re(HX,"Geometry",zX);class lR{constructor(e,n=1,i=0,r=new Ee(16777215)){this.texture=e,this.size=n,this.distance=i,this.color=r}}Re(lR,"Shader",{uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`});class dd{constructor(e=Math){Re(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),Re(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),Re(this,"p",[]),Re(this,"perm",[]),Re(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),Re(this,"dot",(n,i,r)=>n[0]*i+n[1]*r),Re(this,"dot3",(n,i,r,s)=>n[0]*i+n[1]*r+n[2]*s),Re(this,"dot4",(n,i,r,s,o)=>n[0]*i+n[1]*r+n[2]*s+n[3]*o),Re(this,"noise",(n,i)=>{let r,s,o;const a=.5*(Math.sqrt(3)-1),l=(n+i)*a,u=Math.floor(n+l),h=Math.floor(i+l),d=(3-Math.sqrt(3))/6,p=(u+h)*d,A=u-p,g=h-p,S=n-A,E=i-g;let m=0,x=1;S>E&&(m=1,x=0);const y=S-m+d,C=E-x+d,I=S-1+2*d,M=E-1+2*d,w=u&255,L=h&255,R=this.perm[w+this.perm[L]]%12,B=this.perm[w+m+this.perm[L+x]]%12,F=this.perm[w+1+this.perm[L+1]]%12;let X=.5-S*S-E*E;X<0?r=0:(X*=X,r=X*X*this.dot(this.grad3[R],S,E));let G=.5-y*y-C*C;G<0?s=0:(G*=G,s=G*G*this.dot(this.grad3[B],y,C));let q=.5-I*I-M*M;return q<0?o=0:(q*=q,o=q*q*this.dot(this.grad3[F],I,M)),70*(r+s+o)}),Re(this,"noise3d",(n,i,r)=>{let s,o,a,l;const u=.3333333333333333,h=(n+i+r)*u,d=Math.floor(n+h),p=Math.floor(i+h),A=Math.floor(r+h),g=1/6,S=(d+p+A)*g,E=d-S,m=p-S,x=A-S,y=n-E,C=i-m,I=r-x;let M,w,L,R,B,F;y>=C?C>=I?(M=1,w=0,L=0,R=1,B=1,F=0):y>=I?(M=1,w=0,L=0,R=1,B=0,F=1):(M=0,w=0,L=1,R=1,B=0,F=1):C<I?(M=0,w=0,L=1,R=0,B=1,F=1):y<I?(M=0,w=1,L=0,R=0,B=1,F=1):(M=0,w=1,L=0,R=1,B=1,F=0);const X=y-M+g,G=C-w+g,q=I-L+g,Y=y-R+2*g,$=C-B+2*g,j=I-F+2*g,P=y-1+3*g,Q=C-1+3*g,U=I-1+3*g,O=d&255,V=p&255,me=A&255,re=this.perm[O+this.perm[V+this.perm[me]]]%12,xe=this.perm[O+M+this.perm[V+w+this.perm[me+L]]]%12,ge=this.perm[O+R+this.perm[V+B+this.perm[me+F]]]%12,Ie=this.perm[O+1+this.perm[V+1+this.perm[me+1]]]%12;let Ne=.6-y*y-C*C-I*I;Ne<0?s=0:(Ne*=Ne,s=Ne*Ne*this.dot3(this.grad3[re],y,C,I));let $e=.6-X*X-G*G-q*q;$e<0?o=0:($e*=$e,o=$e*$e*this.dot3(this.grad3[xe],X,G,q));let ct=.6-Y*Y-$*$-j*j;ct<0?a=0:(ct*=ct,a=ct*ct*this.dot3(this.grad3[ge],Y,$,j));let De=.6-P*P-Q*Q-U*U;return De<0?l=0:(De*=De,l=De*De*this.dot3(this.grad3[Ie],P,Q,U)),32*(s+o+a+l)}),Re(this,"noise4d",(n,i,r,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,u=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;let d,p,A,g,S;const E=(n+i+r+s)*u,m=Math.floor(n+E),x=Math.floor(i+E),y=Math.floor(r+E),C=Math.floor(s+E),I=(m+x+y+C)*h,M=m-I,w=x-I,L=y-I,R=C-I,B=n-M,F=i-w,X=r-L,G=s-R,q=B>F?32:0,Y=B>X?16:0,$=F>X?8:0,j=B>G?4:0,P=F>G?2:0,Q=X>G?1:0,U=q+Y+$+j+P+Q;let O,V,me,re,xe,ge,Ie,Ne,$e,ct,De,W;O=a[U][0]>=3?1:0,V=a[U][1]>=3?1:0,me=a[U][2]>=3?1:0,re=a[U][3]>=3?1:0,xe=a[U][0]>=2?1:0,ge=a[U][1]>=2?1:0,Ie=a[U][2]>=2?1:0,Ne=a[U][3]>=2?1:0,$e=a[U][0]>=1?1:0,ct=a[U][1]>=1?1:0,De=a[U][2]>=1?1:0,W=a[U][3]>=1?1:0;const ve=B-O+h,Ae=F-V+h,Se=X-me+h,ye=G-re+h,Ze=B-xe+2*h,Qe=F-ge+2*h,Ge=X-Ie+2*h,st=G-Ne+2*h,Mt=B-$e+3*h,$t=F-ct+3*h,H=X-De+3*h,N=G-W+3*h,ue=B-1+4*h,_e=F-1+4*h,Ce=X-1+4*h,Le=G-1+4*h,Xe=m&255,be=x&255,he=y&255,et=C&255,rt=l[Xe+l[be+l[he+l[et]]]]%32,ot=l[Xe+O+l[be+V+l[he+me+l[et+re]]]]%32,qe=l[Xe+xe+l[be+ge+l[he+Ie+l[et+Ne]]]]%32,Ye=l[Xe+$e+l[be+ct+l[he+De+l[et+W]]]]%32,Tt=l[Xe+1+l[be+1+l[he+1+l[et+1]]]]%32;let Gt=.6-B*B-F*F-X*X-G*G;Gt<0?d=0:(Gt*=Gt,d=Gt*Gt*this.dot4(o[rt],B,F,X,G));let K=.6-ve*ve-Ae*Ae-Se*Se-ye*ye;K<0?p=0:(K*=K,p=K*K*this.dot4(o[ot],ve,Ae,Se,ye));let Be=.6-Ze*Ze-Qe*Qe-Ge*Ge-st*st;Be<0?A=0:(Be*=Be,A=Be*Be*this.dot4(o[qe],Ze,Qe,Ge,st));let ie=.6-Mt*Mt-$t*$t-H*H-N*N;ie<0?g=0:(ie*=ie,g=ie*ie*this.dot4(o[Ye],Mt,$t,H,N));let we=.6-ue*ue-_e*_e-Ce*Ce-Le*Le;return we<0?S=0:(we*=we,S=we*we*this.dot4(o[Tt],ue,_e,Ce,Le)),27*(d+p+A+g+S)});for(let n=0;n<256;n++)this.p[n]=Math.floor(e.random()*256);for(let n=0;n<512;n++)this.perm[n]=this.p[n&255]}}const Wi=class extends xt{constructor(t={}){super(),this.isLightningStrike=!0,this.type="LightningStrike",this.init(Wi.copyParameters(t,t)),this.createMesh()}static createRandomGenerator(){const e=[];for(let i=0;i<2053;i++)e.push(Math.random());const n={currentSeed:0,random:function(){const i=e[n.currentSeed];return n.currentSeed=(n.currentSeed+1)%2053,i},getSeed:function(){return n.currentSeed/2053},setSeed:function(i){n.currentSeed=Math.floor(i*2053)%2053}};return n}static copyParameters(t={},e={}){const n=function(i){return e===t?i:i.clone()};return t.sourceOffset=e.sourceOffset!==void 0?n(e.sourceOffset):new D(0,100,0),t.destOffset=e.destOffset!==void 0?n(e.destOffset):new D(0,0,0),t.timeScale=e.timeScale!==void 0?e.timeScale:1,t.roughness=e.roughness!==void 0?e.roughness:.9,t.straightness=e.straightness!==void 0?e.straightness:.7,t.up0=e.up0!==void 0?n(e.up0):new D(0,0,1),t.up1=e.up1!==void 0?n(e.up1):new D(0,0,1),t.radius0=e.radius0!==void 0?e.radius0:1,t.radius1=e.radius1!==void 0?e.radius1:1,t.radius0Factor=e.radius0Factor!==void 0?e.radius0Factor:.5,t.radius1Factor=e.radius1Factor!==void 0?e.radius1Factor:.2,t.minRadius=e.minRadius!==void 0?e.minRadius:.2,t.isEternal=e.isEternal!==void 0?e.isEternal:e.birthTime===void 0||e.deathTime===void 0,t.birthTime=e.birthTime,t.deathTime=e.deathTime,t.propagationTimeFactor=e.propagationTimeFactor!==void 0?e.propagationTimeFactor:.1,t.vanishingTimeFactor=e.vanishingTimeFactor!==void 0?e.vanishingTimeFactor:.9,t.subrayPeriod=e.subrayPeriod!==void 0?e.subrayPeriod:4,t.subrayDutyCycle=e.subrayDutyCycle!==void 0?e.subrayDutyCycle:.6,t.maxIterations=e.maxIterations!==void 0?e.maxIterations:9,t.isStatic=e.isStatic!==void 0?e.isStatic:!1,t.ramification=e.ramification!==void 0?e.ramification:5,t.maxSubrayRecursion=e.maxSubrayRecursion!==void 0?e.maxSubrayRecursion:3,t.recursionProbability=e.recursionProbability!==void 0?e.recursionProbability:.6,t.generateUVs=e.generateUVs!==void 0?e.generateUVs:!1,t.randomGenerator=e.randomGenerator,t.noiseSeed=e.noiseSeed,t.onDecideSubrayCreation=e.onDecideSubrayCreation,t.onSubrayCreation=e.onSubrayCreation,t}update(t){this.isStatic||(this.rayParameters.isEternal||this.rayParameters.birthTime<=t&&t<=this.rayParameters.deathTime?(this.updateMesh(t),t<this.subrays[0].endPropagationTime?this.state=Wi.RAY_PROPAGATING:t>this.subrays[0].beginVanishingTime?this.state=Wi.RAY_VANISHING:this.state=Wi.RAY_STEADY,this.visible=!0):(this.visible=!1,t<this.rayParameters.birthTime?this.state=Wi.RAY_UNBORN:this.state=Wi.RAY_EXTINGUISHED))}init(t){this.rayParameters=t,this.maxIterations=t.maxIterations!==void 0?Math.floor(t.maxIterations):9,t.maxIterations=this.maxIterations,this.isStatic=t.isStatic!==void 0?t.isStatic:!1,t.isStatic=this.isStatic,this.ramification=t.ramification!==void 0?Math.floor(t.ramification):5,t.ramification=this.ramification,this.maxSubrayRecursion=t.maxSubrayRecursion!==void 0?Math.floor(t.maxSubrayRecursion):3,t.maxSubrayRecursion=this.maxSubrayRecursion,this.recursionProbability=t.recursionProbability!==void 0?t.recursionProbability:.6,t.recursionProbability=this.recursionProbability,this.generateUVs=t.generateUVs!==void 0?t.generateUVs:!1,t.generateUVs=this.generateUVs,t.randomGenerator!==void 0?(this.randomGenerator=t.randomGenerator,this.seedGenerator=t.randomGenerator,t.noiseSeed!==void 0&&this.seedGenerator.setSeed(t.noiseSeed)):(this.randomGenerator=Wi.createRandomGenerator(),this.seedGenerator=Math),t.onDecideSubrayCreation!==void 0?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),t.onSubrayCreation!==void 0&&(this.onSubrayCreation=t.onSubrayCreation)),this.state=Wi.RAY_INITIALIZED,this.maxSubrays=Math.ceil(1+Math.pow(this.ramification,Math.max(0,this.maxSubrayRecursion-1))),t.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(let e=0;e<this.maxSubrays;e++)this.subrays.push(this.createSubray());this.raySegments=[];for(let e=0;e<this.maxRaySegments;e++)this.raySegments.push(this.createSegment());this.time=0,this.timeFraction=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this.subrayProbability=0,this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this.uvsAttribute=null,this.simplexX=new dd(this.seedGenerator),this.simplexY=new dd(this.seedGenerator),this.simplexZ=new dd(this.seedGenerator),this.forwards=new D,this.forwardsFill=new D,this.side=new D,this.down=new D,this.middlePos=new D,this.middleLinPos=new D,this.newPos=new D,this.vPos=new D,this.cross1=new D}createMesh(){const t=1<<this.maxIterations,e=3*(t+1)*this.maxSubrays,n=18*t*this.maxSubrays;this.vertices=new Float32Array(e*3),this.indices=new Uint32Array(n),this.generateUVs&&(this.uvs=new Float32Array(e*2)),this.fillMesh(0),this.setIndex(new Ym(this.indices,1)),this.positionAttribute=new Je(this.vertices,3),this.setAttribute("position",this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new Je(new Float32Array(this.uvs),2),this.setAttribute("uv",this.uvsAttribute)),this.isStatic||(this.index.usage=yA,this.positionAttribute.usage=yA,this.generateUVs&&(this.uvsAttribute.usage=yA)),this.vertices=this.positionAttribute.array,this.indices=this.index.array,this.generateUVs&&(this.uvs=this.uvsAttribute.array)}updateMesh(t){this.fillMesh(t),this.drawRange.count=this.currentIndex,this.index.needsUpdate=!0,this.positionAttribute.needsUpdate=!0,this.generateUVs&&(this.uvsAttribute.needsUpdate=!0)}fillMesh(t){const e=this;this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(t,function(i){const r=e.currentSubray;t<r.birthTime||(this.rayParameters.isEternal&&e.currentSubray.recursion==0?(e.createPrism(i),e.onDecideSubrayCreation(i,e)):t<r.endPropagationTime?e.timeFraction>=i.fraction0*r.propagationTimeFactor&&(e.createPrism(i),e.onDecideSubrayCreation(i,e)):t<r.beginVanishingTime?(e.createPrism(i),e.onDecideSubrayCreation(i,e)):(e.timeFraction<=r.vanishingTimeFactor+i.fraction1*(1-r.vanishingTimeFactor)&&e.createPrism(i),e.onDecideSubrayCreation(i,e)))})}addNewSubray(){return this.subrays[this.numSubrays++]}initSubray(t,e){t.pos0.copy(e.sourceOffset),t.pos1.copy(e.destOffset),t.up0.copy(e.up0),t.up1.copy(e.up1),t.radius0=e.radius0,t.radius1=e.radius1,t.birthTime=e.birthTime,t.deathTime=e.deathTime,t.timeScale=e.timeScale,t.roughness=e.roughness,t.straightness=e.straightness,t.propagationTimeFactor=e.propagationTimeFactor,t.vanishingTimeFactor=e.vanishingTimeFactor,t.maxIterations=this.maxIterations,t.seed=e.noiseSeed!==void 0?e.noiseSeed:0,t.recursion=0}fractalRay(t,e){this.time=t,this.currentSegmentCallback=e,this.numSubrays=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(let n=0;n<this.numSubrays;n++){const i=this.subrays[n];this.currentSubray=i,this.randomGenerator.setSeed(i.seed),i.endPropagationTime=nh.lerp(i.birthTime,i.deathTime,i.propagationTimeFactor),i.beginVanishingTime=nh.lerp(i.deathTime,i.birthTime,1-i.vanishingTimeFactor);const r=this.randomGenerator.random;i.linPos0.set(r(),r(),r()).multiplyScalar(1e3),i.linPos1.set(r(),r(),r()).multiplyScalar(1e3),this.timeFraction=(t-i.birthTime)/(i.deathTime-i.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;const s=this.getNewSegment();s.iteration=0,s.pos0.copy(i.pos0),s.pos1.copy(i.pos1),s.linPos0.copy(i.linPos0),s.linPos1.copy(i.linPos1),s.up0.copy(i.up0),s.up1.copy(i.up1),s.radius0=i.radius0,s.radius1=i.radius1,s.fraction0=0,s.fraction1=1,s.positionVariationFactor=1-i.straightness,this.subrayProbability=this.ramification*Math.pow(this.recursionProbability,i.recursion)/(1<<i.maxIterations),this.fractalRayRecursive(s)}this.currentSegmentCallback=null,this.currentSubray=null}fractalRayRecursive(t){if(t.iteration>=this.currentSubray.maxIterations){this.currentSegmentCallback(t);return}this.forwards.subVectors(t.pos1,t.pos0);let e=this.forwards.length();e<1e-6&&(this.forwards.set(0,0,.01),e=this.forwards.length());const n=(t.radius0+t.radius1)*.5,i=(t.fraction0+t.fraction1)*.5,r=this.time*this.currentSubray.timeScale*Math.pow(2,t.iteration);this.middlePos.lerpVectors(t.pos0,t.pos1,.5),this.middleLinPos.lerpVectors(t.linPos0,t.linPos1,.5);const s=this.middleLinPos;this.newPos.set(this.simplexX.noise4d(s.x,s.y,s.z,r),this.simplexY.noise4d(s.x,s.y,s.z,r),this.simplexZ.noise4d(s.x,s.y,s.z,r)),this.newPos.multiplyScalar(t.positionVariationFactor*e),this.newPos.add(this.middlePos);const o=this.getNewSegment();o.pos0.copy(t.pos0),o.pos1.copy(this.newPos),o.linPos0.copy(t.linPos0),o.linPos1.copy(this.middleLinPos),o.up0.copy(t.up0),o.up1.copy(t.up1),o.radius0=t.radius0,o.radius1=n,o.fraction0=t.fraction0,o.fraction1=i,o.positionVariationFactor=t.positionVariationFactor*this.currentSubray.roughness,o.iteration=t.iteration+1;const a=this.getNewSegment();a.pos0.copy(this.newPos),a.pos1.copy(t.pos1),a.linPos0.copy(this.middleLinPos),a.linPos1.copy(t.linPos1),this.cross1.crossVectors(t.up0,this.forwards.normalize()),a.up0.crossVectors(this.forwards,this.cross1).normalize(),a.up1.copy(t.up1),a.radius0=n,a.radius1=t.radius1,a.fraction0=i,a.fraction1=t.fraction1,a.positionVariationFactor=t.positionVariationFactor*this.currentSubray.roughness,a.iteration=t.iteration+1,this.fractalRayRecursive(o),this.fractalRayRecursive(a)}createPrism(t){this.forwardsFill.subVectors(t.pos1,t.pos0).normalize(),this.isInitialSegment&&(this.currentCreateTriangleVertices(t.pos0,t.up0,this.forwardsFill,t.radius0,0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t.pos1,t.up0,this.forwardsFill,t.radius1,t.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(t,e,n,i){this.side.crossVectors(e,n).multiplyScalar(i*Wi.COS30DEG),this.down.copy(e).multiplyScalar(-i*Wi.SIN30DEG);const r=this.vPos,s=this.vertices;r.copy(t).sub(this.side).add(this.down),s[this.currentCoordinate++]=r.x,s[this.currentCoordinate++]=r.y,s[this.currentCoordinate++]=r.z,r.copy(t).add(this.side).add(this.down),s[this.currentCoordinate++]=r.x,s[this.currentCoordinate++]=r.y,s[this.currentCoordinate++]=r.z,r.copy(e).multiplyScalar(i).add(t),s[this.currentCoordinate++]=r.x,s[this.currentCoordinate++]=r.y,s[this.currentCoordinate++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,e,n,i,r){this.side.crossVectors(e,n).multiplyScalar(i*Wi.COS30DEG),this.down.copy(e).multiplyScalar(-i*Wi.SIN30DEG);const s=this.vPos,o=this.vertices,a=this.uvs;s.copy(t).sub(this.side).add(this.down),o[this.currentCoordinate++]=s.x,o[this.currentCoordinate++]=s.y,o[this.currentCoordinate++]=s.z,a[this.currentUVCoordinate++]=r,a[this.currentUVCoordinate++]=0,s.copy(t).add(this.side).add(this.down),o[this.currentCoordinate++]=s.x,o[this.currentCoordinate++]=s.y,o[this.currentCoordinate++]=s.z,a[this.currentUVCoordinate++]=r,a[this.currentUVCoordinate++]=.5,s.copy(e).multiplyScalar(i).add(t),o[this.currentCoordinate++]=s.x,o[this.currentCoordinate++]=s.y,o[this.currentCoordinate++]=s.z,a[this.currentUVCoordinate++]=r,a[this.currentUVCoordinate++]=1,this.currentVertex+=3}createPrismFaces(t){const e=this.indices;t=this.currentVertex-6,e[this.currentIndex++]=t+1,e[this.currentIndex++]=t+2,e[this.currentIndex++]=t+5,e[this.currentIndex++]=t+1,e[this.currentIndex++]=t+5,e[this.currentIndex++]=t+4,e[this.currentIndex++]=t+0,e[this.currentIndex++]=t+1,e[this.currentIndex++]=t+4,e[this.currentIndex++]=t+0,e[this.currentIndex++]=t+4,e[this.currentIndex++]=t+3,e[this.currentIndex++]=t+2,e[this.currentIndex++]=t+0,e[this.currentIndex++]=t+3,e[this.currentIndex++]=t+2,e[this.currentIndex++]=t+3,e[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=this.randomGenerator.random;this.onDecideSubrayCreation=function(s,o){const a=o.currentSubray,l=o.rayParameters.subrayPeriod,u=o.rayParameters.subrayDutyCycle,h=o.rayParameters.isEternal&&a.recursion==0?-t()*l:nh.lerp(a.birthTime,a.endPropagationTime,s.fraction0)-t()*l,d=o.time-h,p=Math.floor(d/l),A=t()*(p+1),g=d%l<=u*l;let S=0;if(g&&(S=o.subrayProbability),a.recursion<o.maxSubrayRecursion&&o.numSubrays<o.maxSubrays&&t()<S){const E=o.addNewSubray(),m=o.randomGenerator.getSeed();E.seed=A,o.randomGenerator.setSeed(A),E.recursion=a.recursion+1,E.maxIterations=Math.max(1,a.maxIterations-1),E.linPos0.set(t(),t(),t()).multiplyScalar(1e3),E.linPos1.set(t(),t(),t()).multiplyScalar(1e3),E.up0.copy(a.up0),E.up1.copy(a.up1),E.radius0=s.radius0*o.rayParameters.radius0Factor,E.radius1=Math.min(o.rayParameters.minRadius,s.radius1*o.rayParameters.radius1Factor),E.birthTime=h+p*l,E.deathTime=E.birthTime+l*u,!o.rayParameters.isEternal&&a.recursion==0&&(E.birthTime=Math.max(E.birthTime,a.birthTime),E.deathTime=Math.min(E.deathTime,a.deathTime)),E.timeScale=a.timeScale*2,E.roughness=a.roughness,E.straightness=a.straightness,E.propagationTimeFactor=a.propagationTimeFactor,E.vanishingTimeFactor=a.vanishingTimeFactor,o.onSubrayCreation(s,a,E,o),o.randomGenerator.setSeed(m)}};const e=new D,n=new D,i=new D,r=new D;this.onSubrayCreation=function(s,o,a,l){l.subrayCylinderPosition(s,o,a,.5,.6,.2)},this.subrayConePosition=function(s,o,a,l,u,h){a.pos0.copy(s.pos0),e.subVectors(o.pos1,o.pos0),n.copy(e).normalize(),e.multiplyScalar(s.fraction0+(1-s.fraction0)*(t()*l));const d=e.length();i.crossVectors(o.up0,n);const p=2*Math.PI*t();i.multiplyScalar(Math.cos(p)),r.copy(o.up0).multiplyScalar(Math.sin(p)),a.pos1.copy(i).add(r).multiplyScalar(d*u*(h+t()*(1-h))).add(e).add(o.pos0)},this.subrayCylinderPosition=function(s,o,a,l,u,h){a.pos0.copy(s.pos0),e.subVectors(o.pos1,o.pos0),n.copy(e).normalize(),e.multiplyScalar(s.fraction0+(1-s.fraction0)*((2*t()-1)*l));const d=e.length();i.crossVectors(o.up0,n);const p=2*Math.PI*t();i.multiplyScalar(Math.cos(p)),r.copy(o.up0).multiplyScalar(Math.sin(p)),a.pos1.copy(i).add(r).multiplyScalar(d*u*(h+t()*(1-h))).add(e).add(o.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new D,pos1:new D,linPos0:new D,linPos1:new D,up0:new D,up1:new D,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new D,pos1:new D,linPos0:new D,linPos1:new D,up0:new D,up1:new D,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this.raySegments[this.currentSegmentIndex++]}copy(t){return super.copy(t),this.init(Wi.copyParameters({},t.rayParameters)),this}clone(){return new this.constructor(Wi.copyParameters({},this.rayParameters))}};let _l=Wi;Re(_l,"RAY_INITIALIZED",0);Re(_l,"RAY_UNBORN",1);Re(_l,"RAY_PROPAGATING",2);Re(_l,"RAY_STEADY",3);Re(_l,"RAY_VANISHING",4);Re(_l,"RAY_EXTINGUISHED",5);Re(_l,"COS30DEG",Math.cos(30*Math.PI/180));Re(_l,"SIN30DEG",Math.sin(30*Math.PI/180));const Kl=class extends Kt{constructor(t,e={}){super(t),this.isReflectorForSSRPass=!0,this.type="ReflectorForSSRPass";const n=this,i=e.color!==void 0?new Ee(e.color):new Ee(8355711),r=e.textureWidth||512,s=e.textureHeight||512,o=e.clipBias||0,a=e.shader||Kl.ReflectorShader,l=e.useDepthTexture===!0,u=new D(0,1,0),h=new D,d=new D;n.needsUpdate=!1,n.maxDistance=Kl.ReflectorShader.uniforms.maxDistance.value,n.opacity=Kl.ReflectorShader.uniforms.opacity.value,n.color=i,n.resolution=e.resolution||new oe(window.innerWidth,window.innerHeight),n._distanceAttenuation=Kl.ReflectorShader.defines.DISTANCE_ATTENUATION,Object.defineProperty(n,"distanceAttenuation",{get(){return n._distanceAttenuation},set(F){n._distanceAttenuation!==F&&(n._distanceAttenuation=F,n.material.defines.DISTANCE_ATTENUATION=F,n.material.needsUpdate=!0)}}),n._fresnel=Kl.ReflectorShader.defines.FRESNEL,Object.defineProperty(n,"fresnel",{get(){return n._fresnel},set(F){n._fresnel!==F&&(n._fresnel=F,n.material.defines.FRESNEL=F,n.material.needsUpdate=!0)}});const p=new D,A=new D,g=new D,S=new He,E=new D(0,0,-1),m=new D,x=new D,y=new He,C=new Nn;let I;l&&(I=new Uh,I.type=Bu,I.minFilter=vt,I.magFilter=vt);const M={depthTexture:l?I:null,type:Hn},w=new rn(r,s,M),L=new Vt({transparent:l,defines:Object.assign({},Kl.ReflectorShader.defines,{useDepthTexture:l}),uniforms:_n.clone(a.uniforms),fragmentShader:a.fragmentShader,vertexShader:a.vertexShader});L.uniforms.tDiffuse.value=w.texture,L.uniforms.color.value=n.color,L.uniforms.textureMatrix.value=y,l&&(L.uniforms.tDepth.value=w.depthTexture),this.material=L;const B=[new ns(new D(0,1,0),o)];this.doRender=function(F,X,G){if(L.uniforms.maxDistance.value=n.maxDistance,L.uniforms.color.value=n.color,L.uniforms.opacity.value=n.opacity,h.copy(G.position).normalize(),d.copy(h).reflect(u),L.uniforms.fresnelCoe.value=(h.dot(d)+1)/2,A.setFromMatrixPosition(n.matrixWorld),g.setFromMatrixPosition(G.matrixWorld),S.extractRotation(n.matrixWorld),p.set(0,0,1),p.applyMatrix4(S),m.subVectors(A,g),m.dot(p)>0)return;m.reflect(p).negate(),m.add(A),S.extractRotation(G.matrixWorld),E.set(0,0,-1),E.applyMatrix4(S),E.add(g),x.subVectors(A,E),x.reflect(p).negate(),x.add(A),C.position.copy(m),C.up.set(0,1,0),C.up.applyMatrix4(S),C.up.reflect(p),C.lookAt(x),C.far=G.far,C.updateMatrixWorld(),C.projectionMatrix.copy(G.projectionMatrix),L.uniforms.virtualCameraNear.value=G.near,L.uniforms.virtualCameraFar.value=G.far,L.uniforms.virtualCameraMatrixWorld.value=C.matrixWorld,L.uniforms.virtualCameraProjectionMatrix.value=G.projectionMatrix,L.uniforms.virtualCameraProjectionMatrixInverse.value=G.projectionMatrixInverse,L.uniforms.resolution.value=n.resolution,y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(C.projectionMatrix),y.multiply(C.matrixWorldInverse),y.multiply(n.matrixWorld);const q=F.getRenderTarget(),Y=F.xr.enabled,$=F.shadowMap.autoUpdate,j=F.clippingPlanes;F.xr.enabled=!1,F.shadowMap.autoUpdate=!1,F.clippingPlanes=B,F.setRenderTarget(w),F.state.buffers.depth.setMask(!0),F.autoClear===!1&&F.clear(),F.render(X,C),F.xr.enabled=Y,F.shadowMap.autoUpdate=$,F.clippingPlanes=j,F.setRenderTarget(q);const P=G.viewport;P!==void 0&&F.state.viewport(P)},this.getRenderTarget=function(){return w}}};let VX=Kl;Re(VX,"ReflectorShader",{defines:{DISTANCE_ATTENUATION:!0,FRESNEL:!0},uniforms:{color:{value:null},tDiffuse:{value:null},tDepth:{value:null},textureMatrix:{value:new He},maxDistance:{value:180},opacity:{value:.5},fresnelCoe:{value:null},virtualCameraNear:{value:null},virtualCameraFar:{value:null},virtualCameraProjectionMatrix:{value:new He},virtualCameraMatrixWorld:{value:new He},virtualCameraProjectionMatrixInverse:{value:new He},resolution:{value:new oe}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;
		uniform float maxDistance;
		uniform float opacity;
		uniform float fresnelCoe;
		uniform float virtualCameraNear;
		uniform float virtualCameraFar;
		uniform mat4 virtualCameraProjectionMatrix;
		uniform mat4 virtualCameraProjectionMatrixInverse;
		uniform mat4 virtualCameraMatrixWorld;
		uniform vec2 resolution;
		varying vec4 vUv;
		#include <packing>
		float blendOverlay( float base, float blend ) {
			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );
		}
		vec3 blendOverlay( vec3 base, vec3 blend ) {
			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			return perspectiveDepthToViewZ( depth, virtualCameraNear, virtualCameraFar );
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( virtualCameraProjectionMatrixInverse * clipPosition ).xyz;//view
		}
		void main() {
			vec4 base = texture2DProj( tDiffuse, vUv );
			#ifdef useDepthTexture
				vec2 uv=(gl_FragCoord.xy-.5)/resolution.xy;
				uv.x=1.-uv.x;
				float depth = texture2DProj( tDepth, vUv ).r;
				float viewZ = getViewZ( depth );
				float clipW = virtualCameraProjectionMatrix[2][3] * viewZ+virtualCameraProjectionMatrix[3][3];
				vec3 viewPosition=getViewPosition( uv, depth, clipW );
				vec3 worldPosition=(virtualCameraMatrixWorld*vec4(viewPosition,1)).xyz;
				if(worldPosition.y>maxDistance) discard;
				float op=opacity;
				#ifdef DISTANCE_ATTENUATION
					float ratio=1.-(worldPosition.y/maxDistance);
					float attenuation=ratio*ratio;
					op=opacity*attenuation;
				#endif
				#ifdef FRESNEL
					op*=fresnelCoe;
				#endif
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), op );
			#else
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );
			#endif
		}
	`});const _A={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new D},up:{value:new D(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${parseInt(ca.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},uR=new Vt({name:"SkyShader",fragmentShader:_A.fragmentShader,vertexShader:_A.vertexShader,uniforms:_n.clone(_A.uniforms),side:Ui,depthWrite:!1});class cR extends Kt{constructor(){super(new yl(1,1,1),uR)}}Re(cR,"SkyShader",_A);Re(cR,"material",uR);const hR=class extends Kt{constructor(t,e={}){super(t),this.isWater=!0,this.type="Water";const n=this,i=e.color!==void 0?new Ee(e.color):new Ee(16777215),r=e.textureWidth||512,s=e.textureHeight||512,o=e.clipBias||0,a=e.flowDirection||new oe(1,0),l=e.flowSpeed||.03,u=e.reflectivity||.02,h=e.scale||1,d=e.shader||hR.WaterShader,p=e.encoding!==void 0?e.encoding:3e3,A=e.flowMap||void 0,g=e.normalMap0,S=e.normalMap1,E=.15,m=E*.5,x=new He,y=new x2;if(T6===void 0){console.error("THREE.Water: Required component Reflector not found.");return}if(I6===void 0){console.error("THREE.Water: Required component Refractor not found.");return}const C=new T6(t,{textureWidth:r,textureHeight:s,clipBias:o,encoding:p}),I=new I6(t,{textureWidth:r,textureHeight:s,clipBias:o,encoding:p});C.matrixAutoUpdate=!1,I.matrixAutoUpdate=!1,this.material=new Vt({uniforms:_n.merge([Pe.fog,d.uniforms]),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,transparent:!0,fog:!0}),A!==void 0?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:A}):this.material.uniforms.flowDirection={type:"v2",value:a},g.wrapS=g.wrapT=hs,S.wrapS=S.wrapT=hs,this.material.uniforms.tReflectionMap.value=C.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=I.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=g,this.material.uniforms.tNormalMap1.value=S,this.material.uniforms.color.value=i,this.material.uniforms.reflectivity.value=u,this.material.uniforms.textureMatrix.value=x,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=m,this.material.uniforms.config.value.z=m,this.material.uniforms.config.value.w=h;function M(L){x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(L.projectionMatrix),x.multiply(L.matrixWorldInverse),x.multiply(n.matrixWorld)}function w(){const L=y.getDelta(),R=n.material.uniforms.config;R.value.x+=l*L,R.value.y=R.value.x+m,R.value.x>=E?(R.value.x=0,R.value.y=m):R.value.y>=E&&(R.value.y=R.value.y-E)}this.onBeforeRender=function(L,R,B){M(B),w(),n.visible=!1,C.matrixWorld.copy(n.matrixWorld),I.matrixWorld.copy(n.matrixWorld),C.onBeforeRender(L,R,B),I.onBeforeRender(L,R,B),n.visible=!0}}};let WX=hR;Re(WX,"WaterShader",{uniforms:{color:{value:null},reflectivity:{value:0},tReflectionMap:{value:null},tRefractionMap:{value:null},tNormalMap0:{value:null},tNormalMap1:{value:null},textureMatrix:{value:null},config:{value:new kt}},vertexShader:`

		#include <common>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>

		uniform mat4 textureMatrix;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			vUv = uv;
			vCoord = textureMatrix * vec4( position, 1.0 );

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vToEye = cameraPosition - worldPosition.xyz;

			vec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex
			gl_Position = projectionMatrix * mvPosition;

			#include <logdepthbuf_vertex>
			#include <fog_vertex>

		}`,fragmentShader:`

		#include <common>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>

		uniform sampler2D tReflectionMap;
		uniform sampler2D tRefractionMap;
		uniform sampler2D tNormalMap0;
		uniform sampler2D tNormalMap1;

		#ifdef USE_FLOWMAP
			uniform sampler2D tFlowMap;
		#else
			uniform vec2 flowDirection;
		#endif

		uniform vec3 color;
		uniform float reflectivity;
		uniform vec4 config;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			#include <logdepthbuf_fragment>

			float flowMapOffset0 = config.x;
			float flowMapOffset1 = config.y;
			float halfCycle = config.z;
			float scale = config.w;

			vec3 toEye = normalize( vToEye );

			// determine flow direction
			vec2 flow;
			#ifdef USE_FLOWMAP
				flow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;
			#else
				flow = flowDirection;
			#endif
			flow.x *= - 1.0;

			// sample normal maps (distort uvs with flowdata)
			vec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );
			vec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );

			// linear interpolate to get the final normal color
			float flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;
			vec4 normalColor = mix( normalColor0, normalColor1, flowLerp );

			// calculate normal vector
			vec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );

			// calculate the fresnel term to blend reflection and refraction maps
			float theta = max( dot( toEye, normal ), 0.0 );
			float reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );

			// calculate final uv coords
			vec3 coord = vCoord.xyz / vCoord.w;
			vec2 uv = coord.xy + coord.z * normal.xz * 0.05;

			vec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );
			vec4 refractColor = texture2D( tRefractionMap, uv );

			// multiply water color with the mix of both textures
			gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );

			#include <tonemapping_fragment>
			#include <${parseInt(ca.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
			#include <fog_fragment>

		}`});const C5={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","	float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","	gl_FragColor = vec4( vec3( depth ), opacity );","}"].join(`
`)};class C2{constructor(){Re(this,"enabled",!0),Re(this,"needsSwap",!0),Re(this,"clear",!1),Re(this,"renderToScreen",!1)}setSize(e,n){}render(e,n,i,r,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class T2{constructor(e){Re(this,"camera",new Lu(-1,1,1,-1,0,1)),Re(this,"geometry",new Nh(2,2)),Re(this,"mesh"),this.mesh=new Kt(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}const Eo={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)},Df={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new oe},cameraProjectionMatrix:{value:new He},cameraInverseProjectionMatrix:{value:new He},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tDepth;","uniform sampler2D tNoise;","uniform vec3 kernel[ KERNEL_SIZE ];","uniform vec2 resolution;","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float kernelRadius;","uniform float minDistance;","uniform float maxDistance;","varying vec2 vUv;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","	return texture2D( tDepth, screenPosition ).x;","}","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","		return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","		return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","	clipPosition *= clipW; // unprojection.","	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec2 screenPosition ) {","	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","}","void main() {","	float depth = getDepth( vUv );","	float viewZ = getViewZ( depth );","	vec3 viewPosition = getViewPosition( vUv, depth, viewZ );","	vec3 viewNormal = getViewNormal( vUv );"," vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );","	vec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;","	vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );","	vec3 bitangent = cross( viewNormal, tangent );","	mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );"," float occlusion = 0.0;"," for ( int i = 0; i < KERNEL_SIZE; i ++ ) {","		vec3 sampleVector = kernelMatrix * kernel[ i ];","		vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );","		vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );","		samplePointNDC /= samplePointNDC.w;","		vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;","		float realDepth = getLinearDepth( samplePointUv );","		float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );","		float delta = sampleDepth - realDepth;","		if ( delta > minDistance && delta < maxDistance ) {","			occlusion += 1.0;","		}","	}","	occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );","	gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );","}"].join(`
`)},Y3={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","varying vec2 vUv;","#include <packing>","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","void main() {","	float depth = getLinearDepth( vUv );","	gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );","}"].join(`
`)},K3={uniforms:{tDiffuse:{value:null},resolution:{value:new oe}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","	vec2 texelSize = ( 1.0 / resolution );","	float result = 0.0;","	for ( int i = - 2; i <= 2; i ++ ) {","		for ( int j = - 2; j <= 2; j ++ ) {","			vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;","			result += texture2D( tDiffuse, vUv + offset ).r;","		}","	}","	gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );","}"].join(`
`)},jl=class extends C2{constructor(t,e,n,i){super(),this.width=n!==void 0?n:512,this.height=i!==void 0?i:512,this.clear=!0,this.camera=e,this.scene=t,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const r=new Uh;r.format=ll,r.type=ea,this.beautyRenderTarget=new rn(this.width,this.height),this.normalRenderTarget=new rn(this.width,this.height,{minFilter:vt,magFilter:vt,depthTexture:r}),this.ssaoRenderTarget=new rn(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),Df===void 0&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new Vt({defines:Object.assign({},Df.defines),uniforms:_n.clone(Df.uniforms),vertexShader:Df.vertexShader,fragmentShader:Df.fragmentShader,blending:Nt}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Sp,this.normalMaterial.blending=Nt,this.blurMaterial=new Vt({defines:Object.assign({},K3.defines),uniforms:_n.clone(K3.uniforms),vertexShader:K3.vertexShader,fragmentShader:K3.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Vt({defines:Object.assign({},Y3.defines),uniforms:_n.clone(Y3.uniforms),vertexShader:Y3.vertexShader,fragmentShader:Y3.fragmentShader,blending:Nt}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Vt({uniforms:_n.clone(Eo.uniforms),vertexShader:Eo.vertexShader,fragmentShader:Eo.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:zm,blendDst:ph,blendEquation:Cr,blendSrcAlpha:Gm,blendDstAlpha:ph,blendEquationAlpha:Cr}),this.fsQuad=new T2(null),this.originalClearColor=new Ee}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,e){switch(t.capabilities.isWebGL2===!1&&(this.noiseTexture.format=W8),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case jl.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case jl.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case jl.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case jl.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:e);break;case jl.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case jl.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Dd,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(t,e,n,i,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,i!=null&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}renderOverride(t,e,n,i,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,i=e.clearColor||i,r=e.clearAlpha||r,i!=null&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}setSize(t,e){this.width=t,this.height=e,this.beautyRenderTarget.setSize(t,e),this.ssaoRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.blurRenderTarget.setSize(t,e),this.ssaoMaterial.uniforms.resolution.value.set(t,e),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,e)}generateSampleKernel(){const t=this.kernelSize,e=this.kernel;for(let n=0;n<t;n++){const i=new D;i.x=Math.random()*2-1,i.y=Math.random()*2-1,i.z=Math.random(),i.normalize();let r=n/t;r=nh.lerp(.1,1,r*r),i.multiplyScalar(r),e.push(i)}}generateRandomKernelRotations(){dd===void 0&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const n=new dd,i=4*4,r=new Float32Array(i);for(let s=0;s<i;s++){const o=Math.random()*2-1,a=Math.random()*2-1,l=0;r[s]=n.noise3d(o,a,l)}this.noiseTexture=new go(r,4,4,ru,Yi),this.noiseTexture.wrapS=hs,this.noiseTexture.wrapT=hs,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const t=this.scene,e=this._visibilityCache;t.traverse(function(n){e.set(n,n.visible),(n.isPoints||n.isLine)&&(n.visible=!1)})}restoreVisibility(){const t=this.scene,e=this._visibilityCache;t.traverse(function(n){const i=e.get(n);n.visible=i}),e.clear()}};let XX=jl;Re(XX,"OUTPUT",{Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5});const qX={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ee(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	vec3 luma = vec3( 0.299, 0.587, 0.114 );","	float v = dot( texel.xyz, luma );","	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","	gl_FragColor = mix( outputColor, texel, alpha );","}"].join(`
`)},M6=class extends C2{constructor(t,e,n,i){super(),this.strength=e!==void 0?e:1,this.radius=n,this.threshold=i,this.resolution=t!==void 0?new oe(t.x,t.y):new oe(256,256),this.clearColor=new Ee(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new rn(r,s,{type:Hn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let h=0;h<this.nMips;h++){const d=new rn(r,s,{type:Hn});d.texture.name="UnrealBloomPass.h"+h,d.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(d);const p=new rn(r,s,{type:Hn});p.texture.name="UnrealBloomPass.v"+h,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),r=Math.round(r/2),s=Math.round(s/2)}const o=qX;this.highPassUniforms=_n.clone(o.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Vt({uniforms:this.highPassUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const a=[3,5,7,9,11];r=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(a[h])),this.separableBlurMaterials[h].uniforms.texSize.value=new oe(r,s),r=Math.round(r/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const l=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=l,this.bloomTintColors=[new D(1,1,1),new D(1,1,1),new D(1,1,1),new D(1,1,1),new D(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const u=Eo;this.copyUniforms=_n.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Vt({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:Pd,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ee,this.oldClearAlpha=1,this.basic=new di,this.fsQuad=new T2(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,e){let n=Math.round(t/2),i=Math.round(e/2);this.renderTargetBright.setSize(n,i);for(let r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,i),this.renderTargetsVertical[r].setSize(n,i),this.separableBlurMaterials[r].uniforms.texSize.value=new oe(n,i),n=Math.round(n/2),i=Math.round(i/2)}render(t,e,n,i,r){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),r&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let o=this.renderTargetBright;for(let a=0;a<this.nMips;a++)this.fsQuad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[a].uniforms.direction.value=M6.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[a]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=M6.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[a]),t.clear(),this.fsQuad.render(t),o=this.renderTargetsVertical[a];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s}getSeperableBlurMaterial(t){return new Vt({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new oe(.5,.5)},direction:{value:new oe(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(t){return new Vt({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};let fR=M6;Re(fR,"BlurDirectionX",new oe(1,0));Re(fR,"BlurDirectionY",new oe(0,1));const j3={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new oe(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new He},cameraInverseProjectionMatrix:{value:new He},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","uniform sampler2D tDepth;","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float scale;","uniform float intensity;","uniform float bias;","uniform float kernelRadius;","uniform float minResolution;","uniform vec2 size;","uniform float randomSeed;","// RGBA depth","#include <packing>","vec4 getDefaultColor( const in vec2 screenPosition ) {","	#if DIFFUSE_TEXTURE == 1","	return texture2D( tDiffuse, vUv );","	#else","	return vec4( 1.0 );","	#endif","}","float getDepth( const in vec2 screenPosition ) {","	#if DEPTH_PACKING == 1","	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","	#else","	return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","	clipPosition *= clipW; // unprojection.","	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","	#if NORMAL_TEXTURE == 1","	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","	#else","	return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","	#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","	vec3 viewDelta = sampleViewPosition - centerViewPosition;","	float viewDistance = length( viewDelta );","	float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;","	return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );","}","// moving costly divides into consts","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","	// precompute some variables require in getOcclusion.","	scaleDividedByCameraFar = scale / cameraFar;","	minResolutionMultipliedByCameraFar = minResolution * cameraFar;","	vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","	// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/","	float angle = rand( vUv + randomSeed ) * PI2;","	vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;","	vec2 radiusStep = radius;","	float occlusionSum = 0.0;","	float weightSum = 0.0;","	for( int i = 0; i < NUM_SAMPLES; i ++ ) {","		vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;","		radius += radiusStep;","		angle += ANGLE_STEP;","		float sampleDepth = getDepth( sampleUv );","		if( sampleDepth >= ( 1.0 - EPSILON ) ) {","			continue;","		}","		float sampleViewZ = getViewZ( sampleDepth );","		vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","		occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","		weightSum += 1.0;","	}","	if( weightSum == 0.0 ) discard;","	return occlusionSum * ( intensity / weightSum );","}","void main() {","	float centerDepth = getDepth( vUv );","	if( centerDepth >= ( 1.0 - EPSILON ) ) {","		discard;","	}","	float centerViewZ = getViewZ( centerDepth );","	vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","	float ambientOcclusion = getAmbientOcclusion( viewPosition );","	gl_FragColor = getDefaultColor( vUv );","	gl_FragColor.xyz *=  1.0 - ambientOcclusion;","}"].join(`
`)},Da={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new oe(512,512)},sampleUvOffsets:{value:[new oe(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:["#include <common>","uniform vec2 size;","varying vec2 vUv;","varying vec2 vInvSize;","void main() {","	vUv = uv;","	vInvSize = 1.0 / size;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","#include <packing>","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","uniform float depthCutoff;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","varying vec2 vInvSize;","float getDepth( const in vec2 screenPosition ) {","	#if DEPTH_PACKING == 1","	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","	#else","	return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","void main() {","	float depth = getDepth( vUv );","	if( depth >= ( 1.0 - EPSILON ) ) {","		discard;","	}","	float centerViewZ = -getViewZ( depth );","	bool rBreak = false, lBreak = false;","	float weightSum = sampleWeights[0];","	vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","	for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","		float sampleWeight = sampleWeights[i];","		vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;","		vec2 sampleUv = vUv + sampleUvOffset;","		float viewZ = -getViewZ( getDepth( sampleUv ) );","		if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;","		if( ! rBreak ) {","			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","			weightSum += sampleWeight;","		}","		sampleUv = vUv - sampleUvOffset;","		viewZ = -getViewZ( getDepth( sampleUv ) );","		if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;","		if( ! lBreak ) {","			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","			weightSum += sampleWeight;","		}","	}","	gl_FragColor = diffuseSum / weightSum;","}"].join(`
`)},fm={createSampleWeights:(t,e)=>{const n=(r,s)=>Math.exp(-(r*r)/(2*(s*s)))/(Math.sqrt(2*Math.PI)*s),i=[];for(let r=0;r<=t;r++)i.push(n(r,e));return i},createSampleOffsets:(t,e)=>{const n=[];for(let i=0;i<=t;i++)n.push(e.clone().multiplyScalar(i));return n},configure:(t,e,n,i)=>{t.defines.KERNEL_RADIUS=e,t.uniforms.sampleUvOffsets.value=fm.createSampleOffsets(e,i),t.uniforms.sampleWeights.value=fm.createSampleWeights(e,n),t.needsUpdate=!0}};class YX extends C2{constructor(e,n,i=!1,r=!1,s=new oe(256,256)){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=i,this.supportsNormalTexture=r,this.originalClearColor=new Ee,this._oldClearColor=new Ee,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new oe(s.x,s.y),this.saoRenderTarget=new rn(this.resolution.x,this.resolution.y,{type:Hn}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new rn(this.resolution.x,this.resolution.y,{minFilter:vt,magFilter:vt,type:Hn}),this.depthRenderTarget=this.normalRenderTarget.clone();let o;this.supportsDepthTextureExtension&&(o=new Uh,o.type=Bu,this.beautyRenderTarget.depthTexture=o,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new Jm,this.depthMaterial.depthPacking=Z8,this.depthMaterial.blending=Nt,this.normalMaterial=new Sp,this.normalMaterial.blending=Nt,this.saoMaterial=new Vt({defines:Object.assign({},j3.defines),fragmentShader:j3.fragmentShader,vertexShader:j3.vertexShader,uniforms:_n.clone(j3.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=Nt,this.vBlurMaterial=new Vt({uniforms:_n.clone(Da.uniforms),defines:Object.assign({},Da.defines),vertexShader:Da.vertexShader,fragmentShader:Da.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=Nt,this.hBlurMaterial=new Vt({uniforms:_n.clone(Da.uniforms),defines:Object.assign({},Da.defines),vertexShader:Da.vertexShader,fragmentShader:Da.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=Nt,this.materialCopy=new Vt({uniforms:_n.clone(Eo.uniforms),vertexShader:Eo.vertexShader,fragmentShader:Eo.fragmentShader,blending:Nt}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=Dd,this.materialCopy.blendSrc=zm,this.materialCopy.blendDst=ph,this.materialCopy.blendEquation=Cr,this.materialCopy.blendSrcAlpha=Gm,this.materialCopy.blendDstAlpha=ph,this.materialCopy.blendEquationAlpha=Cr,this.depthCopy=new Vt({uniforms:_n.clone(C5.uniforms),vertexShader:C5.vertexShader,fragmentShader:C5.fragmentShader,blending:Nt}),this.fsQuad=new T2(null)}render(e,n,i){if(this.renderToScreen&&(this.materialCopy.blending=Nt,this.materialCopy.uniforms.tDiffuse.value=i.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),this.params.output===1)return;e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const r=e.autoClear;e.autoClear=!1,e.setRenderTarget(this.depthRenderTarget),e.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const s=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=s,this.hBlurMaterial.uniforms.depthCutoff.value=s,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(fm.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new oe(0,1)),fm.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new oe(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),e.setClearColor(0),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(e,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let o=this.materialCopy;this.params.output===3?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,o=this.depthCopy):this.params.output===4?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===0?o.blending=Dd:o.blending=Nt,this.renderPass(e,o,this.renderToScreen?null:i),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=r}renderPass(e,n,i,r,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=n,this.fsQuad.render(e),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}renderOverride(e,n,i,r,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r=n.clearColor||r,s=n.clearAlpha||s,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=n,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}setSize(e,n){this.beautyRenderTarget.setSize(e,n),this.saoRenderTarget.setSize(e,n),this.blurIntermediateRenderTarget.setSize(e,n),this.normalRenderTarget.setSize(e,n),this.depthRenderTarget.setSize(e,n),this.saoMaterial.uniforms.size.value.set(e,n),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,n),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,n),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.depthRenderTarget.dispose(),this.depthMaterial.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.depthCopy.dispose(),this.fsQuad.dispose()}}Re(YX,"OUTPUT",{Beauty:1,Default:0,SAO:2,Depth:3,Normal:4});const oo={defines:{MAX_STEP:0,isPerspectiveCamera:!0,isDistanceAttenuation:!0,isFresnel:!0,isInfiniteThick:!1,isSelective:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new oe},cameraProjectionMatrix:{value:new He},cameraInverseProjectionMatrix:{value:new He},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},surfDist:{value:.007},thickTolerance:{value:.03}},vertexShader:`

    varying vec2 vUv;

    void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float surfDist;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		uniform float thickTolerance;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef isPerspectiveCamera
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef isSelective
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef isPerspectiveCamera
				vec3 viewIncidenceDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#else
				vec3 viewIncidenceDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidenceDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef isPerspectiveCamera
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<MAX_STEP;i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef isPerspectiveCamera
					// https://www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
					float sD=surfDist*cW;
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
					float sD=surfDist;
				#endif
				if(viewReflectRayZ-sD>vZ) continue;

				#ifdef isInfiniteThick
					if(viewReflectRayZ+thickTolerance*clipW<vP.z) break;
				#endif
				float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

				float op=opacity;

				if(away<sD){
					vec3 vN=getViewNormal( uv );
					if(dot(viewReflectDir,vN)>=0.) continue;
					float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
					if(distance>maxDistance) break;
					#ifdef isDistanceAttenuation
						float ratio=1.-(distance/maxDistance);
						float attenuation=ratio*ratio;
						op=opacity*attenuation;
					#endif
					#ifdef isFresnel
						float fresnel=(dot(viewIncidenceDir,viewReflectDir)+1.)/2.;
						op*=fresnel;
					#endif
					vec4 reflectColor=texture2D(tDiffuse,uv);
					gl_FragColor.xyz=reflectColor.xyz;
					gl_FragColor.a=op;
					break;
				}
			}
		}
	`},J3={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`

    uniform sampler2D tDepth;

    uniform float cameraNear;
    uniform float cameraFar;

    varying vec2 vUv;

    #include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

    void main() {

    	float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
    	gl_FragColor = vec4( vec3( d ), 1.0 );

    }

  `},Na={uniforms:{tDiffuse:{value:null},resolution:{value:new oe},opacity:{value:.5}},vertexShader:`

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`

    uniform sampler2D tDiffuse;
    uniform vec2 resolution;
    varying vec2 vUv;
    void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

    	vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`},Jl=class extends C2{constructor({renderer:t,scene:e,camera:n,width:i,height:r,selects:s,bouncing:o=!1,groundReflector:a}){super(),this.width=i!==void 0?i:512,this.height=r!==void 0?r:512,this.clear=!0,this.renderer=t,this.scene=e,this.camera=n,this.groundReflector=a,this.opacity=oo.uniforms.opacity.value,this.output=0,this.maxDistance=oo.uniforms.maxDistance.value,this.thickness=oo.uniforms.thickness.value,this.tempColor=new Ee,this._selects=s,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(u){this._selects!==u&&(this._selects=u,Array.isArray(u)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=o,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(u){this._bouncing!==u&&(this._bouncing=u,u?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=oo.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(u){this._distanceAttenuation!==u&&(this._distanceAttenuation=u,this.ssrMaterial.defines.DISTANCE_ATTENUATION=u,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=oo.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(u){this._fresnel!==u&&(this._fresnel=u,this.ssrMaterial.defines.FRESNEL=u,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=oo.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(u){this._infiniteThick!==u&&(this._infiniteThick=u,this.ssrMaterial.defines.INFINITE_THICK=u,this.ssrMaterial.needsUpdate=!0)}});const l=new Uh;l.type=Bu,l.minFilter=vt,l.magFilter=vt,this.beautyRenderTarget=new rn(this.width,this.height,{minFilter:vt,magFilter:vt,type:Hn,depthTexture:l,depthBuffer:!0}),this.prevRenderTarget=new rn(this.width,this.height,{minFilter:vt,magFilter:vt}),this.normalRenderTarget=new rn(this.width,this.height,{minFilter:vt,magFilter:vt,type:Hn}),this.metalnessRenderTarget=new rn(this.width,this.height,{minFilter:vt,magFilter:vt,type:Hn}),this.ssrRenderTarget=new rn(this.width,this.height,{minFilter:vt,magFilter:vt}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new Vt({defines:Object.assign({},oo.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:_n.clone(oo.uniforms),vertexShader:oo.vertexShader,fragmentShader:oo.fragmentShader,blending:Nt}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Sp,this.normalMaterial.blending=Nt,this.metalnessOnMaterial=new di({color:"white"}),this.metalnessOffMaterial=new di({color:"black"}),this.blurMaterial=new Vt({defines:Object.assign({},Na.defines),uniforms:_n.clone(Na.uniforms),vertexShader:Na.vertexShader,fragmentShader:Na.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new Vt({defines:Object.assign({},Na.defines),uniforms:_n.clone(Na.uniforms),vertexShader:Na.vertexShader,fragmentShader:Na.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Vt({defines:Object.assign({},J3.defines),uniforms:_n.clone(J3.uniforms),vertexShader:J3.vertexShader,fragmentShader:J3.fragmentShader,blending:Nt}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Vt({uniforms:_n.clone(Eo.uniforms),vertexShader:Eo.vertexShader,fragmentShader:Eo.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Nd,blendDst:Fd,blendEquation:Cr,blendSrcAlpha:Nd,blendDstAlpha:Fd,blendEquationAlpha:Cr}),this.fsQuad=new T2(null),this.originalClearColor=new Ee}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,e){switch(t.setRenderTarget(this.beautyRenderTarget),t.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),t.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(t,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(t,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.renderPass(t,this.blurMaterial2,this.blurRenderTarget2)),this.output){case Jl.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=mo,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=mo,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e));break;case Jl.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=mo,this.renderPass(t,this.copyMaterial,this.prevRenderTarget));break;case Jl.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case Jl.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:e);break;case Jl.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case Jl.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=Nt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(t,e,n,i,r){this.originalClearColor.copy(t.getClearColor(this.tempColor));const s=t.getClearAlpha(this.tempColor),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,i!=null&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}renderOverride(t,e,n,i,r){this.originalClearColor.copy(t.getClearColor(this.tempColor));const s=t.getClearAlpha(this.tempColor),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,i=e.clearColor||i,r=e.clearAlpha||r,i!=null&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}renderMetalness(t,e,n,i,r){this.originalClearColor.copy(t.getClearColor(this.tempColor));const s=t.getClearAlpha(this.tempColor),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,i=e.clearColor||i,r=e.clearAlpha||r,i!=null&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.scene.traverseVisible(a=>{a._SSRPassBackupMaterial=a.material,this._selects.includes(a)?a.material=this.metalnessOnMaterial:a.material=this.metalnessOffMaterial}),t.render(this.scene,this.camera),this.scene.traverseVisible(a=>{a.material=a._SSRPassBackupMaterial}),t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}setSize(t,e){this.width=t,this.height=e,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(t*t+e*e),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(t,e),this.prevRenderTarget.setSize(t,e),this.ssrRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.metalnessRenderTarget.setSize(t,e),this.blurRenderTarget.setSize(t,e),this.blurRenderTarget2.setSize(t,e),this.ssrMaterial.uniforms.resolution.value.set(t,e),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,e),this.blurMaterial2.uniforms.resolution.value.set(t,e)}};let KX=Jl;Re(KX,"OUTPUT",{Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7});class dR extends Ti{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new eq(n)}),this.register(function(n){return new lq(n)}),this.register(function(n){return new uq(n)}),this.register(function(n){return new cq(n)}),this.register(function(n){return new nq(n)}),this.register(function(n){return new iq(n)}),this.register(function(n){return new rq(n)}),this.register(function(n){return new sq(n)}),this.register(function(n){return new $X(n)}),this.register(function(n){return new oq(n)}),this.register(function(n){return new tq(n)}),this.register(function(n){return new aq(n)}),this.register(function(n){return new JX(n)}),this.register(function(n){return new hq(n)}),this.register(function(n){return new fq(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=yo.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new _i(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){n(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(yo.decodeText(new Uint8Array(e.slice(0,4)))===pR){try{o[Ot.KHR_BINARY_GLTF]=new dq(e)}catch(h){r&&r(h);return}s=JSON.parse(o[Ot.KHR_BINARY_GLTF].content)}else s=JSON.parse(yo.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Iq(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case Ot.KHR_MATERIALS_UNLIT:o[h]=new ZX;break;case Ot.KHR_DRACO_MESH_COMPRESSION:o[h]=new pq(s,this.dracoLoader);break;case Ot.KHR_TEXTURE_TRANSFORM:o[h]=new Aq;break;case Ot.KHR_MESH_QUANTIZATION:o[h]=new mq;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function jX(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Ot={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class JX{constructor(e){this.parser=e,this.name=Ot.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new Ee(16777215);l.color!==void 0&&h.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new T4(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new C4(h),u.distance=d;break;case"spot":u=new _4(h),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Qa(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class ZX{constructor(){this.name=Ot.KHR_MATERIALS_UNLIT}getMaterialType(){return di}extendParams(e,n,i){const r=[];e.color=new Ee(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(r)}}class $X{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class eq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new oe(a,a)}return Promise.all(s)}}class tq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class nq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Ee(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class iq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class rq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new Ee(a[0],a[1],a[2]),Promise.all(s)}}class sq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class oq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new Ee(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class aq{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Co}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class lq{constructor(e){this.parser=e,this.name=Ot.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class uq{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class cq{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class hq{constructor(e){this.name=Ot.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,h=r.count,d=r.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,r.mode,r.filter).then(function(A){return A.buffer}):o.ready.then(function(){const A=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(A),h,d,p,r.mode,r.filter),A})})}else return null}}class fq{constructor(e){this.name=Ot.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==Zr.TRIANGLES&&u.mode!==Zr.TRIANGLE_STRIP&&u.mode!==Zr.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const h=u.pop(),d=h.isGroup?h.children:[h],p=u[0].count,A=[];for(const g of d){const S=new He,E=new D,m=new Si,x=new D(1,1,1),y=new u4(g.geometry,g.material,p);for(let C=0;C<p;C++)l.TRANSLATION&&E.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,C),l.SCALE&&x.fromBufferAttribute(l.SCALE,C),y.setMatrixAt(C,S.compose(E,m,x));for(const C in l)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&g.geometry.setAttribute(C,l[C]);Qt.prototype.copy.call(y,g),this.parser.assignFinalMaterial(y),A.push(y)}return h.isGroup?(h.clear(),h.add(...A),h):A[0]}))}}const pR="glTF",Nf=12,US={JSON:1313821514,BIN:5130562};class dq{constructor(e){this.name=Ot.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Nf);if(this.header={magic:yo.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==pR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Nf,r=new DataView(e,Nf);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===US.JSON){const l=new Uint8Array(e,Nf+s,o);this.content=yo.decodeText(l)}else if(a===US.BIN){const l=Nf+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class pq{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ot.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const d=R6[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=R6[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],A=sh[p.componentType];u[d]=A.name,l[d]=p.normalized===!0}}return n.getDependency("bufferView",s).then(function(h){return new Promise(function(d){r.decodeDracoFile(h,function(p){for(const A in p.attributes){const g=p.attributes[A],S=l[A];S!==void 0&&(g.normalized=S)}d(p)},a,u)})})}}class Aq{constructor(){this.name=Ot.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class mq{constructor(){this.name=Ot.KHR_MESH_QUANTIZATION}}class AR extends Qh{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=r-n,d=(i-n)/h,p=d*d,A=p*d,g=e*u,S=g-u,E=-2*A+3*p,m=A-p,x=1-E,y=m-p+d;for(let C=0;C!==a;C++){const I=o[S+C+a],M=o[S+C+l]*h,w=o[g+C+a],L=o[g+C]*h;s[C]=x*I+y*M+E*w+m*L}return s}}const gq=new Si;class vq extends AR{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return gq.fromArray(s).normalize().toArray(s),s}}const Zr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},sh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},OS={9728:vt,9729:nn,9984:kd,9985:Vm,9986:Zc,9987:fs},kS={33071:Sn,33648:Ah,10497:hs},T5={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},R6={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...ca.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Fa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},yq={CUBICSPLINE:void 0,LINEAR:Eu,STEP:mh},I5={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function xq(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Ep({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_o})),t.DefaultMaterial}function Wl(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Qa(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Eq(t,e,n){let i=!1,r=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const d=e[u];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];if(i){const p=d.POSITION!==void 0?n.getDependency("accessor",d.POSITION):t.attributes.position;o.push(p)}if(r){const p=d.NORMAL!==void 0?n.getDependency("accessor",d.NORMAL):t.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?n.getDependency("accessor",d.COLOR_0):t.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2];return i&&(t.morphAttributes.position=h),r&&(t.morphAttributes.normal=d),s&&(t.morphAttributes.color=p),t.morphTargetsRelative=!0,t})}function Sq(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _q(t){let e;const n=t.extensions&&t.extensions[Ot.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+w5(n.attributes):e=t.indices+":"+w5(t.attributes)+":"+t.mode,t.targets!==void 0)for(let i=0,r=t.targets.length;i<r;i++)e+=":"+w5(t.targets[i]);return e}function w5(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function b6(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Cq(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Tq=new He;class Iq{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new jX,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new Fw(this.options.manager):this.textureLoader=new Hw(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new _i(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};Wl(s,a,r),Qa(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ot.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(yo.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=T5[r.type],a=sh[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new jt(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=T5[r.type],u=sh[r.componentType],h=u.BYTES_PER_ELEMENT,d=h*l,p=r.byteOffset||0,A=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let S,E;if(A&&A!==d){const m=Math.floor(p/A),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count;let y=n.cache.get(x);y||(S=new u(a,m*A,r.count*A/h),y=new gp(S,A/h),n.cache.add(x,y)),E=new ul(y,l,p%A/h,g)}else a===null?S=new u(r.count*l):S=new u(a,p,r.count*l),E=new jt(S,l,g);if(r.sparse!==void 0){const m=T5.SCALAR,x=sh[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,I=new x(o[1],y,r.sparse.count*m),M=new u(o[2],C,r.sparse.count*l);a!==null&&(E=new jt(E.array.slice(),E.itemSize,E.normalized));for(let w=0,L=I.length;w<L;w++){const R=I[w];if(E.setX(R,M[w*l]),l>=2&&E.setY(R,M[w*l+1]),l>=3&&E.setZ(R,M[w*l+2]),l>=4&&E.setW(R,M[w*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(n,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=OS[p.magFilter]||nn,h.minFilter=OS[p.minFilter]||fs,h.wrapS=kS[p.wrapS]||hs,h.wrapT=kS[p.wrapT]||hs,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,A){let g=p;n.isImageBitmapLoader===!0&&(g=function(S){const E=new mn(S);E.needsUpdate=!0,p(E)}),n.load(yo.resolveURL(d,s.path),g,void 0,A)})}).then(function(d){return u===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||Cq(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Ot.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Ot.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ot.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&("colorSpace"in o?o.colorSpace=r===3001?"srgb":"srgb-linear":o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new t2,jn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Qi,jn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Ep}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Ot.KHR_MATERIALS_UNLIT]){const d=r[Ot.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),u.push(d.extendParams(a,s,n))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Ee(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(n.assignTexture(a,"map",d.baseColorTexture,3001)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ls);const h=s.alphaMode||I5.OPAQUE;if(h===I5.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===I5.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==di&&(u.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new oe(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==di&&(u.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==di&&(a.emissive=new Ee().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==di&&u.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Qa(d,s),n.associations.set(d,{materials:e}),s.extensions&&Wl(r,d,s),d})}createUniqueName(e){const n=zt.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Ot.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return QS(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=_q(u),d=r[h];if(d)o.push(d.promise);else{let p;u.extensions&&u.extensions[Ot.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=QS(new xt,u,n),r[h]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?xq(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let A=0,g=h.length;A<g;A++){const S=h[A],E=o[A];let m;const x=u[A];if(E.mode===Zr.TRIANGLES||E.mode===Zr.TRIANGLE_STRIP||E.mode===Zr.TRIANGLE_FAN||E.mode===void 0)m=s.isSkinnedMesh===!0?new l4(S,x):new Kt(S,x),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),E.mode===Zr.TRIANGLE_STRIP?m.geometry=FS(m.geometry,j8):E.mode===Zr.TRIANGLE_FAN&&(m.geometry=FS(m.geometry,tm));else if(E.mode===Zr.LINES)m=new Hs(S,x);else if(E.mode===Zr.LINE_STRIP)m=new oa(S,x);else if(E.mode===Zr.LINE_LOOP)m=new c4(S,x);else if(E.mode===Zr.POINTS)m=new n2(S,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);Object.keys(m.geometry.morphAttributes).length>0&&Sq(m,s),m.name=n.createUniqueName(s.name||"mesh_"+e),Qa(m,s),E.extensions&&Wl(r,m,E),n.assignFinalMaterial(m),d.push(m)}for(let A=0,g=d.length;A<g;A++)n.associations.set(d[A],{meshes:e,primitives:A});if(d.length===1)return s.extensions&&Wl(r,d[0],s),d[0];const p=new ss;s.extensions&&Wl(r,p,s),n.associations.set(p,{meshes:e});for(let A=0,g=d.length;A<g;A++)p.add(d[A]);return p})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new Nn(nh.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Lu(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Qa(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,s=n.joints.length;r<s;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const d=o[u];if(d){a.push(d);const p=new He;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new vp(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],o=[],a=[],l=[],u=[];for(let h=0,d=i.channels.length;h<d;h++){const p=i.channels[h],A=i.samplers[p.sampler],g=p.target,S=g.node,E=i.parameters!==void 0?i.parameters[A.input]:A.input,m=i.parameters!==void 0?i.parameters[A.output]:A.output;g.node!==void 0&&(s.push(this.getDependency("node",S)),o.push(this.getDependency("accessor",E)),a.push(this.getDependency("accessor",m)),l.push(A),u.push(g))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(h){const d=h[0],p=h[1],A=h[2],g=h[3],S=h[4],E=[];for(let m=0,x=d.length;m<x;m++){const y=d[m],C=p[m],I=A[m],M=g[m],w=S[m];if(y===void 0)continue;y.updateMatrix();let L;switch(Fa[w.path]){case Fa.weights:L=xh;break;case Fa.rotation:L=cl;break;case Fa.position:case Fa.scale:default:L=Eh;break}const R=y.name?y.name:y.uuid,B=M.interpolation!==void 0?yq[M.interpolation]:Eu,F=[];Fa[w.path]===Fa.weights?y.traverse(function(G){G.morphTargetInfluences&&F.push(G.name?G.name:G.uuid)}):F.push(R);let X=I.array;if(I.normalized){const G=b6(X.constructor),q=new Float32Array(X.length);for(let Y=0,$=X.length;Y<$;Y++)q[Y]=X[Y]*G;X=q}for(let G=0,q=F.length;G<q;G++){const Y=new L(F[G]+"."+Fa[w.path],C.array,X,B);M.interpolation==="CUBICSPLINE"&&(Y.createInterpolant=function(j){const P=this instanceof cl?vq:AR;return new P(this.times,this.values,this.getValueSize()/3,j)},Y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),E.push(Y)}}return new Sh(r,void 0,E)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,h=a.length;u<h;u++)o.push(i.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],d=u[1],p=u[2];p!==null&&h.traverse(function(A){A.isSkinnedMesh&&A.bind(p,Tq)});for(let A=0,g=d.length;A<g;A++)h.add(d[A]);return h})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new e2:u.length>1?h=new ss:u.length===1?h=u[0]:h=new Qt,h!==u[0])for(let d=0,p=u.length;d<p;d++)h.add(u[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Qa(h,s),s.extensions&&Wl(i,h,s),s.matrix!==void 0){const d=new He;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,s=new ss;i.name&&(s.name=r.createUniqueName(i.name)),Qa(s,i),i.extensions&&Wl(n,s,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const u=h=>{const d=new Map;for(const[p,A]of r.associations)(p instanceof jn||p instanceof mn)&&d.set(p,A);return h.traverse(p=>{const A=r.associations.get(p);A!=null&&d.set(p,A)}),d};return r.associations=u(s),s})}}function wq(t,e,n){const i=e.attributes,r=new As;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new D(l[0],l[1],l[2]),new D(u[0],u[1],u[2])),a.normalized){const h=b6(sh[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new D,l=new D;for(let u=0,h=s.length;u<h;u++){const d=s[u];if(d.POSITION!==void 0){const p=n.json.accessors[d.POSITION],A=p.min,g=p.max;if(A!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(A[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(A[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(A[2]),Math.abs(g[2]))),p.normalized){const S=b6(sh[p.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new Or;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function QS(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=R6[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return Qa(t,e),wq(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?Eq(t,e.targets,n):t})}const B6=class{static createButton(t,e={}){const n=document.createElement("button");function i(){let a=null;async function l(h){h.addEventListener("end",u),await t.xr.setSession(h),n.textContent="EXIT VR",a=h}function u(){a.removeEventListener("end",u),n.textContent="ENTER VR",a=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=()=>{n.style.opacity="1.0"},n.onmouseleave=()=>{n.style.opacity="0.5"},n.onclick=()=>{var h;if(a===null){const d=[e.optionalFeatures,"local-floor","bounded-floor","hand-tracking"].flat().filter(Boolean);(h=navigator.xr)==null||h.requestSession("immersive-vr",{...e,optionalFeatures:d}).then(l)}else a.end()}}function r(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function s(){r(),n.textContent="VR NOT SUPPORTED"}function o(a){a.style.position="absolute",a.style.bottom="20px",a.style.padding="12px 6px",a.style.border="1px solid #fff",a.style.borderRadius="4px",a.style.background="rgba(0,0,0,0.1)",a.style.color="#fff",a.style.font="normal 13px sans-serif",a.style.textAlign="center",a.style.opacity="0.5",a.style.outline="none",a.style.zIndex="999"}if("xr"in navigator)return o(n),n.id="VRButton",n.style.display="none",navigator.xr.isSessionSupported("immersive-vr").then(a=>{a?i():s(),a&&B6.xrSessionIsGranted&&n.click()}),n;{const a=document.createElement("a");return window.isSecureContext===!1?(a.href=document.location.href.replace(/^http:/,"https:"),a.innerHTML="WEBXR NEEDS HTTPS"):(a.href="https://immersiveweb.dev/",a.innerHTML="WEBXR NOT AVAILABLE"),a.style.left="calc(50% - 90px)",a.style.width="180px",a.style.textDecoration="none",o(a),a}}static registerSessionGrantedListener(){"xr"in navigator&&navigator.xr.addEventListener("sessiongranted",()=>{B6.xrSessionIsGranted=!0})}};let Mq=B6;Re(Mq,"xrSessionIsGranted",!1);const Ln={Handedness:{NONE:"none",LEFT:"left",RIGHT:"right"},ComponentState:{DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"},ComponentProperty:{BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"},ComponentType:{TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"},ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:{TRANSFORM:"transform",VISIBILITY:"visibility"}};async function mR(t){const e=await fetch(t);if(e.ok)return e.json();throw new Error(e.statusText)}async function Rq(t){if(!t)throw new Error("No basePath supplied");return await mR(`${t}/profilesList.json`)}async function bq(t,e,n=null,i=!0){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const r=await Rq(e);let s;if(t.profiles.some(l=>{const u=r[l];return u&&(s={profileId:l,profilePath:`${e}/${u.path}`,deprecated:!!u.deprecated}),!!s}),!s){if(!n)throw new Error("No matching profile name found");const l=r[n];if(!l)throw new Error(`No matching profile name found and default profile "${n}" missing.`);s={profileId:n,profilePath:`${e}/${l.path}`,deprecated:!!l.deprecated}}const o=await mR(s.profilePath);let a;if(i){let l;if(t.handedness==="any"?l=o.layouts[Object.keys(o.layouts)[0]]:l=o.layouts[t.handedness],!l)throw new Error(`No matching handedness, ${t.handedness}, in profile ${s.profileId}`);l.assetPath&&(a=s.profilePath.replace("profile.json",l.assetPath))}return{profile:o,assetPath:a}}const Bq={xAxis:0,yAxis:0,button:0,state:Ln.ComponentState.DEFAULT};function Lq(t=0,e=0){let n=t,i=e;if(Math.sqrt(t*t+e*e)>1){const o=Math.atan2(e,t);n=Math.cos(o),i=Math.sin(o)}return{normalizedXAxis:n*.5+.5,normalizedYAxis:i*.5+.5}}class Pq{constructor(e){Re(this,"value"),Re(this,"componentProperty"),Re(this,"states"),Re(this,"valueNodeName"),Re(this,"valueNodeProperty"),Re(this,"minNodeName"),Re(this,"maxNodeName"),Re(this,"valueNode"),Re(this,"minNode"),Re(this,"maxNode"),this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===Ln.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(Bq)}updateFromComponent({xAxis:e,yAxis:n,button:i,state:r}){const{normalizedXAxis:s,normalizedYAxis:o}=Lq(e,n);switch(this.componentProperty){case Ln.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?s:.5;break;case Ln.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?o:.5;break;case Ln.ComponentProperty.BUTTON:this.value=this.states.includes(r)&&i?i:0;break;case Ln.ComponentProperty.STATE:this.valueNodeProperty===Ln.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(r):this.value=this.states.includes(r)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class Dq{constructor(e,n){if(Re(this,"id"),Re(this,"values"),Re(this,"type"),Re(this,"gamepadIndices"),Re(this,"rootNodeName"),Re(this,"visualResponses"),Re(this,"touchPointNodeName"),Re(this,"touchPointNode"),!e||!n||!n.visualResponses||!n.gamepadIndices||Object.keys(n.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=e,this.type=n.type,this.rootNodeName=n.rootNodeName,this.touchPointNodeName=n.touchPointNodeName,this.visualResponses={},Object.keys(n.visualResponses).forEach(i=>{const r=new Pq(n.visualResponses[i]);this.visualResponses[i]=r}),this.gamepadIndices=Object.assign({},n.gamepadIndices),this.values={state:Ln.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=Ln.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&e.buttons.length>this.gamepadIndices.button){const n=e.buttons[this.gamepadIndices.button];this.values.button=n.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,n.pressed||this.values.button===1?this.values.state=Ln.ComponentState.PRESSED:(n.touched||this.values.button>Ln.ButtonTouchThreshold)&&(this.values.state=Ln.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Ln.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Ln.AxisTouchThreshold&&(this.values.state=Ln.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Ln.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Ln.AxisTouchThreshold&&(this.values.state=Ln.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(n=>{n.updateFromComponent(this.values)})}}class Nq{constructor(e,n,i){if(Re(this,"xrInputSource"),Re(this,"assetUrl"),Re(this,"layoutDescription"),Re(this,"id"),Re(this,"components"),!e)throw new Error("No xrInputSource supplied");if(!n)throw new Error("No profile supplied");if(!n.layouts[e.handedness])throw new Error("No layout for "+e.handedness+" handedness");this.xrInputSource=e,this.assetUrl=i,this.id=n.profileId,this.layoutDescription=n.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(r=>{const s=this.layoutDescription.components[r];this.components[r]=new Dq(r,s)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(n=>{e.push(n.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}class gR{constructor(e){Re(this,"data"),this.data=e}generateShapes(e,n=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=Fq(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}Re(gR,"isFont");Re(gR,"type");function Fq(t,e,n,i){const r=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,u=0;for(let h=0;h<r.length;h++){const d=r[h];if(d===`
`)l=0,u-=o*i.lineHeight;else{const p=Uq(d,s,l,u,n);p&&(l+=p.offsetX+i.letterSpacing,a.push(p.path))}}return a}function Uq(t,e,n,i,r){const s=r.glyphs[t]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");return}const o=new Kw;let a,l,u,h,d,p,A,g;if(s.o){const S=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let E=0,m=S.length;E<m;)switch(S[E++]){case"m":a=parseInt(S[E++])*e+n,l=parseInt(S[E++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(S[E++])*e+n,l=parseInt(S[E++])*e+i,o.lineTo(a,l);break;case"q":u=parseInt(S[E++])*e+n,h=parseInt(S[E++])*e+i,d=parseInt(S[E++])*e+n,p=parseInt(S[E++])*e+i,o.quadraticCurveTo(d,p,u,h);break;case"b":u=parseInt(S[E++])*e+n,h=parseInt(S[E++])*e+i,d=parseInt(S[E++])*e+n,p=parseInt(S[E++])*e+i,A=parseInt(S[E++])*e+n,g=parseInt(S[E++])*e+i,o.bezierCurveTo(d,p,A,g,u,h);break}}return{offsetX:s.ha*e,path:o}}class Oq extends mn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=vt,this.minFilter=vt,this.wrapR=Sn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var kq=typeof global=="object"&&global&&global.Object===Object&&global;const vR=kq;var Qq=typeof self=="object"&&self&&self.Object===Object&&self,Gq=vR||Qq||Function("return this")();const Io=Gq;var zq=Io.Symbol;const ds=zq;var yR=Object.prototype,Hq=yR.hasOwnProperty,Vq=yR.toString,Ff=ds?ds.toStringTag:void 0;function Wq(t){var e=Hq.call(t,Ff),n=t[Ff];try{t[Ff]=void 0;var i=!0}catch{}var r=Vq.call(t);return i&&(e?t[Ff]=n:delete t[Ff]),r}var Xq=Object.prototype,qq=Xq.toString;function Yq(t){return qq.call(t)}var Kq="[object Null]",jq="[object Undefined]",GS=ds?ds.toStringTag:void 0;function Cl(t){return t==null?t===void 0?jq:Kq:GS&&GS in Object(t)?Wq(t):Yq(t)}function Gs(t){return t!=null&&typeof t=="object"}var Jq="[object Symbol]";function I2(t){return typeof t=="symbol"||Gs(t)&&Cl(t)==Jq}function Rp(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var Zq=Array.isArray;const Wt=Zq;var $q=1/0,zS=ds?ds.prototype:void 0,HS=zS?zS.toString:void 0;function xR(t){if(typeof t=="string")return t;if(Wt(t))return Rp(t,xR)+"";if(I2(t))return HS?HS.call(t):"";var e=t+"";return e=="0"&&1/t==-$q?"-0":e}var eY=/\s/;function tY(t){for(var e=t.length;e--&&eY.test(t.charAt(e)););return e}var nY=/^\s+/;function iY(t){return t&&t.slice(0,tY(t)+1).replace(nY,"")}function ps(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var VS=0/0,rY=/^[-+]0x[0-9a-f]+$/i,sY=/^0b[01]+$/i,oY=/^0o[0-7]+$/i,aY=parseInt;function lY(t){if(typeof t=="number")return t;if(I2(t))return VS;if(ps(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ps(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=iY(t);var n=sY.test(t);return n||oY.test(t)?aY(t.slice(2),n?2:8):rY.test(t)?VS:+t}var WS=1/0,uY=17976931348623157e292;function cY(t){if(!t)return t===0?t:0;if(t=lY(t),t===WS||t===-WS){var e=t<0?-1:1;return e*uY}return t===t?t:0}function bp(t){var e=cY(t),n=e%1;return e===e?n?e-n:e:0}function Th(t){return t}var hY="[object AsyncFunction]",fY="[object Function]",dY="[object GeneratorFunction]",pY="[object Proxy]";function da(t){if(!ps(t))return!1;var e=Cl(t);return e==fY||e==dY||e==hY||e==pY}var AY=Io["__core-js_shared__"];const M5=AY;var XS=function(){var t=/[^.]+$/.exec(M5&&M5.keys&&M5.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function mY(t){return!!XS&&XS in t}var gY=Function.prototype,vY=gY.toString;function Fu(t){if(t!=null){try{return vY.call(t)}catch{}try{return t+""}catch{}}return""}var yY=/[\\^$.*+?()[\]{}|]/g,xY=/^\[object .+?Constructor\]$/,EY=Function.prototype,SY=Object.prototype,_Y=EY.toString,CY=SY.hasOwnProperty,TY=RegExp("^"+_Y.call(CY).replace(yY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IY(t){if(!ps(t)||mY(t))return!1;var e=da(t)?TY:xY;return e.test(Fu(t))}function wY(t,e){return t==null?void 0:t[e]}function Uu(t,e){var n=wY(t,e);return IY(n)?n:void 0}var MY=Uu(Io,"WeakMap");const L6=MY;var qS=Object.create,RY=function(){function t(){}return function(e){if(!ps(e))return{};if(qS)return qS(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const bY=RY;function BY(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function $n(){}function LY(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var PY=800,DY=16,NY=Date.now;function FY(t){var e=0,n=0;return function(){var i=NY(),r=DY-(i-n);if(n=i,r>0){if(++e>=PY)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function UY(t){return function(){return t}}var OY=function(){try{var t=Uu(Object,"defineProperty");return t({},"",{}),t}catch{}}();const dm=OY;var kY=dm?function(t,e){return dm(t,"toString",{configurable:!0,enumerable:!1,value:UY(e),writable:!0})}:Th;const QY=kY;var GY=FY(QY);const zY=GY;function ER(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function SR(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function HY(t){return t!==t}function VY(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function Y4(t,e,n){return e===e?VY(t,e,n):SR(t,HY,n)}function _R(t,e){var n=t==null?0:t.length;return!!n&&Y4(t,e,0)>-1}var WY=9007199254740991,XY=/^(?:0|[1-9]\d*)$/;function w2(t,e){var n=typeof t;return e=e??WY,!!e&&(n=="number"||n!="symbol"&&XY.test(t))&&t>-1&&t%1==0&&t<e}function K4(t,e,n){e=="__proto__"&&dm?dm(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Bp(t,e){return t===e||t!==t&&e!==e}var qY=Object.prototype,YY=qY.hasOwnProperty;function M2(t,e,n){var i=t[e];(!(YY.call(t,e)&&Bp(i,n))||n===void 0&&!(e in t))&&K4(t,e,n)}function Lp(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?K4(n,a,l):M2(n,a,l)}return n}var YS=Math.max;function KY(t,e,n){return e=YS(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=YS(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),BY(t,this,a)}}function j4(t,e){return zY(KY(t,e,Th),t+"")}var jY=9007199254740991;function J4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=jY}function wo(t){return t!=null&&J4(t.length)&&!da(t)}function R2(t,e,n){if(!ps(n))return!1;var i=typeof e;return(i=="number"?wo(n)&&w2(e,n.length):i=="string"&&e in n)?Bp(n[e],t):!1}function JY(t){return j4(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(r--,s):void 0,o&&R2(n[0],n[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,s)}return e})}var ZY=Object.prototype;function Pp(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||ZY;return t===n}function $Y(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var eK="[object Arguments]";function KS(t){return Gs(t)&&Cl(t)==eK}var CR=Object.prototype,tK=CR.hasOwnProperty,nK=CR.propertyIsEnumerable,iK=KS(function(){return arguments}())?KS:function(t){return Gs(t)&&tK.call(t,"callee")&&!nK.call(t,"callee")};const b2=iK;function rK(){return!1}var TR=typeof fe=="object"&&fe&&!fe.nodeType&&fe,jS=TR&&typeof wr=="object"&&wr&&!wr.nodeType&&wr,sK=jS&&jS.exports===TR,JS=sK?Io.Buffer:void 0,oK=JS?JS.isBuffer:void 0,aK=oK||rK;const rp=aK;var lK="[object Arguments]",uK="[object Array]",cK="[object Boolean]",hK="[object Date]",fK="[object Error]",dK="[object Function]",pK="[object Map]",AK="[object Number]",mK="[object Object]",gK="[object RegExp]",vK="[object Set]",yK="[object String]",xK="[object WeakMap]",EK="[object ArrayBuffer]",SK="[object DataView]",_K="[object Float32Array]",CK="[object Float64Array]",TK="[object Int8Array]",IK="[object Int16Array]",wK="[object Int32Array]",MK="[object Uint8Array]",RK="[object Uint8ClampedArray]",bK="[object Uint16Array]",BK="[object Uint32Array]",pn={};pn[_K]=pn[CK]=pn[TK]=pn[IK]=pn[wK]=pn[MK]=pn[RK]=pn[bK]=pn[BK]=!0;pn[lK]=pn[uK]=pn[EK]=pn[cK]=pn[SK]=pn[hK]=pn[fK]=pn[dK]=pn[pK]=pn[AK]=pn[mK]=pn[gK]=pn[vK]=pn[yK]=pn[xK]=!1;function LK(t){return Gs(t)&&J4(t.length)&&!!pn[Cl(t)]}function Dp(t){return function(e){return t(e)}}var IR=typeof fe=="object"&&fe&&!fe.nodeType&&fe,pd=IR&&typeof wr=="object"&&wr&&!wr.nodeType&&wr,PK=pd&&pd.exports===IR,R5=PK&&vR.process,DK=function(){try{var t=pd&&pd.require&&pd.require("util").types;return t||R5&&R5.binding&&R5.binding("util")}catch{}}();const fl=DK;var ZS=fl&&fl.isTypedArray,NK=ZS?Dp(ZS):LK;const Z4=NK;var FK=Object.prototype,UK=FK.hasOwnProperty;function wR(t,e){var n=Wt(t),i=!n&&b2(t),r=!n&&!i&&rp(t),s=!n&&!i&&!r&&Z4(t),o=n||i||r||s,a=o?$Y(t.length,String):[],l=a.length;for(var u in t)(e||UK.call(t,u))&&!(o&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||w2(u,l)))&&a.push(u);return a}function MR(t,e){return function(n){return t(e(n))}}var OK=MR(Object.keys,Object);const kK=OK;var QK=Object.prototype,GK=QK.hasOwnProperty;function RR(t){if(!Pp(t))return kK(t);var e=[];for(var n in Object(t))GK.call(t,n)&&n!="constructor"&&e.push(n);return e}function Lr(t){return wo(t)?wR(t):RR(t)}var zK=Object.prototype,HK=zK.hasOwnProperty,VK=JY(function(t,e){if(Pp(e)||wo(e)){Lp(e,Lr(e),t);return}for(var n in e)HK.call(e,n)&&M2(t,n,e[n])});const Pr=VK;function WK(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var XK=Object.prototype,qK=XK.hasOwnProperty;function YK(t){if(!ps(t))return WK(t);var e=Pp(t),n=[];for(var i in t)i=="constructor"&&(e||!qK.call(t,i))||n.push(i);return n}function B2(t){return wo(t)?wR(t,!0):YK(t)}var KK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jK=/^\w*$/;function $4(t,e){if(Wt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||I2(t)?!0:jK.test(t)||!KK.test(t)||e!=null&&t in Object(e)}var JK=Uu(Object,"create");const sp=JK;function ZK(){this.__data__=sp?sp(null):{},this.size=0}function $K(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ej="__lodash_hash_undefined__",tj=Object.prototype,nj=tj.hasOwnProperty;function ij(t){var e=this.__data__;if(sp){var n=e[t];return n===ej?void 0:n}return nj.call(e,t)?e[t]:void 0}var rj=Object.prototype,sj=rj.hasOwnProperty;function oj(t){var e=this.__data__;return sp?e[t]!==void 0:sj.call(e,t)}var aj="__lodash_hash_undefined__";function lj(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=sp&&e===void 0?aj:e,this}function Iu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Iu.prototype.clear=ZK;Iu.prototype.delete=$K;Iu.prototype.get=ij;Iu.prototype.has=oj;Iu.prototype.set=lj;function uj(){this.__data__=[],this.size=0}function L2(t,e){for(var n=t.length;n--;)if(Bp(t[n][0],e))return n;return-1}var cj=Array.prototype,hj=cj.splice;function fj(t){var e=this.__data__,n=L2(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():hj.call(e,n,1),--this.size,!0}function dj(t){var e=this.__data__,n=L2(e,t);return n<0?void 0:e[n][1]}function pj(t){return L2(this.__data__,t)>-1}function Aj(t,e){var n=this.__data__,i=L2(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function pa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}pa.prototype.clear=uj;pa.prototype.delete=fj;pa.prototype.get=dj;pa.prototype.has=pj;pa.prototype.set=Aj;var mj=Uu(Io,"Map");const op=mj;function gj(){this.size=0,this.__data__={hash:new Iu,map:new(op||pa),string:new Iu}}function vj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function P2(t,e){var n=t.__data__;return vj(e)?n[typeof e=="string"?"string":"hash"]:n.map}function yj(t){var e=P2(this,t).delete(t);return this.size-=e?1:0,e}function xj(t){return P2(this,t).get(t)}function Ej(t){return P2(this,t).has(t)}function Sj(t,e){var n=P2(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function Aa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Aa.prototype.clear=gj;Aa.prototype.delete=yj;Aa.prototype.get=xj;Aa.prototype.has=Ej;Aa.prototype.set=Sj;var _j="Expected a function";function ey(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_j);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(ey.Cache||Aa),n}ey.Cache=Aa;var Cj=500;function Tj(t){var e=ey(t,function(i){return n.size===Cj&&n.clear(),i}),n=e.cache;return e}var Ij=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wj=/\\(\\)?/g,Mj=Tj(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ij,function(n,i,r,s){e.push(r?s.replace(wj,"$1"):i||n)}),e});const Rj=Mj;function bj(t){return t==null?"":xR(t)}function D2(t,e){return Wt(t)?t:$4(t,e)?[t]:Rj(bj(t))}var Bj=1/0;function Np(t){if(typeof t=="string"||I2(t))return t;var e=t+"";return e=="0"&&1/t==-Bj?"-0":e}function ty(t,e){e=D2(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[Np(e[n++])];return n&&n==i?t:void 0}function Lj(t,e,n){var i=t==null?void 0:ty(t,e);return i===void 0?n:i}function ny(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var $S=ds?ds.isConcatSpreadable:void 0;function Pj(t){return Wt(t)||b2(t)||!!($S&&t&&t[$S])}function N2(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=Pj),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?N2(a,e-1,n,i,r):ny(r,a):i||(r[r.length]=a)}return r}function Ns(t){var e=t==null?0:t.length;return e?N2(t,1):[]}var Dj=MR(Object.getPrototypeOf,Object);const bR=Dj;function BR(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}function Nj(t,e,n,i){var r=-1,s=t==null?0:t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function Fj(){this.__data__=new pa,this.size=0}function Uj(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Oj(t){return this.__data__.get(t)}function kj(t){return this.__data__.has(t)}var Qj=200;function Gj(t,e){var n=this.__data__;if(n instanceof pa){var i=n.__data__;if(!op||i.length<Qj-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Aa(i)}return n.set(t,e),this.size=n.size,this}function So(t){var e=this.__data__=new pa(t);this.size=e.size}So.prototype.clear=Fj;So.prototype.delete=Uj;So.prototype.get=Oj;So.prototype.has=kj;So.prototype.set=Gj;function zj(t,e){return t&&Lp(e,Lr(e),t)}function Hj(t,e){return t&&Lp(e,B2(e),t)}var LR=typeof fe=="object"&&fe&&!fe.nodeType&&fe,e_=LR&&typeof wr=="object"&&wr&&!wr.nodeType&&wr,Vj=e_&&e_.exports===LR,t_=Vj?Io.Buffer:void 0,n_=t_?t_.allocUnsafe:void 0;function Wj(t,e){if(e)return t.slice();var n=t.length,i=n_?n_(n):new t.constructor(n);return t.copy(i),i}function iy(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}function PR(){return[]}var Xj=Object.prototype,qj=Xj.propertyIsEnumerable,i_=Object.getOwnPropertySymbols,Yj=i_?function(t){return t==null?[]:(t=Object(t),iy(i_(t),function(e){return qj.call(t,e)}))}:PR;const ry=Yj;function Kj(t,e){return Lp(t,ry(t),e)}var jj=Object.getOwnPropertySymbols,Jj=jj?function(t){for(var e=[];t;)ny(e,ry(t)),t=bR(t);return e}:PR;const DR=Jj;function Zj(t,e){return Lp(t,DR(t),e)}function NR(t,e,n){var i=e(t);return Wt(t)?i:ny(i,n(t))}function P6(t){return NR(t,Lr,ry)}function FR(t){return NR(t,B2,DR)}var $j=Uu(Io,"DataView");const D6=$j;var eJ=Uu(Io,"Promise");const N6=eJ;var tJ=Uu(Io,"Set");const oh=tJ;var r_="[object Map]",nJ="[object Object]",s_="[object Promise]",o_="[object Set]",a_="[object WeakMap]",l_="[object DataView]",iJ=Fu(D6),rJ=Fu(op),sJ=Fu(N6),oJ=Fu(oh),aJ=Fu(L6),Zl=Cl;(D6&&Zl(new D6(new ArrayBuffer(1)))!=l_||op&&Zl(new op)!=r_||N6&&Zl(N6.resolve())!=s_||oh&&Zl(new oh)!=o_||L6&&Zl(new L6)!=a_)&&(Zl=function(t){var e=Cl(t),n=e==nJ?t.constructor:void 0,i=n?Fu(n):"";if(i)switch(i){case iJ:return l_;case rJ:return r_;case sJ:return s_;case oJ:return o_;case aJ:return a_}return e});const Ih=Zl;var lJ=Object.prototype,uJ=lJ.hasOwnProperty;function cJ(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&uJ.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var hJ=Io.Uint8Array;const pm=hJ;function sy(t){var e=new t.constructor(t.byteLength);return new pm(e).set(new pm(t)),e}function fJ(t,e){var n=e?sy(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var dJ=/\w*$/;function pJ(t){var e=new t.constructor(t.source,dJ.exec(t));return e.lastIndex=t.lastIndex,e}var u_=ds?ds.prototype:void 0,c_=u_?u_.valueOf:void 0;function AJ(t){return c_?Object(c_.call(t)):{}}function mJ(t,e){var n=e?sy(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var gJ="[object Boolean]",vJ="[object Date]",yJ="[object Map]",xJ="[object Number]",EJ="[object RegExp]",SJ="[object Set]",_J="[object String]",CJ="[object Symbol]",TJ="[object ArrayBuffer]",IJ="[object DataView]",wJ="[object Float32Array]",MJ="[object Float64Array]",RJ="[object Int8Array]",bJ="[object Int16Array]",BJ="[object Int32Array]",LJ="[object Uint8Array]",PJ="[object Uint8ClampedArray]",DJ="[object Uint16Array]",NJ="[object Uint32Array]";function FJ(t,e,n){var i=t.constructor;switch(e){case TJ:return sy(t);case gJ:case vJ:return new i(+t);case IJ:return fJ(t,n);case wJ:case MJ:case RJ:case bJ:case BJ:case LJ:case PJ:case DJ:case NJ:return mJ(t,n);case yJ:return new i;case xJ:case _J:return new i(t);case EJ:return pJ(t);case SJ:return new i;case CJ:return AJ(t)}}function UJ(t){return typeof t.constructor=="function"&&!Pp(t)?bY(bR(t)):{}}var OJ="[object Map]";function kJ(t){return Gs(t)&&Ih(t)==OJ}var h_=fl&&fl.isMap,QJ=h_?Dp(h_):kJ;const GJ=QJ;var zJ="[object Set]";function HJ(t){return Gs(t)&&Ih(t)==zJ}var f_=fl&&fl.isSet,VJ=f_?Dp(f_):HJ;const WJ=VJ;var XJ=1,qJ=2,YJ=4,UR="[object Arguments]",KJ="[object Array]",jJ="[object Boolean]",JJ="[object Date]",ZJ="[object Error]",OR="[object Function]",$J="[object GeneratorFunction]",eZ="[object Map]",tZ="[object Number]",kR="[object Object]",nZ="[object RegExp]",iZ="[object Set]",rZ="[object String]",sZ="[object Symbol]",oZ="[object WeakMap]",aZ="[object ArrayBuffer]",lZ="[object DataView]",uZ="[object Float32Array]",cZ="[object Float64Array]",hZ="[object Int8Array]",fZ="[object Int16Array]",dZ="[object Int32Array]",pZ="[object Uint8Array]",AZ="[object Uint8ClampedArray]",mZ="[object Uint16Array]",gZ="[object Uint32Array]",an={};an[UR]=an[KJ]=an[aZ]=an[lZ]=an[jJ]=an[JJ]=an[uZ]=an[cZ]=an[hZ]=an[fZ]=an[dZ]=an[eZ]=an[tZ]=an[kR]=an[nZ]=an[iZ]=an[rZ]=an[sZ]=an[pZ]=an[AZ]=an[mZ]=an[gZ]=!0;an[ZJ]=an[OR]=an[oZ]=!1;function CA(t,e,n,i,r,s){var o,a=e&XJ,l=e&qJ,u=e&YJ;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!ps(t))return t;var h=Wt(t);if(h){if(o=cJ(t),!a)return LY(t,o)}else{var d=Ih(t),p=d==OR||d==$J;if(rp(t))return Wj(t,a);if(d==kR||d==UR||p&&!r){if(o=l||p?{}:UJ(t),!a)return l?Zj(t,Hj(o,t)):Kj(t,zj(o,t))}else{if(!an[d])return r?t:{};o=FJ(t,d,a)}}s||(s=new So);var A=s.get(t);if(A)return A;s.set(t,o),WJ(t)?t.forEach(function(E){o.add(CA(E,e,n,E,t,s))}):GJ(t)&&t.forEach(function(E,m){o.set(m,CA(E,e,n,m,t,s))});var g=u?l?FR:P6:l?B2:Lr,S=h?void 0:g(t);return ER(S||t,function(E,m){S&&(m=E,E=t[m]),M2(o,m,CA(E,e,n,m,t,s))}),o}var vZ=4;function ki(t){return CA(t,vZ)}function Fp(t){for(var e=-1,n=t==null?0:t.length,i=0,r=[];++e<n;){var s=t[e];s&&(r[i++]=s)}return r}var yZ="__lodash_hash_undefined__";function xZ(t){return this.__data__.set(t,yZ),this}function EZ(t){return this.__data__.has(t)}function wh(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Aa;++e<n;)this.add(t[e])}wh.prototype.add=wh.prototype.push=xZ;wh.prototype.has=EZ;function QR(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function oy(t,e){return t.has(e)}var SZ=1,_Z=2;function GR(t,e,n,i,r,s){var o=n&SZ,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var d=-1,p=!0,A=n&_Z?new wh:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var g=t[d],S=e[d];if(i)var E=o?i(S,g,d,e,t,s):i(g,S,d,t,e,s);if(E!==void 0){if(E)continue;p=!1;break}if(A){if(!QR(e,function(m,x){if(!oy(A,x)&&(g===m||r(g,m,n,i,s)))return A.push(x)})){p=!1;break}}else if(!(g===S||r(g,S,n,i,s))){p=!1;break}}return s.delete(t),s.delete(e),p}function CZ(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}function ay(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var TZ=1,IZ=2,wZ="[object Boolean]",MZ="[object Date]",RZ="[object Error]",bZ="[object Map]",BZ="[object Number]",LZ="[object RegExp]",PZ="[object Set]",DZ="[object String]",NZ="[object Symbol]",FZ="[object ArrayBuffer]",UZ="[object DataView]",d_=ds?ds.prototype:void 0,b5=d_?d_.valueOf:void 0;function OZ(t,e,n,i,r,s,o){switch(n){case UZ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case FZ:return!(t.byteLength!=e.byteLength||!s(new pm(t),new pm(e)));case wZ:case MZ:case BZ:return Bp(+t,+e);case RZ:return t.name==e.name&&t.message==e.message;case LZ:case DZ:return t==e+"";case bZ:var a=CZ;case PZ:var l=i&TZ;if(a||(a=ay),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;i|=IZ,o.set(t,e);var h=GR(a(t),a(e),i,r,s,o);return o.delete(t),h;case NZ:if(b5)return b5.call(t)==b5.call(e)}return!1}var kZ=1,QZ=Object.prototype,GZ=QZ.hasOwnProperty;function zZ(t,e,n,i,r,s){var o=n&kZ,a=P6(t),l=a.length,u=P6(e),h=u.length;if(l!=h&&!o)return!1;for(var d=l;d--;){var p=a[d];if(!(o?p in e:GZ.call(e,p)))return!1}var A=s.get(t),g=s.get(e);if(A&&g)return A==e&&g==t;var S=!0;s.set(t,e),s.set(e,t);for(var E=o;++d<l;){p=a[d];var m=t[p],x=e[p];if(i)var y=o?i(x,m,p,e,t,s):i(m,x,p,t,e,s);if(!(y===void 0?m===x||r(m,x,n,i,s):y)){S=!1;break}E||(E=p=="constructor")}if(S&&!E){var C=t.constructor,I=e.constructor;C!=I&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof I=="function"&&I instanceof I)&&(S=!1)}return s.delete(t),s.delete(e),S}var HZ=1,p_="[object Arguments]",A_="[object Array]",Z3="[object Object]",VZ=Object.prototype,m_=VZ.hasOwnProperty;function WZ(t,e,n,i,r,s){var o=Wt(t),a=Wt(e),l=o?A_:Ih(t),u=a?A_:Ih(e);l=l==p_?Z3:l,u=u==p_?Z3:u;var h=l==Z3,d=u==Z3,p=l==u;if(p&&rp(t)){if(!rp(e))return!1;o=!0,h=!1}if(p&&!h)return s||(s=new So),o||Z4(t)?GR(t,e,n,i,r,s):OZ(t,e,l,n,i,r,s);if(!(n&HZ)){var A=h&&m_.call(t,"__wrapped__"),g=d&&m_.call(e,"__wrapped__");if(A||g){var S=A?t.value():t,E=g?e.value():e;return s||(s=new So),r(S,E,n,i,s)}}return p?(s||(s=new So),zZ(t,e,n,i,r,s)):!1}function ly(t,e,n,i,r){return t===e?!0:t==null||e==null||!Gs(t)&&!Gs(e)?t!==t&&e!==e:WZ(t,e,n,i,ly,r)}var XZ=1,qZ=2;function YZ(t,e,n,i){var r=n.length,s=r,o=!i;if(t==null)return!s;for(t=Object(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){a=n[r];var l=a[0],u=t[l],h=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var d=new So;if(i)var p=i(u,h,l,t,e,d);if(!(p===void 0?ly(h,u,XZ|qZ,i,d):p))return!1}}return!0}function zR(t){return t===t&&!ps(t)}function KZ(t){for(var e=Lr(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,zR(r)]}return e}function HR(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function jZ(t){var e=KZ(t);return e.length==1&&e[0][2]?HR(e[0][0],e[0][1]):function(n){return n===t||YZ(n,t,e)}}function JZ(t,e){return t!=null&&e in Object(t)}function VR(t,e,n){e=D2(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=Np(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&J4(r)&&w2(o,r)&&(Wt(t)||b2(t)))}function ZZ(t,e){return t!=null&&VR(t,e,JZ)}var $Z=1,e$=2;function t$(t,e){return $4(t)&&zR(e)?HR(Np(t),e):function(n){var i=Lj(n,t);return i===void 0&&i===e?ZZ(n,t):ly(e,i,$Z|e$)}}function n$(t){return function(e){return e==null?void 0:e[t]}}function i$(t){return function(e){return ty(e,t)}}function r$(t){return $4(t)?n$(Np(t)):i$(t)}function Mo(t){return typeof t=="function"?t:t==null?Th:typeof t=="object"?Wt(t)?t$(t[0],t[1]):jZ(t):r$(t)}function s$(t,e,n,i){for(var r=-1,s=t==null?0:t.length;++r<s;){var o=t[r];e(i,o,n(o),t)}return i}function o$(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(n(s[l],l,s)===!1)break}return e}}var a$=o$();const l$=a$;function u$(t,e){return t&&l$(t,e,Lr)}function c$(t,e){return function(n,i){if(n==null)return n;if(!wo(n))return t(n,i);for(var r=n.length,s=e?r:-1,o=Object(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}var h$=c$(u$);const Ou=h$;function f$(t,e,n,i){return Ou(t,function(r,s,o){e(i,r,n(r),o)}),i}function d$(t,e){return function(n,i){var r=Wt(n)?s$:f$,s=e?e():{};return r(n,t,Mo(i),s)}}var WR=Object.prototype,p$=WR.hasOwnProperty,A$=j4(function(t,e){t=Object(t);var n=-1,i=e.length,r=i>2?e[2]:void 0;for(r&&R2(e[0],e[1],r)&&(i=1);++n<i;)for(var s=e[n],o=B2(s),a=-1,l=o.length;++a<l;){var u=o[a],h=t[u];(h===void 0||Bp(h,WR[u])&&!p$.call(t,u))&&(t[u]=s[u])}return t});const uy=A$;function g_(t){return Gs(t)&&wo(t)}function XR(t,e,n){for(var i=-1,r=t==null?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}var m$=200;function g$(t,e,n,i){var r=-1,s=_R,o=!0,a=t.length,l=[],u=e.length;if(!a)return l;n&&(e=Rp(e,Dp(n))),i?(s=XR,o=!1):e.length>=m$&&(s=oy,o=!1,e=new wh(e));e:for(;++r<a;){var h=t[r],d=n==null?h:n(h);if(h=i||h!==0?h:0,o&&d===d){for(var p=u;p--;)if(e[p]===d)continue e;l.push(h)}else s(e,d,i)||l.push(h)}return l}var v$=j4(function(t,e){return g_(t)?g$(t,N2(e,1,g_,!0)):[]});const F2=v$;function Mh(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function vi(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===void 0?1:bp(e),BR(t,e<0?0:e,i)):[]}function ap(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===void 0?1:bp(e),e=i-e,BR(t,0,e<0?0:e)):[]}function y$(t){return typeof t=="function"?t:Th}function ht(t,e){var n=Wt(t)?ER:Ou;return n(t,y$(e))}function x$(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function E$(t,e){var n=!0;return Ou(t,function(i,r,s){return n=!!e(i,r,s),n}),n}function Fs(t,e,n){var i=Wt(t)?x$:E$;return n&&R2(t,e,n)&&(e=void 0),i(t,Mo(e))}function qR(t,e){var n=[];return Ou(t,function(i,r,s){e(i,r,s)&&n.push(i)}),n}function gs(t,e){var n=Wt(t)?iy:qR;return n(t,Mo(e))}function S$(t){return function(e,n,i){var r=Object(e);if(!wo(e)){var s=Mo(n);e=Lr(e),n=function(a){return s(r[a],a,r)}}var o=t(e,n,i);return o>-1?r[s?e[o]:o]:void 0}}var _$=Math.max;function C$(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var r=n==null?0:bp(n);return r<0&&(r=_$(i+r,0)),SR(t,Mo(e),r)}var T$=S$(C$);const Rh=T$;function zs(t){return t&&t.length?t[0]:void 0}function I$(t,e){var n=-1,i=wo(t)?Array(t.length):[];return Ou(t,function(r,s,o){i[++n]=e(r,s,o)}),i}function it(t,e){var n=Wt(t)?Rp:I$;return n(t,Mo(e))}function as(t,e){return N2(it(t,e),1)}var w$=Object.prototype,M$=w$.hasOwnProperty,R$=d$(function(t,e,n){M$.call(t,n)?t[n].push(e):K4(t,n,[e])});const b$=R$;var B$=Object.prototype,L$=B$.hasOwnProperty;function P$(t,e){return t!=null&&L$.call(t,e)}function ut(t,e){return t!=null&&VR(t,e,P$)}var D$="[object String]";function hr(t){return typeof t=="string"||!Wt(t)&&Gs(t)&&Cl(t)==D$}function N$(t,e){return Rp(e,function(n){return t[n]})}function ti(t){return t==null?[]:N$(t,Lr(t))}var F$=Math.max;function $i(t,e,n,i){t=wo(t)?t:ti(t),n=n&&!i?bp(n):0;var r=t.length;return n<0&&(n=F$(r+n,0)),hr(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Y4(t,e,n)>-1}var U$=Math.max;function v_(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var r=n==null?0:bp(n);return r<0&&(r=U$(i+r,0)),Y4(t,e,r)}var O$="[object Map]",k$="[object Set]",Q$=Object.prototype,G$=Q$.hasOwnProperty;function un(t){if(t==null)return!0;if(wo(t)&&(Wt(t)||typeof t=="string"||typeof t.splice=="function"||rp(t)||Z4(t)||b2(t)))return!t.length;var e=Ih(t);if(e==O$||e==k$)return!t.size;if(Pp(t))return!RR(t).length;for(var n in t)if(G$.call(t,n))return!1;return!0}var z$="[object RegExp]";function H$(t){return Gs(t)&&Cl(t)==z$}var y_=fl&&fl.isRegExp,V$=y_?Dp(y_):H$;const aa=V$;function la(t){return t===void 0}var W$="Expected a function";function X$(t){if(typeof t!="function")throw new TypeError(W$);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function q$(t,e,n,i){if(!ps(t))return t;e=D2(e,t);for(var r=-1,s=e.length,o=s-1,a=t;a!=null&&++r<s;){var l=Np(e[r]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(r!=o){var h=a[l];u=i?i(h,l,a):void 0,u===void 0&&(u=ps(h)?h:w2(e[r+1])?[]:{})}M2(a,l,u),a=a[l]}return t}function Y$(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=ty(t,o);n(a,o)&&q$(s,D2(o,t),a)}return s}function Ys(t,e){if(t==null)return{};var n=Rp(FR(t),function(i){return[i]});return e=Mo(e),Y$(t,n,function(i,r){return e(i,r[0])})}function K$(t,e,n,i,r){return r(t,function(s,o,a){n=i?(i=!1,s):e(n,s,o,a)}),n}function Dr(t,e,n){var i=Wt(t)?Nj:K$,r=arguments.length<3;return i(t,Mo(e),n,r,Ou)}function U2(t,e){var n=Wt(t)?iy:qR;return n(t,X$(Mo(e)))}function j$(t,e){var n;return Ou(t,function(i,r,s){return n=e(i,r,s),!n}),!!n}function YR(t,e,n){var i=Wt(t)?QR:j$;return n&&R2(t,e,n)&&(e=void 0),i(t,Mo(e))}var J$=1/0,Z$=oh&&1/ay(new oh([,-0]))[1]==J$?function(t){return new oh(t)}:$n;const $$=Z$;var eee=200;function tee(t,e,n){var i=-1,r=_R,s=t.length,o=!0,a=[],l=a;if(n)o=!1,r=XR;else if(s>=eee){var u=e?null:$$(t);if(u)return ay(u);o=!1,r=oy,l=new wh}else l=e?[]:a;e:for(;++i<s;){var h=t[i],d=e?e(h):h;if(h=n||h!==0?h:0,o&&d===d){for(var p=l.length;p--;)if(l[p]===d)continue e;e&&l.push(d),a.push(h)}else r(l,d,n)||(l!==a&&l.push(d),a.push(h))}return a}function cy(t){return t&&t.length?tee(t):[]}function F6(t){console&&console.error&&console.error(`Error: ${t}`)}function KR(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function jR(t){const e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function JR(t){function e(){}e.prototype=t;const n=new e;function i(){return typeof n.bar}return i(),i(),t}function nee(t){return iee(t)?t.LABEL:t.name}function iee(t){return hr(t.LABEL)&&t.LABEL!==""}class Ro{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ht(this.definition,n=>{n.accept(e)})}}class Nr extends Ro{constructor(e){super([]),this.idx=1,Pr(this,Ys(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Hh extends Ro{constructor(e){super(e.definition),this.orgText="",Pr(this,Ys(e,n=>n!==void 0))}}class fr extends Ro{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Pr(this,Ys(e,n=>n!==void 0))}}class cr extends Ro{constructor(e){super(e.definition),this.idx=1,Pr(this,Ys(e,n=>n!==void 0))}}class bo extends Ro{constructor(e){super(e.definition),this.idx=1,Pr(this,Ys(e,n=>n!==void 0))}}class Bo extends Ro{constructor(e){super(e.definition),this.idx=1,Pr(this,Ys(e,n=>n!==void 0))}}class ii extends Ro{constructor(e){super(e.definition),this.idx=1,Pr(this,Ys(e,n=>n!==void 0))}}class Ks extends Ro{constructor(e){super(e.definition),this.idx=1,Pr(this,Ys(e,n=>n!==void 0))}}class js extends Ro{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Pr(this,Ys(e,n=>n!==void 0))}}class In{constructor(e){this.idx=1,Pr(this,Ys(e,n=>n!==void 0))}accept(e){e.visit(this)}}function ree(t){return it(t,TA)}function TA(t){function e(n){return it(n,TA)}if(t instanceof Nr){const n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return hr(t.label)&&(n.label=t.label),n}else{if(t instanceof fr)return{type:"Alternative",definition:e(t.definition)};if(t instanceof cr)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof bo)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Bo)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:TA(new In({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Ks)return{type:"RepetitionWithSeparator",idx:t.idx,separator:TA(new In({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ii)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof js)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof In){const n={type:"Terminal",name:t.terminalType.name,label:nee(t.terminalType),idx:t.idx};hr(t.label)&&(n.terminalLabel=t.label);const i=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=aa(i)?i.source:i),n}else{if(t instanceof Hh)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class Vh{visit(e){const n=e;switch(n.constructor){case Nr:return this.visitNonTerminal(n);case fr:return this.visitAlternative(n);case cr:return this.visitOption(n);case bo:return this.visitRepetitionMandatory(n);case Bo:return this.visitRepetitionMandatoryWithSeparator(n);case Ks:return this.visitRepetitionWithSeparator(n);case ii:return this.visitRepetition(n);case js:return this.visitAlternation(n);case In:return this.visitTerminal(n);case Hh:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function see(t){return t instanceof fr||t instanceof cr||t instanceof ii||t instanceof bo||t instanceof Bo||t instanceof Ks||t instanceof In||t instanceof Hh}function Am(t,e=[]){return t instanceof cr||t instanceof ii||t instanceof Ks?!0:t instanceof js?YR(t.definition,i=>Am(i,e)):t instanceof Nr&&$i(e,t)?!1:t instanceof Ro?(t instanceof Nr&&e.push(t),Fs(t.definition,i=>Am(i,e))):!1}function oee(t){return t instanceof js}function lo(t){if(t instanceof Nr)return"SUBRULE";if(t instanceof cr)return"OPTION";if(t instanceof js)return"OR";if(t instanceof bo)return"AT_LEAST_ONE";if(t instanceof Bo)return"AT_LEAST_ONE_SEP";if(t instanceof Ks)return"MANY_SEP";if(t instanceof ii)return"MANY";if(t instanceof In)return"CONSUME";throw Error("non exhaustive match")}class O2{walk(e,n=[]){ht(e.definition,(i,r)=>{const s=vi(e.definition,r+1);if(i instanceof Nr)this.walkProdRef(i,s,n);else if(i instanceof In)this.walkTerminal(i,s,n);else if(i instanceof fr)this.walkFlat(i,s,n);else if(i instanceof cr)this.walkOption(i,s,n);else if(i instanceof bo)this.walkAtLeastOne(i,s,n);else if(i instanceof Bo)this.walkAtLeastOneSep(i,s,n);else if(i instanceof Ks)this.walkManySep(i,s,n);else if(i instanceof ii)this.walkMany(i,s,n);else if(i instanceof js)this.walkOr(i,s,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,i){}walkProdRef(e,n,i){}walkFlat(e,n,i){const r=n.concat(i);this.walk(e,r)}walkOption(e,n,i){const r=n.concat(i);this.walk(e,r)}walkAtLeastOne(e,n,i){const r=[new cr({definition:e.definition})].concat(n,i);this.walk(e,r)}walkAtLeastOneSep(e,n,i){const r=x_(e,n,i);this.walk(e,r)}walkMany(e,n,i){const r=[new cr({definition:e.definition})].concat(n,i);this.walk(e,r)}walkManySep(e,n,i){const r=x_(e,n,i);this.walk(e,r)}walkOr(e,n,i){const r=n.concat(i);ht(e.definition,s=>{const o=new fr({definition:[s]});this.walk(o,r)})}}function x_(t,e,n){return[new cr({definition:[new In({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function Up(t){if(t instanceof Nr)return Up(t.referencedRule);if(t instanceof In)return uee(t);if(see(t))return aee(t);if(oee(t))return lee(t);throw Error("non exhaustive match")}function aee(t){let e=[];const n=t.definition;let i=0,r=n.length>i,s,o=!0;for(;r&&o;)s=n[i],o=Am(s),e=e.concat(Up(s)),i=i+1,r=n.length>i;return cy(e)}function lee(t){const e=it(t.definition,n=>Up(n));return cy(Ns(e))}function uee(t){return[t.terminalType]}const ZR="_~IN~_";class cee extends O2{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,i){}walkProdRef(e,n,i){const r=fee(e.referencedRule,e.idx)+this.topProd.name,s=n.concat(i),o=new fr({definition:s}),a=Up(o);this.follows[r]=a}}function hee(t){const e={};return ht(t,n=>{const i=new cee(n).startWalking();Pr(e,i)}),e}function fee(t,e){return t.name+e+ZR}function ft(t){return t.charCodeAt(0)}function B5(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function Uf(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function Ic(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function dee(){throw Error("Internal Error - Should never get here!")}function E_(t){return t.type==="Character"}const mm=[];for(let t=ft("0");t<=ft("9");t++)mm.push(t);const gm=[ft("_")].concat(mm);for(let t=ft("a");t<=ft("z");t++)gm.push(t);for(let t=ft("A");t<=ft("Z");t++)gm.push(t);const S_=[ft(" "),ft("\f"),ft(`
`),ft("\r"),ft("	"),ft("\v"),ft("	"),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft(""),ft("\u2028"),ft("\u2029"),ft(""),ft(""),ft(""),ft("\uFEFF")],pee=/[0-9a-fA-F]/,$3=/[0-9]/,Aee=/[1-9]/;class mee{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const i={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Uf(i,"global");break;case"i":Uf(i,"ignoreCase");break;case"m":Uf(i,"multiLine");break;case"u":Uf(i,"unicode");break;case"y":Uf(i,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:i,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}Ic(n);const i=this.disjunction();return this.consumeChar(")"),{type:n,value:i,loc:this.loc(e)}}return dee()}quantifier(e=!1){let n;const i=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const r=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:r,atMost:r};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),n={atLeast:r,atMost:s}):n={atLeast:r,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;Ic(n);break}if(!(e===!0&&n===void 0)&&Ic(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(i),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Ic(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[ft(`
`),ft("\r"),ft("\u2028"),ft("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=mm;break;case"D":e=mm,n=!0;break;case"s":e=S_;break;case"S":e=S_,n=!0;break;case"w":e=gm;break;case"W":e=gm,n=!0;break}if(Ic(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=ft("\f");break;case"n":e=ft(`
`);break;case"r":e=ft("\r");break;case"t":e=ft("	");break;case"v":e=ft("\v");break}if(Ic(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:ft("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:ft(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:ft(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const i=this.classAtom();if(i.type,E_(i)&&this.isRangeDash()){this.consumeChar("-");const r=this.classAtom();if(r.type,E_(r)){if(r.value<i.value)throw Error("Range out of order in character class");e.push({from:i.value,to:r.value})}else B5(i.value,e),e.push(ft("-")),B5(r.value,e)}else B5(i.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:ft("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const i={type:"Group",capturing:e,value:n};return e&&(i.idx=this.groupIdx),i}positiveInteger(){let e=this.popChar();if(Aee.test(e)===!1)throw Error("Expecting a positive integer");for(;$3.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if($3.test(e)===!1)throw Error("Expecting an integer");for(;$3.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:ft(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return $3.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let r=0;r<e;r++){const s=this.popChar();if(pee.test(s)===!1)throw Error("Expecting a HexDecimal digits");n+=s}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class hy{visitChildren(e){for(const n in e){const i=e[n];e.hasOwnProperty(n)&&(i.type!==void 0?this.visit(i):Array.isArray(i)&&i.forEach(r=>{this.visit(r)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let IA={};const gee=new mee;function k2(t){const e=t.toString();if(IA.hasOwnProperty(e))return IA[e];{const n=gee.pattern(e);return IA[e]=n,n}}function vee(){IA={}}const $R="Complement Sets are not supported for first char optimization",vm=`Unable to use "first char" lexer optimizations:
`;function yee(t,e=!1){try{const n=k2(t);return U6(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===$R)e&&KR(`${vm}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let i="";e&&(i=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),F6(`${vm}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+i)}}return[]}function U6(t,e,n){switch(t.type){case"Disjunction":for(let r=0;r<t.value.length;r++)U6(t.value[r],e,n);break;case"Alternative":const i=t.value;for(let r=0;r<i.length;r++){const s=i[r];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const o=s;switch(o.type){case"Character":eA(o.value,e,n);break;case"Set":if(o.complement===!0)throw Error($R);ht(o.value,l=>{if(typeof l=="number")eA(l,e,n);else{const u=l;if(n===!0)for(let h=u.from;h<=u.to;h++)eA(h,e,n);else{for(let h=u.from;h<=u.to&&h<Xf;h++)eA(h,e,n);if(u.to>=Xf){const h=u.from>=Xf?u.from:Xf,d=u.to,p=dl(h),A=dl(d);for(let g=p;g<=A;g++)e[g]=g}}}});break;case"Group":U6(o.value,e,n);break;default:throw Error("Non Exhaustive Match")}const a=o.quantifier!==void 0&&o.quantifier.atLeast===0;if(o.type==="Group"&&O6(o)===!1||o.type!=="Group"&&a===!1)break}break;default:throw Error("non exhaustive match!")}return ti(e)}function eA(t,e,n){const i=dl(t);e[i]=i,n===!0&&xee(t,e)}function xee(t,e){const n=String.fromCharCode(t),i=n.toUpperCase();if(i!==n){const r=dl(i.charCodeAt(0));e[r]=r}else{const r=n.toLowerCase();if(r!==n){const s=dl(r.charCodeAt(0));e[s]=s}}}function __(t,e){return Rh(t.value,n=>{if(typeof n=="number")return $i(e,n);{const i=n;return Rh(e,r=>i.from<=r&&r<=i.to)!==void 0}})}function O6(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?Wt(t.value)?Fs(t.value,O6):O6(t.value):!1}class Eee extends hy{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){$i(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?__(e,this.targetCharCodes)===void 0&&(this.found=!0):__(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function fy(t,e){if(e instanceof RegExp){const n=k2(e),i=new Eee(t);return i.visit(n),i.found}else return Rh(e,n=>$i(t,n.charCodeAt(0)))!==void 0}const wu="PATTERN",Wf="defaultMode",tA="modes";let eb=typeof new RegExp("(?:)").sticky=="boolean";function See(t,e){e=uy(e,{useSticky:eb,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(x,y)=>y()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{Wee()});let i;n("Reject Lexer.NA",()=>{i=U2(t,x=>x[wu]===ls.NA)});let r=!1,s;n("Transform Patterns",()=>{r=!1,s=it(i,x=>{const y=x[wu];if(aa(y)){const C=y.source;return C.length===1&&C!=="^"&&C!=="$"&&C!=="."&&!y.ignoreCase?C:C.length===2&&C[0]==="\\"&&!$i(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],C[1])?C[1]:e.useSticky?T_(y):C_(y)}else{if(da(y))return r=!0,{exec:y};if(typeof y=="object")return r=!0,y;if(typeof y=="string"){if(y.length===1)return y;{const C=y.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),I=new RegExp(C);return e.useSticky?T_(I):C_(I)}}else throw Error("non exhaustive match")}})});let o,a,l,u,h;n("misc mapping",()=>{o=it(i,x=>x.tokenTypeIdx),a=it(i,x=>{const y=x.GROUP;if(y!==ls.SKIPPED){if(hr(y))return y;if(la(y))return!1;throw Error("non exhaustive match")}}),l=it(i,x=>{const y=x.LONGER_ALT;if(y)return Wt(y)?it(y,I=>v_(i,I)):[v_(i,y)]}),u=it(i,x=>x.PUSH_MODE),h=it(i,x=>ut(x,"POP_MODE"))});let d;n("Line Terminator Handling",()=>{const x=ib(e.lineTerminatorCharacters);d=it(i,y=>!1),e.positionTracking!=="onlyOffset"&&(d=it(i,y=>ut(y,"LINE_BREAKS")?!!y.LINE_BREAKS:nb(y,x)===!1&&fy(x,y.PATTERN)))});let p,A,g,S;n("Misc Mapping #2",()=>{p=it(i,tb),A=it(s,zee),g=Dr(i,(x,y)=>{const C=y.GROUP;return hr(C)&&C!==ls.SKIPPED&&(x[C]=[]),x},{}),S=it(s,(x,y)=>({pattern:s[y],longerAlt:l[y],canLineTerminator:d[y],isCustom:p[y],short:A[y],group:a[y],push:u[y],pop:h[y],tokenTypeIdx:o[y],tokenType:i[y]}))});let E=!0,m=[];return e.safeMode||n("First Char Optimization",()=>{m=Dr(i,(x,y,C)=>{if(typeof y.PATTERN=="string"){const I=y.PATTERN.charCodeAt(0),M=dl(I);L5(x,M,S[C])}else if(Wt(y.START_CHARS_HINT)){let I;ht(y.START_CHARS_HINT,M=>{const w=typeof M=="string"?M.charCodeAt(0):M,L=dl(w);I!==L&&(I=L,L5(x,L,S[C]))})}else if(aa(y.PATTERN))if(y.PATTERN.unicode)E=!1,e.ensureOptimizations&&F6(`${vm}	Unable to analyze < ${y.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const I=yee(y.PATTERN,e.ensureOptimizations);un(I)&&(E=!1),ht(I,M=>{L5(x,M,S[C])})}else e.ensureOptimizations&&F6(`${vm}	TokenType: <${y.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),E=!1;return x},[])}),{emptyGroups:g,patternIdxToConfig:S,charCodeToPatternIdxToConfig:m,hasCustom:r,canBeOptimized:E}}function _ee(t,e){let n=[];const i=Tee(t);n=n.concat(i.errors);const r=Iee(i.valid),s=r.valid;return n=n.concat(r.errors),n=n.concat(Cee(s)),n=n.concat(Dee(s)),n=n.concat(Nee(s,e)),n=n.concat(Fee(s)),n}function Cee(t){let e=[];const n=gs(t,i=>aa(i[wu]));return e=e.concat(Mee(n)),e=e.concat(Bee(n)),e=e.concat(Lee(n)),e=e.concat(Pee(n)),e=e.concat(Ree(n)),e}function Tee(t){const e=gs(t,r=>!ut(r,wu)),n=it(e,r=>({message:"Token Type: ->"+r.name+"<- missing static 'PATTERN' property",type:On.MISSING_PATTERN,tokenTypes:[r]})),i=F2(t,e);return{errors:n,valid:i}}function Iee(t){const e=gs(t,r=>{const s=r[wu];return!aa(s)&&!da(s)&&!ut(s,"exec")&&!hr(s)}),n=it(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:On.INVALID_PATTERN,tokenTypes:[r]})),i=F2(t,e);return{errors:n,valid:i}}const wee=/[^\\][$]/;function Mee(t){class e extends hy{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const n=gs(t,r=>{const s=r.PATTERN;try{const o=k2(s),a=new e;return a.visit(o),a.found}catch{return wee.test(s.source)}});return it(n,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:On.EOI_ANCHOR_FOUND,tokenTypes:[r]}))}function Ree(t){const e=gs(t,i=>i.PATTERN.test(""));return it(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' must not match an empty string",type:On.EMPTY_MATCH_PATTERN,tokenTypes:[i]}))}const bee=/[^\\[][\^]|^\^/;function Bee(t){class e extends hy{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const n=gs(t,r=>{const s=r.PATTERN;try{const o=k2(s),a=new e;return a.visit(o),a.found}catch{return bee.test(s.source)}});return it(n,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:On.SOI_ANCHOR_FOUND,tokenTypes:[r]}))}function Lee(t){const e=gs(t,i=>{const r=i[wu];return r instanceof RegExp&&(r.multiline||r.global)});return it(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:On.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[i]}))}function Pee(t){const e=[];let n=it(t,s=>Dr(t,(o,a)=>(s.PATTERN.source===a.PATTERN.source&&!$i(e,a)&&a.PATTERN!==ls.NA&&(e.push(a),o.push(a)),o),[]));n=Fp(n);const i=gs(n,s=>s.length>1);return it(i,s=>{const o=it(s,l=>l.name);return{message:`The same RegExp pattern ->${zs(s).PATTERN}<-has been used in all of the following Token Types: ${o.join(", ")} <-`,type:On.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Dee(t){const e=gs(t,i=>{if(!ut(i,"GROUP"))return!1;const r=i.GROUP;return r!==ls.SKIPPED&&r!==ls.NA&&!hr(r)});return it(e,i=>({message:"Token Type: ->"+i.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:On.INVALID_GROUP_TYPE_FOUND,tokenTypes:[i]}))}function Nee(t,e){const n=gs(t,r=>r.PUSH_MODE!==void 0&&!$i(e,r.PUSH_MODE));return it(n,r=>({message:`Token Type: ->${r.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${r.PUSH_MODE}<-which does not exist`,type:On.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[r]}))}function Fee(t){const e=[],n=Dr(t,(i,r,s)=>{const o=r.PATTERN;return o===ls.NA||(hr(o)?i.push({str:o,idx:s,tokenType:r}):aa(o)&&Oee(o)&&i.push({str:o.source,idx:s,tokenType:r})),i},[]);return ht(t,(i,r)=>{ht(n,({str:s,idx:o,tokenType:a})=>{if(r<o&&Uee(s,i.PATTERN)){const l=`Token: ->${a.name}<- can never be matched.
Because it appears AFTER the Token Type ->${i.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:l,type:On.UNREACHABLE_PATTERN,tokenTypes:[i,a]})}})}),e}function Uee(t,e){if(aa(e)){const n=e.exec(t);return n!==null&&n.index===0}else{if(da(e))return e(t,0,[],{});if(ut(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function Oee(t){return Rh([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function C_(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function T_(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function kee(t,e,n){const i=[];return ut(t,Wf)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+Wf+`> property in its definition
`,type:On.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),ut(t,tA)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+tA+`> property in its definition
`,type:On.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),ut(t,tA)&&ut(t,Wf)&&!ut(t.modes,t.defaultMode)&&i.push({message:`A MultiMode Lexer cannot be initialized with a ${Wf}: <${t.defaultMode}>which does not exist
`,type:On.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),ut(t,tA)&&ht(t.modes,(r,s)=>{ht(r,(o,a)=>{if(la(o))i.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${a}>
`,type:On.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(ut(o,"LONGER_ALT")){const l=Wt(o.LONGER_ALT)?o.LONGER_ALT:[o.LONGER_ALT];ht(l,u=>{!la(u)&&!$i(r,u)&&i.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${o.name}> outside of mode <${s}>
`,type:On.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),i}function Qee(t,e,n){const i=[];let r=!1;const s=Fp(Ns(ti(t.modes))),o=U2(s,l=>l[wu]===ls.NA),a=ib(n);return e&&ht(o,l=>{const u=nb(l,a);if(u!==!1){const d={message:Vee(l,u),type:u.issue,tokenType:l};i.push(d)}else ut(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(r=!0):fy(a,l.PATTERN)&&(r=!0)}),e&&!r&&i.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:On.NO_LINE_BREAKS_FLAGS}),i}function Gee(t){const e={},n=Lr(t);return ht(n,i=>{const r=t[i];if(Wt(r))e[i]=[];else throw Error("non exhaustive match")}),e}function tb(t){const e=t.PATTERN;if(aa(e))return!1;if(da(e))return!0;if(ut(e,"exec"))return!0;if(hr(e))return!1;throw Error("non exhaustive match")}function zee(t){return hr(t)&&t.length===1?t.charCodeAt(0):!1}const Hee={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const i=t.charCodeAt(n);if(i===10)return this.lastIndex=n+1,!0;if(i===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function nb(t,e){if(ut(t,"LINE_BREAKS"))return!1;if(aa(t.PATTERN)){try{fy(e,t.PATTERN)}catch(n){return{issue:On.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(hr(t.PATTERN))return!1;if(tb(t))return{issue:On.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Vee(t,e){if(e.issue===On.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===On.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function ib(t){return it(t,n=>hr(n)?n.charCodeAt(0):n)}function L5(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}const Xf=256;let wA=[];function dl(t){return t<Xf?t:wA[t]}function Wee(){if(un(wA)){wA=new Array(65536);for(let t=0;t<65536;t++)wA[t]=t>255?255+~~(t/255):t}}function Op(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function ym(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let I_=1;const rb={};function kp(t){const e=Xee(t);qee(e),Kee(e),Yee(e),ht(e,n=>{n.isParent=n.categoryMatches.length>0})}function Xee(t){let e=ki(t),n=t,i=!0;for(;i;){n=Fp(Ns(it(n,s=>s.CATEGORIES)));const r=F2(n,e);e=e.concat(r),un(r)?i=!1:n=r}return e}function qee(t){ht(t,e=>{ob(e)||(rb[I_]=e,e.tokenTypeIdx=I_++),w_(e)&&!Wt(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),w_(e)||(e.CATEGORIES=[]),jee(e)||(e.categoryMatches=[]),Jee(e)||(e.categoryMatchesMap={})})}function Yee(t){ht(t,e=>{e.categoryMatches=[],ht(e.categoryMatchesMap,(n,i)=>{e.categoryMatches.push(rb[i].tokenTypeIdx)})})}function Kee(t){ht(t,e=>{sb([],e)})}function sb(t,e){ht(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),ht(e.CATEGORIES,n=>{const i=t.concat(e);$i(i,n)||sb(i,n)})}function ob(t){return ut(t,"tokenTypeIdx")}function w_(t){return ut(t,"CATEGORIES")}function jee(t){return ut(t,"categoryMatches")}function Jee(t){return ut(t,"categoryMatchesMap")}function Zee(t){return ut(t,"tokenTypeIdx")}const $ee={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,i,r){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var On;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(On||(On={}));const qf={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:$ee,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(qf);class ls{constructor(e,n=qf){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(r,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const o=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${o}--> <${r}>`);const{time:a,value:l}=jR(s),u=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${o}<-- <${r}> time: ${a}ms`),this.traceInitIndent--,l}else return s()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Pr({},qf,n);const i=this.config.traceInitPerf;i===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof i=="number"&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let r,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===qf.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Hee;else if(this.config.lineTerminatorCharacters===qf.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Wt(e)?r={modes:{defaultMode:ki(e)},defaultMode:Wf}:(s=!1,r=ki(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(kee(r,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Qee(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),r.modes=r.modes?r.modes:{},ht(r.modes,(a,l)=>{r.modes[l]=U2(a,u=>la(u))});const o=Lr(r.modes);if(ht(r.modes,(a,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(_ee(a,o))}),un(this.lexerDefinitionErrors)){kp(a);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=See(a,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=u.charCodeToPatternIdxToConfig,this.emptyGroups=Pr({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=u.canBeOptimized}})}),this.defaultMode=r.defaultMode,!un(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const l=it(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}ht(this.lexerDefinitionWarning,a=>{KR(a.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(eb?(this.chopInput=Th,this.match=this.matchWithTest):(this.updateLastIndex=$n,this.match=this.matchWithExec),s&&(this.handleModes=$n),this.trackStartLines===!1&&(this.computeNewColumn=Th),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=$n),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const a=Dr(this.canModeBeOptimized,(l,u,h)=>(u===!1&&l.push(h),l),[]);if(n.ensureOptimizations&&!un(a))throw Error(`Lexer Modes: < ${a.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{vee()}),this.TRACE_INIT("toFastProperties",()=>{JR(this)})})}tokenize(e,n=this.defaultMode){if(!un(this.lexerDefinitionErrors)){const r=it(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+r)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let i,r,s,o,a,l,u,h,d,p,A,g,S,E,m;const x=e,y=x.length;let C=0,I=0;const M=this.hasCustom?0:Math.floor(e.length/10),w=new Array(M),L=[];let R=this.trackStartLines?1:void 0,B=this.trackStartLines?1:void 0;const F=Gee(this.emptyGroups),X=this.trackStartLines,G=this.config.lineTerminatorsPattern;let q=0,Y=[],$=[];const j=[],P=[];Object.freeze(P);let Q;function U(){return Y}function O(ge){const Ie=dl(ge),Ne=$[Ie];return Ne===void 0?P:Ne}const V=ge=>{if(j.length===1&&ge.tokenType.PUSH_MODE===void 0){const Ie=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(ge);L.push({offset:ge.startOffset,line:ge.startLine,column:ge.startColumn,length:ge.image.length,message:Ie})}else{j.pop();const Ie=Mh(j);Y=this.patternIdxToConfig[Ie],$=this.charCodeToPatternIdxToConfig[Ie],q=Y.length;const Ne=this.canModeBeOptimized[Ie]&&this.config.safeMode===!1;$&&Ne?Q=O:Q=U}};function me(ge){j.push(ge),$=this.charCodeToPatternIdxToConfig[ge],Y=this.patternIdxToConfig[ge],q=Y.length,q=Y.length;const Ie=this.canModeBeOptimized[ge]&&this.config.safeMode===!1;$&&Ie?Q=O:Q=U}me.call(this,n);let re;const xe=this.config.recoveryEnabled;for(;C<y;){l=null;const ge=x.charCodeAt(C),Ie=Q(ge),Ne=Ie.length;for(i=0;i<Ne;i++){re=Ie[i];const $e=re.pattern;u=null;const ct=re.short;if(ct!==!1?ge===ct&&(l=$e):re.isCustom===!0?(m=$e.exec(x,C,w,F),m!==null?(l=m[0],m.payload!==void 0&&(u=m.payload)):l=null):(this.updateLastIndex($e,C),l=this.match($e,e,C)),l!==null){if(a=re.longerAlt,a!==void 0){const De=a.length;for(s=0;s<De;s++){const W=Y[a[s]],ve=W.pattern;if(h=null,W.isCustom===!0?(m=ve.exec(x,C,w,F),m!==null?(o=m[0],m.payload!==void 0&&(h=m.payload)):o=null):(this.updateLastIndex(ve,C),o=this.match(ve,e,C)),o&&o.length>l.length){l=o,u=h,re=W;break}}}break}}if(l!==null){if(d=l.length,p=re.group,p!==void 0&&(A=re.tokenTypeIdx,g=this.createTokenInstance(l,C,A,re.tokenType,R,B,d),this.handlePayload(g,u),p===!1?I=this.addToken(w,I,g):F[p].push(g)),e=this.chopInput(e,d),C=C+d,B=this.computeNewColumn(B,d),X===!0&&re.canLineTerminator===!0){let $e=0,ct,De;G.lastIndex=0;do ct=G.test(l),ct===!0&&(De=G.lastIndex-1,$e++);while(ct===!0);$e!==0&&(R=R+$e,B=d-De,this.updateTokenEndLineColumnLocation(g,p,De,$e,R,B,d))}this.handleModes(re,V,me,g)}else{const $e=C,ct=R,De=B;let W=xe===!1;for(;W===!1&&C<y;)for(e=this.chopInput(e,1),C++,r=0;r<q;r++){const ve=Y[r],Ae=ve.pattern,Se=ve.short;if(Se!==!1?x.charCodeAt(C)===Se&&(W=!0):ve.isCustom===!0?W=Ae.exec(x,C,w,F)!==null:(this.updateLastIndex(Ae,C),W=Ae.exec(e)!==null),W===!0)break}if(S=C-$e,B=this.computeNewColumn(B,S),E=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(x,$e,S,ct,De),L.push({offset:$e,line:ct,column:De,length:S,message:E}),xe===!1)break}}return this.hasCustom||(w.length=I),{tokens:w,groups:F,errors:L}}handleModes(e,n,i,r){if(e.pop===!0){const s=e.push;n(r),s!==void 0&&i.call(this,s)}else e.push!==void 0&&i.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,i,r,s,o,a){let l,u;n!==void 0&&(l=i===a-1,u=l?-1:0,r===1&&l===!0||(e.endLine=s+u,e.endColumn=o-1+-u))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,i,r){return{image:e,startOffset:n,tokenTypeIdx:i,tokenType:r}}createStartOnlyToken(e,n,i,r,s,o){return{image:e,startOffset:n,startLine:s,startColumn:o,tokenTypeIdx:i,tokenType:r}}createFullToken(e,n,i,r,s,o,a){return{image:e,startOffset:n,endOffset:n+a-1,startLine:s,endLine:s,startColumn:o,endColumn:o+a-1,tokenTypeIdx:i,tokenType:r}}addTokenUsingPush(e,n,i){return e.push(i),n}addTokenUsingMemberAccess(e,n,i){return e[n]=i,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,i){return e.test(n)===!0?n.substring(i,e.lastIndex):null}matchWithExec(e,n){const i=e.exec(n);return i!==null?i[0]:null}}ls.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";ls.NA=/NOT_APPLICABLE/;function Ad(t){return ab(t)?t.LABEL:t.name}function ab(t){return hr(t.LABEL)&&t.LABEL!==""}const ete="parent",M_="categories",R_="label",b_="group",B_="push_mode",L_="pop_mode",P_="longer_alt",D_="line_breaks",N_="start_chars_hint";function lb(t){return tte(t)}function tte(t){const e=t.pattern,n={};if(n.name=t.name,la(e)||(n.PATTERN=e),ut(t,ete))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return ut(t,M_)&&(n.CATEGORIES=t[M_]),kp([n]),ut(t,R_)&&(n.LABEL=t[R_]),ut(t,b_)&&(n.GROUP=t[b_]),ut(t,L_)&&(n.POP_MODE=t[L_]),ut(t,B_)&&(n.PUSH_MODE=t[B_]),ut(t,P_)&&(n.LONGER_ALT=t[P_]),ut(t,D_)&&(n.LINE_BREAKS=t[D_]),ut(t,N_)&&(n.START_CHARS_HINT=t[N_]),n}const Mu=lb({name:"EOF",pattern:ls.NA});kp([Mu]);function dy(t,e,n,i,r,s,o,a){return{image:e,startOffset:n,endOffset:i,startLine:r,endLine:s,startColumn:o,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function nte(t,e){return Op(t,e)}const ub={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:i}){return`Expecting ${ab(t)?`--> ${Ad(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:i,ruleName:r}){const s="Expecting: ",a=`
but found: '`+zs(e).image+"'";if(i)return s+i+a;{const l=Dr(t,(p,A)=>p.concat(A),[]),u=it(l,p=>`[${it(p,A=>Ad(A)).join(", ")}]`),d=`one of these possible Token sequences:
${it(u,(p,A)=>`  ${A+1}. ${p}`).join(`
`)}`;return s+d+a}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:i}){const r="Expecting: ",o=`
but found: '`+zs(e).image+"'";if(n)return r+n+o;{const l=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${it(t,u=>`[${it(u,h=>Ad(h)).join(",")}]`).join(" ,")}>`;return r+l+o}}};Object.freeze(ub);const ite={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},uu={buildDuplicateFoundError(t,e){function n(h){return h instanceof In?h.terminalType.name:h instanceof Nr?h.nonTerminalName:""}const i=t.name,r=zs(e),s=r.idx,o=lo(r),a=n(r),l=s>0;let u=`->${o}${l?s:""}<- ${a?`with argument: ->${a}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${i}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=it(t.prefixPath,r=>Ad(r)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=it(t.prefixPath,r=>Ad(r)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;let i=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return i=i+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,i},buildEmptyRepetitionError(t){let e=lo(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,n=it(t.leftRecursionPath,s=>s.name),i=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${i}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Hh?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function rte(t,e){const n=new ste(t,e);return n.resolveRefs(),n.errors}class ste extends Vh{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){ht(ti(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const i=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:i,type:ji.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class ote extends O2{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=ki(this.path.ruleStack).reverse(),this.occurrenceStack=ki(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,i){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const r=n.concat(i);this.updateExpectedNext(),this.walk(e.referencedRule,r)}}updateExpectedNext(){un(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class ate extends ote{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,i){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const r=n.concat(i),s=new fr({definition:r});this.possibleTokTypes=Up(s),this.found=!0}}}class Q2 extends O2{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class lte extends Q2{walkMany(e,n,i){if(e.idx===this.occurrence){const r=zs(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof In&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkMany(e,n,i)}}class F_ extends Q2{walkManySep(e,n,i){if(e.idx===this.occurrence){const r=zs(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof In&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkManySep(e,n,i)}}class ute extends Q2{walkAtLeastOne(e,n,i){if(e.idx===this.occurrence){const r=zs(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof In&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOne(e,n,i)}}class U_ extends Q2{walkAtLeastOneSep(e,n,i){if(e.idx===this.occurrence){const r=zs(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof In&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOneSep(e,n,i)}}function k6(t,e,n=[]){n=ki(n);let i=[],r=0;function s(a){return a.concat(vi(t,r+1))}function o(a){const l=k6(s(a),e,n);return i.concat(l)}for(;n.length<e&&r<t.length;){const a=t[r];if(a instanceof fr)return o(a.definition);if(a instanceof Nr)return o(a.definition);if(a instanceof cr)i=o(a.definition);else if(a instanceof bo){const l=a.definition.concat([new ii({definition:a.definition})]);return o(l)}else if(a instanceof Bo){const l=[new fr({definition:a.definition}),new ii({definition:[new In({terminalType:a.separator})].concat(a.definition)})];return o(l)}else if(a instanceof Ks){const l=a.definition.concat([new ii({definition:[new In({terminalType:a.separator})].concat(a.definition)})]);i=o(l)}else if(a instanceof ii){const l=a.definition.concat([new ii({definition:a.definition})]);i=o(l)}else{if(a instanceof js)return ht(a.definition,l=>{un(l.definition)===!1&&(i=o(l.definition))}),i;if(a instanceof In)n.push(a.terminalType);else throw Error("non exhaustive match")}r++}return i.push({partialPath:n,suffixDef:vi(t,r)}),i}function cb(t,e,n,i){const r="EXIT_NONE_TERMINAL",s=[r],o="EXIT_ALTERNATIVE";let a=!1;const l=e.length,u=l-i-1,h=[],d=[];for(d.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!un(d);){const p=d.pop();if(p===o){a&&Mh(d).idx<=u&&d.pop();continue}const A=p.def,g=p.idx,S=p.ruleStack,E=p.occurrenceStack;if(un(A))continue;const m=A[0];if(m===r){const x={idx:g,def:vi(A),ruleStack:ap(S),occurrenceStack:ap(E)};d.push(x)}else if(m instanceof In)if(g<l-1){const x=g+1,y=e[x];if(n(y,m.terminalType)){const C={idx:x,def:vi(A),ruleStack:S,occurrenceStack:E};d.push(C)}}else if(g===l-1)h.push({nextTokenType:m.terminalType,nextTokenOccurrence:m.idx,ruleStack:S,occurrenceStack:E}),a=!0;else throw Error("non exhaustive match");else if(m instanceof Nr){const x=ki(S);x.push(m.nonTerminalName);const y=ki(E);y.push(m.idx);const C={idx:g,def:m.definition.concat(s,vi(A)),ruleStack:x,occurrenceStack:y};d.push(C)}else if(m instanceof cr){const x={idx:g,def:vi(A),ruleStack:S,occurrenceStack:E};d.push(x),d.push(o);const y={idx:g,def:m.definition.concat(vi(A)),ruleStack:S,occurrenceStack:E};d.push(y)}else if(m instanceof bo){const x=new ii({definition:m.definition,idx:m.idx}),y=m.definition.concat([x],vi(A)),C={idx:g,def:y,ruleStack:S,occurrenceStack:E};d.push(C)}else if(m instanceof Bo){const x=new In({terminalType:m.separator}),y=new ii({definition:[x].concat(m.definition),idx:m.idx}),C=m.definition.concat([y],vi(A)),I={idx:g,def:C,ruleStack:S,occurrenceStack:E};d.push(I)}else if(m instanceof Ks){const x={idx:g,def:vi(A),ruleStack:S,occurrenceStack:E};d.push(x),d.push(o);const y=new In({terminalType:m.separator}),C=new ii({definition:[y].concat(m.definition),idx:m.idx}),I=m.definition.concat([C],vi(A)),M={idx:g,def:I,ruleStack:S,occurrenceStack:E};d.push(M)}else if(m instanceof ii){const x={idx:g,def:vi(A),ruleStack:S,occurrenceStack:E};d.push(x),d.push(o);const y=new ii({definition:m.definition,idx:m.idx}),C=m.definition.concat([y],vi(A)),I={idx:g,def:C,ruleStack:S,occurrenceStack:E};d.push(I)}else if(m instanceof js)for(let x=m.definition.length-1;x>=0;x--){const y=m.definition[x],C={idx:g,def:y.definition.concat(vi(A)),ruleStack:S,occurrenceStack:E};d.push(C),d.push(o)}else if(m instanceof fr)d.push({idx:g,def:m.definition.concat(vi(A)),ruleStack:S,occurrenceStack:E});else if(m instanceof Hh)d.push(cte(m,g,S,E));else throw Error("non exhaustive match")}return h}function cte(t,e,n,i){const r=ki(n);r.push(t.name);const s=ki(i);return s.push(1),{idx:e,def:t.definition,ruleStack:r,occurrenceStack:s}}var Fn;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(Fn||(Fn={}));function hb(t){if(t instanceof cr||t==="Option")return Fn.OPTION;if(t instanceof ii||t==="Repetition")return Fn.REPETITION;if(t instanceof bo||t==="RepetitionMandatory")return Fn.REPETITION_MANDATORY;if(t instanceof Bo||t==="RepetitionMandatoryWithSeparator")return Fn.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Ks||t==="RepetitionWithSeparator")return Fn.REPETITION_WITH_SEPARATOR;if(t instanceof js||t==="Alternation")return Fn.ALTERNATION;throw Error("non exhaustive match")}function hte(t,e,n,i,r,s){const o=py(t,e,n),a=pb(o)?ym:Op;return s(o,i,a,r)}function fte(t,e,n,i,r,s){const o=Ay(t,e,r,n),a=pb(o)?ym:Op;return s(o[0],a,i)}function dte(t,e,n,i){const r=t.length,s=Fs(t,o=>Fs(o,a=>a.length===1));if(e)return function(o){const a=it(o,l=>l.GATE);for(let l=0;l<r;l++){const u=t[l],h=u.length,d=a[l];if(!(d!==void 0&&d.call(this)===!1))e:for(let p=0;p<h;p++){const A=u[p],g=A.length;for(let S=0;S<g;S++){const E=this.LA(S+1);if(n(E,A[S])===!1)continue e}return l}}};if(s&&!i){const o=it(t,l=>Ns(l)),a=Dr(o,(l,u,h)=>(ht(u,d=>{ut(l,d.tokenTypeIdx)||(l[d.tokenTypeIdx]=h),ht(d.categoryMatches,p=>{ut(l,p)||(l[p]=h)})}),l),{});return function(){const l=this.LA(1);return a[l.tokenTypeIdx]}}else return function(){for(let o=0;o<r;o++){const a=t[o],l=a.length;e:for(let u=0;u<l;u++){const h=a[u],d=h.length;for(let p=0;p<d;p++){const A=this.LA(p+1);if(n(A,h[p])===!1)continue e}return o}}}}function pte(t,e,n){const i=Fs(t,s=>s.length===1),r=t.length;if(i&&!n){const s=Ns(t);if(s.length===1&&un(s[0].categoryMatches)){const a=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}else{const o=Dr(s,(a,l,u)=>(a[l.tokenTypeIdx]=!0,ht(l.categoryMatches,h=>{a[h]=!0}),a),[]);return function(){const a=this.LA(1);return o[a.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<r;s++){const o=t[s],a=o.length;for(let l=0;l<a;l++){const u=this.LA(l+1);if(e(u,o[l])===!1)continue e}return!0}return!1}}class Ate extends O2{constructor(e,n,i){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=i}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,i,r){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=i.concat(r),!0):!1}walkOption(e,n,i){this.checkIsTarget(e,Fn.OPTION,n,i)||super.walkOption(e,n,i)}walkAtLeastOne(e,n,i){this.checkIsTarget(e,Fn.REPETITION_MANDATORY,n,i)||super.walkOption(e,n,i)}walkAtLeastOneSep(e,n,i){this.checkIsTarget(e,Fn.REPETITION_MANDATORY_WITH_SEPARATOR,n,i)||super.walkOption(e,n,i)}walkMany(e,n,i){this.checkIsTarget(e,Fn.REPETITION,n,i)||super.walkOption(e,n,i)}walkManySep(e,n,i){this.checkIsTarget(e,Fn.REPETITION_WITH_SEPARATOR,n,i)||super.walkOption(e,n,i)}}class fb extends Vh{constructor(e,n,i){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=i,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Fn.OPTION)}visitRepetition(e){this.checkIsTarget(e,Fn.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Fn.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Fn.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Fn.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Fn.ALTERNATION)}}function O_(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function P5(t){let e=[""];for(let n=0;n<t.length;n++){const i=t[n],r=[];for(let s=0;s<e.length;s++){const o=e[s];r.push(o+"_"+i.tokenTypeIdx);for(let a=0;a<i.categoryMatches.length;a++){const l="_"+i.categoryMatches[a];r.push(o+l)}}e=r}return e}function mte(t,e,n){for(let i=0;i<t.length;i++){if(i===n)continue;const r=t[i];for(let s=0;s<e.length;s++){const o=e[s];if(r[o]===!0)return!1}}return!0}function db(t,e){const n=it(t,o=>k6([o],1)),i=O_(n.length),r=it(n,o=>{const a={};return ht(o,l=>{const u=P5(l.partialPath);ht(u,h=>{a[h]=!0})}),a});let s=n;for(let o=1;o<=e;o++){const a=s;s=O_(a.length);for(let l=0;l<a.length;l++){const u=a[l];for(let h=0;h<u.length;h++){const d=u[h].partialPath,p=u[h].suffixDef,A=P5(d);if(mte(r,A,l)||un(p)||d.length===e){const S=i[l];if(Q6(S,d)===!1){S.push(d);for(let E=0;E<A.length;E++){const m=A[E];r[l][m]=!0}}}else{const S=k6(p,o+1,d);s[l]=s[l].concat(S),ht(S,E=>{const m=P5(E.partialPath);ht(m,x=>{r[l][x]=!0})})}}}}return i}function py(t,e,n,i){const r=new fb(t,Fn.ALTERNATION,i);return e.accept(r),db(r.result,n)}function Ay(t,e,n,i){const r=new fb(t,n);e.accept(r);const s=r.result,a=new Ate(e,t,n).startWalking(),l=new fr({definition:s}),u=new fr({definition:a});return db([l,u],i)}function Q6(t,e){e:for(let n=0;n<t.length;n++){const i=t[n];if(i.length===e.length){for(let r=0;r<i.length;r++){const s=e[r],o=i[r];if((s===o||o.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function gte(t,e){return t.length<e.length&&Fs(t,(n,i)=>{const r=e[i];return n===r||r.categoryMatchesMap[n.tokenTypeIdx]})}function pb(t){return Fs(t,e=>Fs(e,n=>Fs(n,i=>un(i.categoryMatches))))}function vte(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return it(e,n=>Object.assign({type:ji.CUSTOM_LOOKAHEAD_VALIDATION},n))}function yte(t,e,n,i){const r=as(t,l=>xte(l,n)),s=Lte(t,e,n),o=as(t,l=>Mte(l,n)),a=as(t,l=>_te(l,t,i,n));return r.concat(s,o,a)}function xte(t,e){const n=new Ste;t.accept(n);const i=n.allProductions,r=b$(i,Ete),s=Ys(r,a=>a.length>1);return it(ti(s),a=>{const l=zs(a),u=e.buildDuplicateFoundError(t,a),h=lo(l),d={message:u,type:ji.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:h,occurrence:l.idx},p=Ab(l);return p&&(d.parameter=p),d})}function Ete(t){return`${lo(t)}_#_${t.idx}_#_${Ab(t)}`}function Ab(t){return t instanceof In?t.terminalType.name:t instanceof Nr?t.nonTerminalName:""}class Ste extends Vh{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function _te(t,e,n,i){const r=[];if(Dr(e,(o,a)=>a.name===t.name?o+1:o,0)>1){const o=i.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});r.push({message:o,type:ji.DUPLICATE_RULE_NAME,ruleName:t.name})}return r}function Cte(t,e,n){const i=[];let r;return $i(e,t)||(r=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,i.push({message:r,type:ji.INVALID_RULE_OVERRIDE,ruleName:t})),i}function mb(t,e,n,i=[]){const r=[],s=MA(e.definition);if(un(s))return[];{const o=t.name;$i(s,t)&&r.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:i}),type:ji.LEFT_RECURSION,ruleName:o});const l=F2(s,i.concat([t])),u=as(l,h=>{const d=ki(i);return d.push(h),mb(t,h,n,d)});return r.concat(u)}}function MA(t){let e=[];if(un(t))return e;const n=zs(t);if(n instanceof Nr)e.push(n.referencedRule);else if(n instanceof fr||n instanceof cr||n instanceof bo||n instanceof Bo||n instanceof Ks||n instanceof ii)e=e.concat(MA(n.definition));else if(n instanceof js)e=Ns(it(n.definition,s=>MA(s.definition)));else if(!(n instanceof In))throw Error("non exhaustive match");const i=Am(n),r=t.length>1;if(i&&r){const s=vi(t);return e.concat(MA(s))}else return e}class my extends Vh{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function Tte(t,e){const n=new my;t.accept(n);const i=n.alternations;return as(i,s=>{const o=ap(s.definition);return as(o,(a,l)=>{const u=cb([a],[],Op,1);return un(u)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:l}),type:ji.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:l+1}]:[]})})}function Ite(t,e,n){const i=new my;t.accept(i);let r=i.alternations;return r=U2(r,o=>o.ignoreAmbiguities===!0),as(r,o=>{const a=o.idx,l=o.maxLookahead||e,u=py(a,t,l,o),h=bte(u,o,t,n),d=Bte(u,o,t,n);return h.concat(d)})}class wte extends Vh{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function Mte(t,e){const n=new my;t.accept(n);const i=n.alternations;return as(i,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:ji.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function Rte(t,e,n){const i=[];return ht(t,r=>{const s=new wte;r.accept(s);const o=s.allProductions;ht(o,a=>{const l=hb(a),u=a.maxLookahead||e,h=a.idx,p=Ay(h,r,l,u)[0];if(un(Ns(p))){const A=n.buildEmptyRepetitionError({topLevelRule:r,repetition:a});i.push({message:A,type:ji.NO_NON_EMPTY_LOOKAHEAD,ruleName:r.name})}})}),i}function bte(t,e,n,i){const r=[],s=Dr(t,(a,l,u)=>(e.definition[u].ignoreAmbiguities===!0||ht(l,h=>{const d=[u];ht(t,(p,A)=>{u!==A&&Q6(p,h)&&e.definition[A].ignoreAmbiguities!==!0&&d.push(A)}),d.length>1&&!Q6(r,h)&&(r.push(h),a.push({alts:d,path:h}))}),a),[]);return it(s,a=>{const l=it(a.alts,h=>h+1);return{message:i.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:l,prefixPath:a.path}),type:ji.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:a.alts}})}function Bte(t,e,n,i){const r=Dr(t,(o,a,l)=>{const u=it(a,h=>({idx:l,path:h}));return o.concat(u)},[]);return Fp(as(r,o=>{if(e.definition[o.idx].ignoreAmbiguities===!0)return[];const l=o.idx,u=o.path,h=gs(r,p=>e.definition[p.idx].ignoreAmbiguities!==!0&&p.idx<l&&gte(p.path,u));return it(h,p=>{const A=[p.idx+1,l+1],g=e.idx===0?"":e.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:A,prefixPath:p.path}),type:ji.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:g,alternatives:A}})}))}function Lte(t,e,n){const i=[],r=it(e,s=>s.name);return ht(t,s=>{const o=s.name;if($i(r,o)){const a=n.buildNamespaceConflictError(s);i.push({message:a,type:ji.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:o})}}),i}function Pte(t){const e=uy(t,{errMsgProvider:ite}),n={};return ht(t.rules,i=>{n[i.name]=i}),rte(n,e.errMsgProvider)}function Dte(t){return t=uy(t,{errMsgProvider:uu}),yte(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const gb="MismatchedTokenException",vb="NoViableAltException",yb="EarlyExitException",xb="NotAllInputParsedException",Eb=[gb,vb,yb,xb];Object.freeze(Eb);function xm(t){return $i(Eb,t.name)}class G2 extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Sb extends G2{constructor(e,n,i){super(e,n),this.previousToken=i,this.name=gb}}class Nte extends G2{constructor(e,n,i){super(e,n),this.previousToken=i,this.name=vb}}class Fte extends G2{constructor(e,n){super(e,n),this.name=xb}}class Ute extends G2{constructor(e,n,i){super(e,n),this.previousToken=i,this.name=yb}}const D5={},_b="InRuleRecoveryException";class Ote extends Error{constructor(e){super(e),this.name=_b}}class kte{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=ut(e,"recoveryEnabled")?e.recoveryEnabled:pl.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Qte)}getTokenToInsert(e){const n=dy(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,i,r){const s=this.findReSyncTokenType(),o=this.exportLexerState(),a=[];let l=!1;const u=this.LA(1);let h=this.LA(1);const d=()=>{const p=this.LA(0),A=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:u,previous:p,ruleName:this.getCurrRuleFullName()}),g=new Sb(A,u,this.LA(0));g.resyncedTokens=ap(a),this.SAVE_ERROR(g)};for(;!l;)if(this.tokenMatcher(h,r)){d();return}else if(i.call(this)){d(),e.apply(this,n);return}else this.tokenMatcher(h,s)?l=!0:(h=this.SKIP_TOKEN(),this.addToResyncTokens(h,a));this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(e,n,i){return!(i===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const i=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(i)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const i=this.SKIP_TOKEN();return this.consumeToken(),i}throw new Ote("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||un(n))return!1;const i=this.LA(1);return Rh(n,s=>this.tokenMatcher(i,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),i=this.getFollowSetFromFollowKey(n);return $i(i,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),i=2;for(;;){const r=Rh(e,s=>nte(n,s));if(r!==void 0)return r;n=this.LA(i),i++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return D5;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),i=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(i)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return it(e,(i,r)=>r===0?D5:{ruleName:this.shortRuleNameToFullName(i),idxInCallingRule:n[r],inRule:this.shortRuleNameToFullName(e[r-1])})}flattenFollowSet(){const e=it(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return Ns(e)}getFollowSetFromFollowKey(e){if(e===D5)return[Mu];const n=e.ruleName+e.idxInCallingRule+ZR+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,Mu)||n.push(e),n}reSyncTo(e){const n=[];let i=this.LA(1);for(;this.tokenMatcher(i,e)===!1;)i=this.SKIP_TOKEN(),this.addToResyncTokens(i,n);return ap(n)}attemptInRepetitionRecovery(e,n,i,r,s,o,a){}getCurrentGrammarPath(e,n){const i=this.getHumanReadableRuleStack(),r=ki(this.RULE_OCCURRENCE_STACK);return{ruleStack:i,occurrenceStack:r,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return it(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function Qte(t,e,n,i,r,s,o){const a=this.getKeyForAutomaticLookahead(i,r);let l=this.firstAfterRepMap[a];if(l===void 0){const p=this.getCurrRuleFullName(),A=this.getGAstProductions()[p];l=new s(A,r).startWalking(),this.firstAfterRepMap[a]=l}let u=l.token,h=l.occurrence;const d=l.isEndOfRule;this.RULE_STACK.length===1&&d&&u===void 0&&(u=Mu,h=1),!(u===void 0||h===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,h,o)&&this.tryInRepetitionRecovery(t,e,n,u)}const Gte=4,Tl=8,Cb=1<<Tl,Tb=2<<Tl,G6=3<<Tl,z6=4<<Tl,H6=5<<Tl,RA=6<<Tl;function N5(t,e,n){return n|e|t}class zte{constructor(e){var n;this.maxLookahead=(n=e==null?void 0:e.maxLookahead)!==null&&n!==void 0?n:pl.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(un(n)){const i=this.validateEmptyOrAlternatives(e.rules),r=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...i,...r,...s]}return n}validateNoLeftRecursion(e){return as(e,n=>mb(n,n,uu))}validateEmptyOrAlternatives(e){return as(e,n=>Tte(n,uu))}validateAmbiguousAlternationAlternatives(e,n){return as(e,i=>Ite(i,n,uu))}validateSomeNonEmptyLookaheadPath(e,n){return Rte(e,n,uu)}buildLookaheadForAlternation(e){return hte(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,dte)}buildLookaheadForOptional(e){return fte(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,hb(e.prodType),pte)}}class Hte{initLooksAhead(e){this.dynamicTokensEnabled=ut(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:pl.dynamicTokensEnabled,this.maxLookahead=ut(e,"maxLookahead")?e.maxLookahead:pl.maxLookahead,this.lookaheadStrategy=ut(e,"lookaheadStrategy")?e.lookaheadStrategy:new zte({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ht(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:i,repetition:r,option:s,repetitionMandatory:o,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:l}=Wte(n);ht(i,u=>{const h=u.idx===0?"":u.idx;this.TRACE_INIT(`${lo(u)}${h}`,()=>{const d=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:n,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),p=N5(this.fullRuleNameToShort[n.name],Cb,u.idx);this.setLaFuncCache(p,d)})}),ht(r,u=>{this.computeLookaheadFunc(n,u.idx,G6,"Repetition",u.maxLookahead,lo(u))}),ht(s,u=>{this.computeLookaheadFunc(n,u.idx,Tb,"Option",u.maxLookahead,lo(u))}),ht(o,u=>{this.computeLookaheadFunc(n,u.idx,z6,"RepetitionMandatory",u.maxLookahead,lo(u))}),ht(a,u=>{this.computeLookaheadFunc(n,u.idx,RA,"RepetitionMandatoryWithSeparator",u.maxLookahead,lo(u))}),ht(l,u=>{this.computeLookaheadFunc(n,u.idx,H6,"RepetitionWithSeparator",u.maxLookahead,lo(u))})})})}computeLookaheadFunc(e,n,i,r,s,o){this.TRACE_INIT(`${o}${n===0?"":n}`,()=>{const a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),l=N5(this.fullRuleNameToShort[e.name],i,n);this.setLaFuncCache(l,a)})}getKeyForAutomaticLookahead(e,n){const i=this.getLastExplicitRuleShortName();return N5(i,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}}class Vte extends Vh{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const nA=new Vte;function Wte(t){nA.reset(),t.accept(nA);const e=nA.dslMethods;return nA.reset(),e}function k_(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function Q_(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function Xte(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function qte(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}const Yte="name";function Ib(t,e){Object.defineProperty(t,Yte,{enumerable:!1,configurable:!0,writable:!1,value:e})}function Kte(t,e){const n=Lr(t),i=n.length;for(let r=0;r<i;r++){const s=n[r],o=t[s],a=o.length;for(let l=0;l<a;l++){const u=o[l];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}function jte(t,e){const n=function(){};Ib(n,t+"BaseSemantics");const i={visit:function(r,s){if(Wt(r)&&(r=r[0]),!la(r))return this[r.name](r.children,s)},validateVisitor:function(){const r=Zte(this,e);if(!un(r)){const s=it(r,o=>o.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=i,n.prototype.constructor=n,n._RULE_NAMES=e,n}function Jte(t,e,n){const i=function(){};Ib(i,t+"BaseSemanticsWithDefaults");const r=Object.create(n.prototype);return ht(e,s=>{r[s]=Kte}),i.prototype=r,i.prototype.constructor=i,i}var V6;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(V6||(V6={}));function Zte(t,e){return $te(t,e)}function $te(t,e){const n=gs(e,r=>da(t[r])===!1),i=it(n,r=>({msg:`Missing visitor method: <${r}> on ${t.constructor.name} CST Visitor.`,type:V6.MISSING_METHOD,methodName:r}));return Fp(i)}class ene{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=ut(e,"nodeLocationTracking")?e.nodeLocationTracking:pl.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=$n,this.cstFinallyStateUpdate=$n,this.cstPostTerminal=$n,this.cstPostNonTerminal=$n,this.cstPostRule=$n;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Q_,this.setNodeLocationFromNode=Q_,this.cstPostRule=$n,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=$n,this.setNodeLocationFromNode=$n,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=k_,this.setNodeLocationFromNode=k_,this.cstPostRule=$n,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=$n,this.setNodeLocationFromNode=$n,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=$n,this.setNodeLocationFromNode=$n,this.cstPostRule=$n,this.setInitialNodeLocation=$n;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),i=e.location;i.startOffset<=n.startOffset?(i.endOffset=n.endOffset,i.endLine=n.endLine,i.endColumn=n.endColumn):(i.startOffset=NaN,i.startLine=NaN,i.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),i=e.location;i.startOffset<=n.startOffset?i.endOffset=n.endOffset:i.startOffset=NaN}cstPostTerminal(e,n){const i=this.CST_STACK[this.CST_STACK.length-1];Xte(i,n,e),this.setNodeLocationFromToken(i.location,n)}cstPostNonTerminal(e,n){const i=this.CST_STACK[this.CST_STACK.length-1];qte(i,n,e),this.setNodeLocationFromNode(i.location,e.location)}getBaseCstVisitorConstructor(){if(la(this.baseCstVisitorConstructor)){const e=jte(this.className,Lr(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(la(this.baseCstVisitorWithDefaultsConstructor)){const e=Jte(this.className,Lr(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class tne{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Sm}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?Sm:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class nne{ACTION(e){return e.call(this)}consume(e,n,i){return this.consumeInternal(n,e,i)}subrule(e,n,i){return this.subruleInternal(n,e,i)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,i=_m){if($i(this.definedRulesNames,e)){const o={message:uu.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ji.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(o)}this.definedRulesNames.push(e);const r=this.defineRule(e,n,i);return this[e]=r,r}OVERRIDE_RULE(e,n,i=_m){const r=Cte(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);const s=this.defineRule(e,n,i);return this[e]=s,s}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const i=this.saveRecogState();try{return e.apply(this,n),!0}catch(r){if(xm(r))return!1;throw r}finally{this.reloadRecogState(i),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return ree(ti(this.gastProductionsCache))}}class ine{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=ym,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},ut(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Wt(e)){if(un(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Wt(e))this.tokensMap=Dr(e,(s,o)=>(s[o.name]=o,s),{});else if(ut(e,"modes")&&Fs(Ns(ti(e.modes)),Zee)){const s=Ns(ti(e.modes)),o=cy(s);this.tokensMap=Dr(o,(a,l)=>(a[l.name]=l,a),{})}else if(ps(e))this.tokensMap=ki(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Mu;const i=ut(e,"modes")?Ns(ti(e.modes)):ti(e),r=Fs(i,s=>un(s.categoryMatches));this.tokenMatcher=r?ym:Op,kp(ti(this.tokensMap))}defineRule(e,n,i){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const r=ut(i,"resyncEnabled")?i.resyncEnabled:_m.resyncEnabled,s=ut(i,"recoveryValueFunc")?i.recoveryValueFunc:_m.recoveryValueFunc,o=this.ruleShortNameIdx<<Gte+Tl;this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o;let a;return this.outputCst===!0?a=function(...h){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx),n.apply(this,h);const d=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(d),d}catch(d){return this.invokeRuleCatch(d,r,s)}finally{this.ruleFinallyStateUpdate()}}:a=function(...h){try{return this.ruleInvocationStateUpdate(o,e,this.subruleIdx),n.apply(this,h)}catch(d){return this.invokeRuleCatch(d,r,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(a,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,i){const r=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(xm(e)){const o=e;if(s){const a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))if(o.resyncedTokens=this.reSyncTo(a),this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return i(e);else{if(this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,o.partialCstResult=l}throw o}}else{if(r)return this.moveToTerminatedState(),i(e);throw o}}else throw e}optionInternal(e,n){const i=this.getKeyForAutomaticLookahead(Tb,n);return this.optionInternalLogic(e,n,i)}optionInternalLogic(e,n,i){let r=this.getLaFuncFromCache(i),s;if(typeof e!="function"){s=e.DEF;const o=e.GATE;if(o!==void 0){const a=r;r=()=>o.call(this)&&a.call(this)}}else s=e;if(r.call(this)===!0)return s.call(this)}atLeastOneInternal(e,n){const i=this.getKeyForAutomaticLookahead(z6,e);return this.atLeastOneInternalLogic(e,n,i)}atLeastOneInternalLogic(e,n,i){let r=this.getLaFuncFromCache(i),s;if(typeof n!="function"){s=n.DEF;const o=n.GATE;if(o!==void 0){const a=r;r=()=>o.call(this)&&a.call(this)}}else s=n;if(r.call(this)===!0){let o=this.doSingleRepetition(s);for(;r.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,Fn.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],r,z6,e,ute)}atLeastOneSepFirstInternal(e,n){const i=this.getKeyForAutomaticLookahead(RA,e);this.atLeastOneSepFirstInternalLogic(e,n,i)}atLeastOneSepFirstInternalLogic(e,n,i){const r=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){r.call(this);const a=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,a,r,U_],a,RA,e,U_)}else throw this.raiseEarlyExitException(e,Fn.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const i=this.getKeyForAutomaticLookahead(G6,e);return this.manyInternalLogic(e,n,i)}manyInternalLogic(e,n,i){let r=this.getLaFuncFromCache(i),s;if(typeof n!="function"){s=n.DEF;const a=n.GATE;if(a!==void 0){const l=r;r=()=>a.call(this)&&l.call(this)}}else s=n;let o=!0;for(;r.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],r,G6,e,lte,o)}manySepFirstInternal(e,n){const i=this.getKeyForAutomaticLookahead(H6,e);this.manySepFirstInternalLogic(e,n,i)}manySepFirstInternalLogic(e,n,i){const r=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){r.call(this);const a=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,a,r,F_],a,H6,e,F_)}}repetitionSepSecondInternal(e,n,i,r,s){for(;i();)this.CONSUME(n),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,i,r,s],i,RA,e,s)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const i=this.getKeyForAutomaticLookahead(Cb,n),r=Wt(e)?e:e.DEF,o=this.getLaFuncFromCache(i).call(this,r);if(o!==void 0)return r[o].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Fte(n,e))}}subruleInternal(e,n,i){let r;try{const s=i!==void 0?i.ARGS:void 0;return this.subruleIdx=n,r=e.apply(this,s),this.cstPostNonTerminal(r,i!==void 0&&i.LABEL!==void 0?i.LABEL:e.ruleName),r}catch(s){throw this.subruleInternalError(s,i,e.ruleName)}}subruleInternalError(e,n,i){throw xm(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:i),delete e.partialCstResult),e}consumeInternal(e,n,i){let r;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),r=s):this.consumeInternalError(e,s,i)}catch(s){r=this.consumeInternalRecovery(e,n,s)}return this.cstPostTerminal(i!==void 0&&i.LABEL!==void 0?i.LABEL:e.name,r),r}consumeInternalError(e,n,i){let r;const s=this.LA(0);throw i!==void 0&&i.ERR_MSG?r=i.ERR_MSG:r=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Sb(r,n,s))}consumeInternalRecovery(e,n,i){if(this.recoveryEnabled&&i.name==="MismatchedTokenException"&&!this.isBackTracking()){const r=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,r)}catch(s){throw s.name===_b?i:s}}else throw i}saveRecogState(){const e=this.errors,n=ki(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,i){this.RULE_OCCURRENCE_STACK.push(i),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Mu)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class rne{initErrorHandler(e){this._errors=[],this.errorMessageProvider=ut(e,"errorMessageProvider")?e.errorMessageProvider:pl.errorMessageProvider}SAVE_ERROR(e){if(xm(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:ki(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return ki(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,i){const r=this.getCurrRuleFullName(),s=this.getGAstProductions()[r],a=Ay(e,s,n,this.maxLookahead)[0],l=[];for(let h=1;h<=this.maxLookahead;h++)l.push(this.LA(h));const u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:l,previous:this.LA(0),customUserDescription:i,ruleName:r});throw this.SAVE_ERROR(new Ute(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const i=this.getCurrRuleFullName(),r=this.getGAstProductions()[i],s=py(e,r,this.maxLookahead),o=[];for(let u=1;u<=this.maxLookahead;u++)o.push(this.LA(u));const a=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:o,previous:a,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Nte(l,this.LA(1),a))}}class sne{initContentAssist(){}computeContentAssist(e,n){const i=this.gastProductionsCache[e];if(la(i))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return cb([i],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=zs(e.ruleStack),r=this.getGAstProductions()[n];return new ate(r,e).startWalking()}}const z2={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(z2);const G_=!0,z_=Math.pow(2,Tl)-1,wb=lb({name:"RECORDING_PHASE_TOKEN",pattern:ls.NA});kp([wb]);const Mb=dy(wb,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Mb);const one={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class ane{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(i,r){return this.consumeInternalRecord(i,e,r)},this[`SUBRULE${n}`]=function(i,r){return this.subruleInternalRecord(i,e,r)},this[`OPTION${n}`]=function(i){return this.optionInternalRecord(i,e)},this[`OR${n}`]=function(i){return this.orInternalRecord(i,e)},this[`MANY${n}`]=function(i){this.manyInternalRecord(e,i)},this[`MANY_SEP${n}`]=function(i){this.manySepFirstInternalRecord(e,i)},this[`AT_LEAST_ONE${n}`]=function(i){this.atLeastOneInternalRecord(e,i)},this[`AT_LEAST_ONE_SEP${n}`]=function(i){this.atLeastOneSepFirstInternalRecord(e,i)}}this.consume=function(e,n,i){return this.consumeInternalRecord(n,e,i)},this.subrule=function(e,n,i){return this.subruleInternalRecord(n,e,i)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const i=n>0?n:"";delete e[`CONSUME${i}`],delete e[`SUBRULE${i}`],delete e[`OPTION${i}`],delete e[`OR${i}`],delete e[`MANY${i}`],delete e[`MANY_SEP${i}`],delete e[`AT_LEAST_ONE${i}`],delete e[`AT_LEAST_ONE_SEP${i}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return Sm}topLevelRuleRecord(e,n){try{const i=new Hh({definition:[],name:e});return i.name=e,this.recordingProdStack.push(i),n.call(this),this.recordingProdStack.pop(),i}catch(i){if(i.KNOWN_RECORDER_ERROR!==!0)try{i.message=i.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw i}throw i}}optionInternalRecord(e,n){return Of.call(this,cr,e,n)}atLeastOneInternalRecord(e,n){Of.call(this,bo,n,e)}atLeastOneSepFirstInternalRecord(e,n){Of.call(this,Bo,n,e,G_)}manyInternalRecord(e,n){Of.call(this,ii,n,e)}manySepFirstInternalRecord(e,n){Of.call(this,Ks,n,e,G_)}orInternalRecord(e,n){return lne.call(this,e,n)}subruleInternalRecord(e,n,i){if(Em(n),!e||ut(e,"ruleName")===!1){const a=new Error(`<SUBRULE${H_(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const r=Mh(this.recordingProdStack),s=e.ruleName,o=new Nr({idx:n,nonTerminalName:s,label:i==null?void 0:i.LABEL,referencedRule:void 0});return r.definition.push(o),this.outputCst?one:z2}consumeInternalRecord(e,n,i){if(Em(n),!ob(e)){const o=new Error(`<CONSUME${H_(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const r=Mh(this.recordingProdStack),s=new In({idx:n,terminalType:e,label:i==null?void 0:i.LABEL});return r.definition.push(s),Mb}}function Of(t,e,n,i=!1){Em(n);const r=Mh(this.recordingProdStack),s=da(e)?e:e.DEF,o=new t({definition:[],idx:n});return i&&(o.separator=e.SEP),ut(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(o),s.call(this),r.definition.push(o),this.recordingProdStack.pop(),z2}function lne(t,e){Em(e);const n=Mh(this.recordingProdStack),i=Wt(t)===!1,r=i===!1?t:t.DEF,s=new js({definition:[],idx:e,ignoreAmbiguities:i&&t.IGNORE_AMBIGUITIES===!0});ut(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const o=YR(r,a=>da(a.GATE));return s.hasPredicates=o,n.definition.push(s),ht(r,a=>{const l=new fr({definition:[]});s.definition.push(l),ut(a,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=a.IGNORE_AMBIGUITIES:ut(a,"GATE")&&(l.ignoreAmbiguities=!0),this.recordingProdStack.push(l),a.ALT.call(this),this.recordingProdStack.pop()}),z2}function H_(t){return t===0?"":`${t}`}function Em(t){if(t<0||t>z_){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${z_+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class une{initPerformanceTracer(e){if(ut(e,"traceInitPerf")){const n=e.traceInitPerf,i=typeof n=="number";this.traceInitMaxIdent=i?n:1/0,this.traceInitPerf=i?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=pl.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const i=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${i}--> <${e}>`);const{time:r,value:s}=jR(n),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${i}<-- <${e}> time: ${r}ms`),this.traceInitIndent--,s}else return n()}}function cne(t,e){e.forEach(n=>{const i=n.prototype;Object.getOwnPropertyNames(i).forEach(r=>{if(r==="constructor")return;const s=Object.getOwnPropertyDescriptor(i,r);s&&(s.get||s.set)?Object.defineProperty(t.prototype,r,s):t.prototype[r]=n.prototype[r]})})}const Sm=dy(Mu,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Sm);const pl=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:ub,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),_m=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ji;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ji||(ji={}));class H2{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{JR(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ht(this.definedRulesNames,r=>{const o=this[r].originalGrammarAction;let a;this.TRACE_INIT(`${r} Rule`,()=>{a=this.topLevelRuleRecord(r,o)}),this.gastProductionsCache[r]=a})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=Pte({rules:ti(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(un(i)&&this.skipValidations===!1){const r=Dte({rules:ti(this.gastProductionsCache),tokenTypes:ti(this.tokensMap),errMsgProvider:uu,grammarName:n}),s=vte({lookaheadStrategy:this.lookaheadStrategy,rules:ti(this.gastProductionsCache),tokenTypes:ti(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(r,s)}}),un(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const r=hee(ti(this.gastProductionsCache));this.resyncFollows=r}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var r,s;(s=(r=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(r,{rules:ti(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(ti(this.gastProductionsCache))})),!H2.DEFER_DEFINITION_ERRORS_HANDLING&&!un(this.definitionErrors))throw e=it(this.definitionErrors,r=>r.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const i=this;if(i.initErrorHandler(n),i.initLexerAdapter(),i.initLooksAhead(n),i.initRecognizerEngine(e,n),i.initRecoverable(n),i.initTreeBuilder(n),i.initContentAssist(),i.initGastRecorder(n),i.initPerformanceTracer(n),ut(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=ut(n,"skipValidations")?n.skipValidations:pl.skipValidations}}H2.DEFER_DEFINITION_ERRORS_HANDLING=!1;cne(H2,[kte,Hte,ene,tne,ine,nne,rne,sne,ane,une]);class hne{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const n=this.workerCreator();n.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=n}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,n){const i=this.workersResolve[e];if(i&&i(n),this.queue.length){const{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,n){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,n)):this.queue.push({resolve:i,msg:e,transfer:n})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}class fne extends Su{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Sn}}const F5=new WeakMap;let U5=0,O5;const Yf=class extends Ti{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new hne,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const t=new _i(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const e=t.loadAsync("basis_transcoder.js"),n=new _i(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const i=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,i]).then(([r,s])=>{const o=Yf.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(Yf.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Yf.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Yf.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=s,this.workerPool.setWorkerCreator(()=>{const l=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return l.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),l})}),U5>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),U5++}return this.transcoderPending}load(t,e,n,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new _i(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(t,s=>{if(F5.has(s))return F5.get(s).promise.then(e).catch(i);this._createTexture(s).then(o=>e?e(o):null).catch(i)},n,i)}_createTextureFrom(t,e){const{mipmaps:n,width:i,height:r,format:s,type:o,error:a,dfdTransferFn:l,dfdFlags:u}=t;if(o==="error")return Promise.reject(a);const h=e.layerCount>1?new fne(n,i,r,e.layerCount,s,ni):new Su(n,i,r,s,ni);return h.minFilter=n.length===1?nn:fs,h.magFilter=nn,h.generateMipmaps=!1,h.needsUpdate=!0,"colorSpace"in h?h.colorSpace=l===m6?"srgb":"srgb-linear":h.encoding=l===m6?3001:3e3,h.premultiplyAlpha=!!(u&Oz),h}async _createTexture(t,e={}){const n=zz(new Uint8Array(t));if(n.vkFormat!==yM)return pne(n);const i=e,r=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:i},[t])).then(s=>this._createTextureFrom(s.data,n));return F5.set(t,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),U5--,this}};let V2=Yf;Re(V2,"BasisFormat",{ETC1S:0,UASTC_4x4:1});Re(V2,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});Re(V2,"EngineFormat",{RGBAFormat:Un,RGBA_ASTC_4x4_Format:Vd,RGBA_BPTC_Format:th,RGBA_ETC2_EAC_Format:Hd,RGBA_PVRTC_4BPPV1_Format:Gd,RGBA_S3TC_DXT5_Format:eh,RGB_ETC1_Format:Wm,RGB_ETC2_Format:zd,RGB_PVRTC_4BPPV1_Format:Qd,RGB_S3TC_DXT1_Format:$c});Re(V2,"BasisWorker",function(){let t,e,n;const i=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(g){const S=g.data;switch(S.type){case"init":t=S.config,o(S.transcoderBinary);break;case"transcode":e.then(()=>{try{const{width:E,height:m,hasAlpha:x,mipmaps:y,format:C,dfdTransferFn:I,dfdFlags:M}=a(S.buffer),w=[];for(let L=0;L<y.length;++L)w.push(y[L].data.buffer);self.postMessage({type:"transcode",id:S.id,width:E,height:m,hasAlpha:x,mipmaps:y,format:C,dfdTransferFn:I,dfdFlags:M},w)}catch(E){console.error(E),self.postMessage({type:"error",id:S.id,error:E.message})}});break}});function o(g){e=new Promise(S=>{n={wasmBinary:g,onRuntimeInitialized:S},BASIS(n)}).then(()=>{n.initializeBasis(),n.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function a(g){const S=new n.KTX2File(new Uint8Array(g));function E(){S.close(),S.delete()}if(!S.isValid())throw E(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const m=S.isUASTC()?s.UASTC_4x4:s.ETC1S,x=S.getWidth(),y=S.getHeight(),C=S.getLayers()||1,I=S.getLevels(),M=S.getHasAlpha(),w=S.getDFDTransferFunc(),L=S.getDFDFlags(),{transcoderFormat:R,engineFormat:B}=d(m,x,y,M);if(!x||!y||!I)throw E(),new Error("THREE.KTX2Loader:	Invalid texture");if(!S.startTranscoding())throw E(),new Error("THREE.KTX2Loader: .startTranscoding failed");const F=[];for(let X=0;X<I;X++){const G=[];let q,Y;for(let $=0;$<C;$++){const j=S.getImageLevelInfo(X,$,0);q=j.origWidth<4?j.origWidth:j.width,Y=j.origHeight<4?j.origHeight:j.height;const P=new Uint8Array(S.getImageTranscodedSizeInBytes(X,$,0,R));if(!S.transcodeImage(P,X,$,0,R,0,-1,-1))throw E(),new Error("THREE.KTX2Loader: .transcodeImage failed.");G.push(P)}F.push({data:A(G),width:q,height:Y})}return E(),{width:x,height:y,hasAlpha:M,mipmaps:F,format:B,dfdTransferFn:w,dfdFlags:L}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],u=l.sort(function(g,S){return g.priorityETC1S-S.priorityETC1S}),h=l.sort(function(g,S){return g.priorityUASTC-S.priorityUASTC});function d(g,S,E,m){let x,y;const C=g===s.ETC1S?u:h;for(let I=0;I<C.length;I++){const M=C[I];if(t[M.if]&&M.basisFormat.includes(g)&&!(m&&M.transcoderFormat.length<2)&&!(M.needsPowerOfTwo&&!(p(S)&&p(E))))return x=M.transcoderFormat[m?1:0],y=M.engineFormat[m?1:0],{transcoderFormat:x,engineFormat:y}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),x=r.RGBA32,y=i.RGBAFormat,{transcoderFormat:x,engineFormat:y}}function p(g){return g<=2?!0:(g&g-1)===0&&g!==0}function A(g){let S=0;for(let x=0;x<g.length;x++){const y=g[x];S+=y.byteLength}const E=new Uint8Array(S);let m=0;for(let x=0;x<g.length;x++){const y=g[x];E.set(y,m),m+=y.byteLength}return E}});const V_={[MM]:Un,[TM]:Un,[SM]:Un,[Q4]:Un,[wM]:Gc,[CM]:Gc,[EM]:Gc,[k4]:Gc,[IM]:ru,[_M]:ru,[O4]:ru,[xM]:ru},k5={[MM]:Yi,[TM]:Hn,[SM]:ni,[Q4]:ni,[wM]:Yi,[CM]:Hn,[EM]:ni,[k4]:ni,[IM]:Yi,[_M]:Hn,[O4]:ni,[xM]:ni},dne={[Q4]:3001,[k4]:3001,[O4]:3001};async function pne(t){const{vkFormat:e,pixelWidth:n,pixelHeight:i,pixelDepth:r}=t;if(V_[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const s=t.levels[0];let o,a;if(t.supercompressionScheme===vM)o=s.levelData;else if(t.supercompressionScheme===Lz)O5||(O5=new Promise(async u=>{const h=new Hz;await h.init(),u(h)})),o=(await O5).decode(s.levelData,s.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");k5[e]===Yi?a=new Float32Array(o.buffer,o.byteOffset,o.byteLength/Float32Array.BYTES_PER_ELEMENT):k5[e]===Hn?a=new Uint16Array(o.buffer,o.byteOffset,o.byteLength/Uint16Array.BYTES_PER_ELEMENT):a=o;const l=r===0?new go(a,n,i):new Oq(a,n,i,r);return l.type=k5[e],l.format=V_[e],l.encoding=dne[e]||3e3,l.needsUpdate=!0,Promise.resolve(l)}const Q5=new WeakMap,Kf=class extends Ti{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig=null}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerLimit=t,this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}load(t,e,n,i){const r=new _i(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);const s=new Su;return r.load(t,o=>{if(Q5.has(o))return Q5.get(o).promise.then(e).catch(i);this._createTexture([o]).then(function(a){s.copy(a),s.needsUpdate=!0,e&&e(s)}).catch(i)},n,i),s}parseInternalAsync(t){const{levels:e}=t,n=new Set;for(let i=0;i<e.length;i++)n.add(e[i].data.buffer);return this._createTexture(Array.from(n),{...t,lowLevel:!0})}_createTexture(t,e={}){let n,i;const r=e;let s=0;for(let a=0;a<t.length;a++)s+=t[a].byteLength;const o=this._allocateWorker(s).then(a=>(n=a,i=this.workerNextTaskID++,new Promise((l,u)=>{n._callbacks[i]={resolve:l,reject:u},n.postMessage({type:"transcode",id:i,buffers:t,taskConfig:r},t)}))).then(a=>{const{mipmaps:l,width:u,height:h,format:d}=a,p=new Su(l,u,h,d,ni);return p.minFilter=l.length===1?nn:fs,p.magFilter=nn,p.generateMipmaps=!1,p.needsUpdate=!0,p});return o.catch(()=>!0).then(()=>{n&&i&&(n._taskLoad-=s,delete n._callbacks[i])}),Q5.set(t[0],{promise:o}),o}_initTranscoder(){if(!this.transcoderPending){const t=new _i(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const e=new Promise((r,s)=>{t.load("basis_transcoder.js",r,void 0,s)}),n=new _i(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const i=new Promise((r,s)=>{n.load("basis_transcoder.wasm",r,void 0,s)});this.transcoderPending=Promise.all([e,i]).then(([r,s])=>{const o=Kf.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(Kf.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Kf.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Kf.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=s})}return this.transcoderPending}_allocateWorker(t){return this._initTranscoder().then(()=>{if(this.workerPool.length<this.workerLimit){const n=new Worker(this.workerSourceURL);n._callbacks={},n._taskLoad=0,n.postMessage({type:"init",config:this.workerConfig,transcoderBinary:this.transcoderBinary}),n.onmessage=function(i){const r=i.data;switch(r.type){case"transcode":n._callbacks[r.id].resolve(r);break;case"error":n._callbacks[r.id].reject(r);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,i){return n._taskLoad>i._taskLoad?-1:1});const e=this.workerPool[this.workerPool.length-1];return e._taskLoad+=t,e})}dispose(){for(let t=0;t<this.workerPool.length;t++)this.workerPool[t].terminate();return this.workerPool.length=0,this}};let W2=Kf;Re(W2,"BasisFormat",{ETC1S:0,UASTC_4x4:1});Re(W2,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});Re(W2,"EngineFormat",{RGBAFormat:Un,RGBA_ASTC_4x4_Format:Vd,RGBA_BPTC_Format:th,RGBA_ETC2_EAC_Format:Hd,RGBA_PVRTC_4BPPV1_Format:Gd,RGBA_S3TC_DXT5_Format:eh,RGB_ETC1_Format:Wm,RGB_ETC2_Format:zd,RGB_PVRTC_4BPPV1_Format:Qd,RGB_S3TC_DXT1_Format:$c});Re(W2,"BasisWorker",function(){let t,e,n;const i=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;onmessage=function(x){const y=x.data;switch(y.type){case"init":t=y.config,o(y.transcoderBinary);break;case"transcode":e.then(()=>{try{const{width:C,height:I,hasAlpha:M,mipmaps:w,format:L}=y.taskConfig.lowLevel?a(y.taskConfig):l(y.buffers[0]),R=[];for(let B=0;B<w.length;++B)R.push(w[B].data.buffer);self.postMessage({type:"transcode",id:y.id,width:C,height:I,hasAlpha:M,mipmaps:w,format:L},R)}catch(C){console.error(C),self.postMessage({type:"error",id:y.id,error:C.message})}});break}};function o(x){e=new Promise(y=>{n={wasmBinary:x,onRuntimeInitialized:y},BASIS(n)}).then(()=>{n.initializeBasis()})}function a(x){const{basisFormat:y,width:C,height:I,hasAlpha:M}=x,{transcoderFormat:w,engineFormat:L}=p(y,C,I,M),R=n.getBytesPerBlockOrPixel(w);A(n.isFormatSupported(w),"THREE.BasisTextureLoader: Unsupported format.");const B=[];if(y===s.ETC1S){const F=new n.LowLevelETC1SImageTranscoder,{endpointCount:X,endpointsData:G,selectorCount:q,selectorsData:Y,tablesData:$}=x.globalData;try{let j;j=F.decodePalettes(X,G,q,Y),A(j,"THREE.BasisTextureLoader: decodePalettes() failed."),j=F.decodeTables($),A(j,"THREE.BasisTextureLoader: decodeTables() failed.");for(let P=0;P<x.levels.length;P++){const Q=x.levels[P],U=x.globalData.imageDescs[P],O=E(w,Q.width,Q.height),V=new Uint8Array(O);j=F.transcodeImage(w,V,O/R,Q.data,g(w,Q.width),S(w,Q.height),Q.width,Q.height,Q.index,U.rgbSliceByteOffset,U.rgbSliceByteLength,U.alphaSliceByteOffset,U.alphaSliceByteLength,U.imageFlags,M,!1,0,0),A(j,"THREE.BasisTextureLoader: transcodeImage() failed for level "+Q.index+"."),B.push({data:V,width:Q.width,height:Q.height})}}finally{F.delete()}}else for(let F=0;F<x.levels.length;F++){const X=x.levels[F],G=E(w,X.width,X.height),q=new Uint8Array(G),Y=n.transcodeUASTCImage(w,q,G/R,X.data,g(w,X.width),S(w,X.height),X.width,X.height,X.index,0,X.data.byteLength,0,M,!1,0,0,-1,-1);A(Y,"THREE.BasisTextureLoader: transcodeUASTCImage() failed for level "+X.index+"."),B.push({data:q,width:X.width,height:X.height})}return{width:C,height:I,hasAlpha:M,mipmaps:B,format:L}}function l(x){const y=new n.BasisFile(new Uint8Array(x)),C=y.isUASTC()?s.UASTC_4x4:s.ETC1S,I=y.getImageWidth(0,0),M=y.getImageHeight(0,0),w=y.getNumLevels(0),L=y.getHasAlpha();function R(){y.close(),y.delete()}const{transcoderFormat:B,engineFormat:F}=p(C,I,M,L);if(!I||!M||!w)throw R(),new Error("THREE.BasisTextureLoader:	Invalid texture");if(!y.startTranscoding())throw R(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");const X=[];for(let G=0;G<w;G++){const q=y.getImageWidth(0,G),Y=y.getImageHeight(0,G),$=new Uint8Array(y.getImageTranscodedSizeInBytes(0,G,B));if(!y.transcodeImage($,0,G,B,0,L))throw R(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");X.push({data:$,width:q,height:Y})}return R(),{width:I,height:M,hasAlpha:L,mipmaps:X,format:F}}const u=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC1],engineFormat:[i.RGB_ETC1_Format,i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],h=u.sort(function(x,y){return x.priorityETC1S-y.priorityETC1S}),d=u.sort(function(x,y){return x.priorityUASTC-y.priorityUASTC});function p(x,y,C,I){let M,w;const L=x===s.ETC1S?h:d;for(let R=0;R<L.length;R++){const B=L[R];if(t[B.if]&&B.basisFormat.includes(x)&&!(B.needsPowerOfTwo&&!(m(y)&&m(C))))return M=B.transcoderFormat[I?1:0],w=B.engineFormat[I?1:0],{transcoderFormat:M,engineFormat:w}}return console.warn("THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32."),M=r.RGBA32,w=i.RGBAFormat,{transcoderFormat:M,engineFormat:w}}function A(x,y){if(!x)throw new Error(y)}function g(x,y){return Math.ceil(y/n.getFormatBlockWidth(x))}function S(x,y){return Math.ceil(y/n.getFormatBlockHeight(x))}function E(x,y,C){const I=n.getBytesPerBlockOrPixel(x);if(n.formatIsUncompressed(x))return y*C*I;if(x===r.PVRTC1_4_RGB||x===r.PVRTC1_4_RGBA){const M=y+3&-4,w=C+3&-4;return(Math.max(8,M)*Math.max(8,w)*4+7)/8}return g(x,y)*S(x,C)*I}function m(x){return x<=2?!0:(x&x-1)===0&&x!==0}});const Ane="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",mne="generic-trigger";class gne{constructor(e=null,n=Ane){this.gltfLoader=e??new dR,this.path=n,this._assetCache={}}initializeControllerModel(e,n){return n.targetRayMode!=="tracked-pointer"||!n.gamepad?Promise.resolve():bq(n,this.path,mne).then(({profile:i,assetPath:r})=>{if(!r)throw new Error("no asset path");const s=new Nq(n,i,r);e.connectMotionController(s);const o=s.assetUrl,a=this._assetCache[o];if(a){const l=a.scene.clone();e.connectModel(l)}else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(o,l=>{if(!e.motionController){console.warn("motionController gone while gltf load, bailing...");return}this._assetCache[o]=l;const u=l.scene.clone();e.connectModel(u)},void 0,()=>{throw new Error(`Asset ${o} missing or malformed.`)})}}).catch(i=>{console.warn(i)})}}const W_=t=>"envMap"in t,X_=(t,e)=>{t.envMap=e,t.needsUpdate=!0},Rb=(t,e)=>{e instanceof Kt&&(Array.isArray(e.material)?e.material.forEach(n=>W_(n)?X_(n,t):void 0):W_(e.material)&&X_(e.material,t))},q_=t=>"envMapIntensity"in t,Y_=(t,e)=>{t.envMapIntensity=e,t.needsUpdate=!0},W6=(t,e)=>{e instanceof Kt&&(Array.isArray(e.material)?e.material.forEach(n=>q_(n)?Y_(n,t):void 0):q_(e.material)&&Y_(e.material,t))};function vne(t,e){Object.values(t.components).forEach(n=>{const{type:i,touchPointNodeName:r,visualResponses:s}=n;if(i===Ln.ComponentType.TOUCHPAD&&r)if(n.touchPointNode=e.getObjectByName(r),n.touchPointNode){const o=new kh(.001),a=new di({color:255}),l=new Kt(o,a);n.touchPointNode.add(l)}else console.warn(`Could not find touch dot, ${n.touchPointNodeName}, in touchpad component ${n.id}`);Object.values(s).forEach(o=>{const{valueNodeName:a,minNodeName:l,maxNodeName:u,valueNodeProperty:h}=o;if(h===Ln.VisualResponseProperty.TRANSFORM&&l&&u){if(o.minNode=e.getObjectByName(l),o.maxNode=e.getObjectByName(u),!o.minNode){console.warn(`Could not find ${l} in the model`);return}if(!o.maxNode){console.warn(`Could not find ${u} in the model`);return}}o.valueNode=e.getObjectByName(a),o.valueNode||console.warn(`Could not find ${a} in the model`)})})}function yne(t,e){vne(t.motionController,e),(t.envMap||t.envMapIntensity!=null)&&e.traverse(n=>{t.envMap&&Rb(t.envMap,n),t.envMapIntensity!=null&&W6(t.envMapIntensity,n)}),t.add(e)}class xne extends ss{constructor(){super(),this.motionController=null,this.envMap=null,this.envMapIntensity=1,this.scene=null}setEnvironmentMap(e,n=1){var i;return this.envMap===e&&this.envMapIntensity===n?this:(this.envMap=e,this.envMapIntensity=n,(i=this.scene)==null||i.traverse(r=>{Rb(e,r),W6(n,r)}),this)}setEnvironmentMapIntensity(e){var n;return this.envMapIntensity===e?this:(this.envMapIntensity=e,(n=this.scene)==null||n.traverse(i=>W6(e,i)),this)}connectModel(e){if(!this.motionController){console.warn("scene tried to add, but no motion controller");return}this.scene=e,yne(this,e),this.dispatchEvent({type:"modelconnected",data:e})}connectMotionController(e){this.motionController=e,this.dispatchEvent({type:"motionconnected",data:e})}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(n=>{Object.values(n.visualResponses).forEach(i=>{const{valueNode:r,minNode:s,maxNode:o,value:a,valueNodeProperty:l}=i;r&&(l===Ln.VisualResponseProperty.VISIBILITY&&typeof a=="boolean"?r.visible=a:l===Ln.VisualResponseProperty.TRANSFORM&&s&&o&&typeof a=="number"&&(r.quaternion.slerpQuaternions(s.quaternion,o.quaternion,a),r.position.lerpVectors(s.position,o.position,a)))})}))}disconnect(){this.dispatchEvent({type:"motiondisconnected",data:this.motionController}),this.dispatchEvent({type:"modeldisconnected",data:this.scene}),this.motionController=null,this.scene&&this.remove(this.scene),this.scene=null}dispose(){this.disconnect()}}const Ene=le.forwardRef(function({target:e,hideOnBlur:n=!1,...i},r){const s=xi(l=>l.hoverState),o=le.useRef(null),a=le.useMemo(()=>new xt().setFromPoints([new D(0,0,0),new D(0,0,-1)]),[]);return le.useImperativeHandle(r,()=>o.current),N4(()=>{if(!e.inputSource)return;let l=1;const u=s[e.inputSource.handedness].values().next().value;u&&e.inputSource.handedness!=="none"?(l=u.distance,n&&(o.current.visible=!1)):n&&(o.current.visible=!0);const h=-.01;o.current.scale.z=l+h}),le.createElement("line",{ref:o,geometry:a,"material-opacity":.8,"material-transparent":!0,...i})}),Sne=new gne,_ne=({target:t,envMap:e,envMapIntensity:n})=>{const i=le.useRef(null),r=ho(l=>{e!=null&&l.setEnvironmentMap(e)}),s=ho(l=>l.setEnvironmentMap(null)),o=ho(l=>{n!=null&&l.setEnvironmentMapIntensity(n)}),a=le.useCallback(l=>{var u,h,d;if(i.current=l,l){if(t.xrControllerModel=l,(u=t.inputSource)!=null&&u.hand)return;r.current(l),o.current(l),t.inputSource?Sne.initializeControllerModel(l,t.inputSource):console.warn("no input source on XRController when handleControllerModel")}else{if((h=t.inputSource)!=null&&h.hand)return;(d=t.xrControllerModel)==null||d.disconnect(),t.xrControllerModel=null}},[t,o,r]);return le.useLayoutEffect(()=>{i.current&&(e?r.current(i.current):s.current(i.current))},[e,r,s]),le.useLayoutEffect(()=>{i.current&&o.current(i.current)},[n,o]),le.createElement("xRControllerModel",{ref:a})};function Cne({rayMaterial:t={},hideRaysOnBlur:e=!1,envMap:n,envMapIntensity:i}){const r=xi(a=>a.controllers),s=xi(a=>a.isHandTracking),o=le.useMemo(()=>Object.entries(t).reduce((a,[l,u])=>({...a,[`material-${l}`]:u}),{}),[JSON.stringify(t)]);return le.useMemo(()=>L4({XRControllerModel:xne}),[]),le.createElement(le.Fragment,null,r.map((a,l)=>le.createElement(le.Fragment,{key:l},p6(le.createElement(_ne,{target:a,envMap:n,envMapIntensity:i}),a.grip),p6(le.createElement(Ene,{visible:!s,hideOnBlur:e,target:a,...o}),a.controller))))}const Tne="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/";class Ine{constructor(e,n,i=Tne,r,s){this.controller=n,this.handModel=e,this.bones=[];const o=new dR;s||o.setPath(i),o.load(s??`${r}.glb`,a=>{const l=a.scene.children[0];this.handModel.add(l),this.scene=l;const u=l.getObjectByProperty("type","SkinnedMesh");u.frustumCulled=!1,u.castShadow=!0,u.receiveShadow=!0,["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"].forEach(d=>{const p=l.getObjectByName(d);p!==void 0?p.jointName=d:console.warn(`Couldn't find ${d} in ${r} hand mesh`),this.bones.push(p)})})}updateMesh(){const e=this.controller.joints;let n=!0;for(let i=0;i<this.bones.length;i++){const r=this.bones[i];if(r){const s=e[r.jointName];if(s.visible){const o=s.position;r.position.copy(o),r.quaternion.copy(s.quaternion),n=!1}}}n&&this.scene?this.scene.visible=!1:this.scene&&(this.scene.visible=!0)}dispose(){this.scene&&this.handModel.remove(this.scene)}}const wne=.01,Mne="index-finger-tip";class Rne extends Qt{constructor(e,n,i){super(),this._onConnected=r=>{const s=r.data;s.hand&&!this.motionController&&(this.xrInputSource=s,this.motionController=new Ine(this,this.controller,void 0,s.handedness,s.handedness==="left"?this.leftModelPath:this.rightModelPath))},this._onDisconnected=()=>{var r;(r=this.xrInputSource)!=null&&r.hand&&this.motionControllerCleanup()},this.controller=e,this.motionController=null,this.envMap=null,this.leftModelPath=n,this.rightModelPath=i,this.mesh=null,this.xrInputSource=null,e.addEventListener("connected",this._onConnected),e.addEventListener("disconnected",this._onDisconnected)}motionControllerCleanup(){var e;this.clear(),(e=this.motionController)==null||e.dispose(),this.motionController=null}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&this.motionController.updateMesh()}getPointerPosition(){const e=this.controller.joints[Mne];return e?e.position:null}intersectBoxObject(e){const n=this.getPointerPosition();if(n){const i=new Or(n,wne),r=new As().setFromObject(e);return i.intersectsBox(r)}else return!1}checkButton(e){this.intersectBoxObject(e)?e.onPress():e.onClear(),e.isPressed()&&e.whilePressed()}dispose(){this.motionControllerCleanup(),this.controller.removeEventListener("connected",this._onConnected),this.controller.removeEventListener("disconnected",this._onDisconnected)}}function bne({modelLeft:t,modelRight:e}){const n=xi(i=>i.controllers);return le.useMemo(()=>L4({OculusHandModel:Rne}),[]),is(()=>{for(const i of n)i.hand.dispatchEvent({type:"connected",data:i.inputSource,fake:!0})},[n,t,e]),le.createElement(le.Fragment,null,n.map(({hand:i})=>p6(le.createElement("oculusHandModel",{args:[i,t,e]}),i)))}function Bne(){return Jr.jsxs(Jr.Fragment,{children:[Jr.jsx(Bz,{}),Jr.jsx(yz,{children:Jr.jsxs(Tz,{children:[Jr.jsx(Cne,{}),Jr.jsx(bne,{}),Jr.jsxs("mesh",{children:[Jr.jsx("boxGeometry",{}),Jr.jsx("meshBasicMaterial",{color:"blue"})]})]})})]})}G5.createRoot(document.getElementById("root")).render(Jr.jsx(UB.StrictMode,{children:Jr.jsx(Bne,{})}))});export default Lne();
